(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const Wh=!1,qh=(t,e)=>t===e,Gh=Symbol("solid-track"),Rr={equals:qh};let Jh=Ac;const Xt=1,Mr=2,bc={owned:null,cleanups:null,context:null,owner:null};var Ce=null;let Gs=null,Kh=null,Se=null,Ue=null,qt=null,Gr=0;function _i(t,e){const n=Se,r=Ce,i=t.length===0,o=e===void 0?r:e,c=i?bc:{owned:null,cleanups:null,context:o?o.context:null,owner:o},u=i?t:()=>t(()=>Yn(()=>Nn(c)));Ce=c,Se=null;try{return Xn(u,!0)}finally{Se=n,Ce=r}}function wc(t,e){e=e?Object.assign({},Rr,e):Rr;const n={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},r=i=>(typeof i=="function"&&(i=i(n.value)),Sc(n,i));return[vc.bind(n),r]}function Fn(t,e,n){const r=xc(t,e,!1,Xt);Jr(r)}function Yh(t,e,n){n=n?Object.assign({},Rr,n):Rr;const r=xc(t,e,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Jr(r),vc.bind(r)}function Yn(t){if(Se===null)return t();const e=Se;Se=null;try{return t()}finally{Se=e}}function Xh(t){return Ce===null||(Ce.cleanups===null?Ce.cleanups=[t]:Ce.cleanups.push(t)),t}function vc(){if(this.sources&&this.state)if(this.state===Xt)Jr(this);else{const t=Ue;Ue=null,Xn(()=>jr(this),!1),Ue=t}if(Se){const t=this.observers?this.observers.length:0;Se.sources?(Se.sources.push(this),Se.sourceSlots.push(t)):(Se.sources=[this],Se.sourceSlots=[t]),this.observers?(this.observers.push(Se),this.observerSlots.push(Se.sources.length-1)):(this.observers=[Se],this.observerSlots=[Se.sources.length-1])}return this.value}function Sc(t,e,n){let r=t.value;return(!t.comparator||!t.comparator(r,e))&&(t.value=e,t.observers&&t.observers.length&&Xn(()=>{for(let i=0;i<t.observers.length;i+=1){const o=t.observers[i],c=Gs&&Gs.running;c&&Gs.disposed.has(o),(c?!o.tState:!o.state)&&(o.pure?Ue.push(o):qt.push(o),o.observers&&Ec(o)),c||(o.state=Xt)}if(Ue.length>1e6)throw Ue=[],new Error},!1)),e}function Jr(t){if(!t.fn)return;Nn(t);const e=Gr;Zh(t,t.value,e)}function Zh(t,e,n){let r;const i=Ce,o=Se;Se=Ce=t;try{r=t.fn(e)}catch(c){return t.pure&&(t.state=Xt,t.owned&&t.owned.forEach(Nn),t.owned=null),t.updatedAt=n+1,kc(c)}finally{Se=o,Ce=i}(!t.updatedAt||t.updatedAt<=n)&&(t.updatedAt!=null&&"observers"in t?Sc(t,r):t.value=r,t.updatedAt=n)}function xc(t,e,n,r=Xt,i){const o={fn:t,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:Ce,context:Ce?Ce.context:null,pure:n};return Ce===null||Ce!==bc&&(Ce.owned?Ce.owned.push(o):Ce.owned=[o]),o}function Ic(t){if(t.state===0)return;if(t.state===Mr)return jr(t);if(t.suspense&&Yn(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<Gr);)t.state&&e.push(t);for(let n=e.length-1;n>=0;n--)if(t=e[n],t.state===Xt)Jr(t);else if(t.state===Mr){const r=Ue;Ue=null,Xn(()=>jr(t,e[0]),!1),Ue=r}}function Xn(t,e){if(Ue)return t();let n=!1;e||(Ue=[]),qt?n=!0:qt=[],Gr++;try{const r=t();return Qh(n),r}catch(r){n||(qt=null),Ue=null,kc(r)}}function Qh(t){if(Ue&&(Ac(Ue),Ue=null),t)return;const e=qt;qt=null,e.length&&Xn(()=>Jh(e),!1)}function Ac(t){for(let e=0;e<t.length;e++)Ic(t[e])}function jr(t,e){t.state=0;for(let n=0;n<t.sources.length;n+=1){const r=t.sources[n];if(r.sources){const i=r.state;i===Xt?r!==e&&(!r.updatedAt||r.updatedAt<Gr)&&Ic(r):i===Mr&&jr(r,e)}}}function Ec(t){for(let e=0;e<t.observers.length;e+=1){const n=t.observers[e];n.state||(n.state=Mr,n.pure?Ue.push(n):qt.push(n),n.observers&&Ec(n))}}function Nn(t){let e;if(t.sources)for(;t.sources.length;){const n=t.sources.pop(),r=t.sourceSlots.pop(),i=n.observers;if(i&&i.length){const o=i.pop(),c=n.observerSlots.pop();r<i.length&&(o.sourceSlots[c]=r,i[r]=o,n.observerSlots[r]=c)}}if(t.tOwned){for(e=t.tOwned.length-1;e>=0;e--)Nn(t.tOwned[e]);delete t.tOwned}if(t.owned){for(e=t.owned.length-1;e>=0;e--)Nn(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function eg(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function kc(t,e=Ce){throw eg(t)}const ba=Symbol("fallback");function wa(t){for(let e=0;e<t.length;e++)t[e]()}function tg(t,e,n={}){let r=[],i=[],o=[],c=[],u=0,f;return Xh(()=>wa(o)),()=>{const d=t()||[],_=d.length;return d[Gh],Yn(()=>{if(_===0)return u!==0&&(wa(o),o=[],r=[],i=[],u=0,c=[]),n.fallback&&(r=[ba],i[0]=_i(g=>(o[0]=g,n.fallback())),u=1),i;for(r[0]===ba&&(o[0](),o=[],r=[],i=[],u=0),f=0;f<_;f++)f<r.length&&r[f]!==d[f]?c[f](()=>d[f]):f>=r.length&&(i[f]=_i(h));for(;f<r.length;f++)o[f]();return u=c.length=o.length=_,r=d.slice(0),i=i.slice(0,u)});function h(g){o[f]=g;const[y,m]=wc(d[f]);return c[f]=m,e(y,f)}}}function pi(t,e){return Yn(()=>t(e||{}))}function ng(t){const e="fallback"in t&&{fallback:()=>t.fallback};return Yh(tg(()=>t.each,t.children,e||void 0))}function rg(t,e,n){let r=n.length,i=e.length,o=r,c=0,u=0,f=e[i-1].nextSibling,d=null;for(;c<i||u<o;){if(e[c]===n[u]){c++,u++;continue}for(;e[i-1]===n[o-1];)i--,o--;if(i===c){const _=o<r?u?n[u-1].nextSibling:n[o-u]:f;for(;u<o;)t.insertBefore(n[u++],_)}else if(o===u)for(;c<i;)(!d||!d.has(e[c]))&&e[c].remove(),c++;else if(e[c]===n[o-1]&&n[u]===e[i-1]){const _=e[--i].nextSibling;t.insertBefore(n[u++],e[c++].nextSibling),t.insertBefore(n[--o],_),e[i]=n[o]}else{if(!d){d=new Map;let h=u;for(;h<o;)d.set(n[h],h++)}const _=d.get(e[c]);if(_!=null)if(u<_&&_<o){let h=c,g=1,y;for(;++h<i&&h<o&&!((y=d.get(e[h]))==null||y!==_+g);)g++;if(g>_-u){const m=e[c];for(;u<_;)t.insertBefore(n[u++],m)}else t.replaceChild(n[u++],e[c++])}else c++;else e[c++].remove()}}}function sg(t,e,n,r={}){let i;return _i(o=>{i=o,e===document?t():Rc(e,t(),e.firstChild?null:void 0,n)},r.owner),()=>{i(),e.textContent=""}}function Cc(t,e,n,r){let i;const o=()=>{const u=document.createElement("template");return u.innerHTML=t,u.content.firstChild},c=()=>(i||(i=o())).cloneNode(!0);return c.cloneNode=c,c}function ig(t,e){t.className=e}function Tc(t,e,n,r){if(Array.isArray(n)){const i=n[0];t.addEventListener(e,n[0]=o=>i.call(t,n[1],o))}else t.addEventListener(e,n,typeof n!="function"&&n)}function Oc(t,e,n){return Yn(()=>t(e,n))}function Rc(t,e,n,r){if(n!==void 0&&!r&&(r=[]),typeof e!="function")return Dr(t,e,r,n);Fn(i=>Dr(t,e(),i,n),r)}function Dr(t,e,n,r,i){for(;typeof n=="function";)n=n();if(e===n)return n;const o=typeof e,c=r!==void 0;if(t=c&&n[0]&&n[0].parentNode||t,o==="string"||o==="number"){if(o==="number"&&(e=e.toString(),e===n))return n;if(c){let u=n[0];u&&u.nodeType===3?u.data!==e&&(u.data=e):u=document.createTextNode(e),n=gn(t,n,r,u)}else n!==""&&typeof n=="string"?n=t.firstChild.data=e:n=t.textContent=e}else if(e==null||o==="boolean")n=gn(t,n,r);else{if(o==="function")return Fn(()=>{let u=e();for(;typeof u=="function";)u=u();n=Dr(t,u,n,r)}),()=>n;if(Array.isArray(e)){const u=[],f=n&&Array.isArray(n);if(yi(u,e,n,i))return Fn(()=>n=Dr(t,u,n,r,!0)),()=>n;if(u.length===0){if(n=gn(t,n,r),c)return n}else f?n.length===0?va(t,u,r):rg(t,n,u):(n&&gn(t),va(t,u));n=u}else if(e.nodeType){if(Array.isArray(n)){if(c)return n=gn(t,n,r,e);gn(t,n,null,e)}else n==null||n===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);n=e}}return n}function yi(t,e,n,r){let i=!1;for(let o=0,c=e.length;o<c;o++){let u=e[o],f=n&&n[t.length],d;if(!(u==null||u===!0||u===!1))if((d=typeof u)=="object"&&u.nodeType)t.push(u);else if(Array.isArray(u))i=yi(t,u,f)||i;else if(d==="function")if(r){for(;typeof u=="function";)u=u();i=yi(t,Array.isArray(u)?u:[u],Array.isArray(f)?f:[f])||i}else t.push(u),i=!0;else{const _=String(u);f&&f.nodeType===3&&f.data===_?t.push(f):t.push(document.createTextNode(_))}}return i}function va(t,e,n=null){for(let r=0,i=e.length;r<i;r++)t.insertBefore(e[r],n)}function gn(t,e,n,r){if(n===void 0)return t.textContent="";const i=r||document.createTextNode("");if(e.length){let o=!1;for(let c=e.length-1;c>=0;c--){const u=e[c];if(i!==u){const f=u.parentNode===t;!o&&!c?f?t.replaceChild(i,u):t.insertBefore(i,n):f&&u.remove()}else o=!0}}else t.insertBefore(i,n);return[i]}const Rt=Symbol.for("_am_meta"),xn=Symbol.for("_am_trace"),In=Symbol.for("_am_objectId"),Kr=Symbol.for("_am_isProxy"),Mc=Symbol.for("_am_clearCache"),og=Symbol.for("_am_uint"),ag=Symbol.for("_am_int"),cg=Symbol.for("_am_f64"),jc=Symbol.for("_am_counter"),mi=Symbol.for("_am_text"),Dc=Symbol.for("_am_rawString");var Sa;class Gt{constructor(e){if(this[Sa]=!0,typeof e=="string")this.elems=[...e];else if(Array.isArray(e))this.elems=e;else if(e===void 0)this.elems=[];else throw new TypeError(`Unsupported initial value for Text: ${e}`);Reflect.defineProperty(this,mi,{value:!0})}get length(){return this.elems.length}get(e){return this.elems[e]}[(Sa=mi,Symbol.iterator)](){const e=this.elems;let n=-1;return{next(){return n+=1,n<e.length?{done:!1,value:e[n]}:{done:!0}}}}toString(){if(!this.str){this.str="";for(const e of this.elems)typeof e=="string"?this.str+=e:this.str+="￼"}return this.str}toSpans(){if(!this.spans){this.spans=[];let e="";for(const n of this.elems)typeof n=="string"?e+=n:(e.length>0&&(this.spans.push(e),e=""),this.spans.push(n));e.length>0&&this.spans.push(e)}return this.spans}toJSON(){return this.toString()}set(e,n){if(this[Rt])throw new RangeError("object cannot be modified outside of a change block");this.elems[e]=n}insertAt(e,...n){if(this[Rt])throw new RangeError("object cannot be modified outside of a change block");n.every(r=>typeof r=="string")?this.elems.splice(e,0,...n.join("")):this.elems.splice(e,0,...n)}deleteAt(e,n=1){if(this[Rt])throw new RangeError("object cannot be modified outside of a change block");this.elems.splice(e,n)}map(e){this.elems.map(e)}lastIndexOf(e,n){this.elems.lastIndexOf(e,n)}concat(e){return new Gt(this.elems.concat(e.elems))}every(e){return this.elems.every(e)}filter(e){return new Gt(this.elems.filter(e))}find(e){return this.elems.find(e)}findIndex(e){return this.elems.findIndex(e)}forEach(e){this.elems.forEach(e)}includes(e){return this.elems.includes(e)}indexOf(e){return this.elems.indexOf(e)}join(e){return this.elems.join(e)}reduce(e){this.elems.reduce(e)}reduceRight(e){this.elems.reduceRight(e)}slice(e,n){return new Gt(this.elems.slice(e,n))}some(e){return this.elems.some(e)}toLocaleString(){this.toString()}}class bi{constructor(e){this.value=e||0,Reflect.defineProperty(this,jc,{value:!0})}valueOf(){return this.value}toString(){return this.valueOf().toString()}toJSON(){return this.value}increment(e){throw new Error("Counters should not be incremented outside of a change callback")}decrement(e){throw new Error("Counters should not be decremented outside of a change callback")}}class ug extends bi{constructor(e,n,r,i,o){super(e),this.context=n,this.path=r,this.objectId=i,this.key=o}increment(e){return e=typeof e=="number"?e:1,this.context.increment(this.objectId,this.key,e),this.value+=e,this.value}decrement(e){return this.increment(typeof e=="number"?-e:-1)}}function fg(t,e,n,r,i){return new ug(t,e,n,r,i)}var Uc;class Hc{constructor(e){this[Uc]=!0,this.val=e}toString(){return this.val}toJSON(){return this.val}}Uc=Dc;function lt(t){if(typeof t=="string"&&/^[0-9]+$/.test(t)&&(t=parseInt(t,10)),typeof t!="number")return t;if(t<0||isNaN(t)||t===1/0||t===-1/0)throw new RangeError("A list index must be positive, but you passed "+t);return t}function We(t,e){const{context:n,objectId:r,path:i,textV2:o}=t,c=n.getWithType(r,e);if(c===null)return;const u=c[0],f=c[1];switch(u){case void 0:return;case"map":return Zn(n,f,o,[...i,e]);case"list":return Xr(n,f,o,[...i,e]);case"text":return o?n.text(f):zn(n,f,[...i,e]);case"str":return o?new Hc(f):f;case"uint":return f;case"int":return f;case"f64":return f;case"boolean":return f;case"null":return null;case"bytes":return f;case"timestamp":return f;case"counter":return fg(f,n,i,r,e);default:throw RangeError(`datatype ${u} unimplemented`)}}function Ur(t,e,n,r){const i=typeof t;switch(i){case"object":if(t==null)return[null,"null"];if(t[og])return[t.value,"uint"];if(t[ag])return[t.value,"int"];if(t[cg])return[t.value,"f64"];if(t[jc])return[t.value,"counter"];if(t instanceof Date)return[t.getTime(),"timestamp"];if(Bc(t))return[t.toString(),"str"];if(Lc(t))return[t,"text"];if(t instanceof Uint8Array)return[t,"bytes"];if(t instanceof Array)return[t,"list"];if(Object.prototype.toString.call(t)==="[object Object]")return[t,"map"];throw Yr(t,r)?new RangeError("Cannot create a reference to an existing document object"):new RangeError(`Cannot assign unknown object: ${t}`);case"boolean":return[t,"boolean"];case"number":return Number.isInteger(t)?[t,"int"]:[t,"f64"];case"string":return e?[t,"text"]:[t,"str"];case"undefined":throw new RangeError([`Cannot assign undefined value at ${xa(n)}, `,"because `undefined` is not a valid JSON data type. ","You might consider setting the property's value to `null`, ","or using `delete` to remove it altogether."].join(""));default:throw new RangeError([`Cannot assign ${i} value at ${xa(n)}. `,"All JSON primitive datatypes (object, array, string, number, boolean, null) ",`are supported in an Automerge document; ${i} values are not. `].join(""))}}function Yr(t,e){var n,r;return t instanceof Date?!1:!!(t&&((r=(n=t[Rt])===null||n===void 0?void 0:n.handle)===null||r===void 0?void 0:r.__wbg_ptr)===e.__wbg_ptr)}const lg={get(t,e){const{context:n,objectId:r,cache:i}=t;return e===Symbol.toStringTag?t[Symbol.toStringTag]:e===In?r:e===Kr?!0:e===xn?t.trace:e===Rt?{handle:n,textV2:t.textV2}:(i[e]||(i[e]=We(t,e)),i[e])},set(t,e,n){const{context:r,objectId:i,path:o,textV2:c}=t;if(t.cache={},Yr(n,r))throw new RangeError("Cannot create a reference to an existing document object");if(e===xn)return t.trace=n,!0;if(e===Mc)return!0;const[u,f]=Ur(n,c,[...o,e],r);switch(f){case"list":{const d=r.putObject(i,e,[]),_=Xr(r,d,c,[...o,e]);for(let h=0;h<u.length;h++)_[h]=u[h];break}case"text":{if(c)Hr(u),r.putObject(i,e,u);else{Bi(u);const d=r.putObject(i,e,"");zn(r,d,[...o,e]).splice(0,0,...u)}break}case"map":{const d=r.putObject(i,e,{}),_=Zn(r,d,c,[...o,e]);for(const h in u)_[h]=u[h];break}default:r.put(i,e,u,f)}return!0},deleteProperty(t,e){const{context:n,objectId:r}=t;return t.cache={},n.delete(r,e),!0},has(t,e){return this.get(t,e)!==void 0},getOwnPropertyDescriptor(t,e){const n=this.get(t,e);if(typeof n<"u")return{configurable:!0,enumerable:!0,value:n}},ownKeys(t){const{context:e,objectId:n}=t,r=e.keys(n);return[...new Set(r)]}},Pc={get(t,e){const{context:n,objectId:r}=t;return e=lt(e),e===Symbol.hasInstance?i=>Array.isArray(i):e===Symbol.toStringTag?t[Symbol.toStringTag]:e===In?r:e===Kr?!0:e===xn?t.trace:e===Rt?{handle:n}:e==="length"?n.length(r):typeof e=="number"?We(t,e):Pi(t)[e]},set(t,e,n){const{context:r,objectId:i,path:o,textV2:c}=t;if(e=lt(e),Yr(n,r))throw new RangeError("Cannot create a reference to an existing document object");if(e===Mc)return!0;if(e===xn)return t.trace=n,!0;if(typeof e=="string")throw new RangeError("list index must be a number");const[u,f]=Ur(n,c,[...o,e],r);switch(f){case"list":{let d;e>=r.length(i)?d=r.insertObject(i,e,[]):d=r.putObject(i,e,[]),Xr(r,d,c,[...o,e]).splice(0,0,...u);break}case"text":{if(c)Hr(u),e>=r.length(i)?r.insertObject(i,e,u):r.putObject(i,e,u);else{let d;Bi(u),e>=r.length(i)?d=r.insertObject(i,e,""):d=r.putObject(i,e,""),zn(r,d,[...o,e]).splice(0,0,...u)}break}case"map":{let d;e>=r.length(i)?d=r.insertObject(i,e,{}):d=r.putObject(i,e,{});const _=Zn(r,d,c,[...o,e]);for(const h in u)_[h]=u[h];break}default:e>=r.length(i)?r.insert(i,e,u,f):r.put(i,e,u,f)}return!0},deleteProperty(t,e){const{context:n,objectId:r}=t;e=lt(e);const i=n.get(r,e);if(i!=null&&i[0]=="counter")throw new TypeError("Unsupported operation: deleting a counter from a list");return n.delete(r,e),!0},has(t,e){const{context:n,objectId:r}=t;return e=lt(e),typeof e=="number"?e<n.length(r):e==="length"},getOwnPropertyDescriptor(t,e){const{context:n,objectId:r}=t;return e==="length"?{writable:!0,value:n.length(r)}:e===In?{configurable:!1,enumerable:!1,value:r}:(e=lt(e),{configurable:!0,enumerable:!0,value:We(t,e)})},getPrototypeOf(t){return Object.getPrototypeOf(t)},ownKeys(){const t=[];return t.push("length"),t}},dg=Object.assign({},Pc,{get(t,e){const{context:n,objectId:r}=t;return e=lt(e),e===Symbol.hasInstance?i=>Array.isArray(i):e===Symbol.toStringTag?t[Symbol.toStringTag]:e===In?r:e===Kr?!0:e===xn?t.trace:e===Rt?{handle:n}:e==="length"?n.length(r):typeof e=="number"?We(t,e):gg(t)[e]||Pi(t)[e]},getPrototypeOf(){return Object.getPrototypeOf(new Gt)}});function Zn(t,e,n,r){const i={context:t,objectId:e,path:r||[],cache:{},textV2:n},o={};return Object.assign(o,i),new Proxy(o,lg)}function Xr(t,e,n,r){const i={context:t,objectId:e,path:r||[],cache:{},textV2:n},o=[];return Object.assign(o,i),new Proxy(o,Pc)}function zn(t,e,n){const r={context:t,objectId:e,path:n||[],cache:{},textV2:!1},i={};return Object.assign(i,r),new Proxy(i,dg)}function hg(t,e){return Zn(t,"_root",e,[])}function Pi(t){const{context:e,objectId:n,path:r,textV2:i}=t;return{at(c){return We(t,c)},deleteAt(c,u){return typeof u=="number"?e.splice(n,c,u):e.delete(n,c),this},fill(c,u,f){const[d,_]=Ur(c,i,[...r,u],e),h=e.length(n);u=lt(u||0),f=lt(f||h);for(let g=u;g<Math.min(f,h);g++)if(_==="list"||_==="map")e.putObject(n,g,d);else if(_==="text")if(i)Hr(d),e.putObject(n,g,d);else{Bi(d);const y=e.putObject(n,g,""),m=zn(e,y,[...r,g]);for(let v=0;v<d.length;v++)m[v]=d.get(v)}else e.put(n,g,d,_);return this},indexOf(c,u=0){const f=e.length(n);for(let d=u;d<f;d++){const _=e.getWithType(n,d);if(_&&(_[1]===c[In]||_[1]===c))return d}return-1},insertAt(c,...u){return this.splice(c,0,...u),this},pop(){const c=e.length(n);if(c==0)return;const u=We(t,c-1);return e.delete(n,c-1),u},push(...c){const u=e.length(n);return this.splice(u,0,...c),e.length(n)},shift(){if(e.length(n)==0)return;const c=We(t,0);return e.delete(n,0),c},splice(c,u,...f){c=lt(c),typeof u!="number"&&(u=e.length(n)-c),u=lt(u);for(const h of f)if(Yr(h,e))throw new RangeError("Cannot create a reference to an existing document object");const d=[];for(let h=0;h<u;h++){const g=We(t,c);g!==void 0&&d.push(g),e.delete(n,c)}const _=f.map((h,g)=>{try{return Ur(h,i,[...r],e)}catch(y){throw y instanceof RangeError?new RangeError(`${y.message} (at index ${g} in the input)`):y}});for(const[h,g]of _){switch(g){case"list":{const y=e.insertObject(n,c,[]);Xr(e,y,i,[...r,c]).splice(0,0,...h);break}case"text":{if(i)Hr(h),e.insertObject(n,c,h);else{const y=e.insertObject(n,c,"");zn(e,y,[...r,c]).splice(0,0,...h)}break}case"map":{const y=e.insertObject(n,c,{}),m=Zn(e,y,i,[...r,c]);for(const v in h)m[v]=h[v];break}default:e.insert(n,c,h,g)}c+=1}return d},unshift(...c){return this.splice(0,0,...c),e.length(n)},entries(){let c=0;return{next:()=>{const f=We(t,c);return f===void 0?{value:void 0,done:!0}:{value:[c++,f],done:!1}},[Symbol.iterator](){return this}}},keys(){let c=0;const u=e.length(n);return{next:()=>c<u?{value:c++,done:!1}:{value:void 0,done:!0},[Symbol.iterator](){return this}}},values(){let c=0;return{next:()=>{const f=We(t,c++);return f===void 0?{value:void 0,done:!0}:{value:f,done:!1}},[Symbol.iterator](){return this}}},toArray(){const c=[];let u;do u=We(t,c.length),u!==void 0&&c.push(u);while(u!==void 0);return c},map(c){return this.toArray().map(c)},toString(){return this.toArray().toString()},toLocaleString(){return this.toArray().toLocaleString()},forEach(c){return this.toArray().forEach(c)},concat(c){return this.toArray().concat(c)},every(c){return this.toArray().every(c)},filter(c){return this.toArray().filter(c)},find(c){let u=0;for(const f of this){if(c(f,u))return f;u+=1}},findIndex(c){let u=0;for(const f of this){if(c(f,u))return u;u+=1}return-1},includes(c){return this.find(u=>u===c)!==void 0},join(c){return this.toArray().join(c)},reduce(c,u){return this.toArray().reduce(c,u)},reduceRight(c,u){return this.toArray().reduceRight(c,u)},lastIndexOf(c,u=1/0){return this.toArray().lastIndexOf(c,u)},slice(c,u){return this.toArray().slice(c,u)},some(c){let u=0;for(const f of this){if(c(f,u))return!0;u+=1}return!1},[Symbol.iterator]:function*(){let c=0,u=We(t,c);for(;u!==void 0;)yield u,c+=1,u=We(t,c)}}}function gg(t){const{context:e,objectId:n}=t;return{set(i,o){return this[i]=o},get(i){return this[i]},toString(){return e.text(n).replace(/￼/g,"")},toSpans(){const i=[];let o="";const c=e.length(n);for(let u=0;u<c;u++){const f=this[u];typeof f=="string"?o+=f:(o.length>0&&(i.push(o),o=""),i.push(f))}return o.length>0&&i.push(o),i},toJSON(){return this.toString()},indexOf(i,o=0){return e.text(n).indexOf(i,o)},insertAt(i,...o){o.every(c=>typeof c=="string")?e.splice(n,i,0,o.join("")):Pi(t).insertAt(i,...o)}}}function Bi(t){if(!Lc(t))throw new Error("value was not a Text instance")}function Hr(t){if(typeof t!="string")throw new Error("value was not a string")}function xa(t){const e=t.map(n=>{if(typeof n=="number")return n.toString();if(typeof n=="string")return n.replace(/~/g,"~0").replace(/\//g,"~1")});return t.length===0?"":"/"+e.join("/")}function Bc(t){return typeof t=="object"&&t!==null&&Object.prototype.hasOwnProperty.call(t,Dc)}function Lc(t){return typeof t=="object"&&t!==null&&Object.prototype.hasOwnProperty.call(t,mi)}let $c;const Fc=new Array(128).fill(void 0);Fc.push(void 0,null,!0,!1);const Js=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}};Js.encodeInto;Fc.length;const _g=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&_g.decode();typeof FinalizationRegistry>"u"||new FinalizationRegistry(t=>$c.__wbg_automerge_free(t>>>0,1));typeof FinalizationRegistry>"u"||new FinalizationRegistry(t=>$c.__wbg_syncstate_free(t>>>0,1));let pg=[];function yg(t){for(const e in t)Fe[e]=t[e];for(const e of pg)e()}const Fe={create(t){throw new RangeError("Automerge.use() not called")},load(t,e){throw new RangeError("Automerge.use() not called (load)")},encodeChange(t){throw new RangeError("Automerge.use() not called (encodeChange)")},decodeChange(t){throw new RangeError("Automerge.use() not called (decodeChange)")},initSyncState(){throw new RangeError("Automerge.use() not called (initSyncState)")},encodeSyncMessage(t){throw new RangeError("Automerge.use() not called (encodeSyncMessage)")},decodeSyncMessage(t){throw new RangeError("Automerge.use() not called (decodeSyncMessage)")},encodeSyncState(t){throw new RangeError("Automerge.use() not called (encodeSyncState)")},decodeSyncState(t){throw new RangeError("Automerge.use() not called (decodeSyncState)")},exportSyncState(t){throw new RangeError("Automerge.use() not called (exportSyncState)")},importSyncState(t){throw new RangeError("Automerge.use() not called (importSyncState)")}};function Oe(t,e=!0){if(typeof t!="object")throw new RangeError("must be the document root");const n=Reflect.get(t,Rt);if(n===void 0||n==null||e&&mg(t)!=="_root")throw new RangeError("must be the document root");return n}function Nc(t){return Reflect.get(t,xn)}function mg(t){return typeof t!="object"||t===null?null:Reflect.get(t,In)}function Zr(t){return!!Reflect.get(t,Kr)}var bg=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Li(t){return typeof t=="object"?t:{actor:t}}function $i(t){const e=Li(t),n=!!e.freeze,r=e.patchCallback,i=!e.enableTextV2,o=e.actor,c=Fe.create({actor:o,text_v1:i});c.enableFreeze(!!e.freeze);const u=e.enableTextV2||!1;return Gc(c,u),c.materialize("/",void 0,{handle:c,heads:void 0,freeze:n,patchCallback:r,textV2:u})}function wg(t,e){const n=Oe(t),r=n.handle;return n.handle.materialize("/",e,Object.assign(Object.assign({},n),{handle:r,heads:e}))}function vg(t,e){const n=Oe(t),r=n.heads,i=Li(e),o=n.handle.fork(i.actor,r);o.updateDiffCursor();const{heads:c}=n,u=bg(n,["heads"]);return u.patchCallback=i.patchCallback,o.applyPatches(t,Object.assign(Object.assign({},u),{handle:o}))}function Sg(t,e){return Vn($i(e),"from",{},n=>Object.assign(n,t)).newDoc}function xg(t,e,n){if(typeof e=="function")return Vn(t,"change",{},e).newDoc;if(typeof n=="function")return typeof e=="string"&&(e={message:e}),Vn(t,"change",e,n).newDoc;throw RangeError("Invalid args for change")}function Ig(t,e,n,r){if(typeof n=="function")return Vn(t,"changeAt",{},n,e);if(typeof r=="function")return typeof n=="string"&&(n={message:n}),Vn(t,"changeAt",n,r,e);throw RangeError("Invalid args for changeAt")}function Qn(t,e,n,r){if(n==null)return t;const i=Oe(t),o=Object.assign(Object.assign({},i),{heads:void 0}),{value:c,patches:u}=i.handle.applyAndReturnPatches(t,o);if(u.length>0){r?.(u,{before:t,after:c,source:e});const f=Oe(c);f.mostRecentPatch={before:Oe(t).heads,after:f.handle.getHeads(),patches:u}}return i.heads=n,c}function Vn(t,e,n,r,i){if(typeof r!="function")throw new RangeError("invalid change function");const o=Oe(t);if(t===void 0||o===void 0)throw new RangeError("must be the document root");if(o.heads)throw new RangeError("Attempting to change an outdated document.  Use Automerge.clone() if you wish to make a writable copy.");if(Zr(t))throw new RangeError("Calls to Automerge.change cannot be nested");let c=o.handle.getHeads();i&&kg(i,c)&&(i=void 0),i&&(o.handle.isolate(i),c=i),"time"in n||(n.time=Math.floor(Date.now()/1e3));try{o.heads=c;const u=hg(o.handle,o.textV2);if(r(u),o.handle.pendingOps()===0)return o.heads=void 0,i&&o.handle.integrate(),{newDoc:t,newHeads:null};{const f=o.handle.commit(n.message,n.time);return o.handle.integrate(),{newDoc:Qn(t,e,c,n.patchCallback||o.patchCallback),newHeads:f!=null?[f]:null}}}catch(u){throw o.heads=void 0,o.handle.rollback(),u}}function Ag(t,e){e===void 0&&(e={}),typeof e=="string"&&(e={message:e}),"time"in e||(e.time=Math.floor(Date.now()/1e3));const n=Oe(t);if(n.heads)throw new RangeError("Attempting to change an outdated document.  Use Automerge.clone() if you wish to make a writable copy.");if(Zr(t))throw new RangeError("Calls to Automerge.change cannot be nested");const r=n.handle.getHeads();return n.handle.emptyChange(e.message,e.time),Qn(t,"emptyChange",r)}function Eg(t,e){const n=Li(e),r=n.actor,i=n.patchCallback,o=!n.enableTextV2,c=n.unchecked||!1,u=n.allowMissingChanges||!1,f=n.convertRawStringsToText||!1,d=Fe.load(t,{text_v1:o,actor:r,unchecked:c,allowMissingDeps:u,convertRawStringsToText:f});d.enableFreeze(!!n.freeze);const _=n.enableTextV2||!1;return Gc(d,_),d.materialize("/",void 0,{handle:d,heads:void 0,patchCallback:i,textV2:_})}function zc(t,e,n){n||(n={});const r=Oe(t);if(r.heads)throw new RangeError("Attempting to change an out of date document - set at: "+Nc(t));if(Zr(t))throw new RangeError("Calls to Automerge.change cannot be nested");const i=r.handle.getHeads();return r.handle.loadIncremental(e),Qn(t,"loadIncremental",i,n.patchCallback||r.patchCallback)}function Vc(t){return Oe(t).handle.save()}function Ia(t,e){const n=Oe(t);if(n.heads)throw new RangeError("Attempting to change an out of date document - set at: "+Nc(t));const r=n.handle.getHeads(),i=Oe(e),o=n.handle.getChangesAdded(i.handle);return n.handle.applyChanges(o),Qn(t,"merge",r,n.patchCallback)}function Ks(t,e,n){Aa(e,"before"),Aa(n,"after");const r=Oe(t);return r.mostRecentPatch&&wi(r.mostRecentPatch.before,e)&&wi(r.mostRecentPatch.after,n)?r.mostRecentPatch.patches:r.handle.diff(e,n)}function kg(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Aa(t,e){if(!Array.isArray(t))throw new Error(`${e} must be an array`)}function wi(t,e){if(!Ea(t)||!Ea(e))return t===e;const n=Object.keys(t).sort(),r=Object.keys(e).sort();if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i]!==r[i]||!wi(t[n[i]],e[r[i]]))return!1;return!0}function Wc(t){const e=Fe.importSyncState(t),n=Fe.encodeSyncState(e);return e.free(),n}function qc(t){const e=Fe.decodeSyncState(t),n=Fe.exportSyncState(e);return e.free(),n}function Cg(t,e){const n=Oe(t),r=Fe.importSyncState(e),i=n.handle.generateSyncMessage(r);return[Fe.exportSyncState(r),i]}function Tg(t,e,n,r){const i=Fe.importSyncState(e);r||(r={});const o=Oe(t);if(o.heads)throw new RangeError("Attempting to change an outdated document.  Use Automerge.clone() if you wish to make a writable copy.");if(Zr(t))throw new RangeError("Calls to Automerge.change cannot be nested");const c=o.handle.getHeads();o.handle.receiveSyncMessage(i,n);const u=Fe.exportSyncState(i);return[Qn(t,"receiveSyncMessage",c,r.patchCallback||o.patchCallback),u,null]}function Og(){return Fe.exportSyncState(Fe.initSyncState())}function Rg(t){return Fe.decodeSyncMessage(t)}function wt(t){const e=Oe(t);return e.heads||e.handle.getHeads()}function Ea(t){return typeof t=="object"&&t!==null}function Mg(t,e){return Oe(t).handle.saveSince(e)}function Gc(t,e){t.registerDatatype("counter",n=>new bi(n),n=>{if(n instanceof bi)return n.value}),e?t.registerDatatype("str",n=>new Hc(n),n=>{if(Bc(n))return n.val}):t.registerDatatype("text",n=>new Gt(n),n=>{if(n instanceof Gt)return n.join("")})}function jg(t){return Oe(t).handle.topoHistoryTraversal()}function Dg(t,e){return Oe(t).handle.getDecodedChangeByHash(e)}function Fi(t){return Oe(t).handle.stats()}function vt(t){const e=Qr(t);return e.enableTextV2=!0,$i(e)}function Pr(t,e){const n=Qr(e);return n.enableTextV2=!0,vg(t,n)}function Ug(t,e){const n=Qr(e);return n.enableTextV2=!0,Sg(t,n)}function Hg(t,e){const n=Qr(e);return n.enableTextV2=!0,n.patchCallback?zc($i(n),t):Eg(t,n)}function Qr(t){return{actor:t}}function Ni(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var yr={exports:{}},Ys,ka;function Pg(){if(ka)return Ys;ka=1;var t=1e3,e=t*60,n=e*60,r=n*24,i=r*7,o=r*365.25;Ys=function(_,h){h=h||{};var g=typeof _;if(g==="string"&&_.length>0)return c(_);if(g==="number"&&isFinite(_))return h.long?f(_):u(_);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(_))};function c(_){if(_=String(_),!(_.length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(_);if(h){var g=parseFloat(h[1]),y=(h[2]||"ms").toLowerCase();switch(y){case"years":case"year":case"yrs":case"yr":case"y":return g*o;case"weeks":case"week":case"w":return g*i;case"days":case"day":case"d":return g*r;case"hours":case"hour":case"hrs":case"hr":case"h":return g*n;case"minutes":case"minute":case"mins":case"min":case"m":return g*e;case"seconds":case"second":case"secs":case"sec":case"s":return g*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return g;default:return}}}}function u(_){var h=Math.abs(_);return h>=r?Math.round(_/r)+"d":h>=n?Math.round(_/n)+"h":h>=e?Math.round(_/e)+"m":h>=t?Math.round(_/t)+"s":_+"ms"}function f(_){var h=Math.abs(_);return h>=r?d(_,h,r,"day"):h>=n?d(_,h,n,"hour"):h>=e?d(_,h,e,"minute"):h>=t?d(_,h,t,"second"):_+" ms"}function d(_,h,g,y){var m=h>=g*1.5;return Math.round(_/g)+" "+y+(m?"s":"")}return Ys}var Xs,Ca;function Bg(){if(Ca)return Xs;Ca=1;function t(e){r.debug=r,r.default=r,r.coerce=d,r.disable=u,r.enable=o,r.enabled=f,r.humanize=Pg(),r.destroy=_,Object.keys(e).forEach(h=>{r[h]=e[h]}),r.names=[],r.skips=[],r.formatters={};function n(h){let g=0;for(let y=0;y<h.length;y++)g=(g<<5)-g+h.charCodeAt(y),g|=0;return r.colors[Math.abs(g)%r.colors.length]}r.selectColor=n;function r(h){let g,y=null,m,v;function A(...N){if(!A.enabled)return;const H=A,C=Number(new Date),Z=C-(g||C);H.diff=Z,H.prev=g,H.curr=C,g=C,N[0]=r.coerce(N[0]),typeof N[0]!="string"&&N.unshift("%O");let q=0;N[0]=N[0].replace(/%([a-zA-Z%])/g,(te,X)=>{if(te==="%%")return"%";q++;const $=r.formatters[X];if(typeof $=="function"){const z=N[q];te=$.call(H,z),N.splice(q,1),q--}return te}),r.formatArgs.call(H,N),(H.log||r.log).apply(H,N)}return A.namespace=h,A.useColors=r.useColors(),A.color=r.selectColor(h),A.extend=i,A.destroy=r.destroy,Object.defineProperty(A,"enabled",{enumerable:!0,configurable:!1,get:()=>y!==null?y:(m!==r.namespaces&&(m=r.namespaces,v=r.enabled(h)),v),set:N=>{y=N}}),typeof r.init=="function"&&r.init(A),A}function i(h,g){const y=r(this.namespace+(typeof g>"u"?":":g)+h);return y.log=this.log,y}function o(h){r.save(h),r.namespaces=h,r.names=[],r.skips=[];const g=(typeof h=="string"?h:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const y of g)y[0]==="-"?r.skips.push(y.slice(1)):r.names.push(y)}function c(h,g){let y=0,m=0,v=-1,A=0;for(;y<h.length;)if(m<g.length&&(g[m]===h[y]||g[m]==="*"))g[m]==="*"?(v=m,A=y,m++):(y++,m++);else if(v!==-1)m=v+1,A++,y=A;else return!1;for(;m<g.length&&g[m]==="*";)m++;return m===g.length}function u(){const h=[...r.names,...r.skips.map(g=>"-"+g)].join(",");return r.enable(""),h}function f(h){for(const g of r.skips)if(c(h,g))return!1;for(const g of r.names)if(c(h,g))return!0;return!1}function d(h){return h instanceof Error?h.stack||h.message:h}function _(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return Xs=t,Xs}var Ta;function Lg(){return Ta||(Ta=1,function(t,e){var n={};e.formatArgs=i,e.save=o,e.load=c,e.useColors=r,e.storage=u(),e.destroy=(()=>{let d=!1;return()=>{d||(d=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let d;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(d=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(d[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(d){if(d[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+d[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const _="color: "+this.color;d.splice(1,0,_,"color: inherit");let h=0,g=0;d[0].replace(/%[a-zA-Z%]/g,y=>{y!=="%%"&&(h++,y==="%c"&&(g=h))}),d.splice(g,0,_)}e.log=console.debug||console.log||(()=>{});function o(d){try{d?e.storage.setItem("debug",d):e.storage.removeItem("debug")}catch{}}function c(){let d;try{d=e.storage.getItem("debug")||e.storage.getItem("DEBUG")}catch{}return!d&&typeof process<"u"&&"env"in process&&(d=n.DEBUG),d}function u(){try{return localStorage}catch{}}t.exports=Bg()(e);const{formatters:f}=t.exports;f.j=function(d){try{return JSON.stringify(d)}catch(_){return"[UnexpectedJSONParseError]: "+_.message}}}(yr,yr.exports)),yr.exports}var $g=Lg();const gt=Ni($g);var Zs={exports:{}},Oa;function Fg(){return Oa||(Oa=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(f,d,_){this.fn=f,this.context=d,this.once=_||!1}function o(f,d,_,h,g){if(typeof _!="function")throw new TypeError("The listener must be a function");var y=new i(_,h||f,g),m=n?n+d:d;return f._events[m]?f._events[m].fn?f._events[m]=[f._events[m],y]:f._events[m].push(y):(f._events[m]=y,f._eventsCount++),f}function c(f,d){--f._eventsCount===0?f._events=new r:delete f._events[d]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var d=[],_,h;if(this._eventsCount===0)return d;for(h in _=this._events)e.call(_,h)&&d.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(_)):d},u.prototype.listeners=function(d){var _=n?n+d:d,h=this._events[_];if(!h)return[];if(h.fn)return[h.fn];for(var g=0,y=h.length,m=new Array(y);g<y;g++)m[g]=h[g].fn;return m},u.prototype.listenerCount=function(d){var _=n?n+d:d,h=this._events[_];return h?h.fn?1:h.length:0},u.prototype.emit=function(d,_,h,g,y,m){var v=n?n+d:d;if(!this._events[v])return!1;var A=this._events[v],N=arguments.length,H,C;if(A.fn){switch(A.once&&this.removeListener(d,A.fn,void 0,!0),N){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,_),!0;case 3:return A.fn.call(A.context,_,h),!0;case 4:return A.fn.call(A.context,_,h,g),!0;case 5:return A.fn.call(A.context,_,h,g,y),!0;case 6:return A.fn.call(A.context,_,h,g,y,m),!0}for(C=1,H=new Array(N-1);C<N;C++)H[C-1]=arguments[C];A.fn.apply(A.context,H)}else{var Z=A.length,q;for(C=0;C<Z;C++)switch(A[C].once&&this.removeListener(d,A[C].fn,void 0,!0),N){case 1:A[C].fn.call(A[C].context);break;case 2:A[C].fn.call(A[C].context,_);break;case 3:A[C].fn.call(A[C].context,_,h);break;case 4:A[C].fn.call(A[C].context,_,h,g);break;default:if(!H)for(q=1,H=new Array(N-1);q<N;q++)H[q-1]=arguments[q];A[C].fn.apply(A[C].context,H)}}return!0},u.prototype.on=function(d,_,h){return o(this,d,_,h,!1)},u.prototype.once=function(d,_,h){return o(this,d,_,h,!0)},u.prototype.removeListener=function(d,_,h,g){var y=n?n+d:d;if(!this._events[y])return this;if(!_)return c(this,y),this;var m=this._events[y];if(m.fn)m.fn===_&&(!g||m.once)&&(!h||m.context===h)&&c(this,y);else{for(var v=0,A=[],N=m.length;v<N;v++)(m[v].fn!==_||g&&!m[v].once||h&&m[v].context!==h)&&A.push(m[v]);A.length?this._events[y]=A.length===1?A[0]:A:c(this,y)}return this},u.prototype.removeAllListeners=function(d){var _;return d?(_=n?n+d:d,this._events[_]&&c(this,_)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,t.exports=u}(Zs)),Zs.exports}var Ng=Fg();const Zt=Ni(Ng);function zg(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function Vg(){const t=zg();if(t.__xstate__)return t.__xstate__}const Wg=t=>{if(typeof window>"u")return;const e=Vg();e&&e.register(t)};class Ra{constructor(e){this._process=e,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(e){const n={value:e,next:null};if(this._current){this._last.next=n,this._last=n;return}this._current=n,this._last=n,this._active&&this.flush()}flush(){for(;this._current;){const e=this._current;this._process(e.value),this._current=e.next}this._last=null}}const Jc=".",qg="",Kc="",Gg="#",Jg="*",Yc="xstate.init",vi="xstate.stop";function Kg(t,e){return{type:`xstate.after.${t}.${e}`}}function Si(t,e){return{type:`xstate.done.state.${t}`,output:e}}function Yg(t,e){return{type:`xstate.done.actor.${t}`,output:e,actorId:t}}function Xg(t,e){return{type:`xstate.error.actor.${t}`,error:e,actorId:t}}function Xc(t){return{type:Yc,input:t}}function ot(t){setTimeout(()=>{throw t})}const Zg=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Zc(t,e){const n=Ma(t),r=Ma(e);return typeof r=="string"?typeof n=="string"?r===n:!1:typeof n=="string"?n in r:Object.keys(n).every(i=>i in r?Zc(n[i],r[i]):!1)}function zi(t){if(eu(t))return t;const e=[];let n="";for(let r=0;r<t.length;r++){switch(t.charCodeAt(r)){case 92:n+=t[r+1],r++;continue;case 46:e.push(n),n="";continue}n+=t[r]}return e.push(n),e}function Ma(t){if(M_(t))return t.value;if(typeof t!="string")return t;const e=zi(t);return Qg(e)}function Qg(t){if(t.length===1)return t[0];const e={};let n=e;for(let r=0;r<t.length-1;r++)if(r===t.length-2)n[t[r]]=t[r+1];else{const i=n;n={},i[t[r]]=n}return e}function ja(t,e){const n={},r=Object.keys(t);for(let i=0;i<r.length;i++){const o=r[i];n[o]=e(t[o],o,t,i)}return n}function Qc(t){return eu(t)?t:[t]}function xt(t){return t===void 0?[]:Qc(t)}function xi(t,e,n,r){return typeof t=="function"?t({context:e,event:n,self:r}):t}function eu(t){return Array.isArray(t)}function e_(t){return t.type.startsWith("xstate.error.actor")}function bn(t){return Qc(t).map(e=>typeof e>"u"||typeof e=="string"?{target:e}:e)}function tu(t){if(!(t===void 0||t===qg))return xt(t)}function Ii(t,e,n){const r=typeof t=="object",i=r?t:void 0;return{next:(r?t.next:t)?.bind(i),error:(r?t.error:e)?.bind(i),complete:(r?t.complete:n)?.bind(i)}}function Da(t,e){return`${e}.${t}`}function Vi(t,e){const n=e.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!n)return t.implementations.actors[e];const[,r,i]=n,c=t.getStateNodeById(i).config.invoke;return(Array.isArray(c)?c[r]:c).src}function Ua(t,e){return`${t.sessionId}.${e}`}let t_=0;function n_(t,e){const n=new Map,r=new Map,i=new WeakMap,o=new Set,c={},{clock:u,logger:f}=e,d={schedule:(g,y,m,v,A=Math.random().toString(36).slice(2))=>{const N={source:g,target:y,event:m,delay:v,id:A,startedAt:Date.now()},H=Ua(g,A);h._snapshot._scheduledEvents[H]=N;const C=u.setTimeout(()=>{delete c[H],delete h._snapshot._scheduledEvents[H],h._relay(g,y,m)},v);c[H]=C},cancel:(g,y)=>{const m=Ua(g,y),v=c[m];delete c[m],delete h._snapshot._scheduledEvents[m],v!==void 0&&u.clearTimeout(v)},cancelAll:g=>{for(const y in h._snapshot._scheduledEvents){const m=h._snapshot._scheduledEvents[y];m.source===g&&d.cancel(g,m.id)}}},_=g=>{if(!o.size)return;const y={...g,rootId:t.sessionId};o.forEach(m=>m.next?.(y))},h={_snapshot:{_scheduledEvents:(e?.snapshot&&e.snapshot.scheduler)??{}},_bookId:()=>`x:${t_++}`,_register:(g,y)=>(n.set(g,y),g),_unregister:g=>{n.delete(g.sessionId);const y=i.get(g);y!==void 0&&(r.delete(y),i.delete(g))},get:g=>r.get(g),_set:(g,y)=>{const m=r.get(g);if(m&&m!==y)throw new Error(`Actor with system ID '${g}' already exists.`);r.set(g,y),i.set(y,g)},inspect:g=>{const y=Ii(g);return o.add(y),{unsubscribe(){o.delete(y)}}},_sendInspectionEvent:_,_relay:(g,y,m)=>{h._sendInspectionEvent({type:"@xstate.event",sourceRef:g,actorRef:y,event:m}),y._send(m)},scheduler:d,getSnapshot:()=>({_scheduledEvents:{...h._snapshot._scheduledEvents}}),start:()=>{const g=h._snapshot._scheduledEvents;h._snapshot._scheduledEvents={};for(const y in g){const{source:m,target:v,event:A,delay:N,id:H}=g[y];d.schedule(m,v,A,N,H)}},_clock:u,_logger:f};return h}let Qs=!1;const Wi=1;let Le=function(t){return t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped",t}({});const r_={clock:{setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t)},logger:console.log.bind(console),devTools:!1};class s_{constructor(e,n){this.logic=e,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new Ra(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=Le.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const r={...r_,...n},{clock:i,logger:o,parent:c,syncSnapshot:u,id:f,systemId:d,inspect:_}=r;this.system=c?c.system:n_(this,{clock:i,logger:o}),_&&!c&&this.system.inspect(Ii(_)),this.sessionId=this.system._bookId(),this.id=f??this.sessionId,this.logger=n?.logger??this.system._logger,this.clock=n?.clock??this.system._clock,this._parent=c,this._syncSnapshot=u,this.options=r,this.src=r.src??e,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:h=>{this._deferred.push(h)},system:this.system,stopChild:h=>{if(h._parent!==this)throw new Error(`Cannot stop child actor ${h.id} of ${this.id} because it is not a child`);h._stop()},emit:h=>{const g=this.eventListeners.get(h.type),y=this.eventListeners.get("*");if(!g&&!y)return;const m=[...g?g.values():[],...y?y.values():[]];for(const v of m)try{v(h)}catch(A){ot(A)}},actionExecutor:h=>{const g=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:h.type,params:h.params}}),!h.exec)return;const y=Qs;try{Qs=!0,h.exec(h.info,h.params)}finally{Qs=y}};this._processingStatus===Le.Running?g():this._deferred.push(g)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),d&&(this._systemId=d,this.system._set(d,this)),this._initState(n?.snapshot??n?.state),d&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(e){try{this._snapshot=e?this.logic.restoreSnapshot?this.logic.restoreSnapshot(e,this._actorScope):e:this.logic.getInitialSnapshot(this._actorScope,this.options?.input)}catch(n){this._snapshot={status:"error",output:void 0,error:n}}}update(e,n){this._snapshot=e;let r;for(;r=this._deferred.shift();)try{r()}catch(i){this._deferred.length=0,this._snapshot={...e,status:"error",error:i}}switch(this._snapshot.status){case"active":for(const i of this.observers)try{i.next?.(e)}catch(o){ot(o)}break;case"done":for(const i of this.observers)try{i.next?.(e)}catch(o){ot(o)}this._stopProcedure(),this._complete(),this._doneEvent=Yg(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:n,snapshot:e})}subscribe(e,n,r){const i=Ii(e,n,r);if(this._processingStatus!==Le.Stopped)this.observers.add(i);else switch(this._snapshot.status){case"done":try{i.complete?.()}catch(o){ot(o)}break;case"error":{const o=this._snapshot.error;if(!i.error)ot(o);else try{i.error(o)}catch(c){ot(c)}break}}return{unsubscribe:()=>{this.observers.delete(i)}}}on(e,n){let r=this.eventListeners.get(e);r||(r=new Set,this.eventListeners.set(e,r));const i=n.bind(void 0);return r.add(i),{unsubscribe:()=>{r.delete(i)}}}start(){if(this._processingStatus===Le.Running)return this;this._syncSnapshot&&this.subscribe({next:r=>{r.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:r})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=Le.Running;const e=Xc(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:e}),this._snapshot.status){case"done":return this.update(this._snapshot,e),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(r){return this._snapshot={...this._snapshot,status:"error",error:r},this._error(r),this}return this.update(this._snapshot,e),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(e){let n,r;try{n=this.logic.transition(this._snapshot,e,this._actorScope)}catch(i){r={err:i}}if(r){const{err:i}=r;this._snapshot={...this._snapshot,status:"error",error:i},this._error(i);return}this.update(n,e),e.type===vi&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===Le.Stopped?this:(this.mailbox.clear(),this._processingStatus===Le.NotStarted?(this._processingStatus=Le.Stopped,this):(this.mailbox.enqueue({type:vi}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){for(const e of this.observers)try{e.complete?.()}catch(n){ot(n)}this.observers.clear()}_reportError(e){if(!this.observers.size){this._parent||ot(e);return}let n=!1;for(const r of this.observers){const i=r.error;n||=!i;try{i?.(e)}catch(o){ot(o)}}this.observers.clear(),n&&ot(e)}_error(e){this._stopProcedure(),this._reportError(e),this._parent&&this.system._relay(this,this._parent,Xg(this.id,e))}_stopProcedure(){return this._processingStatus!==Le.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new Ra(this._process.bind(this)),this._processingStatus=Le.Stopped,this.system._unregister(this),this)}_send(e){this._processingStatus!==Le.Stopped&&this.mailbox.enqueue(e)}send(e){this.system._relay(void 0,this,e)}attachDevTools(){const{devTools:e}=this.options;e&&(typeof e=="function"?e:Wg)(this)}toJSON(){return{xstate$$type:Wi,id:this.id}}getPersistedSnapshot(e){return this.logic.getPersistedSnapshot(this._snapshot,e)}[Zg](){return this}getSnapshot(){return this._snapshot}}function Wn(t,...[e]){return new s_(t,e)}function i_(t,e,n,r,{sendId:i}){const o=typeof i=="function"?i(n,r):i;return[e,{sendId:o},void 0]}function o_(t,e){t.defer(()=>{t.system.scheduler.cancel(t.self,e.sendId)})}function a_(t){function e(n,r){}return e.type="xstate.cancel",e.sendId=t,e.resolve=i_,e.execute=o_,e}function c_(t,e,n,r,{id:i,systemId:o,src:c,input:u,syncSnapshot:f}){const d=typeof c=="string"?Vi(e.machine,c):c,_=typeof i=="function"?i(n):i;let h,g;return d&&(g=typeof u=="function"?u({context:e.context,event:n.event,self:t.self}):u,h=Wn(d,{id:_,src:c,parent:t.self,syncSnapshot:f,systemId:o,input:g})),[Kt(e,{children:{...e.children,[_]:h}}),{id:i,systemId:o,actorRef:h,src:c,input:g},void 0]}function u_(t,{actorRef:e}){e&&t.defer(()=>{e._processingStatus!==Le.Stopped&&e.start()})}function f_(...[t,{id:e,systemId:n,input:r,syncSnapshot:i=!1}={}]){function o(c,u){}return o.type="xstate.spawnChild",o.id=e,o.systemId=n,o.src=t,o.input=r,o.syncSnapshot=i,o.resolve=c_,o.execute=u_,o}function l_(t,e,n,r,{actorRef:i}){const o=typeof i=="function"?i(n,r):i,c=typeof o=="string"?e.children[o]:o;let u=e.children;return c&&(u={...u},delete u[c.id]),[Kt(e,{children:u}),c,void 0]}function d_(t,e){if(e){if(t.system._unregister(e),e._processingStatus!==Le.Running){t.stopChild(e);return}t.defer(()=>{t.stopChild(e)})}}function nu(t){function e(n,r){}return e.type="xstate.stopChild",e.actorRef=t,e.resolve=l_,e.execute=d_,e}function qi(t,e,n,r){const{machine:i}=r,o=typeof t=="function",c=o?t:i.implementations.guards[typeof t=="string"?t:t.type];if(!o&&!c)throw new Error(`Guard '${typeof t=="string"?t:t.type}' is not implemented.'.`);if(typeof c!="function")return qi(c,e,n,r);const u={context:e,event:n},f=o||typeof t=="string"?void 0:"params"in t?typeof t.params=="function"?t.params({context:e,event:n}):t.params:void 0;return"check"in c?c.check(r,u,c):c(u,f)}const Gi=t=>t.type==="atomic"||t.type==="final";function An(t){return Object.values(t.states).filter(e=>e.type!=="history")}function er(t,e){const n=[];if(e===t)return n;let r=t.parent;for(;r&&r!==e;)n.push(r),r=r.parent;return n}function Br(t){const e=new Set(t),n=su(e);for(const r of e)if(r.type==="compound"&&(!n.get(r)||!n.get(r).length))Ha(r).forEach(i=>e.add(i));else if(r.type==="parallel"){for(const i of An(r))if(i.type!=="history"&&!e.has(i)){const o=Ha(i);for(const c of o)e.add(c)}}for(const r of e){let i=r.parent;for(;i;)e.add(i),i=i.parent}return e}function ru(t,e){const n=e.get(t);if(!n)return{};if(t.type==="compound"){const i=n[0];if(i){if(Gi(i))return i.key}else return{}}const r={};for(const i of n)r[i.key]=ru(i,e);return r}function su(t){const e=new Map;for(const n of t)e.has(n)||e.set(n,[]),n.parent&&(e.has(n.parent)||e.set(n.parent,[]),e.get(n.parent).push(n));return e}function iu(t,e){const n=Br(e);return ru(t,su(n))}function Ji(t,e){return e.type==="compound"?An(e).some(n=>n.type==="final"&&t.has(n)):e.type==="parallel"?An(e).every(n=>Ji(t,n)):e.type==="final"}const es=t=>t[0]===Gg;function h_(t,e){return t.transitions.get(e)||[...t.transitions.keys()].filter(r=>{if(r===Jg)return!0;if(!r.endsWith(".*"))return!1;const i=r.split("."),o=e.split(".");for(let c=0;c<i.length;c++){const u=i[c],f=o[c];if(u==="*")return c===i.length-1;if(u!==f)return!1}return!0}).sort((r,i)=>i.length-r.length).flatMap(r=>t.transitions.get(r))}function g_(t){const e=t.config.after;if(!e)return[];const n=i=>{const o=Kg(i,t.id),c=o.type;return t.entry.push(N_(o,{id:c,delay:i})),t.exit.push(a_(c)),c};return Object.keys(e).flatMap(i=>{const o=e[i],c=typeof o=="string"?{target:o}:o,u=Number.isNaN(+i)?i:+i,f=n(u);return xt(c).map(d=>({...d,event:f,delay:u}))}).map(i=>{const{delay:o}=i;return{...zt(t,i.event,i),delay:o}})}function zt(t,e,n){const r=tu(n.target),i=n.reenter??!1,o=y_(t,r),c={...n,actions:xt(n.actions),guard:n.guard,target:o,source:t,reenter:i,eventType:e,toJSON:()=>({...c,source:`#${t.id}`,target:o?o.map(u=>`#${u.id}`):void 0})};return c}function __(t){const e=new Map;if(t.config.on)for(const n of Object.keys(t.config.on)){if(n===Kc)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const r=t.config.on[n];e.set(n,bn(r).map(i=>zt(t,n,i)))}if(t.config.onDone){const n=`xstate.done.state.${t.id}`;e.set(n,bn(t.config.onDone).map(r=>zt(t,n,r)))}for(const n of t.invoke){if(n.onDone){const r=`xstate.done.actor.${n.id}`;e.set(r,bn(n.onDone).map(i=>zt(t,r,i)))}if(n.onError){const r=`xstate.error.actor.${n.id}`;e.set(r,bn(n.onError).map(i=>zt(t,r,i)))}if(n.onSnapshot){const r=`xstate.snapshot.${n.id}`;e.set(r,bn(n.onSnapshot).map(i=>zt(t,r,i)))}}for(const n of t.after){let r=e.get(n.eventType);r||(r=[],e.set(n.eventType,r)),r.push(n)}return e}function p_(t,e){const n=typeof e=="string"?t.states[e]:e?t.states[e.target]:void 0;if(!n&&e)throw new Error(`Initial state node "${e}" not found on parent state node #${t.id}`);const r={source:t,actions:!e||typeof e=="string"?[]:xt(e.actions),eventType:null,reenter:!1,target:n?[n]:[],toJSON:()=>({...r,source:`#${t.id}`,target:n?[`#${n.id}`]:[]})};return r}function y_(t,e){if(e!==void 0)return e.map(n=>{if(typeof n!="string")return n;if(es(n))return t.machine.getStateNodeById(n);const r=n[0]===Jc;if(r&&!t.parent)return Lr(t,n.slice(1));const i=r?t.key+n:n;if(t.parent)try{return Lr(t.parent,i)}catch(o){throw new Error(`Invalid transition definition for state node '${t.id}':
${o.message}`)}else throw new Error(`Invalid target: "${n}" is not a valid target from the root node. Did you mean ".${n}"?`)})}function ou(t){const e=tu(t.config.target);return e?{target:e.map(n=>typeof n=="string"?Lr(t.parent,n):n)}:t.parent.initial}function Wt(t){return t.type==="history"}function Ha(t){const e=au(t);for(const n of e)for(const r of er(n,t))e.add(r);return e}function au(t){const e=new Set;function n(r){if(!e.has(r)){if(e.add(r),r.type==="compound")n(r.initial.target[0]);else if(r.type==="parallel")for(const i of An(r))n(i)}}return n(t),e}function En(t,e){if(es(e))return t.machine.getStateNodeById(e);if(!t.states)throw new Error(`Unable to retrieve child state '${e}' from '${t.id}'; no child states exist.`);const n=t.states[e];if(!n)throw new Error(`Child state '${e}' does not exist on '${t.id}'`);return n}function Lr(t,e){if(typeof e=="string"&&es(e))try{return t.machine.getStateNodeById(e)}catch{}const n=zi(e).slice();let r=t;for(;n.length;){const i=n.shift();if(!i.length)break;r=En(r,i)}return r}function $r(t,e){if(typeof e=="string"){const i=t.states[e];if(!i)throw new Error(`State '${e}' does not exist on '${t.id}'`);return[t,i]}const n=Object.keys(e),r=n.map(i=>En(t,i)).filter(Boolean);return[t.machine.root,t].concat(r,n.reduce((i,o)=>{const c=En(t,o);if(!c)return i;const u=$r(c,e[o]);return i.concat(u)},[]))}function m_(t,e,n,r){const o=En(t,e).next(n,r);return!o||!o.length?t.next(n,r):o}function b_(t,e,n,r){const i=Object.keys(e),o=En(t,i[0]),c=Ki(o,e[i[0]],n,r);return!c||!c.length?t.next(n,r):c}function w_(t,e,n,r){const i=[];for(const o of Object.keys(e)){const c=e[o];if(!c)continue;const u=En(t,o),f=Ki(u,c,n,r);f&&i.push(...f)}return i.length?i:t.next(n,r)}function Ki(t,e,n,r){return typeof e=="string"?m_(t,e,n,r):Object.keys(e).length===1?b_(t,e,n,r):w_(t,e,n,r)}function v_(t){return Object.keys(t.states).map(e=>t.states[e]).filter(e=>e.type==="history")}function Mt(t,e){let n=t;for(;n.parent&&n.parent!==e;)n=n.parent;return n.parent===e}function S_(t,e){const n=new Set(t),r=new Set(e);for(const i of n)if(r.has(i))return!0;for(const i of r)if(n.has(i))return!0;return!1}function cu(t,e,n){const r=new Set;for(const i of t){let o=!1;const c=new Set;for(const u of r)if(S_(Ai([i],e,n),Ai([u],e,n)))if(Mt(i.source,u.source))c.add(u);else{o=!0;break}if(!o){for(const u of c)r.delete(u);r.add(i)}}return Array.from(r)}function x_(t){const[e,...n]=t;for(const r of er(e,void 0))if(n.every(i=>Mt(i,r)))return r}function Yi(t,e){if(!t.target)return[];const n=new Set;for(const r of t.target)if(Wt(r))if(e[r.id])for(const i of e[r.id])n.add(i);else for(const i of Yi(ou(r),e))n.add(i);else n.add(r);return[...n]}function uu(t,e){const n=Yi(t,e);if(!n)return;if(!t.reenter&&n.every(i=>i===t.source||Mt(i,t.source)))return t.source;const r=x_(n.concat(t.source));if(r)return r;if(!t.reenter)return t.source.machine.root}function Ai(t,e,n){const r=new Set;for(const i of t)if(i.target?.length){const o=uu(i,n);i.reenter&&i.source===o&&r.add(o);for(const c of e)Mt(c,o)&&r.add(c)}return[...r]}function I_(t,e){if(t.length!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function Ei(t,e,n,r,i,o){if(!t.length)return e;const c=new Set(e._nodes);let u=e.historyValue;const f=cu(t,c,u);let d=e;i||([d,u]=C_(d,r,n,f,c,u,o,n.actionExecutor)),d=kn(d,r,n,f.flatMap(h=>h.actions),o,void 0),d=E_(d,r,n,f,c,o,u,i);const _=[...c];d.status==="done"&&(d=kn(d,r,n,_.sort((h,g)=>g.order-h.order).flatMap(h=>h.exit),o,void 0));try{return u===e.historyValue&&I_(e._nodes,c)?d:Kt(d,{_nodes:_,historyValue:u})}catch(h){throw h}}function A_(t,e,n,r,i){if(r.output===void 0)return;const o=Si(i.id,i.output!==void 0&&i.parent?xi(i.output,t.context,e,n.self):void 0);return xi(r.output,t.context,o,n.self)}function E_(t,e,n,r,i,o,c,u){let f=t;const d=new Set,_=new Set;k_(r,c,_,d),u&&_.add(t.machine.root);const h=new Set;for(const g of[...d].sort((y,m)=>y.order-m.order)){i.add(g);const y=[];y.push(...g.entry);for(const m of g.invoke)y.push(f_(m.src,{...m,syncSnapshot:!!m.onSnapshot}));if(_.has(g)){const m=g.initial.actions;y.push(...m)}if(f=kn(f,e,n,y,o,g.invoke.map(m=>m.id)),g.type==="final"){const m=g.parent;let v=m?.type==="parallel"?m:m?.parent,A=v||g;for(m?.type==="compound"&&o.push(Si(m.id,g.output!==void 0?xi(g.output,f.context,e,n.self):void 0));v?.type==="parallel"&&!h.has(v)&&Ji(i,v);)h.add(v),o.push(Si(v.id)),A=v,v=v.parent;if(v)continue;f=Kt(f,{status:"done",output:A_(f,e,n,f.machine.root,A)})}}return f}function k_(t,e,n,r){for(const i of t){const o=uu(i,e);for(const u of i.target||[])!Wt(u)&&(i.source!==u||i.source!==o||i.reenter)&&(r.add(u),n.add(u)),vn(u,e,n,r);const c=Yi(i,e);for(const u of c){const f=er(u,o);o?.type==="parallel"&&f.push(o),fu(r,e,n,f,!i.source.parent&&i.reenter?void 0:o)}}}function vn(t,e,n,r){if(Wt(t))if(e[t.id]){const i=e[t.id];for(const o of i)r.add(o),vn(o,e,n,r);for(const o of i)ei(o,t.parent,r,e,n)}else{const i=ou(t);for(const o of i.target)r.add(o),i===t.parent?.initial&&n.add(t.parent),vn(o,e,n,r);for(const o of i.target)ei(o,t.parent,r,e,n)}else if(t.type==="compound"){const[i]=t.initial.target;Wt(i)||(r.add(i),n.add(i)),vn(i,e,n,r),ei(i,t,r,e,n)}else if(t.type==="parallel")for(const i of An(t).filter(o=>!Wt(o)))[...r].some(o=>Mt(o,i))||(Wt(i)||(r.add(i),n.add(i)),vn(i,e,n,r))}function fu(t,e,n,r,i){for(const o of r)if((!i||Mt(o,i))&&t.add(o),o.type==="parallel")for(const c of An(o).filter(u=>!Wt(u)))[...t].some(u=>Mt(u,c))||(t.add(c),vn(c,e,n,t))}function ei(t,e,n,r,i){fu(n,r,i,er(t,e))}function C_(t,e,n,r,i,o,c,u){let f=t;const d=Ai(r,i,o);d.sort((h,g)=>g.order-h.order);let _;for(const h of d)for(const g of v_(h)){let y;g.history==="deep"?y=m=>Gi(m)&&Mt(m,h):y=m=>m.parent===h,_??={...o},_[g.id]=Array.from(i).filter(y)}for(const h of d)f=kn(f,e,n,[...h.exit,...h.invoke.map(g=>nu(g.id))],c,void 0),i.delete(h);return[f,_||o]}function T_(t,e){return t.implementations.actions[e]}function lu(t,e,n,r,i,o){const{machine:c}=t;let u=t;for(const f of r){const d=typeof f=="function",_=d?f:T_(c,typeof f=="string"?f:f.type),h={context:u.context,event:e,self:n.self,system:n.system},g=d||typeof f=="string"?void 0:"params"in f?typeof f.params=="function"?f.params({context:u.context,event:e}):f.params:void 0;if(!_||!("resolve"in _)){n.actionExecutor({type:typeof f=="string"?f:typeof f=="object"?f.type:f.name||"(anonymous)",info:h,params:g,exec:_});continue}const y=_,[m,v,A]=y.resolve(n,u,h,g,_,i);u=m,"retryResolve"in y&&o?.push([y,v]),"execute"in y&&n.actionExecutor({type:y.type,info:h,params:v,exec:y.execute.bind(null,n,v)}),A&&(u=lu(u,e,n,A,i,o))}return u}function kn(t,e,n,r,i,o){const c=o?[]:void 0,u=lu(t,e,n,r,{internalQueue:i,deferredActorIds:o},c);return c?.forEach(([f,d])=>{f.retryResolve(n,u,d)}),u}function ti(t,e,n,r){let i=t;const o=[];function c(d,_,h){n.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:n.self,event:_,snapshot:d,_transitions:h}),o.push(d)}if(e.type===vi)return i=Kt(Pa(i,e,n),{status:"stopped"}),c(i,e,[]),{snapshot:i,microstates:o};let u=e;if(u.type!==Yc){const d=u,_=e_(d),h=Ba(d,i);if(_&&!h.length)return i=Kt(t,{status:"error",error:d.error}),c(i,d,[]),{snapshot:i,microstates:o};i=Ei(h,t,n,u,!1,r),c(i,d,h)}let f=!0;for(;i.status==="active";){let d=f?O_(i,u):[];const _=d.length?i:void 0;if(!d.length){if(!r.length)break;u=r.shift(),d=Ba(u,i)}i=Ei(d,i,n,u,!1,r),f=i!==_,c(i,u,d)}return i.status!=="active"&&Pa(i,u,n),{snapshot:i,microstates:o}}function Pa(t,e,n){return kn(t,e,n,Object.values(t.children).map(r=>nu(r)),[],void 0)}function Ba(t,e){return e.machine.getTransitionData(e,t)}function O_(t,e){const n=new Set,r=t._nodes.filter(Gi);for(const i of r)e:for(const o of[i].concat(er(i,void 0)))if(o.always){for(const c of o.always)if(c.guard===void 0||qi(c.guard,t.context,e,t)){n.add(c);break e}}return cu(Array.from(n),new Set(t._nodes),t.historyValue)}function R_(t,e){const n=Br($r(t,e));return iu(t,[...n])}function M_(t){return!!t&&typeof t=="object"&&"machine"in t&&"value"in t}const j_=function(e){return Zc(e,this.value)},D_=function(e){return this.tags.has(e)},U_=function(e){const n=this.machine.getTransitionData(this,e);return!!n?.length&&n.some(r=>r.target!==void 0||r.actions.length)},H_=function(){const{_nodes:e,tags:n,machine:r,getMeta:i,toJSON:o,can:c,hasTag:u,matches:f,...d}=this;return{...d,tags:Array.from(n)}},P_=function(){return this._nodes.reduce((e,n)=>(n.meta!==void 0&&(e[n.id]=n.meta),e),{})};function Er(t,e){return{status:t.status,output:t.output,error:t.error,machine:e,context:t.context,_nodes:t._nodes,value:iu(e.root,t._nodes),tags:new Set(t._nodes.flatMap(n=>n.tags)),children:t.children,historyValue:t.historyValue||{},matches:j_,hasTag:D_,can:U_,getMeta:P_,toJSON:H_}}function Kt(t,e={}){return Er({...t,...e},t.machine)}function B_(t){if(typeof t!="object"||t===null)return{};const e={};for(const n in t){const r=t[n];Array.isArray(r)&&(e[n]=r.map(i=>({id:i.id})))}return e}function L_(t,e){const{_nodes:n,tags:r,machine:i,children:o,context:c,can:u,hasTag:f,matches:d,getMeta:_,toJSON:h,...g}=t,y={};for(const v in o){const A=o[v];y[v]={snapshot:A.getPersistedSnapshot(e),src:A.src,systemId:A._systemId,syncSnapshot:A._syncSnapshot}}return{...g,context:du(c),children:y,historyValue:B_(g.historyValue)}}function du(t){let e;for(const n in t){const r=t[n];if(r&&typeof r=="object")if("sessionId"in r&&"send"in r&&"ref"in r)e??=Array.isArray(t)?t.slice():{...t},e[n]={xstate$$type:Wi,id:r.id};else{const i=du(r);i!==r&&(e??=Array.isArray(t)?t.slice():{...t},e[n]=i)}}return e??t}function $_(t,e,n,r,{event:i,id:o,delay:c},{internalQueue:u}){const f=e.machine.implementations.delays;if(typeof i=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${i}" }) instead`);const d=typeof i=="function"?i(n,r):i;let _;if(typeof c=="string"){const h=f&&f[c];_=typeof h=="function"?h(n,r):h}else _=typeof c=="function"?c(n,r):c;return typeof _!="number"&&u.push(d),[e,{event:d,id:o,delay:_},void 0]}function F_(t,e){const{event:n,delay:r,id:i}=e;if(typeof r=="number"){t.defer(()=>{const o=t.self;t.system.scheduler.schedule(o,o,n,r,i)});return}}function N_(t,e){function n(r,i){}return n.type="xstate.raise",n.event=t,n.id=e?.id,n.delay=e?.delay,n.resolve=$_,n.execute=F_,n}function z_(t,{machine:e,context:n},r,i){const o=(c,u)=>{if(typeof c=="string"){const f=Vi(e,c);if(!f)throw new Error(`Actor logic '${c}' not implemented in machine '${e.id}'`);const d=Wn(f,{id:u?.id,parent:t.self,syncSnapshot:u?.syncSnapshot,input:typeof u?.input=="function"?u.input({context:n,event:r,self:t.self}):u?.input,src:c,systemId:u?.systemId});return i[d.id]=d,d}else return Wn(c,{id:u?.id,parent:t.self,syncSnapshot:u?.syncSnapshot,input:u?.input,src:c,systemId:u?.systemId})};return(c,u)=>{const f=o(c,u);return i[f.id]=f,t.defer(()=>{f._processingStatus!==Le.Stopped&&f.start()}),f}}function V_(t,e,n,r,{assignment:i}){if(!e.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const o={},c={context:e.context,event:n.event,spawn:z_(t,e,n.event,o),self:t.self,system:t.system};let u={};if(typeof i=="function")u=i(c,r);else for(const d of Object.keys(i)){const _=i[d];u[d]=typeof _=="function"?_(c,r):_}const f=Object.assign({},e.context,u);return[Kt(e,{context:f,children:Object.keys(o).length?{...e.children,...o}:e.children}),void 0,void 0]}function Pn(t){function e(n,r){}return e.type="xstate.assign",e.assignment=t,e.resolve=V_,e}const La=new WeakMap;function _n(t,e,n){let r=La.get(t);return r?e in r||(r[e]=n()):(r={[e]:n()},La.set(t,r)),r[e]}const W_={},Dn=t=>typeof t=="string"?{type:t}:typeof t=="function"?"resolve"in t?{type:t.type}:{type:t.name}:t;class Fr{constructor(e,n){if(this.config=e,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=n._parent,this.key=n._key,this.machine=n._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(Jc),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?ja(this.config.states,(r,i)=>new Fr(r,{_parent:this,_key:i,_machine:this.machine})):W_,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=xt(this.config.entry).slice(),this.exit=xt(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=xt(e.tags).slice()}_initialize(){this.transitions=__(this),this.config.always&&(this.always=bn(this.config.always).map(e=>zt(this,Kc,e))),Object.keys(this.states).forEach(e=>{this.states[e]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(Dn),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(e=>`#${e.id}`),source:`#${this.id}`,actions:this.initial.actions.map(Dn),eventType:null})}:void 0,history:this.history,states:ja(this.states,e=>e.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(e=>({...e,actions:e.actions.map(Dn)})),entry:this.entry.map(Dn),exit:this.exit.map(Dn),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return _n(this,"invoke",()=>xt(this.config.invoke).map((e,n)=>{const{src:r,systemId:i}=e,o=e.id??Da(this.id,n),c=typeof r=="string"?r:`xstate.invoke.${Da(this.id,n)}`;return{...e,src:c,id:o,systemId:i,toJSON(){const{onDone:u,onError:f,...d}=e;return{...d,type:"xstate.invoke",src:c,id:o}}}}))}get on(){return _n(this,"on",()=>[...this.transitions].flatMap(([n,r])=>r.map(i=>[n,i])).reduce((n,[r,i])=>(n[r]=n[r]||[],n[r].push(i),n),{}))}get after(){return _n(this,"delayedTransitions",()=>g_(this))}get initial(){return _n(this,"initial",()=>p_(this,this.config.initial))}next(e,n){const r=n.type,i=[];let o;const c=_n(this,`candidates-${r}`,()=>h_(this,r));for(const u of c){const{guard:f}=u,d=e.context;let _=!1;try{_=!f||qi(f,d,n,e)}catch(h){const g=typeof f=="string"?f:typeof f=="object"?f.type:void 0;throw new Error(`Unable to evaluate guard ${g?`'${g}' `:""}in transition for event '${r}' in state node '${this.id}':
${h.message}`)}if(_){i.push(...u.actions),o=u;break}}return o?[o]:void 0}get events(){return _n(this,"events",()=>{const{states:e}=this,n=new Set(this.ownEvents);if(e)for(const r of Object.keys(e)){const i=e[r];if(i.states)for(const o of i.events)n.add(`${o}`)}return Array.from(n)})}get ownEvents(){const e=new Set([...this.transitions.keys()].filter(n=>this.transitions.get(n).some(r=>!(!r.target&&!r.actions.length&&!r.reenter))));return Array.from(e)}}const q_="#";class Xi{constructor(e,n){this.config=e,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=e.id||"(machine)",this.implementations={actors:n?.actors??{},actions:n?.actions??{},delays:n?.delays??{},guards:n?.guards??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new Fr(e,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(e){const{actions:n,guards:r,actors:i,delays:o}=this.implementations;return new Xi(this.config,{actions:{...n,...e.actions},guards:{...r,...e.guards},actors:{...i,...e.actors},delays:{...o,...e.delays}})}resolveState(e){const n=R_(this.root,e.value),r=Br($r(this.root,n));return Er({_nodes:[...r],context:e.context||{},children:{},status:Ji(r,this.root)?"done":e.status||"active",output:e.output,error:e.error,historyValue:e.historyValue},this)}transition(e,n,r){return ti(e,n,r,[]).snapshot}microstep(e,n,r){return ti(e,n,r,[]).microstates}getTransitionData(e,n){return Ki(this.root,e.value,e,n)||[]}getPreInitialState(e,n,r){const{context:i}=this.config,o=Er({context:typeof i!="function"&&i?i:{},_nodes:[this.root],children:{},status:"active"},this);return typeof i=="function"?kn(o,n,e,[Pn(({spawn:u,event:f,self:d})=>i({spawn:u,input:f.input,self:d}))],r,void 0):o}getInitialSnapshot(e,n){const r=Xc(n),i=[],o=this.getPreInitialState(e,r,i),c=Ei([{target:[...au(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],o,e,r,!0,i),{snapshot:u}=ti(c,r,e,i);return u}start(e){Object.values(e.children).forEach(n=>{n.getSnapshot().status==="active"&&n.start()})}getStateNodeById(e){const n=zi(e),r=n.slice(1),i=es(n[0])?n[0].slice(q_.length):n[0],o=this.idMap.get(i);if(!o)throw new Error(`Child state node '#${i}' does not exist on machine '${this.id}'`);return Lr(o,r)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(e,n){return L_(e,n)}restoreSnapshot(e,n){const r={},i=e.children;Object.keys(i).forEach(h=>{const g=i[h],y=g.snapshot,m=g.src,v=typeof m=="string"?Vi(this,m):m;if(!v)return;const A=Wn(v,{id:h,parent:n.self,syncSnapshot:g.syncSnapshot,snapshot:y,src:m,systemId:g.systemId});r[h]=A});function o(h,g){if(g instanceof Fr)return g;try{return h.machine.getStateNodeById(g.id)}catch{}}function c(h,g){if(!g||typeof g!="object")return{};const y={};for(const m in g){const v=g[m];for(const A of v){const N=o(h,A);N&&(y[m]??=[],y[m].push(N))}}return y}const u=c(this.root,e.historyValue),f=Er({...e,children:r,_nodes:Array.from(Br($r(this.root,e.value))),historyValue:u},this),d=new Set;function _(h,g){if(!d.has(h)){d.add(h);for(const y in h){const m=h[y];if(m&&typeof m=="object"){if("xstate$$type"in m&&m.xstate$$type===Wi){h[y]=g[m.id];continue}_(m,g)}}}}return _(f.context,r),f}}function G_(t,e){const n=xt(e);if(!n.includes(t.type)){const r=n.length===1?`type "${n[0]}"`:`one of types "${n.join('", "')}"`;throw new Error(`Expected event ${JSON.stringify(t)} to have ${r}`)}}function J_(t,e){return new Xi(t,e)}function K_({schemas:t,actors:e,actions:n,guards:r,delays:i}){return{createMachine:o=>J_({...o,schemas:t},{actors:e,actions:n,guards:r,delays:i})}}const Y_={timeout:1/0};function X_(t,e,n){const r={...Y_,...n};return new Promise((i,o)=>{const{signal:c}=r;if(c?.aborted){o(c.reason);return}let u=!1;const f=r.timeout===1/0?void 0:setTimeout(()=>{d(),o(new Error(`Timeout of ${r.timeout} ms exceeded`))},r.timeout),d=()=>{clearTimeout(f),u=!0,g?.unsubscribe(),h&&c.removeEventListener("abort",h)};function _(y){e(y)&&(d(),i(y))}let h,g;_(t.getSnapshot()),!u&&(c&&(h=()=>{d(),o(c.reason)},c.addEventListener("abort",h)),g=t.subscribe({next:_,error:y=>{d(),o(y)},complete:()=>{d(),o(new Error("Actor terminated without satisfying predicate"))}}),u&&g.unsubscribe())})}let mr;const Z_=new Uint8Array(16);function Q_(){if(!mr&&(mr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!mr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return mr(Z_)}const ep=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ts(t){return typeof t=="string"&&ep.test(t)}const je=[];for(let t=0;t<256;++t)je.push((t+256).toString(16).slice(1));function hu(t,e=0){return je[t[e+0]]+je[t[e+1]]+je[t[e+2]]+je[t[e+3]]+"-"+je[t[e+4]]+je[t[e+5]]+"-"+je[t[e+6]]+je[t[e+7]]+"-"+je[t[e+8]]+je[t[e+9]]+"-"+je[t[e+10]]+je[t[e+11]]+je[t[e+12]]+je[t[e+13]]+je[t[e+14]]+je[t[e+15]]}function tp(t,e=0){const n=hu(t,e);if(!ts(n))throw TypeError("Stringified UUID is invalid");return n}function np(t){if(!ts(t))throw TypeError("Invalid UUID");let e;const n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}const rp=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),$a={randomUUID:rp};function gu(t,e,n){if($a.randomUUID&&!e&&!t)return $a.randomUUID();t=t||{};const r=t.random||(t.rng||Q_)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return hu(r)}var rt={},pe={},De={},ni={},Un={},Fa;function sp(){return Fa||(Fa=1,Object.defineProperty(Un,"__esModule",{value:!0}),Un.crypto=void 0,Un.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),Un}var Na;function _u(){return Na||(Na=1,function(t){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.Hash=t.nextTick=t.swap32IfBE=t.byteSwapIfBE=t.swap8IfBE=t.isLE=void 0,t.isBytes=n,t.anumber=r,t.abytes=i,t.ahash=o,t.aexists=c,t.aoutput=u,t.u8=f,t.u32=d,t.clean=_,t.createView=h,t.rotr=g,t.rotl=y,t.byteSwap=m,t.byteSwap32=v,t.bytesToHex=H,t.hexToBytes=q,t.asyncLoop=te,t.utf8ToBytes=X,t.bytesToUtf8=$,t.toBytes=z,t.kdfInputToBytes=K,t.concatBytes=se,t.checkOpts=S,t.createHasher=U,t.createOptHasher=B,t.createXOFer=D,t.randomBytes=Q;const e=sp();function n(k){return k instanceof Uint8Array||ArrayBuffer.isView(k)&&k.constructor.name==="Uint8Array"}function r(k){if(!Number.isSafeInteger(k)||k<0)throw new Error("positive integer expected, got "+k)}function i(k,...F){if(!n(k))throw new Error("Uint8Array expected");if(F.length>0&&!F.includes(k.length))throw new Error("Uint8Array expected of length "+F+", got length="+k.length)}function o(k){if(typeof k!="function"||typeof k.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");r(k.outputLen),r(k.blockLen)}function c(k,F=!0){if(k.destroyed)throw new Error("Hash instance has been destroyed");if(F&&k.finished)throw new Error("Hash#digest() has already been called")}function u(k,F){i(k);const w=F.outputLen;if(k.length<w)throw new Error("digestInto() expects output buffer of length at least "+w)}function f(k){return new Uint8Array(k.buffer,k.byteOffset,k.byteLength)}function d(k){return new Uint32Array(k.buffer,k.byteOffset,Math.floor(k.byteLength/4))}function _(...k){for(let F=0;F<k.length;F++)k[F].fill(0)}function h(k){return new DataView(k.buffer,k.byteOffset,k.byteLength)}function g(k,F){return k<<32-F|k>>>F}function y(k,F){return k<<F|k>>>32-F>>>0}t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function m(k){return k<<24&4278190080|k<<8&16711680|k>>>8&65280|k>>>24&255}t.swap8IfBE=t.isLE?k=>k:k=>m(k),t.byteSwapIfBE=t.swap8IfBE;function v(k){for(let F=0;F<k.length;F++)k[F]=m(k[F]);return k}t.swap32IfBE=t.isLE?k=>k:v;const A=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",N=Array.from({length:256},(k,F)=>F.toString(16).padStart(2,"0"));function H(k){if(i(k),A)return k.toHex();let F="";for(let w=0;w<k.length;w++)F+=N[k[w]];return F}const C={_0:48,_9:57,A:65,F:70,a:97,f:102};function Z(k){if(k>=C._0&&k<=C._9)return k-C._0;if(k>=C.A&&k<=C.F)return k-(C.A-10);if(k>=C.a&&k<=C.f)return k-(C.a-10)}function q(k){if(typeof k!="string")throw new Error("hex string expected, got "+typeof k);if(A)return Uint8Array.fromHex(k);const F=k.length,w=F/2;if(F%2)throw new Error("hex string expected, got unpadded hex of length "+F);const R=new Uint8Array(w);for(let W=0,ie=0;W<w;W++,ie+=2){const ue=Z(k.charCodeAt(ie)),le=Z(k.charCodeAt(ie+1));if(ue===void 0||le===void 0){const de=k[ie]+k[ie+1];throw new Error('hex string expected, got non-hex character "'+de+'" at index '+ie)}R[W]=ue*16+le}return R}const J=async()=>{};t.nextTick=J;async function te(k,F,w){let R=Date.now();for(let W=0;W<k;W++){w(W);const ie=Date.now()-R;ie>=0&&ie<F||(await(0,t.nextTick)(),R+=ie)}}function X(k){if(typeof k!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(k))}function $(k){return new TextDecoder().decode(k)}function z(k){return typeof k=="string"&&(k=X(k)),i(k),k}function K(k){return typeof k=="string"&&(k=X(k)),i(k),k}function se(...k){let F=0;for(let R=0;R<k.length;R++){const W=k[R];i(W),F+=W.length}const w=new Uint8Array(F);for(let R=0,W=0;R<k.length;R++){const ie=k[R];w.set(ie,W),W+=ie.length}return w}function S(k,F){if(F!==void 0&&{}.toString.call(F)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(k,F)}class V{}t.Hash=V;function U(k){const F=R=>k().update(z(R)).digest(),w=k();return F.outputLen=w.outputLen,F.blockLen=w.blockLen,F.create=()=>k(),F}function B(k){const F=(R,W)=>k(W).update(z(R)).digest(),w=k({});return F.outputLen=w.outputLen,F.blockLen=w.blockLen,F.create=R=>k(R),F}function D(k){const F=(R,W)=>k(W).update(z(R)).digest(),w=k({});return F.outputLen=w.outputLen,F.blockLen=w.blockLen,F.create=R=>k(R),F}t.wrapConstructor=U,t.wrapConstructorWithOpts=B,t.wrapXOFConstructorWithOpts=D;function Q(k=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(k));if(e.crypto&&typeof e.crypto.randomBytes=="function")return Uint8Array.from(e.crypto.randomBytes(k));throw new Error("crypto.getRandomValues must be defined")}}(ni)),ni}var za;function ip(){if(za)return De;za=1,Object.defineProperty(De,"__esModule",{value:!0}),De.SHA512_IV=De.SHA384_IV=De.SHA224_IV=De.SHA256_IV=De.HashMD=void 0,De.setBigUint64=e,De.Chi=n,De.Maj=r;const t=_u();function e(o,c,u,f){if(typeof o.setBigUint64=="function")return o.setBigUint64(c,u,f);const d=BigInt(32),_=BigInt(4294967295),h=Number(u>>d&_),g=Number(u&_),y=f?4:0,m=f?0:4;o.setUint32(c+y,h,f),o.setUint32(c+m,g,f)}function n(o,c,u){return o&c^~o&u}function r(o,c,u){return o&c^o&u^c&u}class i extends t.Hash{constructor(c,u,f,d){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=c,this.outputLen=u,this.padOffset=f,this.isLE=d,this.buffer=new Uint8Array(c),this.view=(0,t.createView)(this.buffer)}update(c){(0,t.aexists)(this),c=(0,t.toBytes)(c),(0,t.abytes)(c);const{view:u,buffer:f,blockLen:d}=this,_=c.length;for(let h=0;h<_;){const g=Math.min(d-this.pos,_-h);if(g===d){const y=(0,t.createView)(c);for(;d<=_-h;h+=d)this.process(y,h);continue}f.set(c.subarray(h,h+g),this.pos),this.pos+=g,h+=g,this.pos===d&&(this.process(u,0),this.pos=0)}return this.length+=c.length,this.roundClean(),this}digestInto(c){(0,t.aexists)(this),(0,t.aoutput)(c,this),this.finished=!0;const{buffer:u,view:f,blockLen:d,isLE:_}=this;let{pos:h}=this;u[h++]=128,(0,t.clean)(this.buffer.subarray(h)),this.padOffset>d-h&&(this.process(f,0),h=0);for(let A=h;A<d;A++)u[A]=0;e(f,d-8,BigInt(this.length*8),_),this.process(f,0);const g=(0,t.createView)(c),y=this.outputLen;if(y%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const m=y/4,v=this.get();if(m>v.length)throw new Error("_sha2: outputLen bigger than state");for(let A=0;A<m;A++)g.setUint32(4*A,v[A],_)}digest(){const{buffer:c,outputLen:u}=this;this.digestInto(c);const f=c.slice(0,u);return this.destroy(),f}_cloneInto(c){c||(c=new this.constructor),c.set(...this.get());const{blockLen:u,buffer:f,length:d,finished:_,destroyed:h,pos:g}=this;return c.destroyed=h,c.finished=_,c.length=d,c.pos=g,d%u&&c.buffer.set(f),c}clone(){return this._cloneInto()}}return De.HashMD=i,De.SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),De.SHA224_IV=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),De.SHA384_IV=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),De.SHA512_IV=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),De}var oe={},Va;function op(){if(Va)return oe;Va=1,Object.defineProperty(oe,"__esModule",{value:!0}),oe.toBig=oe.shrSL=oe.shrSH=oe.rotrSL=oe.rotrSH=oe.rotrBL=oe.rotrBH=oe.rotr32L=oe.rotr32H=oe.rotlSL=oe.rotlSH=oe.rotlBL=oe.rotlBH=oe.add5L=oe.add5H=oe.add4L=oe.add4H=oe.add3L=oe.add3H=void 0,oe.add=N,oe.fromBig=n,oe.split=r;const t=BigInt(2**32-1),e=BigInt(32);function n($,z=!1){return z?{h:Number($&t),l:Number($>>e&t)}:{h:Number($>>e&t)|0,l:Number($&t)|0}}function r($,z=!1){const K=$.length;let se=new Uint32Array(K),S=new Uint32Array(K);for(let V=0;V<K;V++){const{h:U,l:B}=n($[V],z);[se[V],S[V]]=[U,B]}return[se,S]}const i=($,z)=>BigInt($>>>0)<<e|BigInt(z>>>0);oe.toBig=i;const o=($,z,K)=>$>>>K;oe.shrSH=o;const c=($,z,K)=>$<<32-K|z>>>K;oe.shrSL=c;const u=($,z,K)=>$>>>K|z<<32-K;oe.rotrSH=u;const f=($,z,K)=>$<<32-K|z>>>K;oe.rotrSL=f;const d=($,z,K)=>$<<64-K|z>>>K-32;oe.rotrBH=d;const _=($,z,K)=>$>>>K-32|z<<64-K;oe.rotrBL=_;const h=($,z)=>z;oe.rotr32H=h;const g=($,z)=>$;oe.rotr32L=g;const y=($,z,K)=>$<<K|z>>>32-K;oe.rotlSH=y;const m=($,z,K)=>z<<K|$>>>32-K;oe.rotlSL=m;const v=($,z,K)=>z<<K-32|$>>>64-K;oe.rotlBH=v;const A=($,z,K)=>$<<K-32|z>>>64-K;oe.rotlBL=A;function N($,z,K,se){const S=(z>>>0)+(se>>>0);return{h:$+K+(S/2**32|0)|0,l:S|0}}const H=($,z,K)=>($>>>0)+(z>>>0)+(K>>>0);oe.add3L=H;const C=($,z,K,se)=>z+K+se+($/2**32|0)|0;oe.add3H=C;const Z=($,z,K,se)=>($>>>0)+(z>>>0)+(K>>>0)+(se>>>0);oe.add4L=Z;const q=($,z,K,se,S)=>z+K+se+S+($/2**32|0)|0;oe.add4H=q;const J=($,z,K,se,S)=>($>>>0)+(z>>>0)+(K>>>0)+(se>>>0)+(S>>>0);oe.add5L=J;const te=($,z,K,se,S,V)=>z+K+se+S+V+($/2**32|0)|0;oe.add5H=te;const X={fromBig:n,split:r,toBig:i,shrSH:o,shrSL:c,rotrSH:u,rotrSL:f,rotrBH:d,rotrBL:_,rotr32H:h,rotr32L:g,rotlSH:y,rotlSL:m,rotlBH:v,rotlBL:A,add:N,add3L:H,add3H:C,add4L:Z,add4H:q,add5H:te,add5L:J};return oe.default=X,oe}var Wa;function ap(){if(Wa)return pe;Wa=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.sha512_224=pe.sha512_256=pe.sha384=pe.sha512=pe.sha224=pe.sha256=pe.SHA512_256=pe.SHA512_224=pe.SHA384=pe.SHA512=pe.SHA224=pe.SHA256=void 0;const t=ip(),e=op(),n=_u(),r=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),i=new Uint32Array(64);class o extends t.HashMD{constructor(C=32){super(64,C,8,!1),this.A=t.SHA256_IV[0]|0,this.B=t.SHA256_IV[1]|0,this.C=t.SHA256_IV[2]|0,this.D=t.SHA256_IV[3]|0,this.E=t.SHA256_IV[4]|0,this.F=t.SHA256_IV[5]|0,this.G=t.SHA256_IV[6]|0,this.H=t.SHA256_IV[7]|0}get(){const{A:C,B:Z,C:q,D:J,E:te,F:X,G:$,H:z}=this;return[C,Z,q,J,te,X,$,z]}set(C,Z,q,J,te,X,$,z){this.A=C|0,this.B=Z|0,this.C=q|0,this.D=J|0,this.E=te|0,this.F=X|0,this.G=$|0,this.H=z|0}process(C,Z){for(let S=0;S<16;S++,Z+=4)i[S]=C.getUint32(Z,!1);for(let S=16;S<64;S++){const V=i[S-15],U=i[S-2],B=(0,n.rotr)(V,7)^(0,n.rotr)(V,18)^V>>>3,D=(0,n.rotr)(U,17)^(0,n.rotr)(U,19)^U>>>10;i[S]=D+i[S-7]+B+i[S-16]|0}let{A:q,B:J,C:te,D:X,E:$,F:z,G:K,H:se}=this;for(let S=0;S<64;S++){const V=(0,n.rotr)($,6)^(0,n.rotr)($,11)^(0,n.rotr)($,25),U=se+V+(0,t.Chi)($,z,K)+r[S]+i[S]|0,D=((0,n.rotr)(q,2)^(0,n.rotr)(q,13)^(0,n.rotr)(q,22))+(0,t.Maj)(q,J,te)|0;se=K,K=z,z=$,$=X+U|0,X=te,te=J,J=q,q=U+D|0}q=q+this.A|0,J=J+this.B|0,te=te+this.C|0,X=X+this.D|0,$=$+this.E|0,z=z+this.F|0,K=K+this.G|0,se=se+this.H|0,this.set(q,J,te,X,$,z,K,se)}roundClean(){(0,n.clean)(i)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,n.clean)(this.buffer)}}pe.SHA256=o;class c extends o{constructor(){super(28),this.A=t.SHA224_IV[0]|0,this.B=t.SHA224_IV[1]|0,this.C=t.SHA224_IV[2]|0,this.D=t.SHA224_IV[3]|0,this.E=t.SHA224_IV[4]|0,this.F=t.SHA224_IV[5]|0,this.G=t.SHA224_IV[6]|0,this.H=t.SHA224_IV[7]|0}}pe.SHA224=c;const u=e.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(H=>BigInt(H))),f=u[0],d=u[1],_=new Uint32Array(80),h=new Uint32Array(80);class g extends t.HashMD{constructor(C=64){super(128,C,16,!1),this.Ah=t.SHA512_IV[0]|0,this.Al=t.SHA512_IV[1]|0,this.Bh=t.SHA512_IV[2]|0,this.Bl=t.SHA512_IV[3]|0,this.Ch=t.SHA512_IV[4]|0,this.Cl=t.SHA512_IV[5]|0,this.Dh=t.SHA512_IV[6]|0,this.Dl=t.SHA512_IV[7]|0,this.Eh=t.SHA512_IV[8]|0,this.El=t.SHA512_IV[9]|0,this.Fh=t.SHA512_IV[10]|0,this.Fl=t.SHA512_IV[11]|0,this.Gh=t.SHA512_IV[12]|0,this.Gl=t.SHA512_IV[13]|0,this.Hh=t.SHA512_IV[14]|0,this.Hl=t.SHA512_IV[15]|0}get(){const{Ah:C,Al:Z,Bh:q,Bl:J,Ch:te,Cl:X,Dh:$,Dl:z,Eh:K,El:se,Fh:S,Fl:V,Gh:U,Gl:B,Hh:D,Hl:Q}=this;return[C,Z,q,J,te,X,$,z,K,se,S,V,U,B,D,Q]}set(C,Z,q,J,te,X,$,z,K,se,S,V,U,B,D,Q){this.Ah=C|0,this.Al=Z|0,this.Bh=q|0,this.Bl=J|0,this.Ch=te|0,this.Cl=X|0,this.Dh=$|0,this.Dl=z|0,this.Eh=K|0,this.El=se|0,this.Fh=S|0,this.Fl=V|0,this.Gh=U|0,this.Gl=B|0,this.Hh=D|0,this.Hl=Q|0}process(C,Z){for(let w=0;w<16;w++,Z+=4)_[w]=C.getUint32(Z),h[w]=C.getUint32(Z+=4);for(let w=16;w<80;w++){const R=_[w-15]|0,W=h[w-15]|0,ie=e.rotrSH(R,W,1)^e.rotrSH(R,W,8)^e.shrSH(R,W,7),ue=e.rotrSL(R,W,1)^e.rotrSL(R,W,8)^e.shrSL(R,W,7),le=_[w-2]|0,de=h[w-2]|0,ge=e.rotrSH(le,de,19)^e.rotrBH(le,de,61)^e.shrSH(le,de,6),_e=e.rotrSL(le,de,19)^e.rotrBL(le,de,61)^e.shrSL(le,de,6),Ie=e.add4L(ue,_e,h[w-7],h[w-16]),jt=e.add4H(Ie,ie,ge,_[w-7],_[w-16]);_[w]=jt|0,h[w]=Ie|0}let{Ah:q,Al:J,Bh:te,Bl:X,Ch:$,Cl:z,Dh:K,Dl:se,Eh:S,El:V,Fh:U,Fl:B,Gh:D,Gl:Q,Hh:k,Hl:F}=this;for(let w=0;w<80;w++){const R=e.rotrSH(S,V,14)^e.rotrSH(S,V,18)^e.rotrBH(S,V,41),W=e.rotrSL(S,V,14)^e.rotrSL(S,V,18)^e.rotrBL(S,V,41),ie=S&U^~S&D,ue=V&B^~V&Q,le=e.add5L(F,W,ue,d[w],h[w]),de=e.add5H(le,k,R,ie,f[w],_[w]),ge=le|0,_e=e.rotrSH(q,J,28)^e.rotrBH(q,J,34)^e.rotrBH(q,J,39),Ie=e.rotrSL(q,J,28)^e.rotrBL(q,J,34)^e.rotrBL(q,J,39),jt=q&te^q&$^te&$,nr=J&X^J&z^X&z;k=D|0,F=Q|0,D=U|0,Q=B|0,U=S|0,B=V|0,{h:S,l:V}=e.add(K|0,se|0,de|0,ge|0),K=$|0,se=z|0,$=te|0,z=X|0,te=q|0,X=J|0;const Dt=e.add3L(ge,Ie,nr);q=e.add3H(Dt,de,_e,jt),J=Dt|0}({h:q,l:J}=e.add(this.Ah|0,this.Al|0,q|0,J|0)),{h:te,l:X}=e.add(this.Bh|0,this.Bl|0,te|0,X|0),{h:$,l:z}=e.add(this.Ch|0,this.Cl|0,$|0,z|0),{h:K,l:se}=e.add(this.Dh|0,this.Dl|0,K|0,se|0),{h:S,l:V}=e.add(this.Eh|0,this.El|0,S|0,V|0),{h:U,l:B}=e.add(this.Fh|0,this.Fl|0,U|0,B|0),{h:D,l:Q}=e.add(this.Gh|0,this.Gl|0,D|0,Q|0),{h:k,l:F}=e.add(this.Hh|0,this.Hl|0,k|0,F|0),this.set(q,J,te,X,$,z,K,se,S,V,U,B,D,Q,k,F)}roundClean(){(0,n.clean)(_,h)}destroy(){(0,n.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}pe.SHA512=g;class y extends g{constructor(){super(48),this.Ah=t.SHA384_IV[0]|0,this.Al=t.SHA384_IV[1]|0,this.Bh=t.SHA384_IV[2]|0,this.Bl=t.SHA384_IV[3]|0,this.Ch=t.SHA384_IV[4]|0,this.Cl=t.SHA384_IV[5]|0,this.Dh=t.SHA384_IV[6]|0,this.Dl=t.SHA384_IV[7]|0,this.Eh=t.SHA384_IV[8]|0,this.El=t.SHA384_IV[9]|0,this.Fh=t.SHA384_IV[10]|0,this.Fl=t.SHA384_IV[11]|0,this.Gh=t.SHA384_IV[12]|0,this.Gl=t.SHA384_IV[13]|0,this.Hh=t.SHA384_IV[14]|0,this.Hl=t.SHA384_IV[15]|0}}pe.SHA384=y;const m=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),v=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class A extends g{constructor(){super(28),this.Ah=m[0]|0,this.Al=m[1]|0,this.Bh=m[2]|0,this.Bl=m[3]|0,this.Ch=m[4]|0,this.Cl=m[5]|0,this.Dh=m[6]|0,this.Dl=m[7]|0,this.Eh=m[8]|0,this.El=m[9]|0,this.Fh=m[10]|0,this.Fl=m[11]|0,this.Gh=m[12]|0,this.Gl=m[13]|0,this.Hh=m[14]|0,this.Hl=m[15]|0}}pe.SHA512_224=A;class N extends g{constructor(){super(32),this.Ah=v[0]|0,this.Al=v[1]|0,this.Bh=v[2]|0,this.Bl=v[3]|0,this.Ch=v[4]|0,this.Cl=v[5]|0,this.Dh=v[6]|0,this.Dl=v[7]|0,this.Eh=v[8]|0,this.El=v[9]|0,this.Fh=v[10]|0,this.Fl=v[11]|0,this.Gh=v[12]|0,this.Gl=v[13]|0,this.Hh=v[14]|0,this.Hl=v[15]|0}}return pe.SHA512_256=N,pe.sha256=(0,n.createHasher)(()=>new o),pe.sha224=(0,n.createHasher)(()=>new c),pe.sha512=(0,n.createHasher)(()=>new g),pe.sha384=(0,n.createHasher)(()=>new y),pe.sha512_256=(0,n.createHasher)(()=>new N),pe.sha512_224=(0,n.createHasher)(()=>new A),pe}var qa;function cp(){if(qa)return rt;qa=1,Object.defineProperty(rt,"__esModule",{value:!0}),rt.sha224=rt.SHA224=rt.sha256=rt.SHA256=void 0;const t=ap();return rt.SHA256=t.SHA256,rt.sha256=t.sha256,rt.SHA224=t.SHA224,rt.sha224=t.sha224,rt}var ri,Ga;function up(){if(Ga)return ri;Ga=1;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),c=o.charCodeAt(0);if(n[c]!==255)throw new TypeError(o+" is ambiguous");n[c]=i}var u=e.length,f=e.charAt(0),d=Math.log(u)/Math.log(256),_=Math.log(256)/Math.log(u);function h(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var v=0,A=0,N=0,H=m.length;N!==H&&m[N]===0;)N++,v++;for(var C=(H-N)*_+1>>>0,Z=new Uint8Array(C);N!==H;){for(var q=m[N],J=0,te=C-1;(q!==0||J<A)&&te!==-1;te--,J++)q+=256*Z[te]>>>0,Z[te]=q%u>>>0,q=q/u>>>0;if(q!==0)throw new Error("Non-zero carry");A=J,N++}for(var X=C-A;X!==C&&Z[X]===0;)X++;for(var $=f.repeat(v);X<C;++X)$+=e.charAt(Z[X]);return $}function g(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;for(var v=0,A=0,N=0;m[v]===f;)A++,v++;for(var H=(m.length-v)*d+1>>>0,C=new Uint8Array(H);m[v];){var Z=m.charCodeAt(v);if(Z>255)return;var q=n[Z];if(q===255)return;for(var J=0,te=H-1;(q!==0||J<N)&&te!==-1;te--,J++)q+=u*C[te]>>>0,C[te]=q%256>>>0,q=q/256>>>0;if(q!==0)throw new Error("Non-zero carry");N=J,v++}for(var X=H-N;X!==H&&C[X]===0;)X++;for(var $=new Uint8Array(A+(H-X)),z=A;X!==H;)$[z++]=C[X++];return $}function y(m){var v=g(m);if(v)return v;throw new Error("Non-base"+u+" character")}return{encode:h,decodeUnsafe:g,decode:y}}return ri=t,ri}var si,Ja;function fp(){return Ja||(Ja=1,si=up()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),si}var ii,Ka;function lp(){if(Ka)return ii;Ka=1;var t=fp();return ii=function(e){function n(c){var u=Uint8Array.from(c),f=e(u),d=u.length+4,_=new Uint8Array(d);return _.set(u,0),_.set(f.subarray(0,4),u.length),t.encode(_,d)}function r(c){var u=c.slice(0,-4),f=c.slice(-4),d=e(u);if(!(f[0]^d[0]|f[1]^d[1]|f[2]^d[2]|f[3]^d[3]))return u}function i(c){var u=t.decodeUnsafe(c);if(u)return r(u)}function o(c){var u=t.decode(c),f=r(u);if(!f)throw new Error("Invalid checksum");return f}return{encode:n,decode:o,decodeUnsafe:i}},ii}var oi,Ya;function dp(){if(Ya)return oi;Ya=1;var{sha256:t}=cp(),e=lp();function n(r){return t(t(r))}return oi=e(n),oi}var hp=dp();const Qt=Ni(hp),gp=t=>{if(t.length%2!==0)throw new Error("Hex string must have an even length");const e=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2)e[n>>1]=parseInt(t.slice(n,n+2),16);return e},pu=t=>Array.from(t,e=>e.toString(16).padStart(2,"0")).join(""),Nr="automerge:",qn=t=>{const[e,n,...r]=t.split("#");if(r.length>0)throw new Error("Invalid URL: contains multiple heads sections");const i=new RegExp(`^${Nr}(\\w+)$`),[,o]=e.match(i)||[],c=o,u=wu(c);if(!u)throw new Error("Invalid document URL: "+t);if(n===void 0)return{binaryDocumentId:u,documentId:c};const f=n===""?[]:n.split("|"),d=f.map(_=>{try{return pu(Qt.decode(_))}catch{throw new Error(`Invalid head in URL: ${_}`)}});return{binaryDocumentId:u,hexHeads:d,documentId:c,heads:f}},yu=t=>{if(t instanceof Uint8Array||typeof t=="string")return Nr+(t instanceof Uint8Array?zr(t):t);const{documentId:e,heads:n=void 0}=t;if(e===void 0)throw new Error("Invalid documentId: "+e);const r=e instanceof Uint8Array?zr(e):e;let i=`${Nr}${r}`;return n!==void 0&&(n.forEach(o=>{try{Qt.decode(o)}catch{throw new Error(`Invalid head: ${o}`)}}),i+="#"+n.join("|")),i},mu=t=>{if(typeof t!="string"||!t||!t.startsWith(Nr))return!1;try{const{documentId:e,heads:n}=qn(t);return!(!bu(e)||n&&!n.every(r=>{try{return Qt.decode(r),!0}catch{return!1}}))}catch{return!1}},bu=t=>{if(typeof t!="string")return!1;const e=wu(t);if(e===void 0)return!1;const n=tp(e);return ts(n)},_p=t=>typeof t=="string"&&ts(t),pp=()=>{const t=gu(null,new Uint8Array(16));return yu({documentId:t})},wu=t=>Qt.decodeUnsafe(t),zr=t=>Qt.encode(t),dt=t=>t.map(e=>Qt.encode(gp(e))),Ft=t=>t.map(e=>pu(Qt.decode(e))),br=t=>{if(t instanceof Uint8Array)return zr(t);if(mu(t))return qn(t).documentId;if(bu(t))return t;if(_p(t)){console.warn("Future versions will not support UUIDs as document IDs; use Automerge URLs instead.");const e=np(t);return zr(e)}throw new Error(`Invalid AutomergeUrl: '${t}'`)};let ki;try{ki=new TextDecoder}catch{}let ee,Jt,P=0;const yp=105,mp=57342,bp=57343,Xa=57337,Za=6,pn={};let Hn=11281e4,mt=1681e4,fe={},ve,Vr,Wr=0,Gn=0,Te,Ze,xe=[],Ci=[],$e,He,Bn,Qa={useRecords:!1,mapsAsObjects:!0},Jn=!1,vu=2;try{new Function("")}catch{vu=1/0}class Kn{constructor(e){if(e&&((e.keyMap||e._keyMap)&&!e.useRecords&&(e.useRecords=!1,e.mapsAsObjects=!0),e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.getStructures&&(e.getShared=e.getStructures),e.getShared&&!e.structures&&((e.structures=[]).uninitialized=!0),e.keyMap)){this.mapKey=new Map;for(let[n,r]of Object.entries(e.keyMap))this.mapKey.set(r,n)}Object.assign(this,e)}decodeKey(e){return this.keyMap&&this.mapKey.get(e)||e}encodeKey(e){return this.keyMap&&this.keyMap.hasOwnProperty(e)?this.keyMap[e]:e}encodeKeys(e){if(!this._keyMap)return e;let n=new Map;for(let[r,i]of Object.entries(e))n.set(this._keyMap.hasOwnProperty(r)?this._keyMap[r]:r,i);return n}decodeKeys(e){if(!this._keyMap||e.constructor.name!="Map")return e;if(!this._mapKey){this._mapKey=new Map;for(let[r,i]of Object.entries(this._keyMap))this._mapKey.set(i,r)}let n={};return e.forEach((r,i)=>n[Qe(this._mapKey.has(i)?this._mapKey.get(i):i)]=r),n}mapDecode(e,n){let r=this.decode(e);if(this._keyMap)switch(r.constructor.name){case"Array":return r.map(i=>this.decodeKeys(i))}return r}decode(e,n){if(ee)return Au(()=>(Mi(),this?this.decode(e,n):Kn.prototype.decode.call(Qa,e,n)));Jt=n>-1?n:e.length,P=0,Gn=0,Vr=null,Te=null,ee=e;try{He=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(r){throw ee=null,e instanceof Uint8Array?r:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof Kn){if(fe=this,$e=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues),this.structures)return ve=this.structures,wr();(!ve||ve.length>0)&&(ve=[])}else fe=Qa,(!ve||ve.length>0)&&(ve=[]),$e=null;return wr()}decodeMultiple(e,n){let r,i=0;try{let o=e.length;Jn=!0;let c=this?this.decode(e,o):eo.decode(e,o);if(n){if(n(c)===!1)return;for(;P<o;)if(i=P,n(wr())===!1)return}else{for(r=[c];P<o;)i=P,r.push(wr());return r}}catch(o){throw o.lastPosition=i,o.values=r,o}finally{Jn=!1,Mi()}}}function wr(){try{let t=he();if(Te){if(P>=Te.postBundlePosition){let e=new Error("Unexpected bundle position");throw e.incomplete=!0,e}P=Te.postBundlePosition,Te=null}if(P==Jt)ve=null,ee=null,Ze&&(Ze=null);else if(P>Jt){let e=new Error("Unexpected end of CBOR data");throw e.incomplete=!0,e}else if(!Jn)throw new Error("Data read, but end of buffer not reached");return t}catch(t){throw Mi(),(t instanceof RangeError||t.message.startsWith("Unexpected end of buffer"))&&(t.incomplete=!0),t}}function he(){let t=ee[P++],e=t>>5;if(t=t&31,t>23)switch(t){case 24:t=ee[P++];break;case 25:if(e==7)return xp();t=He.getUint16(P),P+=2;break;case 26:if(e==7){let n=He.getFloat32(P);if(fe.useFloat32>2){let r=Qi[(ee[P]&127)<<1|ee[P+1]>>7];return P+=4,(r*n+(n>0?.5:-.5)>>0)/r}return P+=4,n}t=He.getUint32(P),P+=4;break;case 27:if(e==7){let n=He.getFloat64(P);return P+=8,n}if(e>1){if(He.getUint32(P)>0)throw new Error("JavaScript does not support arrays, maps, or strings with length over 4294967295");t=He.getUint32(P+4)}else fe.int64AsNumber?(t=He.getUint32(P)*4294967296,t+=He.getUint32(P+4)):t=He.getBigUint64(P);P+=8;break;case 31:switch(e){case 2:case 3:throw new Error("Indefinite length not supported for byte or text strings");case 4:let n=[],r,i=0;for(;(r=he())!=pn;){if(i>=Hn)throw new Error(`Array length exceeds ${Hn}`);n[i++]=r}return e==4?n:e==3?n.join(""):Buffer.concat(n);case 5:let o;if(fe.mapsAsObjects){let c={},u=0;if(fe.keyMap)for(;(o=he())!=pn;){if(u++>=mt)throw new Error(`Property count exceeds ${mt}`);c[Qe(fe.decodeKey(o))]=he()}else for(;(o=he())!=pn;){if(u++>=mt)throw new Error(`Property count exceeds ${mt}`);c[Qe(o)]=he()}return c}else{Bn&&(fe.mapsAsObjects=!0,Bn=!1);let c=new Map;if(fe.keyMap){let u=0;for(;(o=he())!=pn;){if(u++>=mt)throw new Error(`Map size exceeds ${mt}`);c.set(fe.decodeKey(o),he())}}else{let u=0;for(;(o=he())!=pn;){if(u++>=mt)throw new Error(`Map size exceeds ${mt}`);c.set(o,he())}}return c}case 7:return pn;default:throw new Error("Invalid major type for indefinite length "+e)}default:throw new Error("Unknown token "+t)}switch(e){case 0:return t;case 1:return~t;case 2:return Sp(t);case 3:if(Gn>=P)return Vr.slice(P-Wr,(P+=t)-Wr);if(Gn==0&&Jt<140&&t<32){let i=t<16?Su(t):vp(t);if(i!=null)return i}return wp(t);case 4:if(t>=Hn)throw new Error(`Array length exceeds ${Hn}`);let n=new Array(t);for(let i=0;i<t;i++)n[i]=he();return n;case 5:if(t>=mt)throw new Error(`Map size exceeds ${Hn}`);if(fe.mapsAsObjects){let i={};if(fe.keyMap)for(let o=0;o<t;o++)i[Qe(fe.decodeKey(he()))]=he();else for(let o=0;o<t;o++)i[Qe(he())]=he();return i}else{Bn&&(fe.mapsAsObjects=!0,Bn=!1);let i=new Map;if(fe.keyMap)for(let o=0;o<t;o++)i.set(fe.decodeKey(he()),he());else for(let o=0;o<t;o++)i.set(he(),he());return i}case 6:if(t>=Xa){let i=ve[t&8191];if(i)return i.read||(i.read=Ti(i)),i.read();if(t<65536){if(t==bp){let o=Sn(),c=he(),u=he();Ri(c,u);let f={};if(fe.keyMap)for(let d=2;d<o;d++){let _=fe.decodeKey(u[d-2]);f[Qe(_)]=he()}else for(let d=2;d<o;d++){let _=u[d-2];f[Qe(_)]=he()}return f}else if(t==mp){let o=Sn(),c=he();for(let u=2;u<o;u++)Ri(c++,he());return he()}else if(t==Xa)return Tp();if(fe.getShared&&(Zi(),i=ve[t&8191],i))return i.read||(i.read=Ti(i)),i.read()}}let r=xe[t];if(r)return r.handlesRead?r(he):r(he());{let i=he();for(let o=0;o<Ci.length;o++){let c=Ci[o](t,i);if(c!==void 0)return c}return new Yt(i,t)}case 7:switch(t){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;case 31:default:let i=($e||Nt())[t];if(i!==void 0)return i;throw new Error("Unknown token "+t)}default:if(isNaN(t)){let i=new Error("Unexpected end of CBOR data");throw i.incomplete=!0,i}throw new Error("Unknown CBOR token "+t)}}const ec=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function Ti(t){if(!t)throw new Error("Structure is required in record definition");function e(){let n=ee[P++];if(n=n&31,n>23)switch(n){case 24:n=ee[P++];break;case 25:n=He.getUint16(P),P+=2;break;case 26:n=He.getUint32(P),P+=4;break;default:throw new Error("Expected array header, but got "+ee[P-1])}let r=this.compiledReader;for(;r;){if(r.propertyCount===n)return r(he);r=r.next}if(this.slowReads++>=vu){let o=this.length==n?this:this.slice(0,n);return r=fe.keyMap?new Function("r","return {"+o.map(c=>fe.decodeKey(c)).map(c=>ec.test(c)?Qe(c)+":r()":"["+JSON.stringify(c)+"]:r()").join(",")+"}"):new Function("r","return {"+o.map(c=>ec.test(c)?Qe(c)+":r()":"["+JSON.stringify(c)+"]:r()").join(",")+"}"),this.compiledReader&&(r.next=this.compiledReader),r.propertyCount=n,this.compiledReader=r,r(he)}let i={};if(fe.keyMap)for(let o=0;o<n;o++)i[Qe(fe.decodeKey(this[o]))]=he();else for(let o=0;o<n;o++)i[Qe(this[o])]=he();return i}return t.slowReads=0,e}function Qe(t){if(typeof t=="string")return t==="__proto__"?"__proto_":t;if(typeof t=="number"||typeof t=="boolean"||typeof t=="bigint")return t.toString();if(t==null)return t+"";throw new Error("Invalid property name type "+typeof t)}let wp=Oi;function Oi(t){let e;if(t<16&&(e=Su(t)))return e;if(t>64&&ki)return ki.decode(ee.subarray(P,P+=t));const n=P+t,r=[];for(e="";P<n;){const i=ee[P++];if((i&128)===0)r.push(i);else if((i&224)===192){const o=ee[P++]&63;r.push((i&31)<<6|o)}else if((i&240)===224){const o=ee[P++]&63,c=ee[P++]&63;r.push((i&31)<<12|o<<6|c)}else if((i&248)===240){const o=ee[P++]&63,c=ee[P++]&63,u=ee[P++]&63;let f=(i&7)<<18|o<<12|c<<6|u;f>65535&&(f-=65536,r.push(f>>>10&1023|55296),f=56320|f&1023),r.push(f)}else r.push(i);r.length>=4096&&(e+=Me.apply(String,r),r.length=0)}return r.length>0&&(e+=Me.apply(String,r)),e}let Me=String.fromCharCode;function vp(t){let e=P,n=new Array(t);for(let r=0;r<t;r++){const i=ee[P++];if((i&128)>0){P=e;return}n[r]=i}return Me.apply(String,n)}function Su(t){if(t<4)if(t<2){if(t===0)return"";{let e=ee[P++];if((e&128)>1){P-=1;return}return Me(e)}}else{let e=ee[P++],n=ee[P++];if((e&128)>0||(n&128)>0){P-=2;return}if(t<3)return Me(e,n);let r=ee[P++];if((r&128)>0){P-=3;return}return Me(e,n,r)}else{let e=ee[P++],n=ee[P++],r=ee[P++],i=ee[P++];if((e&128)>0||(n&128)>0||(r&128)>0||(i&128)>0){P-=4;return}if(t<6){if(t===4)return Me(e,n,r,i);{let o=ee[P++];if((o&128)>0){P-=5;return}return Me(e,n,r,i,o)}}else if(t<8){let o=ee[P++],c=ee[P++];if((o&128)>0||(c&128)>0){P-=6;return}if(t<7)return Me(e,n,r,i,o,c);let u=ee[P++];if((u&128)>0){P-=7;return}return Me(e,n,r,i,o,c,u)}else{let o=ee[P++],c=ee[P++],u=ee[P++],f=ee[P++];if((o&128)>0||(c&128)>0||(u&128)>0||(f&128)>0){P-=8;return}if(t<10){if(t===8)return Me(e,n,r,i,o,c,u,f);{let d=ee[P++];if((d&128)>0){P-=9;return}return Me(e,n,r,i,o,c,u,f,d)}}else if(t<12){let d=ee[P++],_=ee[P++];if((d&128)>0||(_&128)>0){P-=10;return}if(t<11)return Me(e,n,r,i,o,c,u,f,d,_);let h=ee[P++];if((h&128)>0){P-=11;return}return Me(e,n,r,i,o,c,u,f,d,_,h)}else{let d=ee[P++],_=ee[P++],h=ee[P++],g=ee[P++];if((d&128)>0||(_&128)>0||(h&128)>0||(g&128)>0){P-=12;return}if(t<14){if(t===12)return Me(e,n,r,i,o,c,u,f,d,_,h,g);{let y=ee[P++];if((y&128)>0){P-=13;return}return Me(e,n,r,i,o,c,u,f,d,_,h,g,y)}}else{let y=ee[P++],m=ee[P++];if((y&128)>0||(m&128)>0){P-=14;return}if(t<15)return Me(e,n,r,i,o,c,u,f,d,_,h,g,y,m);let v=ee[P++];if((v&128)>0){P-=15;return}return Me(e,n,r,i,o,c,u,f,d,_,h,g,y,m,v)}}}}}function Sp(t){return fe.copyBuffers?Uint8Array.prototype.slice.call(ee,P,P+=t):ee.subarray(P,P+=t)}let xu=new Float32Array(1),vr=new Uint8Array(xu.buffer,0,4);function xp(){let t=ee[P++],e=ee[P++],n=(t&127)>>2;if(n===31)return e||t&3?NaN:t&128?-1/0:1/0;if(n===0){let r=((t&3)<<8|e)/16777216;return t&128?-r:r}return vr[3]=t&128|(n>>1)+56,vr[2]=(t&7)<<5|e>>3,vr[1]=e<<5,vr[0]=0,xu[0]}new Array(4096);class Yt{constructor(e,n){this.value=e,this.tag=n}}xe[0]=t=>new Date(t);xe[1]=t=>new Date(Math.round(t*1e3));xe[2]=t=>{let e=BigInt(0);for(let n=0,r=t.byteLength;n<r;n++)e=BigInt(t[n])+(e<<BigInt(8));return e};xe[3]=t=>BigInt(-1)-xe[2](t);xe[4]=t=>+(t[1]+"e"+t[0]);xe[5]=t=>t[1]*Math.exp(t[0]*Math.log(2));const Ri=(t,e)=>{t=t-57344;let n=ve[t];n&&n.isShared&&((ve.restoreStructures||(ve.restoreStructures=[]))[t]=n),ve[t]=e,e.read=Ti(e)};xe[yp]=t=>{let e=t.length,n=t[1];Ri(t[0],n);let r={};for(let i=2;i<e;i++){let o=n[i-2];r[Qe(o)]=t[i]}return r};xe[14]=t=>Te?Te[0].slice(Te.position0,Te.position0+=t):new Yt(t,14);xe[15]=t=>Te?Te[1].slice(Te.position1,Te.position1+=t):new Yt(t,15);let Ip={Error,RegExp};xe[27]=t=>(Ip[t[0]]||Error)(t[1],t[2]);const Iu=t=>{if(ee[P++]!=132){let n=new Error("Packed values structure must be followed by a 4 element array");throw ee.length<P&&(n.incomplete=!0),n}let e=t();if(!e||!e.length){let n=new Error("Packed values structure must be followed by a 4 element array");throw n.incomplete=!0,n}return $e=$e?e.concat($e.slice(e.length)):e,$e.prefixes=t(),$e.suffixes=t(),t()};Iu.handlesRead=!0;xe[51]=Iu;xe[Za]=t=>{if(!$e)if(fe.getShared)Zi();else return new Yt(t,Za);if(typeof t=="number")return $e[16+(t>=0?2*t:-2*t-1)];let e=new Error("No support for non-integer packed references yet");throw t===void 0&&(e.incomplete=!0),e};xe[28]=t=>{Ze||(Ze=new Map,Ze.id=0);let e=Ze.id++,n=P,r=ee[P],i;r>>5==4?i=[]:i={};let o={target:i};Ze.set(e,o);let c=t();return o.used?(Object.getPrototypeOf(i)!==Object.getPrototypeOf(c)&&(P=n,i=c,Ze.set(e,{target:i}),c=t()),Object.assign(i,c)):(o.target=c,c)};xe[28].handlesRead=!0;xe[29]=t=>{let e=Ze.get(t);return e.used=!0,e.target};xe[258]=t=>new Set(t);(xe[259]=t=>(fe.mapsAsObjects&&(fe.mapsAsObjects=!1,Bn=!0),t())).handlesRead=!0;function yn(t,e){return typeof t=="string"?t+e:t instanceof Array?t.concat(e):Object.assign({},t,e)}function Nt(){if(!$e)if(fe.getShared)Zi();else throw new Error("No packed values available");return $e}const Ap=1399353956;Ci.push((t,e)=>{if(t>=225&&t<=255)return yn(Nt().prefixes[t-224],e);if(t>=28704&&t<=32767)return yn(Nt().prefixes[t-28672],e);if(t>=1879052288&&t<=2147483647)return yn(Nt().prefixes[t-1879048192],e);if(t>=216&&t<=223)return yn(e,Nt().suffixes[t-216]);if(t>=27647&&t<=28671)return yn(e,Nt().suffixes[t-27639]);if(t>=1811940352&&t<=1879048191)return yn(e,Nt().suffixes[t-1811939328]);if(t==Ap)return{packedValues:$e,structures:ve.slice(0),version:e};if(t==55799)return e});const Ep=new Uint8Array(new Uint16Array([1]).buffer)[0]==1,tc=[Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?{name:"BigUint64Array"}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?{name:"BigInt64Array"}:BigInt64Array,Float32Array,Float64Array],kp=[64,68,69,70,71,72,77,78,79,85,86];for(let t=0;t<tc.length;t++)Cp(tc[t],kp[t]);function Cp(t,e){let n="get"+t.name.slice(0,-5),r;typeof t=="function"?r=t.BYTES_PER_ELEMENT:t=null;for(let i=0;i<2;i++){if(!i&&r==1)continue;let o=r==2?1:r==4?2:r==8?3:0;xe[i?e:e-4]=r==1||i==Ep?c=>{if(!t)throw new Error("Could not find typed array for code "+e);return!fe.copyBuffers&&(r===1||r===2&&!(c.byteOffset&1)||r===4&&!(c.byteOffset&3)||r===8&&!(c.byteOffset&7))?new t(c.buffer,c.byteOffset,c.byteLength>>o):new t(Uint8Array.prototype.slice.call(c,0).buffer)}:c=>{if(!t)throw new Error("Could not find typed array for code "+e);let u=new DataView(c.buffer,c.byteOffset,c.byteLength),f=c.length>>o,d=new t(f),_=u[n];for(let h=0;h<f;h++)d[h]=_.call(u,h<<o,i);return d}}}function Tp(){let t=Sn(),e=P+he();for(let r=2;r<t;r++){let i=Sn();P+=i}let n=P;return P=e,Te=[Oi(Sn()),Oi(Sn())],Te.position0=0,Te.position1=0,Te.postBundlePosition=P,P=n,he()}function Sn(){let t=ee[P++]&31;if(t>23)switch(t){case 24:t=ee[P++];break;case 25:t=He.getUint16(P),P+=2;break;case 26:t=He.getUint32(P),P+=4;break}return t}function Zi(){if(fe.getShared){let t=Au(()=>(ee=null,fe.getShared()))||{},e=t.structures||[];fe.sharedVersion=t.version,$e=fe.sharedValues=t.packedValues,ve===!0?fe.structures=ve=e:ve.splice.apply(ve,[0,e.length].concat(e))}}function Au(t){let e=Jt,n=P,r=Wr,i=Gn,o=Vr,c=Ze,u=Te,f=new Uint8Array(ee.slice(0,Jt)),d=ve,_=fe,h=Jn,g=t();return Jt=e,P=n,Wr=r,Gn=i,Vr=o,Ze=c,Te=u,ee=f,Jn=h,ve=d,fe=_,He=new DataView(ee.buffer,ee.byteOffset,ee.byteLength),g}function Mi(){ee=null,Ze=null,ve=null}const Qi=new Array(147);for(let t=0;t<256;t++)Qi[t]=+("1e"+Math.floor(45.15-t*.30103));let eo=new Kn({useRecords:!1});const Eu=eo.decode;eo.decodeMultiple;let kr;try{kr=new TextEncoder}catch{}let ji,ku;const ns=typeof globalThis=="object"&&globalThis.Buffer,tr=typeof ns<"u",ai=tr?ns.allocUnsafeSlow:Uint8Array,nc=tr?ns:Uint8Array,rc=256,sc=tr?4294967296:2144337920;let ci,T,be,x=0,Ot,ke=null;const Op=61440,Rp=/[\u0080-\uFFFF]/,Ve=Symbol("record-id");class Cu extends Kn{constructor(e){super(e),this.offset=0;let n,r,i,o,c;e=e||{};let u=nc.prototype.utf8Write?function(S,V,U){return T.utf8Write(S,V,U)}:kr&&kr.encodeInto?function(S,V){return kr.encodeInto(S,T.subarray(V)).written}:!1,f=this,d=e.structures||e.saveStructures,_=e.maxSharedStructures;if(_==null&&(_=d?128:0),_>8190)throw new Error("Maximum maxSharedStructure is 8190");let h=e.sequential;h&&(_=0),this.structures||(this.structures=[]),this.saveStructures&&(this.saveShared=this.saveStructures);let g,y,m=e.sharedValues,v;if(m){v=Object.create(null);for(let S=0,V=m.length;S<V;S++)v[m[S]]=S}let A=[],N=0,H=0;this.mapEncode=function(S,V){if(this._keyMap&&!this._mapped)switch(S.constructor.name){case"Array":S=S.map(U=>this.encodeKeys(U));break}return this.encode(S,V)},this.encode=function(S,V){if(T||(T=new ai(8192),be=new DataView(T.buffer,0,8192),x=0),Ot=T.length-10,Ot-x<2048?(T=new ai(T.length),be=new DataView(T.buffer,0,T.length),Ot=T.length-10,x=0):V===ac&&(x=x+7&2147483640),n=x,f.useSelfDescribedHeader&&(be.setUint32(x,3654940416),x+=3),c=f.structuredClone?new Map:null,f.bundleStrings&&typeof S!="string"?(ke=[],ke.size=1/0):ke=null,r=f.structures,r){if(r.uninitialized){let B=f.getShared()||{};f.structures=r=B.structures||[],f.sharedVersion=B.version;let D=f.sharedValues=B.packedValues;if(D){v={};for(let Q=0,k=D.length;Q<k;Q++)v[D[Q]]=Q}}let U=r.length;if(U>_&&!h&&(U=_),!r.transitions){r.transitions=Object.create(null);for(let B=0;B<U;B++){let D=r[B];if(!D)continue;let Q,k=r.transitions;for(let F=0,w=D.length;F<w;F++){k[Ve]===void 0&&(k[Ve]=B);let R=D[F];Q=k[R],Q||(Q=k[R]=Object.create(null)),k=Q}k[Ve]=B|1048576}}h||(r.nextId=U)}if(i&&(i=!1),o=r||[],y=v,e.pack){let U=new Map;if(U.values=[],U.encoder=f,U.maxValues=e.maxPrivatePackedValues||(v?16:1/0),U.objectMap=v||!1,U.samplingPackedValues=g,Cr(S,U),U.values.length>0){T[x++]=216,T[x++]=51,ct(4);let B=U.values;C(B),ct(0),ct(0),y=Object.create(v||null);for(let D=0,Q=B.length;D<Q;D++)y[B[D]]=D}}ci=V&fi;try{if(ci)return;if(C(S),ke&&oc(n,C),f.offset=x,c&&c.idsToInsert){x+=c.idsToInsert.length*2,x>Ot&&q(x),f.offset=x;let U=Dp(T.subarray(n,x),c.idsToInsert);return c=null,U}return V&ac?(T.start=n,T.end=x,T):T.subarray(n,x)}finally{if(r){if(H<10&&H++,r.length>_&&(r.length=_),N>1e4)r.transitions=null,H=0,N=0,A.length>0&&(A=[]);else if(A.length>0&&!h){for(let U=0,B=A.length;U<B;U++)A[U][Ve]=void 0;A=[]}}if(i&&f.saveShared){f.structures.length>_&&(f.structures=f.structures.slice(0,_));let U=T.subarray(n,x);return f.updateSharedData()===!1?f.encode(S):U}V&Up&&(x=n)}},this.findCommonStringsToPack=()=>(g=new Map,v||(v=Object.create(null)),S=>{let V=S&&S.threshold||4,U=this.pack?S.maxPrivatePackedValues||16:0;m||(m=this.sharedValues=[]);for(let[B,D]of g)D.count>V&&(v[B]=U++,m.push(B),i=!0);for(;this.saveShared&&this.updateSharedData()===!1;);g=null});const C=S=>{x>Ot&&(T=q(x));var V=typeof S,U;if(V==="string"){if(y){let k=y[S];if(k>=0){k<16?T[x++]=k+224:(T[x++]=198,k&1?C(15-k>>1):C(k-16>>1));return}else if(g&&!e.pack){let F=g.get(S);F?F.count++:g.set(S,{count:1})}}let B=S.length;if(ke&&B>=4&&B<1024){if((ke.size+=B)>Op){let F,w=(ke[0]?ke[0].length*3+ke[1].length:0)+10;x+w>Ot&&(T=q(x+w)),T[x++]=217,T[x++]=223,T[x++]=249,T[x++]=ke.position?132:130,T[x++]=26,F=x-n,x+=4,ke.position&&oc(n,C),ke=["",""],ke.size=0,ke.position=F}let k=Rp.test(S);ke[k?0:1]+=S,T[x++]=k?206:207,C(B);return}let D;B<32?D=1:B<256?D=2:B<65536?D=3:D=5;let Q=B*3;if(x+Q>Ot&&(T=q(x+Q)),B<64||!u){let k,F,w,R=x+D;for(k=0;k<B;k++)F=S.charCodeAt(k),F<128?T[R++]=F:F<2048?(T[R++]=F>>6|192,T[R++]=F&63|128):(F&64512)===55296&&((w=S.charCodeAt(k+1))&64512)===56320?(F=65536+((F&1023)<<10)+(w&1023),k++,T[R++]=F>>18|240,T[R++]=F>>12&63|128,T[R++]=F>>6&63|128,T[R++]=F&63|128):(T[R++]=F>>12|224,T[R++]=F>>6&63|128,T[R++]=F&63|128);U=R-x-D}else U=u(S,x+D,Q);U<24?T[x++]=96|U:U<256?(D<2&&T.copyWithin(x+2,x+1,x+1+U),T[x++]=120,T[x++]=U):U<65536?(D<3&&T.copyWithin(x+3,x+2,x+2+U),T[x++]=121,T[x++]=U>>8,T[x++]=U&255):(D<5&&T.copyWithin(x+5,x+3,x+3+U),T[x++]=122,be.setUint32(x,U),x+=4),x+=U}else if(V==="number")if(!this.alwaysUseFloat&&S>>>0===S)S<24?T[x++]=S:S<256?(T[x++]=24,T[x++]=S):S<65536?(T[x++]=25,T[x++]=S>>8,T[x++]=S&255):(T[x++]=26,be.setUint32(x,S),x+=4);else if(!this.alwaysUseFloat&&S>>0===S)S>=-24?T[x++]=31-S:S>=-256?(T[x++]=56,T[x++]=~S):S>=-65536?(T[x++]=57,be.setUint16(x,~S),x+=2):(T[x++]=58,be.setUint32(x,~S),x+=4);else{let B;if((B=this.useFloat32)>0&&S<4294967296&&S>=-2147483648){T[x++]=250,be.setFloat32(x,S);let D;if(B<4||(D=S*Qi[(T[x]&127)<<1|T[x+1]>>7])>>0===D){x+=4;return}else x--}T[x++]=251,be.setFloat64(x,S),x+=8}else if(V==="object")if(!S)T[x++]=246;else{if(c){let D=c.get(S);if(D){if(T[x++]=216,T[x++]=29,T[x++]=25,!D.references){let Q=c.idsToInsert||(c.idsToInsert=[]);D.references=[],Q.push(D)}D.references.push(x-n),x+=2;return}else c.set(S,{offset:x-n})}let B=S.constructor;if(B===Object)Z(S);else if(B===Array){U=S.length,U<24?T[x++]=128|U:ct(U);for(let D=0;D<U;D++)C(S[D])}else if(B===Map)if((this.mapsAsObjects?this.useTag259ForMaps!==!1:this.useTag259ForMaps)&&(T[x++]=217,T[x++]=1,T[x++]=3),U=S.size,U<24?T[x++]=160|U:U<256?(T[x++]=184,T[x++]=U):U<65536?(T[x++]=185,T[x++]=U>>8,T[x++]=U&255):(T[x++]=186,be.setUint32(x,U),x+=4),f.keyMap)for(let[D,Q]of S)C(f.encodeKey(D)),C(Q);else for(let[D,Q]of S)C(D),C(Q);else{for(let D=0,Q=ji.length;D<Q;D++){let k=ku[D];if(S instanceof k){let F=ji[D],w=F.tag;w==null&&(w=F.getTag&&F.getTag.call(this,S)),w<24?T[x++]=192|w:w<256?(T[x++]=216,T[x++]=w):w<65536?(T[x++]=217,T[x++]=w>>8,T[x++]=w&255):w>-1&&(T[x++]=218,be.setUint32(x,w),x+=4),F.encode.call(this,S,C,q);return}}if(S[Symbol.iterator]){if(ci){let D=new Error("Iterable should be serialized as iterator");throw D.iteratorNotHandled=!0,D}T[x++]=159;for(let D of S)C(D);T[x++]=255;return}if(S[Symbol.asyncIterator]||ui(S)){let D=new Error("Iterable/blob should be serialized as iterator");throw D.iteratorNotHandled=!0,D}if(this.useToJSON&&S.toJSON){const D=S.toJSON();if(D!==S)return C(D)}Z(S)}}else if(V==="boolean")T[x++]=S?245:244;else if(V==="bigint"){if(S<BigInt(1)<<BigInt(64)&&S>=0)T[x++]=27,be.setBigUint64(x,S);else if(S>-(BigInt(1)<<BigInt(64))&&S<0)T[x++]=59,be.setBigUint64(x,-S-BigInt(1));else if(this.largeBigIntToFloat)T[x++]=251,be.setFloat64(x,Number(S));else{S>=BigInt(0)?T[x++]=194:(T[x++]=195,S=BigInt(-1)-S);let B=[];for(;S;)B.push(Number(S&BigInt(255))),S>>=BigInt(8);Di(new Uint8Array(B.reverse()),q);return}x+=8}else if(V==="undefined")T[x++]=247;else throw new Error("Unknown type: "+V)},Z=this.useRecords===!1?this.variableMapSize?S=>{let V=Object.keys(S),U=Object.values(S),B=V.length;if(B<24?T[x++]=160|B:B<256?(T[x++]=184,T[x++]=B):B<65536?(T[x++]=185,T[x++]=B>>8,T[x++]=B&255):(T[x++]=186,be.setUint32(x,B),x+=4),f.keyMap)for(let D=0;D<B;D++)C(f.encodeKey(V[D])),C(U[D]);else for(let D=0;D<B;D++)C(V[D]),C(U[D])}:S=>{T[x++]=185;let V=x-n;x+=2;let U=0;if(f.keyMap)for(let B in S)(typeof S.hasOwnProperty!="function"||S.hasOwnProperty(B))&&(C(f.encodeKey(B)),C(S[B]),U++);else for(let B in S)(typeof S.hasOwnProperty!="function"||S.hasOwnProperty(B))&&(C(B),C(S[B]),U++);T[V+++n]=U>>8,T[V+n]=U&255}:(S,V)=>{let U,B=o.transitions||(o.transitions=Object.create(null)),D=0,Q=0,k,F;if(this.keyMap){F=Object.keys(S).map(R=>this.encodeKey(R)),Q=F.length;for(let R=0;R<Q;R++){let W=F[R];U=B[W],U||(U=B[W]=Object.create(null),D++),B=U}}else for(let R in S)(typeof S.hasOwnProperty!="function"||S.hasOwnProperty(R))&&(U=B[R],U||(B[Ve]&1048576&&(k=B[Ve]&65535),U=B[R]=Object.create(null),D++),B=U,Q++);let w=B[Ve];if(w!==void 0)w&=65535,T[x++]=217,T[x++]=w>>8|224,T[x++]=w&255;else if(F||(F=B.__keys__||(B.__keys__=Object.keys(S))),k===void 0?(w=o.nextId++,w||(w=0,o.nextId=1),w>=rc&&(o.nextId=(w=_)+1)):w=k,o[w]=F,w<_){T[x++]=217,T[x++]=w>>8|224,T[x++]=w&255,B=o.transitions;for(let R=0;R<Q;R++)(B[Ve]===void 0||B[Ve]&1048576)&&(B[Ve]=w),B=B[F[R]];B[Ve]=w|1048576,i=!0}else{if(B[Ve]=w,be.setUint32(x,3655335680),x+=3,D&&(N+=H*D),A.length>=rc-_&&(A.shift()[Ve]=void 0),A.push(B),ct(Q+2),C(57344+w),C(F),V)return;for(let R in S)(typeof S.hasOwnProperty!="function"||S.hasOwnProperty(R))&&C(S[R]);return}if(Q<24?T[x++]=128|Q:ct(Q),!V)for(let R in S)(typeof S.hasOwnProperty!="function"||S.hasOwnProperty(R))&&C(S[R])},q=S=>{let V;if(S>16777216){if(S-n>sc)throw new Error("Encoded buffer would be larger than maximum buffer size");V=Math.min(sc,Math.round(Math.max((S-n)*(S>67108864?1.25:2),4194304)/4096)*4096)}else V=(Math.max(S-n<<2,T.length-1)>>12)+1<<12;let U=new ai(V);return be=new DataView(U.buffer,0,V),T.copy?T.copy(U,0,n,S):U.set(T.slice(n,S)),x-=n,n=0,Ot=U.length-10,T=U};let J=100,te=1e3;this.encodeAsIterable=function(S,V){return K(S,V,X)},this.encodeAsAsyncIterable=function(S,V){return K(S,V,se)};function*X(S,V,U){let B=S.constructor;if(B===Object){let D=f.useRecords!==!1;D?Z(S,!0):ic(Object.keys(S).length,160);for(let Q in S){let k=S[Q];D||C(Q),k&&typeof k=="object"?V[Q]?yield*X(k,V[Q]):yield*$(k,V,Q):C(k)}}else if(B===Array){let D=S.length;ct(D);for(let Q=0;Q<D;Q++){let k=S[Q];k&&(typeof k=="object"||x-n>J)?V.element?yield*X(k,V.element):yield*$(k,V,"element"):C(k)}}else if(S[Symbol.iterator]&&!S.buffer){T[x++]=159;for(let D of S)D&&(typeof D=="object"||x-n>J)?V.element?yield*X(D,V.element):yield*$(D,V,"element"):C(D);T[x++]=255}else ui(S)?(ic(S.size,64),yield T.subarray(n,x),yield S,z()):S[Symbol.asyncIterator]?(T[x++]=159,yield T.subarray(n,x),yield S,z(),T[x++]=255):C(S);U&&x>n?yield T.subarray(n,x):x-n>J&&(yield T.subarray(n,x),z())}function*$(S,V,U){let B=x-n;try{C(S),x-n>J&&(yield T.subarray(n,x),z())}catch(D){if(D.iteratorNotHandled)V[U]={},x=n+B,yield*X.call(this,S,V[U]);else throw D}}function z(){J=te,f.encode(null,fi)}function K(S,V,U){return V&&V.chunkThreshold?J=te=V.chunkThreshold:J=100,S&&typeof S=="object"?(f.encode(null,fi),U(S,f.iterateProperties||(f.iterateProperties={}),!0)):[f.encode(S)]}async function*se(S,V){for(let U of X(S,V,!0)){let B=U.constructor;if(B===nc||B===Uint8Array)yield U;else if(ui(U)){let D=U.stream().getReader(),Q;for(;!(Q=await D.read()).done;)yield Q.value}else if(U[Symbol.asyncIterator])for await(let D of U)z(),D?yield*se(D,V.async||(V.async={})):yield f.encode(D);else yield U}}}useBuffer(e){T=e,be=new DataView(T.buffer,T.byteOffset,T.byteLength),x=0}clearSharedData(){this.structures&&(this.structures=[]),this.sharedValues&&(this.sharedValues=void 0)}updateSharedData(){let e=this.sharedVersion||0;this.sharedVersion=e+1;let n=this.structures.slice(0),r=new Tu(n,this.sharedValues,this.sharedVersion),i=this.saveShared(r,o=>(o&&o.version||0)==e);return i===!1?(r=this.getShared()||{},this.structures=r.structures||[],this.sharedValues=r.packedValues,this.sharedVersion=r.version,this.structures.nextId=this.structures.length):n.forEach((o,c)=>this.structures[c]=o),i}}function ic(t,e){t<24?T[x++]=e|t:t<256?(T[x++]=e|24,T[x++]=t):t<65536?(T[x++]=e|25,T[x++]=t>>8,T[x++]=t&255):(T[x++]=e|26,be.setUint32(x,t),x+=4)}class Tu{constructor(e,n,r){this.structures=e,this.packedValues=n,this.version=r}}function ct(t){t<24?T[x++]=128|t:t<256?(T[x++]=152,T[x++]=t):t<65536?(T[x++]=153,T[x++]=t>>8,T[x++]=t&255):(T[x++]=154,be.setUint32(x,t),x+=4)}const Mp=typeof Blob>"u"?function(){}:Blob;function ui(t){if(t instanceof Mp)return!0;let e=t[Symbol.toStringTag];return e==="Blob"||e==="File"}function Cr(t,e){switch(typeof t){case"string":if(t.length>3){if(e.objectMap[t]>-1||e.values.length>=e.maxValues)return;let r=e.get(t);if(r)++r.count==2&&e.values.push(t);else if(e.set(t,{count:1}),e.samplingPackedValues){let i=e.samplingPackedValues.get(t);i?i.count++:e.samplingPackedValues.set(t,{count:1})}}break;case"object":if(t)if(t instanceof Array)for(let r=0,i=t.length;r<i;r++)Cr(t[r],e);else{let r=!e.encoder.useRecords;for(var n in t)t.hasOwnProperty(n)&&(r&&Cr(n,e),Cr(t[n],e))}break;case"function":console.log(t)}}const jp=new Uint8Array(new Uint16Array([1]).buffer)[0]==1;ku=[Date,Set,Error,RegExp,Yt,ArrayBuffer,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?function(){}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?function(){}:BigInt64Array,Float32Array,Float64Array,Tu];ji=[{tag:1,encode(t,e){let n=t.getTime()/1e3;(this.useTimestamp32||t.getMilliseconds()===0)&&n>=0&&n<4294967296?(T[x++]=26,be.setUint32(x,n),x+=4):(T[x++]=251,be.setFloat64(x,n),x+=8)}},{tag:258,encode(t,e){let n=Array.from(t);e(n)}},{tag:27,encode(t,e){e([t.name,t.message])}},{tag:27,encode(t,e){e(["RegExp",t.source,t.flags])}},{getTag(t){return t.tag},encode(t,e){e(t.value)}},{encode(t,e,n){Di(t,n)}},{getTag(t){if(t.constructor===Uint8Array&&(this.tagUint8Array||tr&&this.tagUint8Array!==!1))return 64},encode(t,e,n){Di(t,n)}},at(68,1),at(69,2),at(70,4),at(71,8),at(72,1),at(77,2),at(78,4),at(79,8),at(85,4),at(86,8),{encode(t,e){let n=t.packedValues||[],r=t.structures||[];if(n.values.length>0){T[x++]=216,T[x++]=51,ct(4);let i=n.values;e(i),ct(0),ct(0),packedObjectMap=Object.create(sharedPackedObjectMap||null);for(let o=0,c=i.length;o<c;o++)packedObjectMap[i[o]]=o}if(r){be.setUint32(x,3655335424),x+=3;let i=r.slice(0);i.unshift(57344),i.push(new Yt(t.version,1399353956)),e(i)}else e(new Yt(t.version,1399353956))}}];function at(t,e){return!jp&&e>1&&(t-=4),{tag:t,encode:function(r,i){let o=r.byteLength,c=r.byteOffset||0,u=r.buffer||r;i(tr?ns.from(u,c,o):new Uint8Array(u,c,o))}}}function Di(t,e){let n=t.byteLength;n<24?T[x++]=64+n:n<256?(T[x++]=88,T[x++]=n):n<65536?(T[x++]=89,T[x++]=n>>8,T[x++]=n&255):(T[x++]=90,be.setUint32(x,n),x+=4),x+n>=T.length&&e(x+n),T.set(t.buffer?t:new Uint8Array(t),x),x+=n}function Dp(t,e){let n,r=e.length*2,i=t.length-r;e.sort((o,c)=>o.offset>c.offset?1:-1);for(let o=0;o<e.length;o++){let c=e[o];c.id=o;for(let u of c.references)t[u++]=o>>8,t[u]=o&255}for(;n=e.pop();){let o=n.offset;t.copyWithin(o+r,o,i),r-=2;let c=o+r;t[c++]=216,t[c++]=28,i=o}return t}function oc(t,e){be.setUint32(ke.position+t,x-ke.position-t+1);let n=ke;ke=null,e(n[0]),e(n[1])}let to=new Cu({useRecords:!1});to.encode;to.encodeAsIterable;to.encodeAsAsyncIterable;const ac=512,Up=1024,fi=2048;function Ou(t){return new Cu({tagUint8Array:!1,useRecords:!1}).encode(t)}function Hp(t){return Eu(t)}const Pp=(t,e)=>t.length===e.length&&t.every((n,r)=>n===e[r]),no=(t,e)=>Pp(t,e),Bp=async(t,e)=>{let n;const r=new Promise((i,o)=>{n=setTimeout(()=>o(new Lp(`withTimeout: timed out after ${e}ms`)),e)});try{return await Promise.race([t,r])}finally{clearTimeout(n)}};class Lp extends Error{constructor(e){super(e),this.name="TimeoutError"}}class qr extends Zt{documentId;#e;#t;#r;#n=vt();#s=6e4;#i={};#c=new Map;constructor(e,n={}){super(),this.documentId=e,"timeoutDelay"in n&&n.timeoutDelay&&(this.#s=n.timeoutDelay),"heads"in n&&(this.#r=n.heads);const r=vt();this.#e=gt(`automerge-repo:dochandle:${this.documentId.slice(0,5)}`);const i=this.#s,o=K_({actions:{onUpdate:Pn(({context:c,event:u})=>{const f=c.doc;G_(u,uc);const{callback:d}=u.payload;return{doc:d(f)}}),onDelete:Pn(()=>(this.emit("delete",{handle:this}),{doc:vt()})),onUnavailable:Pn(()=>({doc:vt()})),onUnload:Pn(()=>({doc:vt()}))}}).createMachine({initial:"idle",context:{documentId:e,doc:r},on:{UPDATE:{actions:"onUpdate"},UNLOAD:".unloaded",DELETE:".deleted"},states:{idle:{on:{BEGIN:"loading"}},loading:{on:{REQUEST:"requesting",DOC_READY:"ready"},after:{[i]:"unavailable"}},requesting:{on:{DOC_UNAVAILABLE:"unavailable",DOC_READY:"ready"},after:{[i]:"unavailable"}},unavailable:{entry:"onUnavailable",on:{DOC_READY:"ready"}},ready:{},unloaded:{entry:"onUnload",on:{RELOAD:"loading"}},deleted:{entry:"onDelete",type:"final"}}});this.#t=Wn(o),this.#t.subscribe(c=>{const u=this.#n,f=c.context.doc;this.#e(`→ ${c.value} %o`,f),this.#u(u,f)}),this.#t.start(),this.begin()}get#a(){return this.#t?.getSnapshot().context.doc}get#o(){return this.#t?.getSnapshot().value}#f(e){const n=Array.isArray(e)?e:[e];return X_(this.#t,r=>n.some(i=>r.matches(i)),{timeout:this.#s*2})}#l(e){let n=null;if(this.#t.send({type:uc,payload:{callback:r=>{try{return e(r)}catch(i){return n=i,r}}}}),n)throw n}#u(e,n){const r=wt(e),i=wt(n);if(!no(dt(i),dt(r))){this.emit("heads-changed",{handle:this,doc:n});const c=Ks(n,r,i);c.length>0&&this.emit("change",{handle:this,doc:n,patches:c,patchInfo:{before:e,after:n,source:"change"}}),this.isReady()||this.#t.send({type:cc})}this.#n=n}get url(){return yu({documentId:this.documentId,heads:this.#r})}isReady=()=>this.inState(["ready"]);isUnloaded=()=>this.inState(["unloaded"]);isDeleted=()=>this.inState(["deleted"]);isUnavailable=()=>this.inState(["unavailable"]);inState=e=>e.some(n=>this.#t.getSnapshot().matches(n));get state(){return this.#t.getSnapshot().value}async whenReady(e=["ready"]){await Bp(this.#f(e),this.#s)}doc(){if(!this.isReady())throw new Error("DocHandle is not ready");return this.#r?wg(this.#a,Ft(this.#r)):this.#a}docSync(){return console.warn("docSync is deprecated. Use doc() instead. This function will be removed as part of the 2.0 release."),this.doc()}heads(){if(!this.isReady())throw new Error("DocHandle is not ready");return this.#r?this.#r:dt(wt(this.#a))}begin(){this.#t.send({type:Np})}history(){if(this.isReady())return jg(this.#a).map(e=>dt([e]))}view(e){if(!this.isReady())throw new Error(`DocHandle#${this.documentId} is not ready. Check \`handle.isReady()\` before calling view().`);const n=JSON.stringify(e),r=this.#c.get(n);if(r)return r;const i=new qr(this.documentId,{heads:e,timeoutDelay:this.#s});return i.update(()=>Pr(this.#a)),i.doneLoading(),this.#c.set(n,i),i}diff(e,n){if(!this.isReady())throw new Error(`DocHandle#${this.documentId} is not ready. Check \`handle.isReady()\` before calling diff().`);const r=this.#a;if(!r)throw new Error("Document not available");if(e instanceof qr){if(!e.isReady())throw new Error("Cannot diff against a handle that isn't ready");const c=e.heads();if(!c)throw new Error("Other document's heads not available");const u=Ia(Pr(r),e.doc());return Ks(u,Ft(this.heads()),Ft(c))}const i=n?e:this.heads()||[],o=n||e;return Ks(r,Ft(i),Ft(o))}metadata(e){if(this.isReady())return e||(e=this.heads()[0]),Dg(this.#a,Ft([e])[0])||void 0}update(e){this.#l(e)}doneLoading(){this.#t.send({type:cc})}setSyncInfo(e,n){this.#i[e]=n,this.emit("remote-heads",{storageId:e,heads:n.lastHeads,timestamp:n.lastSyncTimestamp})}getRemoteHeads(e){return this.#i[e]?.lastHeads}getSyncInfo(e){return this.#i[e]}change(e,n={}){if(!this.isReady())throw new Error(`DocHandle#${this.documentId} is in ${this.state} and not ready. Check \`handle.isReady()\` before accessing the document.`);if(this.#r)throw new Error(`DocHandle#${this.documentId} is in view-only mode at specific heads. Use clone() to create a new document from this state.`);this.#l(r=>xg(r,n,e))}changeAt(e,n,r={}){if(!this.isReady())throw new Error(`DocHandle#${this.documentId} is not ready. Check \`handle.isReady()\` before accessing the document.`);if(this.#r)throw new Error(`DocHandle#${this.documentId} is in view-only mode at specific heads. Use clone() to create a new document from this state.`);let i;return this.#l(o=>{const c=Ig(o,Ft(e),r,n);return i=c.newHeads?dt(c.newHeads):void 0,c.newDoc}),i}isReadOnly(){return!!this.#r}merge(e){if(!this.isReady()||!e.isReady())throw new Error("Both handles must be ready to merge");if(this.#r)throw new Error(`DocHandle#${this.documentId} is in view-only mode at specific heads. Use clone() to create a new document from this state.`);const n=e.doc();this.update(r=>Ia(r,n))}unavailable(){this.#t.send({type:Gp})}request(){this.#o==="loading"&&this.#t.send({type:zp})}unload(){this.#t.send({type:Vp})}reload(){this.#t.send({type:Wp})}delete(){this.#t.send({type:qp})}broadcast(e){this.emit("ephemeral-message-outbound",{handle:this,data:new Uint8Array(Ou(e))})}metrics(){return Fi(this.#a)}}const $p={REQUESTING:"requesting",READY:"ready",UNLOADED:"unloaded",DELETED:"deleted",UNAVAILABLE:"unavailable"},{REQUESTING:Sr,READY:ut,UNLOADED:Fp,DELETED:xr,UNAVAILABLE:qe}=$p,Np="BEGIN",zp="REQUEST",cc="DOC_READY",uc="UPDATE",Vp="UNLOAD",Wp="RELOAD",qp="DELETE",Gp="DOC_UNAVAILABLE";class Jp extends Zt{#e=new Map;#t=new Set;#r=new Map;#n=new Set;#s=new Map;#i=gt("automerge-repo:remote-heads-subscriptions");subscribeToRemotes(e){this.#i("subscribeToRemotes",e);const n=[];for(const r of e)this.#t.has(r)||(this.#t.add(r),n.push(r));n.length>0&&this.emit("change-remote-subs",{add:n,peers:Array.from(this.#n)})}unsubscribeFromRemotes(e){this.#i("subscribeToRemotes",e);const n=[];for(const r of e)this.#t.has(r)&&(this.#t.delete(r),this.#r.has(r)||n.push(r));n.length>0&&this.emit("change-remote-subs",{remove:n,peers:Array.from(this.#n)})}handleControlMessage(e){const n=[],r=[],i=[];if(this.#i("handleControlMessage",e),e.add)for(const o of e.add){let c=this.#r.get(o);(this.#t.has(o)||c)&&i.push(o),c||(c=new Set,this.#r.set(o,c),this.#t.has(o)||n.push(o)),c.add(e.senderId)}if(e.remove)for(const o of e.remove){const c=this.#r.get(o);c&&(c.delete(e.senderId),c.size==0&&!this.#t.has(o)&&r.push(o))}(n.length>0||r.length>0)&&this.emit("change-remote-subs",{peers:Array.from(this.#n),add:n,remove:r});for(const o of i){const c=this.#s.get(e.senderId);if(c)for(const u of c){const f=this.#e.get(u);if(!f)continue;const d=f.get(o);d&&this.emit("notify-remote-heads",{targetId:e.senderId,documentId:u,heads:d.lastHeads,timestamp:d.lastSyncTimestamp,storageId:o})}}}handleRemoteHeads(e){this.#i("handleRemoteHeads",e);const n=this.#a(e);for(const r of n)this.#t.has(r.storageId)&&this.emit("remote-heads-changed",r);for(const r of n)for(const i of this.#n)i!==e.senderId&&this.emit("notify-remote-heads",{targetId:i,documentId:r.documentId,heads:r.remoteHeads,timestamp:r.timestamp,storageId:r.storageId});for(const r of n){const i=this.#r.get(r.storageId);if(i)for(const o of i)this.#c(o,r.documentId)&&this.emit("notify-remote-heads",{targetId:o,documentId:r.documentId,heads:r.remoteHeads,timestamp:r.timestamp,storageId:r.storageId})}}handleImmediateRemoteHeadsChanged(e,n,r){this.#i("handleLocalHeadsChanged",e,n,r);const i=this.#e.get(e),o=Date.now();if(!i)this.#e.set(e,new Map([[n,{lastSyncTimestamp:o,lastHeads:r}]]));else{const u=i.get(n);(!u||u.lastSyncTimestamp<Date.now())&&i.set(n,{lastSyncTimestamp:Date.now(),lastHeads:r})}const c=this.#r.get(n);if(c)for(const u of c)this.#c(u,e)&&this.emit("notify-remote-heads",{targetId:u,documentId:e,heads:r,timestamp:o,storageId:n})}addGenerousPeer(e){this.#i("addGenerousPeer",e),this.#n.add(e),this.#t.size>0&&this.emit("change-remote-subs",{add:Array.from(this.#t),peers:[e]});for(const[n,r]of this.#e)for(const[i,{lastHeads:o,lastSyncTimestamp:c}]of r)this.emit("notify-remote-heads",{targetId:e,documentId:n,heads:o,timestamp:c,storageId:i})}removePeer(e){this.#i("removePeer",e);const n=[];this.#n.delete(e),this.#s.delete(e);for(const[r,i]of this.#r)i.has(e)&&(i.delete(e),i.size==0&&(n.push(r),this.#r.delete(r)));n.length>0&&this.emit("change-remote-subs",{remove:n,peers:Array.from(this.#n)})}subscribePeerToDoc(e,n){let r=this.#s.get(e);r||(r=new Set,this.#s.set(e,r)),r.add(n);const i=this.#e.get(n);if(i)for(const[o,c]of i){const u=this.#r.get(o);u&&u.has(e)&&this.emit("notify-remote-heads",{targetId:e,documentId:n,heads:c.lastHeads,timestamp:c.lastSyncTimestamp,storageId:o})}}#c(e,n){const r=this.#s.get(e);return r&&r.has(n)}#a(e){const n=[],{documentId:r,newHeads:i}=e;for(const[o,{heads:c,timestamp:u}]of Object.entries(i)){if(!this.#t.has(o)&&!this.#r.has(o))continue;let f=this.#e.get(r);f||(f=new Map,this.#e.set(r,f));const d=f.get(o);d&&d.lastSyncTimestamp>=u||(f.set(o,{lastSyncTimestamp:u,lastHeads:c}),n.push({documentId:r,storageId:o,remoteHeads:c,timestamp:u}))}return n}}const Ui=(t,e)=>{let n=Date.now(),r,i;return function(...o){r=n+e-Date.now(),clearTimeout(i),i=setTimeout(()=>{t(...o),n=Date.now()},r)}},Kp=t=>Xp(t)||Mu(t)||Ru(t)||Yp(t)||Zp(t)||Qp(t),Yp=t=>t.type==="doc-unavailable",Ru=t=>t.type==="request",Xp=t=>t.type==="sync",Mu=t=>t.type==="ephemeral",Zp=t=>t.type==="remote-subscription-change",Qp=t=>t.type==="remote-heads-changed",e0=t=>`${t.senderId}:${t.sessionId}`;class t0 extends Zt{peerId;peerMetadata;#e;#t={};#r=0;#n=Math.random().toString(36).slice(2);#s={};adapters=[];constructor(e,n,r){super(),this.peerId=n,this.peerMetadata=r,this.#e=gt(`automerge-repo:network:${this.peerId}`),e.forEach(i=>this.addNetworkAdapter(i))}disconnect(){this.adapters.forEach(e=>e.disconnect())}reconnect(){this.adapters.forEach(e=>e.connect(this.peerId))}addNetworkAdapter(e){this.adapters.push(e),e.on("peer-candidate",({peerId:n,peerMetadata:r})=>{this.#e(`peer candidate: ${n} `),this.#t[n]||(this.#t[n]=e),this.emit("peer",{peerId:n,peerMetadata:r})}),e.on("peer-disconnected",({peerId:n})=>{this.#e(`peer disconnected: ${n} `),delete this.#t[n],this.emit("peer-disconnected",{peerId:n})}),e.on("message",n=>{if(!Kp(n)){this.#e(`invalid message: ${JSON.stringify(n)}`);return}if(this.#e(`message from ${n.senderId}`),Mu(n)){const r=e0(n);(this.#s[r]===void 0||n.count>this.#s[r])&&(this.#s[r]=n.count,this.emit("message",n));return}this.emit("message",n)}),e.on("close",()=>{this.#e("adapter closed"),Object.entries(this.#t).forEach(([n,r])=>{r===e&&delete this.#t[n]}),this.adapters=this.adapters.filter(n=>n!==e)}),this.peerMetadata.then(n=>{e.connect(this.peerId,n)}).catch(n=>{this.#e("error connecting to network",n)})}removeNetworkAdapter(e){this.adapters=this.adapters.filter(n=>n!==e),e.disconnect()}send(e){const n=this.#t[e.targetId];if(!n){this.#e(`Tried to send message but peer not found: ${e.targetId}`);return}const i=(o=>o.type==="ephemeral"?"count"in o?o:{...o,count:++this.#r,sessionId:this.#n,senderId:this.peerId}:{...o,senderId:this.peerId})(e);this.#e("sending message %o",i),n.send(i)}isReady=()=>this.adapters.every(e=>e.isReady());whenReady=async()=>Promise.all(this.adapters.map(e=>e.whenReady()))}function ju(t){let e=0;t.forEach(i=>{e+=i.length});const n=new Uint8Array(e);let r=0;return t.forEach(i=>{n.set(i,r),r+=i.length}),n}var Tr={exports:{}},n0=Tr.exports,fc;function r0(){return fc||(fc=1,function(t){(function(e,n){var r={};n(r);var i=r.default;for(var o in r)i[o]=r[o];t.exports=i})(n0,function(e){e.__esModule=!0,e.digestLength=32,e.blockSize=64;var n=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function r(g,y,m,v,A){for(var N,H,C,Z,q,J,te,X,$,z,K,se,S;A>=64;){for(N=y[0],H=y[1],C=y[2],Z=y[3],q=y[4],J=y[5],te=y[6],X=y[7],z=0;z<16;z++)K=v+z*4,g[z]=(m[K]&255)<<24|(m[K+1]&255)<<16|(m[K+2]&255)<<8|m[K+3]&255;for(z=16;z<64;z++)$=g[z-2],se=($>>>17|$<<15)^($>>>19|$<<13)^$>>>10,$=g[z-15],S=($>>>7|$<<25)^($>>>18|$<<14)^$>>>3,g[z]=(se+g[z-7]|0)+(S+g[z-16]|0);for(z=0;z<64;z++)se=(((q>>>6|q<<26)^(q>>>11|q<<21)^(q>>>25|q<<7))+(q&J^~q&te)|0)+(X+(n[z]+g[z]|0)|0)|0,S=((N>>>2|N<<30)^(N>>>13|N<<19)^(N>>>22|N<<10))+(N&H^N&C^H&C)|0,X=te,te=J,J=q,q=Z+se|0,Z=C,C=H,H=N,N=se+S|0;y[0]+=N,y[1]+=H,y[2]+=C,y[3]+=Z,y[4]+=q,y[5]+=J,y[6]+=te,y[7]+=X,v+=64,A-=64}return v}var i=function(){function g(){this.digestLength=e.digestLength,this.blockSize=e.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return g.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},g.prototype.clean=function(){for(var y=0;y<this.buffer.length;y++)this.buffer[y]=0;for(var y=0;y<this.temp.length;y++)this.temp[y]=0;this.reset()},g.prototype.update=function(y,m){if(m===void 0&&(m=y.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var v=0;if(this.bytesHashed+=m,this.bufferLength>0){for(;this.bufferLength<64&&m>0;)this.buffer[this.bufferLength++]=y[v++],m--;this.bufferLength===64&&(r(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(m>=64&&(v=r(this.temp,this.state,y,v,m),m%=64);m>0;)this.buffer[this.bufferLength++]=y[v++],m--;return this},g.prototype.finish=function(y){if(!this.finished){var m=this.bytesHashed,v=this.bufferLength,A=m/536870912|0,N=m<<3,H=m%64<56?64:128;this.buffer[v]=128;for(var C=v+1;C<H-8;C++)this.buffer[C]=0;this.buffer[H-8]=A>>>24&255,this.buffer[H-7]=A>>>16&255,this.buffer[H-6]=A>>>8&255,this.buffer[H-5]=A>>>0&255,this.buffer[H-4]=N>>>24&255,this.buffer[H-3]=N>>>16&255,this.buffer[H-2]=N>>>8&255,this.buffer[H-1]=N>>>0&255,r(this.temp,this.state,this.buffer,0,H),this.finished=!0}for(var C=0;C<8;C++)y[C*4+0]=this.state[C]>>>24&255,y[C*4+1]=this.state[C]>>>16&255,y[C*4+2]=this.state[C]>>>8&255,y[C*4+3]=this.state[C]>>>0&255;return this},g.prototype.digest=function(){var y=new Uint8Array(this.digestLength);return this.finish(y),y},g.prototype._saveState=function(y){for(var m=0;m<this.state.length;m++)y[m]=this.state[m]},g.prototype._restoreState=function(y,m){for(var v=0;v<this.state.length;v++)this.state[v]=y[v];this.bytesHashed=m,this.finished=!1,this.bufferLength=0},g}();e.Hash=i;var o=function(){function g(y){this.inner=new i,this.outer=new i,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var m=new Uint8Array(this.blockSize);if(y.length>this.blockSize)new i().update(y).finish(m).clean();else for(var v=0;v<y.length;v++)m[v]=y[v];for(var v=0;v<m.length;v++)m[v]^=54;this.inner.update(m);for(var v=0;v<m.length;v++)m[v]^=106;this.outer.update(m),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate);for(var v=0;v<m.length;v++)m[v]=0}return g.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},g.prototype.clean=function(){for(var y=0;y<this.istate.length;y++)this.ostate[y]=this.istate[y]=0;this.inner.clean(),this.outer.clean()},g.prototype.update=function(y){return this.inner.update(y),this},g.prototype.finish=function(y){return this.outer.finished?this.outer.finish(y):(this.inner.finish(y),this.outer.update(y,this.digestLength).finish(y)),this},g.prototype.digest=function(){var y=new Uint8Array(this.digestLength);return this.finish(y),y},g}();e.HMAC=o;function c(g){var y=new i().update(g),m=y.digest();return y.clean(),m}e.hash=c,e.default=c;function u(g,y){var m=new o(g).update(y),v=m.digest();return m.clean(),v}e.hmac=u;function f(g,y,m,v){var A=v[0];if(A===0)throw new Error("hkdf: cannot expand more");y.reset(),A>1&&y.update(g),m&&y.update(m),y.update(v),y.finish(g),v[0]++}var d=new Uint8Array(e.digestLength);function _(g,y,m,v){y===void 0&&(y=d),v===void 0&&(v=32);for(var A=new Uint8Array([1]),N=u(y,g),H=new o(N),C=new Uint8Array(H.digestLength),Z=C.length,q=new Uint8Array(v),J=0;J<v;J++)Z===C.length&&(f(C,H,m,A),Z=0),q[J]=C[Z++];return H.clean(),C.fill(0),A.fill(0),q}e.hkdf=_;function h(g,y,m,v){for(var A=new o(g),N=A.digestLength,H=new Uint8Array(4),C=new Uint8Array(N),Z=new Uint8Array(N),q=new Uint8Array(v),J=0;J*N<v;J++){var te=J+1;H[0]=te>>>24&255,H[1]=te>>>16&255,H[2]=te>>>8&255,H[3]=te>>>0&255,A.reset(),A.update(y),A.update(H),A.finish(Z);for(var X=0;X<N;X++)C[X]=Z[X];for(var X=2;X<=m;X++){A.reset(),A.update(Z).finish(Z);for(var $=0;$<N;$++)C[$]^=Z[$]}for(var X=0;X<N&&J*N+X<v;X++)q[J*N+X]=C[X]}for(var J=0;J<N;J++)C[J]=Z[J]=0;for(var J=0;J<4;J++)H[J]=0;return A.clean(),q}e.pbkdf2=h})}(Tr)),Tr.exports}var s0=r0();function Du(t){const e=s0.hash(t);return o0(e)}function i0(t){const e=new TextEncoder,n=ju(t.map(r=>e.encode(r)));return Du(n)}function o0(t){return Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}class a0 extends Zt{#e;#t=new Map;#r=new Map;#n=!1;#s=gt("automerge-repo:storage-subsystem");constructor(e){super(),this.#e=e}async id(){const e=await this.#e.load(["storage-adapter-id"]);let n;return e?n=new TextDecoder().decode(e):(n=gu(),await this.#e.save(["storage-adapter-id"],new TextEncoder().encode(n))),n}async load(e,n){const r=[e,n];return await this.#e.load(r)}async save(e,n,r){const i=[e,n];await this.#e.save(i,r)}async remove(e,n){const r=[e,n];await this.#e.remove(r)}async loadDocData(e){const n=await this.#e.loadRange([e,"snapshot"]),r=await this.#e.loadRange([e,"incremental"]),i=[],o=[];for(const c of n)c.data!==void 0&&(o.push({key:c.key,type:"snapshot",size:c.data.length}),i.push(c.data));for(const c of r)c.data!==void 0&&(o.push({key:c.key,type:"incremental",size:c.data.length}),i.push(c.data));return this.#r.set(e,o),i.length===0?null:ju(i)}async loadDoc(e){const n=await this.loadDocData(e);if(!n)return null;const r=performance.now(),i=zc(vt(),n),o=performance.now();return this.emit("document-loaded",{documentId:e,durationMillis:o-r,...Fi(i)}),this.#t.set(e,wt(i)),i}async saveDoc(e,n){if(!this.#a(e,n))return;const r=this.#r.get(e)??[];this.#o(r)?await this.#c(e,n,r):await this.#i(e,n),this.#t.set(e,wt(n))}async removeDoc(e){await this.#e.removeRange([e,"snapshot"]),await this.#e.removeRange([e,"incremental"]),await this.#e.removeRange([e,"sync-state"])}async#i(e,n){const r=Mg(n,this.#t.get(e)??[]);if(r&&r.length>0){const i=[e,"incremental",Du(r)];this.#s(`Saving incremental ${i} for document ${e}`),await this.#e.save(i,r),this.#r.has(e)||this.#r.set(e,[]),this.#r.get(e).push({key:i,type:"incremental",size:r.length}),this.#t.set(e,wt(n))}else return Promise.resolve()}async#c(e,n,r){this.#n=!0;const i=Vc(n),o=i0(wt(n)),c=[e,"snapshot",o],u=new Set(r.map(d=>d.key).filter(d=>d[2]!==o));this.#s(`Saving snapshot ${c} for document ${e}`),this.#s(`deleting old chunks ${Array.from(u)}`),await this.#e.save(c,i);for(const d of u)await this.#e.remove(d);const f=this.#r.get(e)?.filter(d=>!u.has(d.key))??[];f.push({key:c,type:"snapshot",size:i.length}),this.#r.set(e,f),this.#n=!1}async loadSyncState(e,n){const r=[e,"sync-state",n];try{const i=await this.#e.load(r);return i?qc(i):void 0}catch{this.#s(`Error loading sync state for ${e} from ${n}`);return}}async saveSyncState(e,n,r){const i=[e,"sync-state",n];await this.#e.save(i,Wc(r))}#a(e,n){const r=this.#t.get(e);if(!r)return!0;const i=wt(n);return!no(dt(i),dt(r))}#o(e){if(this.#n)return!1;let n=0,r=0;for(const i of e)i.type==="snapshot"?n+=i.size:r+=i.size;return n<1024||r>=n}}class Uu extends Zt{}class c0 extends Uu{#e;syncDebounceRate=100;#t=[];#r={};#n={};#s={};#i=[];#c;#a=!1;#o;#f;constructor({handle:e,peerId:n,onLoadSyncState:r}){super(),this.#c=n,this.#o=e,this.#f=r??(()=>Promise.resolve(void 0));const i=e.documentId.slice(0,5);this.#e=gt(`automerge-repo:docsync:${i}`),e.on("change",Ui(()=>this.#l(),this.syncDebounceRate)),e.on("ephemeral-message-outbound",o=>this.#u(o)),(async()=>this.#m())()}get peerStates(){return this.#n}get documentId(){return this.#o.documentId}async#l(){try{await this.#o.whenReady();const e=this.#o.doc();this.#t.forEach(n=>this.#p(n,e))}catch{console.log("sync with peers threw an exception")}}async#u({data:e}){this.#e("broadcastToPeers",this.#t),this.#t.forEach(n=>this.#g(n,e))}#g(e,n){this.#e(`sendEphemeralMessage ->${e}`);const r={type:"ephemeral",targetId:e,documentId:this.#o.documentId,data:n};this.emit("message",r)}#h(e,n){this.#b(e),e in this.#n||(this.#n[e]="unknown");const r=this.#s[e];if(r){n(r);return}let i=this.#r[e];i||(this.#f(e).then(o=>{this.#w(e,o??Og())}).catch(o=>{this.#e(`Error loading sync state for ${e}: ${o}`)}),i=this.#r[e]=[]),i.push(n)}#b(e){this.#t.includes(e)||(this.#t.push(e),this.emit("open-doc",{documentId:this.documentId,peerId:e}))}#w(e,n){const r=this.#r[e];if(r)for(const i of r)i(n);delete this.#r[e],this.#s[e]=n}#_(e,n){this.#s[e]=n,this.emit("sync-state",{peerId:e,syncState:n,documentId:this.#o.documentId})}#p(e,n){this.#e(`sendSyncMessage ->${e}`),this.#h(e,r=>{const[i,o]=Cg(n,r);if(o){this.#_(e,i);const c=wt(n).length===0;!this.#o.isReady()&&c&&i.sharedHeads.length===0&&!Object.values(this.#n).includes("has")&&this.#n[e]==="unknown"?this.emit("message",{type:"request",targetId:e,documentId:this.#o.documentId,data:o}):this.emit("message",{type:"sync",targetId:e,data:o,documentId:this.#o.documentId}),c||(this.#n[e]="has")}})}hasPeer(e){return this.#t.includes(e)}async beginSync(e){this.#o.whenReady([ut,Sr,qe]).then(()=>{this.#a=!0,this.#d()}).catch(r=>{console.log("caught whenready",r),this.#a=!0,this.#d()}),this.#t.some(r=>this.#n[r]=="has")&&await this.#o.whenReady(),e.forEach(r=>{this.#h(r,i=>{const o=qc(Wc(i));this.#_(r,o),this.#o.whenReady([ut,Sr,qe]).then(()=>{const c=this.#o.isReady()?this.#o.doc():vt(),u=e.every(d=>this.#n[d]in["unavailable","wants"]);c===void 0&&u||this.#p(r,c??vt())}).catch(c=>{this.#e(`Error loading doc for ${r}: ${c}`)})})})}endSync(e){this.#e(`removing peer ${e}`),this.#t=this.#t.filter(n=>n!==e),delete this.#n[e],this.#d()}receiveMessage(e){switch(e.type){case"sync":case"request":this.receiveSyncMessage(e);break;case"ephemeral":this.receiveEphemeralMessage(e);break;case"doc-unavailable":this.#n[e.senderId]="unavailable",this.#d();break;default:throw new Error(`unknown message type: ${e}`)}}receiveEphemeralMessage(e){if(e.documentId!==this.#o.documentId)throw new Error("channelId doesn't match documentId");const{senderId:n,data:r}=e,i=Eu(new Uint8Array(r));this.#o.emit("ephemeral-message",{handle:this.#o,senderId:n,message:i}),this.#t.forEach(o=>{o!==n&&this.emit("message",{...e,targetId:o})})}receiveSyncMessage(e){if(e.documentId!==this.#o.documentId)throw new Error("channelId doesn't match documentId");if(!this.#o.inState([ut,Sr,qe])){this.#i.push({message:e,received:new Date});return}this.#m(),this.#y(e)}#y(e){Ru(e)&&(this.#n[e.senderId]="wants"),this.#d(),Rg(e.data).heads.length>0&&(this.#n[e.senderId]="has"),this.#h(e.senderId,n=>{this.#o.update(r=>{const i=performance.now(),[o,c]=Tg(r,n,e.data),u=performance.now();return this.emit("metrics",{type:"receive-sync-message",documentId:this.#o.documentId,durationMillis:u-i,...Fi(r)}),this.#_(e.senderId,c),this.#p(e.senderId,r),o}),this.#d()})}#d(){this.#a&&this.#o.inState([Sr,qe])&&this.#t.every(e=>this.#n[e]==="unavailable"||this.#n[e]==="wants")&&(this.#t.filter(e=>this.#n[e]==="wants").forEach(e=>{this.#n[e]="unavailable";const n={type:"doc-unavailable",documentId:this.#o.documentId,targetId:e};this.emit("message",n)}),this.#o.unavailable())}#m(){for(const e of this.#i)this.#y(e.message);this.#i=[]}metrics(){return{peers:this.#t,size:this.#o.metrics()}}}const Ir=gt("automerge-repo:collectionsync");class u0 extends Uu{repo;#e=new Set;docSynchronizers={};#t={};#r;constructor(e,n=[]){super(),this.repo=e,this.#r=n.map(r=>qn(r).documentId)}#n(e){return this.docSynchronizers[e.documentId]||(this.docSynchronizers[e.documentId]=this.#s(e)),this.docSynchronizers[e.documentId]}#s(e){const n=new c0({handle:e,peerId:this.repo.networkSubsystem.peerId,onLoadSyncState:async r=>{if(!this.repo.storageSubsystem)return;const{storageId:i,isEphemeral:o}=this.repo.peerMetadataByPeerId[r]||{};if(!(!i||o))return this.repo.storageSubsystem.loadSyncState(e.documentId,i)}});return n.on("message",r=>this.emit("message",r)),n.on("open-doc",r=>this.emit("open-doc",r)),n.on("sync-state",r=>this.emit("sync-state",r)),n.on("metrics",r=>this.emit("metrics",r)),n}async#i(e){const n=Array.from(this.#e),r=[];for(const i of n)await this.repo.sharePolicy(i,e)&&r.push(i);return r}async receiveMessage(e){Ir(`onSyncMessage: ${e.senderId}, ${e.documentId}, ${"data"in e?e.data.byteLength+"bytes":""}`);const n=e.documentId;if(!n)throw new Error("received a message with an invalid documentId");if(this.#r.includes(n)){this.emit("metrics",{type:"doc-denied",documentId:n}),this.emit("message",{type:"doc-unavailable",documentId:n,targetId:e.senderId});return}this.#t[n]=!0;const r=await this.repo.find(n,{allowableStates:["ready","unavailable","requesting"]}),i=this.#n(r);i.receiveMessage(e);const o=await this.#i(n);i.beginSync(o.filter(c=>!i.hasPeer(c)))}addDocument(e){if(this.#t[e.documentId])return;const n=this.#n(e);this.#i(e.documentId).then(r=>{n.beginSync(r)})}removeDocument(e){Ir(`removing document ${e}`);const n=this.docSynchronizers[e];n!==void 0&&this.peers.forEach(r=>n.endSync(r)),delete this.docSynchronizers[e],delete this.#t[e]}addPeer(e){if(Ir(`adding ${e} & synchronizing with them`),!this.#e.has(e)){this.#e.add(e);for(const n of Object.values(this.docSynchronizers)){const{documentId:r}=n;this.repo.sharePolicy(e,r).then(i=>{i&&n.beginSync([e])})}}}removePeer(e){Ir(`removing peer ${e}`),this.#e.delete(e);for(const n of Object.values(this.docSynchronizers))n.endSync(e)}get peers(){return Array.from(this.#e)}metrics(){return Object.fromEntries(Object.entries(this.docSynchronizers).map(([e,n])=>[e,n.metrics()]))}}function lc(t,e){let n=!1;return new Promise((r,i)=>{e?.addEventListener("abort",()=>{n||i(new DOMException("Operation aborted","AbortError"))},{once:!0}),t.then(o=>{r(o)}).catch(o=>{i(o)}).finally(()=>{n=!0})})}function f0(){return"peer-"+Math.random().toString(36).slice(4)}class l0 extends Zt{#e;networkSubsystem;storageSubsystem;#t;#r;#n={};synchronizer;sharePolicy=async()=>!0;peerMetadataByPeerId={};#s=new Jp;#i=!1;#c={};constructor({storage:e,network:n=[],peerId:r=f0(),sharePolicy:i,isEphemeral:o=e===void 0,enableRemoteHeadsGossiping:c=!1,denylist:u=[],saveDebounceRate:f=100}={}){super(),this.#i=c,this.#e=gt("automerge-repo:repo"),this.sharePolicy=i??this.sharePolicy,this.on("delete-document",({documentId:g})=>{this.synchronizer.removeDocument(g),d&&d.removeDoc(g).catch(y=>{this.#e("error deleting document",{documentId:g,err:y})})}),this.synchronizer=new u0(this,u),this.synchronizer.on("message",g=>{this.#e(`sending ${g.type} message to ${g.targetId}`),h.send(g)}),this.synchronizer.on("metrics",g=>this.emit("doc-metrics",g)),this.#i&&this.synchronizer.on("open-doc",({peerId:g,documentId:y})=>{this.#s.subscribePeerToDoc(g,y)});const d=e?new a0(e):void 0;if(d&&d.on("document-loaded",g=>this.emit("doc-metrics",{type:"doc-loaded",...g})),this.storageSubsystem=d,this.#t=f,this.storageSubsystem){const g=({handle:y,doc:m})=>{this.storageSubsystem.saveDoc(y.documentId,m)};this.#r=Ui(g,this.#t)}else this.#r=()=>{};const _=(async()=>({storageId:await d?.id(),isEphemeral:o}))(),h=new t0(n,r,_);this.networkSubsystem=h,h.on("peer",async({peerId:g,peerMetadata:y})=>{this.#e("peer connected",{peerId:g}),y&&(this.peerMetadataByPeerId[g]={...y}),this.sharePolicy(g).then(m=>{m&&this.#i&&this.#s.addGenerousPeer(g)}).catch(m=>{console.log("error in share policy",{err:m})}),this.synchronizer.addPeer(g)}),h.on("peer-disconnected",({peerId:g})=>{this.synchronizer.removePeer(g),this.#s.removePeer(g)}),h.on("message",async g=>{this.#o(g)}),this.synchronizer.on("sync-state",g=>{this.#l(g);const y=this.#n[g.documentId],{storageId:m}=this.peerMetadataByPeerId[g.peerId]||{};if(!m)return;const v=y.getSyncInfo(m)?.lastHeads;g.syncState.theirHeads&&(!v||!no(v,dt(g.syncState.theirHeads)))&&g.syncState.theirHeads&&(y.setSyncInfo(m,{lastHeads:dt(g.syncState.theirHeads),lastSyncTimestamp:Date.now()}),m&&this.#i&&this.#s.handleImmediateRemoteHeadsChanged(g.documentId,m,dt(g.syncState.theirHeads)))}),this.#i&&(this.#s.on("notify-remote-heads",g=>{this.networkSubsystem.send({type:"remote-heads-changed",targetId:g.targetId,documentId:g.documentId,newHeads:{[g.storageId]:{heads:g.heads,timestamp:g.timestamp}}})}),this.#s.on("change-remote-subs",g=>{this.#e("change-remote-subs",g);for(const y of g.peers)this.networkSubsystem.send({type:"remote-subscription-change",targetId:y,add:g.add,remove:g.remove})}),this.#s.on("remote-heads-changed",({documentId:g,storageId:y,remoteHeads:m,timestamp:v})=>{this.#n[g].setSyncInfo(y,{lastHeads:m,lastSyncTimestamp:v})}))}#a(e){this.storageSubsystem&&(e.listeners("heads-changed").some(r=>r===this.#r)||e.on("heads-changed",this.#r)),this.synchronizer.addDocument(e)}#o(e){switch(e.type){case"remote-subscription-change":this.#i&&this.#s.handleControlMessage(e);break;case"remote-heads-changed":this.#i&&this.#s.handleRemoteHeads(e);break;case"sync":case"request":case"ephemeral":case"doc-unavailable":this.synchronizer.receiveMessage(e).catch(n=>{console.log("error receiving message",{err:n,message:e})})}}#f={};#l(e){if(!this.storageSubsystem)return;const{storageId:n,isEphemeral:r}=this.peerMetadataByPeerId[e.peerId]||{};if(!n||r)return;let i=this.#f[n];i||(i=this.#f[n]=Ui(({documentId:o,syncState:c})=>{this.storageSubsystem.saveSyncState(o,n,c)},this.#t)),i(e)}#u({documentId:e}){if(this.#n[e])return this.#n[e];if(!e)throw new Error(`Invalid documentId ${e}`);const n=new qr(e);return this.#n[e]=n,n}get handles(){return this.#n}get peers(){return this.synchronizer.peers}getStorageIdOfPeer(e){return this.peerMetadataByPeerId[e]?.storageId}create(e){const{documentId:n}=qn(pp()),r=this.#u({documentId:n});return this.#a(r),r.update(()=>{let i;return e?i=Ug(e):i=Ag(vt()),i}),r.doneLoading(),r}clone(e){if(!e.isReady())throw new Error(`Cloned handle is not yet in ready state.
        (Try await handle.whenReady() first.)`);const n=e.doc(),r=this.create();return r.update(()=>Pr(n)),r}findWithProgress(e,n={}){const{signal:r}=n,{documentId:i,heads:o}=mu(e)?qn(e):{documentId:br(e),heads:void 0};if(this.#n[i]){const h=this.#n[i];if(h.state===qe)return{state:"unavailable",error:new Error(`Document ${e} is unavailable`),handle:h};if(h.state===xr)return{state:"failed",error:new Error(`Document ${e} was deleted`),handle:h};if(h.state===ut)return{state:"ready",handle:o?h.view(o):h}}const c=this.#c[i];if(c){const h=this.#n[i];if(h&&(h.state===ut||h.state===qe||h.state===xr||h.state==="loading"))return c}const u=this.#u({documentId:i}),f={state:"loading",progress:0,handle:u},d={subscribers:new Set,currentProgress:void 0,notify:h=>{d.currentProgress=h,d.subscribers.forEach(g=>g(h)),this.#c[i]=h},peek:()=>d.currentProgress||f,subscribe:h=>(d.subscribers.add(h),()=>d.subscribers.delete(h))};d.notify(f),this.#g(e,i,u,d,r?lc(new Promise(()=>{}),r):new Promise(()=>{}));const _={...f,peek:d.peek,subscribe:d.subscribe};return this.#c[i]=_,_}async#g(e,n,r,i,o){try{i.notify({state:"loading",progress:25,handle:r});const c=await(this.storageSubsystem?this.storageSubsystem.loadDoc(r.documentId):Promise.resolve(null)),u=await Promise.race([c,o]);if(u?(r.update(()=>u),r.doneLoading(),i.notify({state:"loading",progress:50,handle:r})):(await Promise.race([this.networkSubsystem.whenReady(),o]),r.request(),i.notify({state:"loading",progress:75,handle:r})),this.#a(r),await Promise.race([r.whenReady([ut,qe]),o]),r.state===qe){const f={state:"unavailable",handle:r};i.notify(f);return}if(r.state===xr)throw new Error(`Document ${e} was deleted`);i.notify({state:"ready",handle:r})}catch(c){i.notify({state:"failed",error:c instanceof Error?c:new Error(String(c)),handle:this.#u({documentId:n})})}}async find(e,n={}){const{allowableStates:r=["ready"],signal:i}=n;if(i?.aborted)throw new Error("Operation aborted");const o=this.findWithProgress(e,{signal:i});if("subscribe"in o)return this.#a(o.handle),new Promise((c,u)=>{const f=o.subscribe(d=>{r.includes(d.handle.state)?(f(),c(d.handle)):d.state==="unavailable"?(f(),u(new Error(`Document ${e} is unavailable`))):d.state==="failed"&&(f(),u(d.error))})});if(o.handle.state===ut)return o.handle;if(await o.handle.whenReady([ut,qe]),o.handle.state==="unavailable"&&!r.includes(qe))throw new Error(`Document ${e} is unavailable`);return o.handle}async#h(e){if(this.#n[e])return this.#n[e];const n=this.#u({documentId:e}),r=await(this.storageSubsystem?this.storageSubsystem.loadDoc(n.documentId):Promise.resolve(null));return r?(n.update(()=>r),n.doneLoading()):(await this.networkSubsystem.whenReady(),n.request()),this.#a(n),n}async findClassic(e,n={}){const r=br(e),{allowableStates:i,signal:o}=n;return lc((async()=>{const c=await this.#h(r);if(!i&&(await c.whenReady([ut,qe]),c.state===qe&&!o?.aborted))throw new Error(`Document ${e} is unavailable`);return c})(),o)}delete(e){const n=br(e);this.#u({documentId:n}).delete(),delete this.#n[n],delete this.#c[n],this.emit("delete-document",{documentId:n})}async export(e){const n=br(e),i=this.#u({documentId:n}).doc();return Vc(i)}import(e){const n=Hg(e),r=this.create();return r.update(()=>Pr(n)),r}subscribeToRemotes=e=>{this.#i?(this.#e("subscribeToRemotes",{remotes:e}),this.#s.subscribeToRemotes(e)):this.#e("WARN: subscribeToRemotes called but remote heads gossiping is not enabled")};storageId=async()=>{if(this.storageSubsystem)return this.storageSubsystem.id()};async flush(e){if(!this.storageSubsystem)return;const n=e?e.map(r=>this.#n[r]):Object.values(this.#n);await Promise.all(n.map(async r=>this.storageSubsystem.saveDoc(r.documentId,r.doc())))}async removeFromCache(e){if(!this.#n[e]){this.#e(`WARN: removeFromCache called but handle not found in handleCache for documentId: ${e}`);return}const n=this.#u({documentId:e});await n.whenReady([ut,Fp,xr,qe]),n.doc()?(n.isReady()?n.unload():this.#e(`WARN: removeFromCache called but handle for documentId: ${e} in unexpected state: ${n.state}`),delete this.#n[e],delete this.#c[e],this.synchronizer.removeDocument(e)):this.#e(`WARN: removeFromCache called but doc undefined for documentId: ${e}`)}shutdown(){return this.networkSubsystem.adapters.forEach(e=>{e.disconnect()}),this.flush()}metrics(){return{documents:this.synchronizer.metrics()}}}class Hu extends Zt{peerId;peerMetadata}const d0="/parking-lot/assets/automerge_wasm_bg-B_JtgnFP.wasm",h0=async(t={},e)=>{let n;if(e.startsWith("data:")){const r=e.replace(/^data:.*?base64,/,"");let i;if(typeof Buffer=="function"&&typeof Buffer.from=="function")i=Buffer.from(r,"base64");else if(typeof atob=="function"){const o=atob(r);i=new Uint8Array(o.length);for(let c=0;c<o.length;c++)i[c]=o.charCodeAt(c)}else throw new Error("Cannot decode base64-encoded data URL");n=await WebAssembly.instantiate(i,t)}else{const r=await fetch(e),i=r.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&i.startsWith("application/wasm"))n=await WebAssembly.instantiateStreaming(r,t);else{const o=await r.arrayBuffer();n=await WebAssembly.instantiate(o,t)}}return n.instance.exports};let b;function Pu(t){b=t}const St=new Array(128).fill(void 0);St.push(void 0,null,!0,!1);function Y(t){return St[t]}let et=0,Ar=null;function Ln(){return(Ar===null||Ar.byteLength===0)&&(Ar=new Uint8Array(b.memory.buffer)),Ar}const g0=typeof TextEncoder>"u"?(0,module.require)("util").TextEncoder:TextEncoder;let Or=new g0("utf-8");const _0=typeof Or.encodeInto=="function"?function(t,e){return Or.encodeInto(t,e)}:function(t,e){const n=Or.encode(t);return e.set(n),{read:t.length,written:n.length}};function ht(t,e,n){if(n===void 0){const u=Or.encode(t),f=e(u.length,1)>>>0;return Ln().subarray(f,f+u.length).set(u),et=u.length,f}let r=t.length,i=e(r,1)>>>0;const o=Ln();let c=0;for(;c<r;c++){const u=t.charCodeAt(c);if(u>127)break;o[i+c]=u}if(c!==r){c!==0&&(t=t.slice(c)),i=n(i,r,r=c+t.length*3,1)>>>0;const u=Ln().subarray(i+c,i+r),f=_0(t,u);c+=f.written,i=n(i,r,c,1)>>>0}return et=c,i}let mn=null;function E(){return(mn===null||mn.buffer.detached===!0||mn.buffer.detached===void 0&&mn.buffer!==b.memory.buffer)&&(mn=new DataView(b.memory.buffer)),mn}let $n=St.length;function M(t){$n===St.length&&St.push(St.length+1);const e=$n;return $n=St[e],St[e]=t,e}function It(t,e){try{return t.apply(this,e)}catch(n){b.__wbindgen_exn_store(M(n))}}const p0=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let Bu=new p0("utf-8",{ignoreBOM:!0,fatal:!0});Bu.decode();function tt(t,e){return t=t>>>0,Bu.decode(Ln().subarray(t,t+e))}function y0(t,e){return t=t>>>0,Ln().subarray(t/1,t/1+e)}function m0(t){t<132||(St[t]=$n,$n=t)}function L(t){const e=Y(t);return m0(t),e}function Hi(t){const e=typeof t;if(e=="number"||e=="boolean"||t==null)return`${t}`;if(e=="string")return`"${t}"`;if(e=="symbol"){const i=t.description;return i==null?"Symbol":`Symbol(${i})`}if(e=="function"){const i=t.name;return typeof i=="string"&&i.length>0?`Function(${i})`:"Function"}if(Array.isArray(t)){const i=t.length;let o="[";i>0&&(o+=Hi(t[0]));for(let c=1;c<i;c++)o+=", "+Hi(t[c]);return o+="]",o}const n=/\[object ([^\]]+)\]/.exec(toString.call(t));let r;if(n&&n.length>1)r=n[1];else return toString.call(t);if(r=="Object")try{return"Object("+JSON.stringify(t)+")"}catch{return"Object"}return t instanceof Error?`${t.name}: ${t.message}
${t.stack}`:r}function ye(t){return t==null}function Vt(t,e){if(!(t instanceof e))throw new Error(`expected instance of ${e.name}`)}function b0(t){try{const i=b.__wbindgen_add_to_stack_pointer(-16);b.create(i,M(t));var e=E().getInt32(i+0,!0),n=E().getInt32(i+4,!0),r=E().getInt32(i+8,!0);if(r)throw L(n);return ft.__wrap(e)}finally{b.__wbindgen_add_to_stack_pointer(16)}}function w0(t,e){try{const o=b.__wbindgen_add_to_stack_pointer(-16);b.load(o,M(t),M(e));var n=E().getInt32(o+0,!0),r=E().getInt32(o+4,!0),i=E().getInt32(o+8,!0);if(i)throw L(r);return ft.__wrap(n)}finally{b.__wbindgen_add_to_stack_pointer(16)}}function v0(t){try{const i=b.__wbindgen_add_to_stack_pointer(-16);b.encodeChange(i,M(t));var e=E().getInt32(i+0,!0),n=E().getInt32(i+4,!0),r=E().getInt32(i+8,!0);if(r)throw L(n);return L(e)}finally{b.__wbindgen_add_to_stack_pointer(16)}}function S0(t){try{const i=b.__wbindgen_add_to_stack_pointer(-16);b.decodeChange(i,M(t));var e=E().getInt32(i+0,!0),n=E().getInt32(i+4,!0),r=E().getInt32(i+8,!0);if(r)throw L(n);return L(e)}finally{b.__wbindgen_add_to_stack_pointer(16)}}function x0(){const t=b.initSyncState();return nt.__wrap(t)}function I0(t){try{const i=b.__wbindgen_add_to_stack_pointer(-16);b.importSyncState(i,M(t));var e=E().getInt32(i+0,!0),n=E().getInt32(i+4,!0),r=E().getInt32(i+8,!0);if(r)throw L(n);return nt.__wrap(e)}finally{b.__wbindgen_add_to_stack_pointer(16)}}function A0(t){Vt(t,nt);const e=b.exportSyncState(t.__wbg_ptr);return L(e)}function E0(t){try{const i=b.__wbindgen_add_to_stack_pointer(-16);b.encodeSyncMessage(i,M(t));var e=E().getInt32(i+0,!0),n=E().getInt32(i+4,!0),r=E().getInt32(i+8,!0);if(r)throw L(n);return L(e)}finally{b.__wbindgen_add_to_stack_pointer(16)}}function k0(t){try{const i=b.__wbindgen_add_to_stack_pointer(-16);b.decodeSyncMessage(i,M(t));var e=E().getInt32(i+0,!0),n=E().getInt32(i+4,!0),r=E().getInt32(i+8,!0);if(r)throw L(n);return L(e)}finally{b.__wbindgen_add_to_stack_pointer(16)}}function C0(t){Vt(t,nt);const e=b.encodeSyncState(t.__wbg_ptr);return L(e)}function T0(t){try{const i=b.__wbindgen_add_to_stack_pointer(-16);b.decodeSyncState(i,M(t));var e=E().getInt32(i+0,!0),n=E().getInt32(i+4,!0),r=E().getInt32(i+8,!0);if(r)throw L(n);return nt.__wrap(e)}finally{b.__wbindgen_add_to_stack_pointer(16)}}const O0=Object.freeze({Array:0,0:"Array",String:1,1:"String"}),dc=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>b.__wbg_automerge_free(t>>>0,1));class ft{static __wrap(e){e=e>>>0;const n=Object.create(ft.prototype);return n.__wbg_ptr=e,dc.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,dc.unregister(this),e}free(){const e=this.__destroy_into_raw();b.__wbg_automerge_free(e,0)}static new(e,n){try{const f=b.__wbindgen_add_to_stack_pointer(-16);var r=ye(e)?0:ht(e,b.__wbindgen_malloc,b.__wbindgen_realloc),i=et;b.automerge_new(f,r,i,n);var o=E().getInt32(f+0,!0),c=E().getInt32(f+4,!0),u=E().getInt32(f+8,!0);if(u)throw L(c);return ft.__wrap(o)}finally{b.__wbindgen_add_to_stack_pointer(16)}}clone(e){try{const u=b.__wbindgen_add_to_stack_pointer(-16);var n=ye(e)?0:ht(e,b.__wbindgen_malloc,b.__wbindgen_realloc),r=et;b.automerge_clone(u,this.__wbg_ptr,n,r);var i=E().getInt32(u+0,!0),o=E().getInt32(u+4,!0),c=E().getInt32(u+8,!0);if(c)throw L(o);return ft.__wrap(i)}finally{b.__wbindgen_add_to_stack_pointer(16)}}fork(e,n){try{const f=b.__wbindgen_add_to_stack_pointer(-16);var r=ye(e)?0:ht(e,b.__wbindgen_malloc,b.__wbindgen_realloc),i=et;b.automerge_fork(f,this.__wbg_ptr,r,i,M(n));var o=E().getInt32(f+0,!0),c=E().getInt32(f+4,!0),u=E().getInt32(f+8,!0);if(u)throw L(c);return ft.__wrap(o)}finally{b.__wbindgen_add_to_stack_pointer(16)}}pendingOps(){const e=b.automerge_pendingOps(this.__wbg_ptr);return L(e)}commit(e,n){var r=ye(e)?0:ht(e,b.__wbindgen_malloc,b.__wbindgen_realloc),i=et;const o=b.automerge_commit(this.__wbg_ptr,r,i,!ye(n),ye(n)?0:n);return L(o)}merge(e){try{const o=b.__wbindgen_add_to_stack_pointer(-16);Vt(e,ft),b.automerge_merge(o,this.__wbg_ptr,e.__wbg_ptr);var n=E().getInt32(o+0,!0),r=E().getInt32(o+4,!0),i=E().getInt32(o+8,!0);if(i)throw L(r);return L(n)}finally{b.__wbindgen_add_to_stack_pointer(16)}}rollback(){return b.automerge_rollback(this.__wbg_ptr)}keys(e,n){try{const c=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_keys(c,this.__wbg_ptr,M(e),ye(n)?0:M(n));var r=E().getInt32(c+0,!0),i=E().getInt32(c+4,!0),o=E().getInt32(c+8,!0);if(o)throw L(i);return L(r)}finally{b.__wbindgen_add_to_stack_pointer(16)}}text(e,n){let r,i;try{const h=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_text(h,this.__wbg_ptr,M(e),ye(n)?0:M(n));var o=E().getInt32(h+0,!0),c=E().getInt32(h+4,!0),u=E().getInt32(h+8,!0),f=E().getInt32(h+12,!0),d=o,_=c;if(f)throw d=0,_=0,L(u);return r=d,i=_,tt(d,_)}finally{b.__wbindgen_add_to_stack_pointer(16),b.__wbindgen_free(r,i,1)}}spans(e,n){try{const c=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_spans(c,this.__wbg_ptr,M(e),ye(n)?0:M(n));var r=E().getInt32(c+0,!0),i=E().getInt32(c+4,!0),o=E().getInt32(c+8,!0);if(o)throw L(i);return L(r)}finally{b.__wbindgen_add_to_stack_pointer(16)}}splice(e,n,r,i){try{const u=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_splice(u,this.__wbg_ptr,M(e),n,r,M(i));var o=E().getInt32(u+0,!0),c=E().getInt32(u+4,!0);if(c)throw L(o)}finally{b.__wbindgen_add_to_stack_pointer(16)}}updateText(e,n){try{const o=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_updateText(o,this.__wbg_ptr,M(e),M(n));var r=E().getInt32(o+0,!0),i=E().getInt32(o+4,!0);if(i)throw L(r)}finally{b.__wbindgen_add_to_stack_pointer(16)}}updateSpans(e,n){try{const o=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_updateSpans(o,this.__wbg_ptr,M(e),M(n));var r=E().getInt32(o+0,!0),i=E().getInt32(o+4,!0);if(i)throw L(r)}finally{b.__wbindgen_add_to_stack_pointer(16)}}push(e,n,r){try{const c=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_push(c,this.__wbg_ptr,M(e),M(n),M(r));var i=E().getInt32(c+0,!0),o=E().getInt32(c+4,!0);if(o)throw L(i)}finally{b.__wbindgen_add_to_stack_pointer(16)}}pushObject(e,n){try{const u=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_pushObject(u,this.__wbg_ptr,M(e),M(n));var r=E().getInt32(u+0,!0),i=E().getInt32(u+4,!0),o=E().getInt32(u+8,!0),c=E().getInt32(u+12,!0);if(c)throw L(o);let f;return r!==0&&(f=tt(r,i).slice(),b.__wbindgen_free(r,i*1,1)),f}finally{b.__wbindgen_add_to_stack_pointer(16)}}insert(e,n,r,i){try{const u=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_insert(u,this.__wbg_ptr,M(e),n,M(r),M(i));var o=E().getInt32(u+0,!0),c=E().getInt32(u+4,!0);if(c)throw L(o)}finally{b.__wbindgen_add_to_stack_pointer(16)}}splitBlock(e,n,r){try{const c=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_splitBlock(c,this.__wbg_ptr,M(e),n,M(r));var i=E().getInt32(c+0,!0),o=E().getInt32(c+4,!0);if(o)throw L(i)}finally{b.__wbindgen_add_to_stack_pointer(16)}}joinBlock(e,n){try{const o=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_joinBlock(o,this.__wbg_ptr,M(e),n);var r=E().getInt32(o+0,!0),i=E().getInt32(o+4,!0);if(i)throw L(r)}finally{b.__wbindgen_add_to_stack_pointer(16)}}updateBlock(e,n,r){try{const c=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_updateBlock(c,this.__wbg_ptr,M(e),n,M(r));var i=E().getInt32(c+0,!0),o=E().getInt32(c+4,!0);if(o)throw L(i)}finally{b.__wbindgen_add_to_stack_pointer(16)}}getBlock(e,n,r){try{const u=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_getBlock(u,this.__wbg_ptr,M(e),n,ye(r)?0:M(r));var i=E().getInt32(u+0,!0),o=E().getInt32(u+4,!0),c=E().getInt32(u+8,!0);if(c)throw L(o);return L(i)}finally{b.__wbindgen_add_to_stack_pointer(16)}}insertObject(e,n,r){try{const f=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_insertObject(f,this.__wbg_ptr,M(e),n,M(r));var i=E().getInt32(f+0,!0),o=E().getInt32(f+4,!0),c=E().getInt32(f+8,!0),u=E().getInt32(f+12,!0);if(u)throw L(c);let d;return i!==0&&(d=tt(i,o).slice(),b.__wbindgen_free(i,o*1,1)),d}finally{b.__wbindgen_add_to_stack_pointer(16)}}put(e,n,r,i){try{const u=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_put(u,this.__wbg_ptr,M(e),M(n),M(r),M(i));var o=E().getInt32(u+0,!0),c=E().getInt32(u+4,!0);if(c)throw L(o)}finally{b.__wbindgen_add_to_stack_pointer(16)}}putObject(e,n,r){try{const u=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_putObject(u,this.__wbg_ptr,M(e),M(n),M(r));var i=E().getInt32(u+0,!0),o=E().getInt32(u+4,!0),c=E().getInt32(u+8,!0);if(c)throw L(o);return L(i)}finally{b.__wbindgen_add_to_stack_pointer(16)}}increment(e,n,r){try{const c=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_increment(c,this.__wbg_ptr,M(e),M(n),M(r));var i=E().getInt32(c+0,!0),o=E().getInt32(c+4,!0);if(o)throw L(i)}finally{b.__wbindgen_add_to_stack_pointer(16)}}get(e,n,r){try{const u=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_get(u,this.__wbg_ptr,M(e),M(n),ye(r)?0:M(r));var i=E().getInt32(u+0,!0),o=E().getInt32(u+4,!0),c=E().getInt32(u+8,!0);if(c)throw L(o);return L(i)}finally{b.__wbindgen_add_to_stack_pointer(16)}}getWithType(e,n,r){try{const u=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_getWithType(u,this.__wbg_ptr,M(e),M(n),ye(r)?0:M(r));var i=E().getInt32(u+0,!0),o=E().getInt32(u+4,!0),c=E().getInt32(u+8,!0);if(c)throw L(o);return L(i)}finally{b.__wbindgen_add_to_stack_pointer(16)}}objInfo(e,n){try{const c=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_objInfo(c,this.__wbg_ptr,M(e),ye(n)?0:M(n));var r=E().getInt32(c+0,!0),i=E().getInt32(c+4,!0),o=E().getInt32(c+8,!0);if(o)throw L(i);return L(r)}finally{b.__wbindgen_add_to_stack_pointer(16)}}getAll(e,n,r){try{const u=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_getAll(u,this.__wbg_ptr,M(e),M(n),ye(r)?0:M(r));var i=E().getInt32(u+0,!0),o=E().getInt32(u+4,!0),c=E().getInt32(u+8,!0);if(c)throw L(o);return L(i)}finally{b.__wbindgen_add_to_stack_pointer(16)}}enableFreeze(e){try{const o=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_enableFreeze(o,this.__wbg_ptr,M(e));var n=E().getInt32(o+0,!0),r=E().getInt32(o+4,!0),i=E().getInt32(o+8,!0);if(i)throw L(r);return L(n)}finally{b.__wbindgen_add_to_stack_pointer(16)}}registerDatatype(e,n,r){try{const c=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_registerDatatype(c,this.__wbg_ptr,M(e),M(n),M(r));var i=E().getInt32(c+0,!0),o=E().getInt32(c+4,!0);if(o)throw L(i)}finally{b.__wbindgen_add_to_stack_pointer(16)}}applyPatches(e,n){try{const c=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_applyPatches(c,this.__wbg_ptr,M(e),M(n));var r=E().getInt32(c+0,!0),i=E().getInt32(c+4,!0),o=E().getInt32(c+8,!0);if(o)throw L(i);return L(r)}finally{b.__wbindgen_add_to_stack_pointer(16)}}applyAndReturnPatches(e,n){try{const c=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_applyAndReturnPatches(c,this.__wbg_ptr,M(e),M(n));var r=E().getInt32(c+0,!0),i=E().getInt32(c+4,!0),o=E().getInt32(c+8,!0);if(o)throw L(i);return L(r)}finally{b.__wbindgen_add_to_stack_pointer(16)}}diffIncremental(){try{const i=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_diffIncremental(i,this.__wbg_ptr);var e=E().getInt32(i+0,!0),n=E().getInt32(i+4,!0),r=E().getInt32(i+8,!0);if(r)throw L(n);return L(e)}finally{b.__wbindgen_add_to_stack_pointer(16)}}updateDiffCursor(){b.automerge_updateDiffCursor(this.__wbg_ptr)}resetDiffCursor(){b.automerge_resetDiffCursor(this.__wbg_ptr)}diff(e,n){try{const c=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_diff(c,this.__wbg_ptr,M(e),M(n));var r=E().getInt32(c+0,!0),i=E().getInt32(c+4,!0),o=E().getInt32(c+8,!0);if(o)throw L(i);return L(r)}finally{b.__wbindgen_add_to_stack_pointer(16)}}isolate(e){try{const i=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_isolate(i,this.__wbg_ptr,M(e));var n=E().getInt32(i+0,!0),r=E().getInt32(i+4,!0);if(r)throw L(n)}finally{b.__wbindgen_add_to_stack_pointer(16)}}integrate(){b.automerge_integrate(this.__wbg_ptr)}length(e,n){try{const c=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_length(c,this.__wbg_ptr,M(e),ye(n)?0:M(n));var r=E().getFloat64(c+0,!0),i=E().getInt32(c+8,!0),o=E().getInt32(c+12,!0);if(o)throw L(i);return r}finally{b.__wbindgen_add_to_stack_pointer(16)}}delete(e,n){try{const o=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_delete(o,this.__wbg_ptr,M(e),M(n));var r=E().getInt32(o+0,!0),i=E().getInt32(o+4,!0);if(i)throw L(r)}finally{b.__wbindgen_add_to_stack_pointer(16)}}save(){const e=b.automerge_save(this.__wbg_ptr);return L(e)}saveIncremental(){const e=b.automerge_saveIncremental(this.__wbg_ptr);return L(e)}saveSince(e){try{const o=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_saveSince(o,this.__wbg_ptr,M(e));var n=E().getInt32(o+0,!0),r=E().getInt32(o+4,!0),i=E().getInt32(o+8,!0);if(i)throw L(r);return L(n)}finally{b.__wbindgen_add_to_stack_pointer(16)}}saveNoCompress(){const e=b.automerge_saveNoCompress(this.__wbg_ptr);return L(e)}saveAndVerify(){try{const i=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_saveAndVerify(i,this.__wbg_ptr);var e=E().getInt32(i+0,!0),n=E().getInt32(i+4,!0),r=E().getInt32(i+8,!0);if(r)throw L(n);return L(e)}finally{b.__wbindgen_add_to_stack_pointer(16)}}loadIncremental(e){try{const o=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_loadIncremental(o,this.__wbg_ptr,M(e));var n=E().getFloat64(o+0,!0),r=E().getInt32(o+8,!0),i=E().getInt32(o+12,!0);if(i)throw L(r);return n}finally{b.__wbindgen_add_to_stack_pointer(16)}}applyChanges(e){try{const i=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_applyChanges(i,this.__wbg_ptr,M(e));var n=E().getInt32(i+0,!0),r=E().getInt32(i+4,!0);if(r)throw L(n)}finally{b.__wbindgen_add_to_stack_pointer(16)}}getChanges(e){try{const o=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_getChanges(o,this.__wbg_ptr,M(e));var n=E().getInt32(o+0,!0),r=E().getInt32(o+4,!0),i=E().getInt32(o+8,!0);if(i)throw L(r);return L(n)}finally{b.__wbindgen_add_to_stack_pointer(16)}}getChangeByHash(e){try{const o=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_getChangeByHash(o,this.__wbg_ptr,M(e));var n=E().getInt32(o+0,!0),r=E().getInt32(o+4,!0),i=E().getInt32(o+8,!0);if(i)throw L(r);return L(n)}finally{b.__wbindgen_add_to_stack_pointer(16)}}getDecodedChangeByHash(e){try{const o=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_getDecodedChangeByHash(o,this.__wbg_ptr,M(e));var n=E().getInt32(o+0,!0),r=E().getInt32(o+4,!0),i=E().getInt32(o+8,!0);if(i)throw L(r);return L(n)}finally{b.__wbindgen_add_to_stack_pointer(16)}}getChangesAdded(e){Vt(e,ft);const n=b.automerge_getChangesAdded(this.__wbg_ptr,e.__wbg_ptr);return L(n)}getHeads(){const e=b.automerge_getHeads(this.__wbg_ptr);return L(e)}getActorId(){let e,n;try{const o=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_getActorId(o,this.__wbg_ptr);var r=E().getInt32(o+0,!0),i=E().getInt32(o+4,!0);return e=r,n=i,tt(r,i)}finally{b.__wbindgen_add_to_stack_pointer(16),b.__wbindgen_free(e,n,1)}}getLastLocalChange(){const e=b.automerge_getLastLocalChange(this.__wbg_ptr);return L(e)}dump(){b.automerge_dump(this.__wbg_ptr)}getMissingDeps(e){try{const o=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_getMissingDeps(o,this.__wbg_ptr,ye(e)?0:M(e));var n=E().getInt32(o+0,!0),r=E().getInt32(o+4,!0),i=E().getInt32(o+8,!0);if(i)throw L(r);return L(n)}finally{b.__wbindgen_add_to_stack_pointer(16)}}receiveSyncMessage(e,n){try{const o=b.__wbindgen_add_to_stack_pointer(-16);Vt(e,nt),b.automerge_receiveSyncMessage(o,this.__wbg_ptr,e.__wbg_ptr,M(n));var r=E().getInt32(o+0,!0),i=E().getInt32(o+4,!0);if(i)throw L(r)}finally{b.__wbindgen_add_to_stack_pointer(16)}}generateSyncMessage(e){Vt(e,nt);const n=b.automerge_generateSyncMessage(this.__wbg_ptr,e.__wbg_ptr);return L(n)}toJS(e){try{const o=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_toJS(o,this.__wbg_ptr,M(e));var n=E().getInt32(o+0,!0),r=E().getInt32(o+4,!0),i=E().getInt32(o+8,!0);if(i)throw L(r);return L(n)}finally{b.__wbindgen_add_to_stack_pointer(16)}}materialize(e,n,r){try{const u=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_materialize(u,this.__wbg_ptr,M(e),ye(n)?0:M(n),M(r));var i=E().getInt32(u+0,!0),o=E().getInt32(u+4,!0),c=E().getInt32(u+8,!0);if(c)throw L(o);return L(i)}finally{b.__wbindgen_add_to_stack_pointer(16)}}getCursor(e,n,r,i){let o,c;try{const y=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_getCursor(y,this.__wbg_ptr,M(e),M(n),ye(r)?0:M(r),M(i));var u=E().getInt32(y+0,!0),f=E().getInt32(y+4,!0),d=E().getInt32(y+8,!0),_=E().getInt32(y+12,!0),h=u,g=f;if(_)throw h=0,g=0,L(d);return o=h,c=g,tt(h,g)}finally{b.__wbindgen_add_to_stack_pointer(16),b.__wbindgen_free(o,c,1)}}getCursorPosition(e,n,r){try{const u=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_getCursorPosition(u,this.__wbg_ptr,M(e),M(n),ye(r)?0:M(r));var i=E().getFloat64(u+0,!0),o=E().getInt32(u+8,!0),c=E().getInt32(u+12,!0);if(c)throw L(o);return i}finally{b.__wbindgen_add_to_stack_pointer(16)}}emptyChange(e,n){var r=ye(e)?0:ht(e,b.__wbindgen_malloc,b.__wbindgen_realloc),i=et;const o=b.automerge_emptyChange(this.__wbg_ptr,r,i,!ye(n),ye(n)?0:n);return L(o)}mark(e,n,r,i,o){try{const f=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_mark(f,this.__wbg_ptr,M(e),M(n),M(r),M(i),M(o));var c=E().getInt32(f+0,!0),u=E().getInt32(f+4,!0);if(u)throw L(c)}finally{b.__wbindgen_add_to_stack_pointer(16)}}unmark(e,n,r){try{const c=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_unmark(c,this.__wbg_ptr,M(e),M(n),M(r));var i=E().getInt32(c+0,!0),o=E().getInt32(c+4,!0);if(o)throw L(i)}finally{b.__wbindgen_add_to_stack_pointer(16)}}marks(e,n){try{const c=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_marks(c,this.__wbg_ptr,M(e),ye(n)?0:M(n));var r=E().getInt32(c+0,!0),i=E().getInt32(c+4,!0),o=E().getInt32(c+8,!0);if(o)throw L(i);return L(r)}finally{b.__wbindgen_add_to_stack_pointer(16)}}marksAt(e,n,r){try{const u=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_marksAt(u,this.__wbg_ptr,M(e),n,ye(r)?0:M(r));var i=E().getInt32(u+0,!0),o=E().getInt32(u+4,!0),c=E().getInt32(u+8,!0);if(c)throw L(o);return L(i)}finally{b.__wbindgen_add_to_stack_pointer(16)}}hasOurChanges(e){Vt(e,nt);const n=b.automerge_hasOurChanges(this.__wbg_ptr,e.__wbg_ptr);return L(n)}topoHistoryTraversal(){const e=b.automerge_topoHistoryTraversal(this.__wbg_ptr);return L(e)}stats(){const e=b.automerge_stats(this.__wbg_ptr);return L(e)}}const hc=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>b.__wbg_syncstate_free(t>>>0,1));class nt{static __wrap(e){e=e>>>0;const n=Object.create(nt.prototype);return n.__wbg_ptr=e,hc.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,hc.unregister(this),e}free(){const e=this.__destroy_into_raw();b.__wbg_syncstate_free(e,0)}get sharedHeads(){const e=b.syncstate_sharedHeads(this.__wbg_ptr);return L(e)}get lastSentHeads(){const e=b.syncstate_lastSentHeads(this.__wbg_ptr);return L(e)}set lastSentHeads(e){try{const i=b.__wbindgen_add_to_stack_pointer(-16);b.syncstate_set_lastSentHeads(i,this.__wbg_ptr,M(e));var n=E().getInt32(i+0,!0),r=E().getInt32(i+4,!0);if(r)throw L(n)}finally{b.__wbindgen_add_to_stack_pointer(16)}}set sentHashes(e){try{const i=b.__wbindgen_add_to_stack_pointer(-16);b.syncstate_set_sentHashes(i,this.__wbg_ptr,M(e));var n=E().getInt32(i+0,!0),r=E().getInt32(i+4,!0);if(r)throw L(n)}finally{b.__wbindgen_add_to_stack_pointer(16)}}clone(){const e=b.syncstate_clone(this.__wbg_ptr);return nt.__wrap(e)}}function Lu(t,e){const n=String(Y(e)),r=ht(n,b.__wbindgen_malloc,b.__wbindgen_realloc),i=et;E().setInt32(t+4,i,!0),E().setInt32(t+0,r,!0)}function $u(){return It(function(t,e,n){const r=Reflect.apply(Y(t),Y(e),Y(n));return M(r)},arguments)}function Fu(t,e){const n=Object.assign(Y(t),Y(e));return M(n)}function Nu(t){const e=Y(t).buffer;return M(e)}function zu(){return It(function(t,e){const n=Y(t).call(Y(e));return M(n)},arguments)}function Vu(){return It(function(t,e,n){const r=Y(t).call(Y(e),Y(n));return M(r)},arguments)}function Wu(t,e){const n=Y(t).concat(Y(e));return M(n)}function qu(t,e,n){const r=Object.defineProperty(Y(t),Y(e),Y(n));return M(r)}function Gu(){return It(function(t,e){return Reflect.deleteProperty(Y(t),Y(e))},arguments)}function Ju(t){return Y(t).done}function Ku(t){const e=Object.entries(Y(t));return M(e)}function Yu(t,e){let n,r;try{n=t,r=e,console.error(tt(t,e))}finally{b.__wbindgen_free(n,r,1)}}function Xu(t,e){const n=Symbol.for(tt(t,e));return M(n)}function Zu(t){const e=Object.freeze(Y(t));return M(e)}function Qu(t){const e=Array.from(Y(t));return M(e)}function ef(){return It(function(t,e){globalThis.crypto.getRandomValues(y0(t,e))},arguments)}function tf(t){return Y(t).getTime()}function nf(){return It(function(t,e){const n=Reflect.get(Y(t),Y(e));return M(n)},arguments)}function rf(t,e){const n=Y(t)[e>>>0];return M(n)}function sf(t){let e;try{e=Y(t)instanceof ArrayBuffer}catch{e=!1}return e}function of(t){let e;try{e=Y(t)instanceof Date}catch{e=!1}return e}function af(t){let e;try{e=Y(t)instanceof Object}catch{e=!1}return e}function cf(t){let e;try{e=Y(t)instanceof Uint8Array}catch{e=!1}return e}function uf(t){return Array.isArray(Y(t))}function ff(){return M(Symbol.iterator)}function lf(t){const e=Object.keys(Y(t));return M(e)}function df(t){return Y(t).length}function hf(t){return Y(t).length}function gf(t){return Y(t).length}function _f(t,e){console.log(Y(t),Y(e))}function pf(t){console.log(Y(t))}function yf(t,e){const n=new RangeError(tt(t,e));return M(n)}function mf(t){const e=new Date(Y(t));return M(e)}function bf(){const t=new Object;return M(t)}function wf(){const t=new Array;return M(t)}function vf(){const t=new Error;return M(t)}function Sf(t){const e=new Uint8Array(Y(t));return M(e)}function xf(t,e){const n=new Error(tt(t,e));return M(n)}function If(t,e,n){const r=new Uint8Array(Y(t),e>>>0,n>>>0);return M(r)}function Af(t){const e=Y(t).next;return M(e)}function Ef(){return It(function(t){const e=Y(t).next();return M(e)},arguments)}function kf(){return It(function(t){const e=Reflect.ownKeys(Y(t));return M(e)},arguments)}function Cf(t,e){return Y(t).push(Y(e))}function Tf(t,e,n){Y(t)[e>>>0]=L(n)}function Of(t,e,n){Y(t)[L(e)]=L(n)}function Rf(t,e,n){Y(t).set(Y(e),n>>>0)}function Mf(){return It(function(t,e,n){return Reflect.set(Y(t),Y(e),Y(n))},arguments)}function jf(t,e,n){const r=Y(t).slice(e>>>0,n>>>0);return M(r)}function Df(t,e){const n=Y(e).stack,r=ht(n,b.__wbindgen_malloc,b.__wbindgen_realloc),i=et;E().setInt32(t+4,i,!0),E().setInt32(t+0,r,!0)}function Uf(t){const e=Y(t).toString();return M(e)}function Hf(t,e){return Y(t).unshift(Y(e))}function Pf(t){const e=Y(t).value;return M(e)}function Bf(t){const e=Object.values(Y(t));return M(e)}function Lf(t){return M(t)}function $f(t){const e=BigInt.asUintN(64,t);return M(e)}function Ff(t){const e=Y(t);return typeof e=="boolean"?e?1:0:2}function Nf(t,e){const n=Hi(Y(e)),r=ht(n,b.__wbindgen_malloc,b.__wbindgen_realloc),i=et;E().setInt32(t+4,i,!0),E().setInt32(t+0,r,!0)}function zf(t,e){const n=new Error(tt(t,e));return M(n)}function Vf(t){return Array.isArray(Y(t))}function Wf(t){return typeof Y(t)=="function"}function qf(t){return Y(t)===null}function Gf(t){const e=Y(t);return typeof e=="object"&&e!==null}function Jf(t){return typeof Y(t)=="string"}function Kf(t){return Y(t)===void 0}function Yf(t,e){const n=Y(e),r=JSON.stringify(n===void 0?null:n),i=ht(r,b.__wbindgen_malloc,b.__wbindgen_realloc),o=et;E().setInt32(t+4,o,!0),E().setInt32(t+0,i,!0)}function Xf(t,e){return Y(t)==Y(e)}function Zf(){const t=b.memory;return M(t)}function Qf(t,e){const n=Y(e),r=typeof n=="number"?n:void 0;E().setFloat64(t+8,ye(r)?0:r,!0),E().setInt32(t+0,!ye(r),!0)}function el(t){return M(t)}function tl(t){const e=Y(t);return M(e)}function nl(t){L(t)}function rl(t,e){const n=Y(e),r=typeof n=="string"?n:void 0;var i=ye(r)?0:ht(r,b.__wbindgen_malloc,b.__wbindgen_realloc),o=et;E().setInt32(t+4,o,!0),E().setInt32(t+0,i,!0)}function sl(t,e){const n=tt(t,e);return M(n)}function il(t,e){throw new Error(tt(t,e))}URL=globalThis.URL;const G=await h0({"./automerge_wasm_bg.js":{__wbindgen_object_drop_ref:nl,__wbindgen_string_get:rl,__wbindgen_error_new:zf,__wbindgen_string_new:sl,__wbindgen_number_new:el,__wbindgen_object_clone_ref:tl,__wbindgen_number_get:Qf,__wbindgen_is_undefined:Kf,__wbindgen_boolean_get:Ff,__wbindgen_is_null:qf,__wbindgen_is_string:Jf,__wbindgen_is_function:Wf,__wbindgen_is_object:Gf,__wbindgen_is_array:Vf,__wbindgen_json_serialize:Yf,__wbg_new_8a6f238a6ece86ea:vf,__wbg_stack_0ed75d68575b0f3c:Df,__wbg_error_7534b8e9a36f1ab4:Yu,__wbindgen_jsval_loose_eq:Xf,__wbg_String_fed4d24b68977888:Lu,__wbindgen_bigint_from_i64:Lf,__wbindgen_bigint_from_u64:$f,__wbg_set_3fda3bac07393de4:Of,__wbg_getRandomValues_3d90134a348e46b3:ef,__wbg_log_c222819a41e063d3:pf,__wbg_log_1ae1e9f741096e91:_f,__wbg_get_b9b93047fe3cf45b:rf,__wbg_length_e2d2a49132c1b256:gf,__wbg_new_78feb108b6472713:wf,__wbg_next_25feadfc0913fea9:Af,__wbg_next_6574e1a8a62d1055:Ef,__wbg_done_769e5ede4b31c67b:Ju,__wbg_value_cd1ffa7b1ab794f1:Pf,__wbg_iterator_9a24c88df860dc65:ff,__wbg_get_67b2ba62fc30de12:nf,__wbg_call_672a4d21634d4a24:zu,__wbg_new_405e22f390576ce2:bf,__wbg_length_d56737991078581b:hf,__wbg_set_37837023f3d740e8:Tf,__wbg_from_2a5d3e218e67aa85:Qu,__wbg_isArray_a1eab7e0d067391b:uf,__wbg_push_737cfc8c1432c2c6:Cf,__wbg_unshift_c290010f73f04fb1:Hf,__wbg_instanceof_ArrayBuffer_e14585432e3737fc:sf,__wbg_new_c68d7209be747379:xf,__wbg_call_7cccdd69e0791ae2:Vu,__wbg_instanceof_Date_e9a9be8b9cea7890:of,__wbg_getTime_46267b1c24877e30:tf,__wbg_new_31a97dac4f10fab7:mf,__wbg_instanceof_Object_7f2dcef8f78644a4:af,__wbg_assign_3627b8559449930a:Fu,__wbg_defineProperty_a3ddad9901e2d29e:qu,__wbg_entries_3265d4158b33e5dc:Ku,__wbg_freeze_ef6d70cf38e8d948:Zu,__wbg_keys_5c77a08ddc2fb8a6:lf,__wbg_values_fcb8ba8c0aad8b58:Bf,__wbg_new_1ab78df5e132f715:yf,__wbg_apply_eb9e9b97497f91e4:$u,__wbg_deleteProperty_96363d4a1d977c97:Gu,__wbg_ownKeys_3930041068756f1f:kf,__wbg_set_bb8cecf6a62b9f46:Mf,__wbg_buffer_609cc3eee51ed158:Nu,__wbg_concat_9de968491c4340cf:Wu,__wbg_slice_972c243648c9fd2e:jf,__wbg_for_4ff07bddd743c5e7:Xu,__wbg_toString_66ab719c2a98bdf1:Uf,__wbg_newwithbyteoffsetandlength_d97e637ebe145a9a:If,__wbg_new_a12002a7f91c75be:Sf,__wbg_set_65595bdd868b3009:Rf,__wbg_length_a446193dc22c12f8:df,__wbg_instanceof_Uint8Array_17156bcf118086a9:cf,__wbindgen_debug_string:Nf,__wbindgen_throw:il,__wbindgen_memory:Zf}},d0),R0=G.memory,M0=G.__wbg_syncstate_free,j0=G.syncstate_sharedHeads,D0=G.syncstate_lastSentHeads,U0=G.syncstate_set_lastSentHeads,H0=G.syncstate_set_sentHashes,P0=G.syncstate_clone,B0=G.__wbg_automerge_free,L0=G.automerge_new,$0=G.automerge_clone,F0=G.automerge_fork,N0=G.automerge_pendingOps,z0=G.automerge_commit,V0=G.automerge_merge,W0=G.automerge_rollback,q0=G.automerge_keys,G0=G.automerge_text,J0=G.automerge_spans,K0=G.automerge_splice,Y0=G.automerge_updateText,X0=G.automerge_updateSpans,Z0=G.automerge_push,Q0=G.automerge_pushObject,ey=G.automerge_insert,ty=G.automerge_splitBlock,ny=G.automerge_joinBlock,ry=G.automerge_updateBlock,sy=G.automerge_getBlock,iy=G.automerge_insertObject,oy=G.automerge_put,ay=G.automerge_putObject,cy=G.automerge_increment,uy=G.automerge_get,fy=G.automerge_getWithType,ly=G.automerge_objInfo,dy=G.automerge_getAll,hy=G.automerge_enableFreeze,gy=G.automerge_registerDatatype,_y=G.automerge_applyPatches,py=G.automerge_applyAndReturnPatches,yy=G.automerge_diffIncremental,my=G.automerge_updateDiffCursor,by=G.automerge_resetDiffCursor,wy=G.automerge_diff,vy=G.automerge_isolate,Sy=G.automerge_integrate,xy=G.automerge_length,Iy=G.automerge_delete,Ay=G.automerge_save,Ey=G.automerge_saveIncremental,ky=G.automerge_saveSince,Cy=G.automerge_saveNoCompress,Ty=G.automerge_saveAndVerify,Oy=G.automerge_loadIncremental,Ry=G.automerge_applyChanges,My=G.automerge_getChanges,jy=G.automerge_getChangeByHash,Dy=G.automerge_getDecodedChangeByHash,Uy=G.automerge_getChangesAdded,Hy=G.automerge_getHeads,Py=G.automerge_getActorId,By=G.automerge_getLastLocalChange,Ly=G.automerge_dump,$y=G.automerge_getMissingDeps,Fy=G.automerge_receiveSyncMessage,Ny=G.automerge_generateSyncMessage,zy=G.automerge_toJS,Vy=G.automerge_materialize,Wy=G.automerge_getCursor,qy=G.automerge_getCursorPosition,Gy=G.automerge_emptyChange,Jy=G.automerge_mark,Ky=G.automerge_unmark,Yy=G.automerge_marks,Xy=G.automerge_marksAt,Zy=G.automerge_hasOurChanges,Qy=G.automerge_topoHistoryTraversal,em=G.automerge_stats,tm=G.create,nm=G.load,rm=G.encodeChange,sm=G.decodeChange,im=G.initSyncState,om=G.importSyncState,am=G.exportSyncState,cm=G.encodeSyncMessage,um=G.decodeSyncMessage,fm=G.encodeSyncState,lm=G.decodeSyncState,dm=G.__wbindgen_malloc,hm=G.__wbindgen_realloc,gm=G.__wbindgen_exn_store,_m=G.__wbindgen_free,pm=G.__wbindgen_add_to_stack_pointer,ym=Object.freeze(Object.defineProperty({__proto__:null,__wbg_automerge_free:B0,__wbg_syncstate_free:M0,__wbindgen_add_to_stack_pointer:pm,__wbindgen_exn_store:gm,__wbindgen_free:_m,__wbindgen_malloc:dm,__wbindgen_realloc:hm,automerge_applyAndReturnPatches:py,automerge_applyChanges:Ry,automerge_applyPatches:_y,automerge_clone:$0,automerge_commit:z0,automerge_delete:Iy,automerge_diff:wy,automerge_diffIncremental:yy,automerge_dump:Ly,automerge_emptyChange:Gy,automerge_enableFreeze:hy,automerge_fork:F0,automerge_generateSyncMessage:Ny,automerge_get:uy,automerge_getActorId:Py,automerge_getAll:dy,automerge_getBlock:sy,automerge_getChangeByHash:jy,automerge_getChanges:My,automerge_getChangesAdded:Uy,automerge_getCursor:Wy,automerge_getCursorPosition:qy,automerge_getDecodedChangeByHash:Dy,automerge_getHeads:Hy,automerge_getLastLocalChange:By,automerge_getMissingDeps:$y,automerge_getWithType:fy,automerge_hasOurChanges:Zy,automerge_increment:cy,automerge_insert:ey,automerge_insertObject:iy,automerge_integrate:Sy,automerge_isolate:vy,automerge_joinBlock:ny,automerge_keys:q0,automerge_length:xy,automerge_loadIncremental:Oy,automerge_mark:Jy,automerge_marks:Yy,automerge_marksAt:Xy,automerge_materialize:Vy,automerge_merge:V0,automerge_new:L0,automerge_objInfo:ly,automerge_pendingOps:N0,automerge_push:Z0,automerge_pushObject:Q0,automerge_put:oy,automerge_putObject:ay,automerge_receiveSyncMessage:Fy,automerge_registerDatatype:gy,automerge_resetDiffCursor:by,automerge_rollback:W0,automerge_save:Ay,automerge_saveAndVerify:Ty,automerge_saveIncremental:Ey,automerge_saveNoCompress:Cy,automerge_saveSince:ky,automerge_spans:J0,automerge_splice:K0,automerge_splitBlock:ty,automerge_stats:em,automerge_text:G0,automerge_toJS:zy,automerge_topoHistoryTraversal:Qy,automerge_unmark:Ky,automerge_updateBlock:ry,automerge_updateDiffCursor:my,automerge_updateSpans:X0,automerge_updateText:Y0,create:tm,decodeChange:sm,decodeSyncMessage:um,decodeSyncState:lm,encodeChange:rm,encodeSyncMessage:cm,encodeSyncState:fm,exportSyncState:am,importSyncState:om,initSyncState:im,load:nm,memory:R0,syncstate_clone:P0,syncstate_lastSentHeads:D0,syncstate_set_lastSentHeads:U0,syncstate_set_sentHashes:H0,syncstate_sharedHeads:j0},Symbol.toStringTag,{value:"Module"}));Pu(ym);const mm=Object.freeze(Object.defineProperty({__proto__:null,Automerge:ft,SyncState:nt,TextRepresentation:O0,__wbg_String_fed4d24b68977888:Lu,__wbg_apply_eb9e9b97497f91e4:$u,__wbg_assign_3627b8559449930a:Fu,__wbg_buffer_609cc3eee51ed158:Nu,__wbg_call_672a4d21634d4a24:zu,__wbg_call_7cccdd69e0791ae2:Vu,__wbg_concat_9de968491c4340cf:Wu,__wbg_defineProperty_a3ddad9901e2d29e:qu,__wbg_deleteProperty_96363d4a1d977c97:Gu,__wbg_done_769e5ede4b31c67b:Ju,__wbg_entries_3265d4158b33e5dc:Ku,__wbg_error_7534b8e9a36f1ab4:Yu,__wbg_for_4ff07bddd743c5e7:Xu,__wbg_freeze_ef6d70cf38e8d948:Zu,__wbg_from_2a5d3e218e67aa85:Qu,__wbg_getRandomValues_3d90134a348e46b3:ef,__wbg_getTime_46267b1c24877e30:tf,__wbg_get_67b2ba62fc30de12:nf,__wbg_get_b9b93047fe3cf45b:rf,__wbg_instanceof_ArrayBuffer_e14585432e3737fc:sf,__wbg_instanceof_Date_e9a9be8b9cea7890:of,__wbg_instanceof_Object_7f2dcef8f78644a4:af,__wbg_instanceof_Uint8Array_17156bcf118086a9:cf,__wbg_isArray_a1eab7e0d067391b:uf,__wbg_iterator_9a24c88df860dc65:ff,__wbg_keys_5c77a08ddc2fb8a6:lf,__wbg_length_a446193dc22c12f8:df,__wbg_length_d56737991078581b:hf,__wbg_length_e2d2a49132c1b256:gf,__wbg_log_1ae1e9f741096e91:_f,__wbg_log_c222819a41e063d3:pf,__wbg_new_1ab78df5e132f715:yf,__wbg_new_31a97dac4f10fab7:mf,__wbg_new_405e22f390576ce2:bf,__wbg_new_78feb108b6472713:wf,__wbg_new_8a6f238a6ece86ea:vf,__wbg_new_a12002a7f91c75be:Sf,__wbg_new_c68d7209be747379:xf,__wbg_newwithbyteoffsetandlength_d97e637ebe145a9a:If,__wbg_next_25feadfc0913fea9:Af,__wbg_next_6574e1a8a62d1055:Ef,__wbg_ownKeys_3930041068756f1f:kf,__wbg_push_737cfc8c1432c2c6:Cf,__wbg_set_37837023f3d740e8:Tf,__wbg_set_3fda3bac07393de4:Of,__wbg_set_65595bdd868b3009:Rf,__wbg_set_bb8cecf6a62b9f46:Mf,__wbg_set_wasm:Pu,__wbg_slice_972c243648c9fd2e:jf,__wbg_stack_0ed75d68575b0f3c:Df,__wbg_toString_66ab719c2a98bdf1:Uf,__wbg_unshift_c290010f73f04fb1:Hf,__wbg_value_cd1ffa7b1ab794f1:Pf,__wbg_values_fcb8ba8c0aad8b58:Bf,__wbindgen_bigint_from_i64:Lf,__wbindgen_bigint_from_u64:$f,__wbindgen_boolean_get:Ff,__wbindgen_debug_string:Nf,__wbindgen_error_new:zf,__wbindgen_is_array:Vf,__wbindgen_is_function:Wf,__wbindgen_is_null:qf,__wbindgen_is_object:Gf,__wbindgen_is_string:Jf,__wbindgen_is_undefined:Kf,__wbindgen_json_serialize:Yf,__wbindgen_jsval_loose_eq:Xf,__wbindgen_memory:Zf,__wbindgen_number_get:Qf,__wbindgen_number_new:el,__wbindgen_object_clone_ref:tl,__wbindgen_object_drop_ref:nl,__wbindgen_string_get:rl,__wbindgen_string_new:sl,__wbindgen_throw:il,create:b0,decodeChange:S0,decodeSyncMessage:k0,decodeSyncState:T0,encodeChange:v0,encodeSyncMessage:E0,encodeSyncState:C0,exportSyncState:A0,importSyncState:I0,initSyncState:x0,load:w0},Symbol.toStringTag,{value:"Module"}));yg(mm);var li={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gc;function bm(){if(gc)return ce;gc=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),h=Symbol.iterator;function g(w){return w===null||typeof w!="object"?null:(w=h&&w[h]||w["@@iterator"],typeof w=="function"?w:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function A(w,R,W){this.props=w,this.context=R,this.refs=v,this.updater=W||y}A.prototype.isReactComponent={},A.prototype.setState=function(w,R){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,R,"setState")},A.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function N(){}N.prototype=A.prototype;function H(w,R,W){this.props=w,this.context=R,this.refs=v,this.updater=W||y}var C=H.prototype=new N;C.constructor=H,m(C,A.prototype),C.isPureReactComponent=!0;var Z=Array.isArray,q=Object.prototype.hasOwnProperty,J={current:null},te={key:!0,ref:!0,__self:!0,__source:!0};function X(w,R,W){var ie,ue={},le=null,de=null;if(R!=null)for(ie in R.ref!==void 0&&(de=R.ref),R.key!==void 0&&(le=""+R.key),R)q.call(R,ie)&&!te.hasOwnProperty(ie)&&(ue[ie]=R[ie]);var ge=arguments.length-2;if(ge===1)ue.children=W;else if(1<ge){for(var _e=Array(ge),Ie=0;Ie<ge;Ie++)_e[Ie]=arguments[Ie+2];ue.children=_e}if(w&&w.defaultProps)for(ie in ge=w.defaultProps,ge)ue[ie]===void 0&&(ue[ie]=ge[ie]);return{$$typeof:t,type:w,key:le,ref:de,props:ue,_owner:J.current}}function $(w,R){return{$$typeof:t,type:w.type,key:R,ref:w.ref,props:w.props,_owner:w._owner}}function z(w){return typeof w=="object"&&w!==null&&w.$$typeof===t}function K(w){var R={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(W){return R[W]})}var se=/\/+/g;function S(w,R){return typeof w=="object"&&w!==null&&w.key!=null?K(""+w.key):R.toString(36)}function V(w,R,W,ie,ue){var le=typeof w;(le==="undefined"||le==="boolean")&&(w=null);var de=!1;if(w===null)de=!0;else switch(le){case"string":case"number":de=!0;break;case"object":switch(w.$$typeof){case t:case e:de=!0}}if(de)return de=w,ue=ue(de),w=ie===""?"."+S(de,0):ie,Z(ue)?(W="",w!=null&&(W=w.replace(se,"$&/")+"/"),V(ue,R,W,"",function(Ie){return Ie})):ue!=null&&(z(ue)&&(ue=$(ue,W+(!ue.key||de&&de.key===ue.key?"":(""+ue.key).replace(se,"$&/")+"/")+w)),R.push(ue)),1;if(de=0,ie=ie===""?".":ie+":",Z(w))for(var ge=0;ge<w.length;ge++){le=w[ge];var _e=ie+S(le,ge);de+=V(le,R,W,_e,ue)}else if(_e=g(w),typeof _e=="function")for(w=_e.call(w),ge=0;!(le=w.next()).done;)le=le.value,_e=ie+S(le,ge++),de+=V(le,R,W,_e,ue);else if(le==="object")throw R=String(w),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.");return de}function U(w,R,W){if(w==null)return w;var ie=[],ue=0;return V(w,ie,"","",function(le){return R.call(W,le,ue++)}),ie}function B(w){if(w._status===-1){var R=w._result;R=R(),R.then(function(W){(w._status===0||w._status===-1)&&(w._status=1,w._result=W)},function(W){(w._status===0||w._status===-1)&&(w._status=2,w._result=W)}),w._status===-1&&(w._status=0,w._result=R)}if(w._status===1)return w._result.default;throw w._result}var D={current:null},Q={transition:null},k={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:Q,ReactCurrentOwner:J};function F(){throw Error("act(...) is not supported in production builds of React.")}return ce.Children={map:U,forEach:function(w,R,W){U(w,function(){R.apply(this,arguments)},W)},count:function(w){var R=0;return U(w,function(){R++}),R},toArray:function(w){return U(w,function(R){return R})||[]},only:function(w){if(!z(w))throw Error("React.Children.only expected to receive a single React element child.");return w}},ce.Component=A,ce.Fragment=n,ce.Profiler=i,ce.PureComponent=H,ce.StrictMode=r,ce.Suspense=f,ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k,ce.act=F,ce.cloneElement=function(w,R,W){if(w==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+w+".");var ie=m({},w.props),ue=w.key,le=w.ref,de=w._owner;if(R!=null){if(R.ref!==void 0&&(le=R.ref,de=J.current),R.key!==void 0&&(ue=""+R.key),w.type&&w.type.defaultProps)var ge=w.type.defaultProps;for(_e in R)q.call(R,_e)&&!te.hasOwnProperty(_e)&&(ie[_e]=R[_e]===void 0&&ge!==void 0?ge[_e]:R[_e])}var _e=arguments.length-2;if(_e===1)ie.children=W;else if(1<_e){ge=Array(_e);for(var Ie=0;Ie<_e;Ie++)ge[Ie]=arguments[Ie+2];ie.children=ge}return{$$typeof:t,type:w.type,key:ue,ref:le,props:ie,_owner:de}},ce.createContext=function(w){return w={$$typeof:c,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},w.Provider={$$typeof:o,_context:w},w.Consumer=w},ce.createElement=X,ce.createFactory=function(w){var R=X.bind(null,w);return R.type=w,R},ce.createRef=function(){return{current:null}},ce.forwardRef=function(w){return{$$typeof:u,render:w}},ce.isValidElement=z,ce.lazy=function(w){return{$$typeof:_,_payload:{_status:-1,_result:w},_init:B}},ce.memo=function(w,R){return{$$typeof:d,type:w,compare:R===void 0?null:R}},ce.startTransition=function(w){var R=Q.transition;Q.transition={};try{w()}finally{Q.transition=R}},ce.unstable_act=F,ce.useCallback=function(w,R){return D.current.useCallback(w,R)},ce.useContext=function(w){return D.current.useContext(w)},ce.useDebugValue=function(){},ce.useDeferredValue=function(w){return D.current.useDeferredValue(w)},ce.useEffect=function(w,R){return D.current.useEffect(w,R)},ce.useId=function(){return D.current.useId()},ce.useImperativeHandle=function(w,R,W){return D.current.useImperativeHandle(w,R,W)},ce.useInsertionEffect=function(w,R){return D.current.useInsertionEffect(w,R)},ce.useLayoutEffect=function(w,R){return D.current.useLayoutEffect(w,R)},ce.useMemo=function(w,R){return D.current.useMemo(w,R)},ce.useReducer=function(w,R,W){return D.current.useReducer(w,R,W)},ce.useRef=function(w){return D.current.useRef(w)},ce.useState=function(w){return D.current.useState(w)},ce.useSyncExternalStore=function(w,R,W){return D.current.useSyncExternalStore(w,R,W)},ce.useTransition=function(){return D.current.useTransition()},ce.version="18.3.1",ce}var _c;function wm(){return _c||(_c=1,li.exports=bm()),li.exports}var vm=wm();vm.createContext(null);function Sm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pc={exports:{}},yc;function xm(){return yc||(yc=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(f,d,_){this.fn=f,this.context=d,this.once=_||!1}function o(f,d,_,h,g){if(typeof _!="function")throw new TypeError("The listener must be a function");var y=new i(_,h||f,g),m=n?n+d:d;return f._events[m]?f._events[m].fn?f._events[m]=[f._events[m],y]:f._events[m].push(y):(f._events[m]=y,f._eventsCount++),f}function c(f,d){--f._eventsCount===0?f._events=new r:delete f._events[d]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var f=[],d,_;if(this._eventsCount===0)return f;for(_ in d=this._events)e.call(d,_)&&f.push(n?_.slice(1):_);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(d)):f},u.prototype.listeners=function(f){var d=n?n+f:f,_=this._events[d];if(!_)return[];if(_.fn)return[_.fn];for(var h=0,g=_.length,y=new Array(g);h<g;h++)y[h]=_[h].fn;return y},u.prototype.listenerCount=function(f){var d=n?n+f:f,_=this._events[d];return _?_.fn?1:_.length:0},u.prototype.emit=function(f,d,_,h,g,y){var m=n?n+f:f;if(!this._events[m])return!1;var v=this._events[m],A=arguments.length,N,H;if(v.fn){switch(v.once&&this.removeListener(f,v.fn,void 0,!0),A){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,_),!0;case 4:return v.fn.call(v.context,d,_,h),!0;case 5:return v.fn.call(v.context,d,_,h,g),!0;case 6:return v.fn.call(v.context,d,_,h,g,y),!0}for(H=1,N=new Array(A-1);H<A;H++)N[H-1]=arguments[H];v.fn.apply(v.context,N)}else{var C=v.length,Z;for(H=0;H<C;H++)switch(v[H].once&&this.removeListener(f,v[H].fn,void 0,!0),A){case 1:v[H].fn.call(v[H].context);break;case 2:v[H].fn.call(v[H].context,d);break;case 3:v[H].fn.call(v[H].context,d,_);break;case 4:v[H].fn.call(v[H].context,d,_,h);break;default:if(!N)for(Z=1,N=new Array(A-1);Z<A;Z++)N[Z-1]=arguments[Z];v[H].fn.apply(v[H].context,N)}}return!0},u.prototype.on=function(f,d,_){return o(this,f,d,_,!1)},u.prototype.once=function(f,d,_){return o(this,f,d,_,!0)},u.prototype.removeListener=function(f,d,_,h){var g=n?n+f:f;if(!this._events[g])return this;if(!d)return c(this,g),this;var y=this._events[g];if(y.fn)y.fn===d&&(!h||y.once)&&(!_||y.context===_)&&c(this,g);else{for(var m=0,v=[],A=y.length;m<A;m++)(y[m].fn!==d||h&&!y[m].once||_&&y[m].context!==_)&&v.push(y[m]);v.length?this._events[g]=v.length===1?v[0]:v:c(this,g)}return this},u.prototype.removeAllListeners=function(f){var d;return f?(d=n?n+f:f,this._events[d]&&c(this,d)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,t.exports=u}(pc)),pc.exports}var Im=xm();const Am=Sm(Im);new Am;class Em extends Hu{#e;#t=!1;#r;#n=!1;#s;#i=new Promise(e=>{this.#s=e});#c=[];isReady(){return this.#n}whenReady(){return this.#i}#a(){this.#n||(this.#n=!0,this.#s?.())}constructor(e){super(),this.#r={channelName:"broadcast",...e??{}},this.#e=new BroadcastChannel(this.#r.channelName)}connect(e,n){this.peerId=e,this.peerMetadata=n,this.#t=!1,this.#e.addEventListener("message",r=>{const i=r.data;if("targetId"in i&&i.targetId!==this.peerId||this.#t)return;const{senderId:o,type:c}=i;switch(c){case"arrive":{const{peerMetadata:u}=i;this.#e.postMessage({senderId:this.peerId,targetId:o,type:"welcome",peerMetadata:this.peerMetadata}),this.#o(o,u)}break;case"welcome":{const{peerMetadata:u}=i;this.#o(o,u)}break;case"leave":this.#c=this.#c.filter(u=>u!==o),this.emit("peer-disconnected",{peerId:o});break;default:if(!("data"in i))this.emit("message",i);else{if(!i.data)throw new Error("We got a message without data, we can't send this.");const u=i.data;this.emit("message",{...i,data:new Uint8Array(u)})}break}}),this.#e.postMessage({senderId:this.peerId,type:"arrive",peerMetadata:n})}#o(e,n){this.#a(),this.#c.push(e),this.emit("peer-candidate",{peerId:e,peerMetadata:n})}send(e){if(this.#t)return!1;"data"in e?this.#e.postMessage({...e,data:e.data?e.data.buffer.slice(e.data.byteOffset,e.data.byteOffset+e.data.byteLength):void 0}):this.#e.postMessage(e)}disconnect(){this.#e.postMessage({senderId:this.peerId,type:"leave"});for(const e of this.#c)this.emit("peer-disconnected",{peerId:e});this.#t=!0}}var di={exports:{}},mc;function km(){return mc||(mc=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(f,d,_){this.fn=f,this.context=d,this.once=_||!1}function o(f,d,_,h,g){if(typeof _!="function")throw new TypeError("The listener must be a function");var y=new i(_,h||f,g),m=n?n+d:d;return f._events[m]?f._events[m].fn?f._events[m]=[f._events[m],y]:f._events[m].push(y):(f._events[m]=y,f._eventsCount++),f}function c(f,d){--f._eventsCount===0?f._events=new r:delete f._events[d]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var d=[],_,h;if(this._eventsCount===0)return d;for(h in _=this._events)e.call(_,h)&&d.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(_)):d},u.prototype.listeners=function(d){var _=n?n+d:d,h=this._events[_];if(!h)return[];if(h.fn)return[h.fn];for(var g=0,y=h.length,m=new Array(y);g<y;g++)m[g]=h[g].fn;return m},u.prototype.listenerCount=function(d){var _=n?n+d:d,h=this._events[_];return h?h.fn?1:h.length:0},u.prototype.emit=function(d,_,h,g,y,m){var v=n?n+d:d;if(!this._events[v])return!1;var A=this._events[v],N=arguments.length,H,C;if(A.fn){switch(A.once&&this.removeListener(d,A.fn,void 0,!0),N){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,_),!0;case 3:return A.fn.call(A.context,_,h),!0;case 4:return A.fn.call(A.context,_,h,g),!0;case 5:return A.fn.call(A.context,_,h,g,y),!0;case 6:return A.fn.call(A.context,_,h,g,y,m),!0}for(C=1,H=new Array(N-1);C<N;C++)H[C-1]=arguments[C];A.fn.apply(A.context,H)}else{var Z=A.length,q;for(C=0;C<Z;C++)switch(A[C].once&&this.removeListener(d,A[C].fn,void 0,!0),N){case 1:A[C].fn.call(A[C].context);break;case 2:A[C].fn.call(A[C].context,_);break;case 3:A[C].fn.call(A[C].context,_,h);break;case 4:A[C].fn.call(A[C].context,_,h,g);break;default:if(!H)for(q=1,H=new Array(N-1);q<N;q++)H[q-1]=arguments[q];A[C].fn.apply(A[C].context,H)}}return!0},u.prototype.on=function(d,_,h){return o(this,d,_,h,!1)},u.prototype.once=function(d,_,h){return o(this,d,_,h,!0)},u.prototype.removeListener=function(d,_,h,g){var y=n?n+d:d;if(!this._events[y])return this;if(!_)return c(this,y),this;var m=this._events[y];if(m.fn)m.fn===_&&(!g||m.once)&&(!h||m.context===h)&&c(this,y);else{for(var v=0,A=[],N=m.length;v<N;v++)(m[v].fn!==_||g&&!m[v].once||h&&m[v].context!==h)&&A.push(m[v]);A.length?this._events[y]=A.length===1?A[0]:A:c(this,y)}return this},u.prototype.removeAllListeners=function(d){var _;return d?(_=n?n+d:d,this._events[_]&&c(this,_)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,t.exports=u}(di)),di.exports}km();gt("automerge-repo:messagechannel");var wn=null;typeof WebSocket<"u"?wn=WebSocket:typeof MozWebSocket<"u"?wn=MozWebSocket:typeof global<"u"?wn=global.WebSocket||global.MozWebSocket:typeof window<"u"?wn=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(wn=self.WebSocket||self.MozWebSocket);const hi=wn,Cm=t=>t.type==="peer",Tm=t=>t.type==="error",Om="1";function bt(t,e="Assertion failed"){if(t===!1||t===null||t===void 0){const n=new Error(Rm(e));throw n.stack=Mm(n.stack,"assert.ts"),n}}const Rm=t=>t.split(`
`).map(e=>e.trim()).join(`
`),Mm=(t="",e)=>t.split(`
`).filter(n=>!n.includes(e)).join(`
`),jm=t=>{const{buffer:e,byteOffset:n,byteLength:r}=t;return e.slice(n,n+r)};class Dm extends Hu{socket}class Um extends Dm{url;retryInterval;#e=!1;#t;#r=new Promise(e=>{this.#t=e});isReady(){return this.#e}whenReady(){return this.#r}#n(){this.#e||(this.#e=!0,this.#t?.())}#s;#i=gt("automerge-repo:websocket:browser");remotePeerId;constructor(e,n=5e3){super(),this.url=e,this.retryInterval=n,this.#i=this.#i.extend(e)}connect(e,n){!this.socket||!this.peerId?(this.#i("connecting"),this.peerId=e,this.peerMetadata=n??{}):(this.#i("reconnecting"),bt(e===this.peerId),this.socket.removeEventListener("open",this.onOpen),this.socket.removeEventListener("close",this.onClose),this.socket.removeEventListener("message",this.onMessage),this.socket.removeEventListener("error",this.onError)),this.#s||(this.#s=setInterval(()=>{this.connect(e,n)},this.retryInterval)),this.socket=new hi(this.url),this.socket.binaryType="arraybuffer",this.socket.addEventListener("open",this.onOpen),this.socket.addEventListener("close",this.onClose),this.socket.addEventListener("message",this.onMessage),this.socket.addEventListener("error",this.onError),setTimeout(()=>this.#n(),1e3),this.join()}onOpen=()=>{this.#i("open"),clearInterval(this.#s),this.#s=void 0,this.join()};onClose=()=>{this.#i("close"),this.remotePeerId&&this.emit("peer-disconnected",{peerId:this.remotePeerId}),this.retryInterval>0&&!this.#s&&setTimeout(()=>(bt(this.peerId),this.connect(this.peerId,this.peerMetadata)),this.retryInterval)};onMessage=e=>{this.receiveMessage(e.data)};onError=e=>{if("error"in e&&e.error.code!=="ECONNREFUSED")throw e.error;this.#i("Connection failed, retrying...")};join(){bt(this.peerId),bt(this.socket),this.socket.readyState===hi.OPEN&&this.send(Hm(this.peerId,this.peerMetadata))}disconnect(){bt(this.peerId),bt(this.socket);const e=this.socket;e&&(e.removeEventListener("open",this.onOpen),e.removeEventListener("close",this.onClose),e.removeEventListener("message",this.onMessage),e.removeEventListener("error",this.onError),e.close()),clearInterval(this.#s),this.remotePeerId&&this.emit("peer-disconnected",{peerId:this.remotePeerId}),this.socket=void 0}send(e){if("data"in e&&e.data?.byteLength===0)throw new Error("Tried to send a zero-length message");if(bt(this.peerId),!this.socket){this.#i("Tried to send on a disconnected socket.");return}if(this.socket.readyState!==hi.OPEN)throw new Error(`Websocket not ready (${this.socket.readyState})`);const n=Ou(e);this.socket.send(jm(n))}peerCandidate(e,n){bt(this.socket),this.#n(),this.remotePeerId=e,this.emit("peer-candidate",{peerId:e,peerMetadata:n})}receiveMessage(e){let n;try{n=Hp(new Uint8Array(e))}catch(r){this.#i("error decoding message:",r);return}if(bt(this.socket),e.byteLength===0)throw new Error("received a zero-length message");if(Cm(n)){const{peerMetadata:r}=n;this.#i(`peer: ${n.senderId}`),this.peerCandidate(n.senderId,r)}else Tm(n)?this.#i(`error: ${n.message}`):this.emit("message",n)}}function Hm(t,e){return{type:"join",senderId:t,peerMetadata:e,supportedProtocolVersions:[Om]}}gt("WebsocketServer");class Pm{database;store;dbPromise;constructor(e="automerge",n="documents"){this.database=e,this.store=n,this.dbPromise=this.createDatabasePromise()}createDatabasePromise(){return new Promise((e,n)=>{const r=indexedDB.open(this.database,1);r.onerror=()=>{n(r.error)},r.onupgradeneeded=i=>{i.target.result.createObjectStore(this.store)},r.onsuccess=i=>{const o=i.target.result;e(o)}})}async load(e){const r=(await this.dbPromise).transaction(this.store),o=r.objectStore(this.store).get(e);return new Promise((c,u)=>{r.onerror=()=>{u(o.error)},o.onsuccess=f=>{const d=f.target.result;d&&typeof d=="object"&&"binary"in d?c(d.binary):c(void 0)}})}async save(e,n){const i=(await this.dbPromise).transaction(this.store,"readwrite");return i.objectStore(this.store).put({key:e,binary:n},e),new Promise((c,u)=>{i.onerror=()=>{u(i.error)},i.oncomplete=()=>{c()}})}async remove(e){const r=(await this.dbPromise).transaction(this.store,"readwrite");return r.objectStore(this.store).delete(e),new Promise((o,c)=>{r.onerror=()=>{c(r.error)},r.oncomplete=()=>{o()}})}async loadRange(e){const n=await this.dbPromise,r=e,i=[...e,"￿"],o=IDBKeyRange.bound(r,i),c=n.transaction(this.store),f=c.objectStore(this.store).openCursor(o),d=[];return new Promise((_,h)=>{c.onerror=()=>{h(f.error)},f.onsuccess=g=>{const y=g.target.result;y?(d.push({data:y.value.binary,key:y.key}),y.continue()):_(d)}})}async removeRange(e){const n=await this.dbPromise,r=e,i=[...e,"￿"],o=IDBKeyRange.bound(r,i),c=n.transaction(this.store,"readwrite");return c.objectStore(this.store).delete(o),new Promise((f,d)=>{c.onerror=()=>{d(c.error)},c.oncomplete=()=>{f()}})}}const ol=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};(function(){var t=Object.defineProperty;function e(s){s=[typeof globalThis=="object"&&globalThis,s,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var a=0;a<s.length;++a){var l=s[a];if(l&&l.Math==Math)return l}throw Error("Cannot find global object")}var n=e(this);function r(s,a){if(a)e:{var l=n;s=s.split(".");for(var p=0;p<s.length-1;p++){var I=s[p];if(!(I in l))break e;l=l[I]}s=s[s.length-1],p=l[s],a=a(p),a!=p&&a!=null&&t(l,s,{configurable:!0,writable:!0,value:a})}}r("Symbol.dispose",function(s){return s||Symbol("Symbol.dispose")});var i=this||self;function o(s,a){var l=Array.prototype.slice.call(arguments,1);return function(){var p=l.slice();return p.push.apply(p,arguments),s.apply(this,p)}}function c(s,a){function l(){}l.prototype=a.prototype,s.qa=a.prototype,s.prototype=new l,s.prototype.constructor=s,s.oa=function(p,I,j){for(var O=Array(arguments.length-2),re=2;re<arguments.length;re++)O[re-2]=arguments[re];return a.prototype[I].apply(p,O)}}function u(s,a){if(Error.captureStackTrace)Error.captureStackTrace(this,u);else{const l=Error().stack;l&&(this.stack=l)}s&&(this.message=String(s)),a!==void 0&&(this.cause=a)}c(u,Error),u.prototype.name="CustomError";function f(s){i.setTimeout(()=>{throw s},0)}var d,_;e:{for(var h=["CLOSURE_FLAGS"],g=i,y=0;y<h.length;y++)if(g=g[h[y]],g==null){_=null;break e}_=g}var m=_&&_[610401301];d=m??!1;var v;const A=i.navigator;v=A&&A.userAgentData||null;function N(s){return d&&v?v.brands.some(({brand:a})=>a&&a.indexOf(s)!=-1):!1}function H(s){var a;e:{if((a=i.navigator)&&(a=a.userAgent))break e;a=""}return a.indexOf(s)!=-1}function C(){return d?!!v&&v.brands.length>0:!1}function Z(){return C()?N("Chromium"):(H("Chrome")||H("CriOS"))&&!(!C()&&H("Edge"))||H("Silk")}function q(s,a){a=Array.prototype.indexOf.call(s,a,void 0),a>=0&&Array.prototype.splice.call(s,a,1)}!H("Android")||Z(),Z(),H("Safari")&&(Z()||!C()&&H("Coast")||!C()&&H("Opera")||!C()&&H("Edge")||(C()?N("Microsoft Edge"):H("Edg/"))||C()&&N("Opera"));function J(s){let a="",l=0;const p=s.length-10240;for(;l<p;)a+=String.fromCharCode.apply(null,s.subarray(l,l+=10240));return a+=String.fromCharCode.apply(null,l?s.subarray(l):s),btoa(a)}const te=/[-_.]/g,X={"-":"+",_:"/",".":"="};function $(s){return X[s]||""}function z(s){return s!=null&&s instanceof Uint8Array}var K={};function se(){return V||(V=new S(null,K))}var S=class{constructor(s,a){if(U(a),this.g=s,s!=null&&s.length===0)throw Error("ByteString should be constructed with non-empty values")}};let V;function U(s){if(s!==K)throw Error("illegal external caller")}function B(s,a){s.__closure__error__context__984382||(s.__closure__error__context__984382={}),s.__closure__error__context__984382.severity=a}let D;function Q(){const s=Error();B(s,"incident"),f(s)}function k(s){return s=Error(s),B(s,"warning"),s}function F(){return typeof BigInt=="function"}function w(s){return Array.prototype.slice.call(s)}function R(s,a){return a&&Symbol.for&&s?Symbol.for(s):s!=null?Symbol(s):Symbol()}var W=R("jas",!0),ie=R(),ue=R();function le(s,a){a[W]=(s|0)&-30975}function de(s,a){a[W]=(s|34)&-30941}var ge={},_e={};function Ie(s){return!(!s||typeof s!="object"||s.g!==_e)}function jt(s){return s!==null&&typeof s=="object"&&!Array.isArray(s)&&s.constructor===Object}function nr(s,a){if(s!=null){if(typeof s=="string")s=s?new S(s,K):se();else if(s.constructor!==S)if(z(s))s=s.length?new S(new Uint8Array(s),K):se();else{if(!a)throw Error();s=void 0}}return s}function Dt(s){return!Array.isArray(s)||s.length?!1:!!((s[W]|0)&1)}var ro;const so=[];so[W]=55,ro=Object.freeze(so);function rr(s){if(s&2)throw Error()}var al=Object.freeze({});function sr(s){return s.pa=!0,s}var cl=sr(s=>typeof s=="number"),io=sr(s=>typeof s=="string"),ul=sr(s=>typeof s=="boolean"),ir=typeof i.BigInt=="function"&&typeof i.BigInt(0)=="bigint",rs=sr(s=>ir?s>=ll&&s<=hl:s[0]==="-"?oo(s,fl):oo(s,dl));const fl=Number.MIN_SAFE_INTEGER.toString(),ll=ir?BigInt(Number.MIN_SAFE_INTEGER):void 0,dl=Number.MAX_SAFE_INTEGER.toString(),hl=ir?BigInt(Number.MAX_SAFE_INTEGER):void 0;function oo(s,a){if(s.length>a.length)return!1;if(s.length<a.length||s===a)return!0;for(let l=0;l<s.length;l++){const p=s[l],I=a[l];if(p>I)return!1;if(p<I)return!0}}let Pe=0,Ge=0;function ao(s){const a=s>>>0;Pe=a,Ge=(s-a)/4294967296>>>0}function co(s){if(s<0){ao(-s);const[a,l]=is(Pe,Ge);Pe=a>>>0,Ge=l>>>0}else ao(s)}function ss(s,a){if(a>>>=0,s>>>=0,a<=2097151)var l=""+(4294967296*a+s);else F()?l=""+(BigInt(a)<<BigInt(32)|BigInt(s)):(l=(s>>>24|a<<8)&16777215,a=a>>16&65535,s=(s&16777215)+l*6777216+a*6710656,l+=a*8147497,a*=2,s>=1e7&&(l+=s/1e7>>>0,s%=1e7),l>=1e7&&(a+=l/1e7>>>0,l%=1e7),l=a+uo(l)+uo(s));return l}function uo(s){return s=String(s),"0000000".slice(s.length)+s}function is(s,a){return a=~a,s?s=~s+1:a+=1,[s,a]}function fo(s){if(s==null||typeof s=="boolean")return s;if(typeof s=="number")return!!s}const gl=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function lo(s){const a=typeof s;switch(a){case"bigint":return!0;case"number":return Number.isFinite(s)}return a!=="string"?!1:gl.test(s)}function At(s){if(s!=null){if(!Number.isFinite(s))throw k("enum");s|=0}return s}function os(s){if(s!=null&&typeof s=="string"){if(!s)return;s=+s}}function as(s){if(s!=null)e:{if(!lo(s))throw k("int64");switch(typeof s){case"string":s=go(s);break e;case"bigint":var a=s=BigInt.asIntN(64,s);if(io(a)){if(!/^\s*(?:-?[1-9]\d*|0)?\s*$/.test(a))throw Error(String(a))}else if(cl(a)&&!Number.isSafeInteger(a))throw Error(String(a));ir?s=BigInt(s):s=ul(s)?s?"1":"0":io(s)?s.trim()||"0":String(s);break e;default:s=ho(s)}}return s}function ho(s){if(s=Math.trunc(s),!Number.isSafeInteger(s)){co(s);var a=Pe,l=Ge;(s=l&2147483648)&&(a=~a+1>>>0,l=~l>>>0,a==0&&(l=l+1>>>0));const p=l*4294967296+(a>>>0);a=Number.isSafeInteger(p)?p:ss(a,l),s=typeof a=="number"?s?-a:a:s?"-"+a:a}return s}function go(s){var a=Math.trunc(Number(s));if(Number.isSafeInteger(a))return String(a);if(a=s.indexOf("."),a!==-1&&(s=s.substring(0,a)),!(s[0]==="-"?s.length<20||s.length===20&&Number(s.substring(0,7))>-922337:s.length<19||s.length===19&&Number(s.substring(0,6))<922337)){if(s.length<16)co(Number(s));else if(F())s=BigInt(s),Pe=Number(s&BigInt(4294967295))>>>0,Ge=Number(s>>BigInt(32)&BigInt(4294967295));else{a=+(s[0]==="-"),Ge=Pe=0;const l=s.length;for(let p=a,I=(l-a)%6+a;I<=l;p=I,I+=6){const j=Number(s.slice(p,I));Ge*=1e6,Pe=Pe*1e6+j,Pe>=4294967296&&(Ge+=Math.trunc(Pe/4294967296),Ge>>>=0,Pe>>>=0)}if(a){const[p,I]=is(Pe,Ge);Pe=p,Ge=I}}if(s=Pe,a=Ge,a&2147483648)if(F())s=""+(BigInt(a|0)<<BigInt(32)|BigInt(s>>>0));else{const[l,p]=is(s,a);s="-"+ss(l,p)}else s=ss(s,a)}return s}function Et(s){if(s!=null&&typeof s!="string")throw Error();return s}function _o(s,a,l){if(s!=null&&typeof s=="object"&&s.H===ge)return s;if(Array.isArray(s)){var p=s[W]|0,I=p;return I===0&&(I|=l&32),I|=l&2,I!==p&&(s[W]=I),new a(s)}}function _l(s){Cn===void 0&&(Cn=typeof Proxy=="function"?yo(Proxy):null);var a;return(a=!Cn)||(Tn===void 0&&(Tn=typeof WeakMap=="function"?yo(WeakMap):null),a=!Tn),a?s:(a=po(s))?a:Math.random()>.01?s:(ml(s),a=new Cn(s,{set(l,p,I){return pl(),l[p]=I,!0}}),yl(s,a),a)}function pl(){Q()}let or,cs;function po(s){let a;return(a=or)==null?void 0:a.get(s)}function yl(s,a){(or||(or=new Tn)).set(s,a),(cs||(cs=new Tn)).set(a,s)}let Cn,Tn;function yo(s){try{return s.toString().indexOf("[native code]")!==-1?s:null}catch{return null}}let us;function ml(s){if(us===void 0){const a=new Cn([],{});us=Array.prototype.concat.call([],a).length===1}us&&typeof Symbol=="function"&&Symbol.isConcatSpreadable&&(s[Symbol.isConcatSpreadable]=!0)}function bl(s,a){return mo(a)}function mo(s){switch(typeof s){case"number":return isFinite(s)?s:String(s);case"bigint":return rs(s)?Number(s):String(s);case"boolean":return s?1:0;case"object":if(s)if(Array.isArray(s)){if(Dt(s))return}else{if(z(s))return J(s);if(s instanceof S){const a=s.g;return a==null?"":typeof a=="string"?a:s.g=J(a)}}}return s}function wl(s,a,l){s=w(s);var p=s.length;const I=a&256?s[p-1]:void 0;for(p+=I?-1:0,a=a&512?1:0;a<p;a++)s[a]=l(s[a]);if(I){a=s[a]={};for(const j in I)a[j]=l(I[j])}return s}function bo(s,a,l,p,I){if(s!=null){if(Array.isArray(s))s=Dt(s)?void 0:I&&(s[W]|0)&2?s:fs(s,a,l,p!==void 0,I);else if(jt(s)){const j={};for(let O in s)j[O]=bo(s[O],a,l,p,I);s=j}else s=a(s,p);return s}}function fs(s,a,l,p,I){const j=p||l?s[W]|0:0;p=p?!!(j&32):void 0,s=w(s);for(let O=0;O<s.length;O++)s[O]=bo(s[O],a,l,p,I);return l&&l(j,s),s}function vl(s){return s.H===ge?s.toJSON():mo(s)}function wo(s,a,l=de){if(s!=null){if(s instanceof Uint8Array)return a?s:new Uint8Array(s);if(Array.isArray(s)){var p=s[W]|0;return p&2?s:(a&&(a=p===0||!!(p&32)&&!(p&64||!(p&16))),a?(s[W]=(p|34)&-12293,s):fs(s,wo,p&4?de:l,!0,!0))}return s.H===ge&&(l=s.m,p=l[W],s=p&2?s:new s.constructor(ls(l,p,!0))),s}}function ls(s,a,l){const p=l||a&2?de:le,I=!!(a&32);return s=wl(s,a,j=>wo(j,I,p)),s[W]=s[W]|32|(l?2:0),s}function ds(s){const a=s.m,l=a[W];return l&2?new s.constructor(ls(a,l,!1)):s}function kt(s,a){return s=s.m,en(s,s[W],a)}function vo(s,a,l,p){if(a=p+(+!!(a&512)-1),!(a<0||a>=s.length||a>=l))return s[a]}function en(s,a,l,p){if(l===-1)return null;const I=a>>15&1023||536870912;if(l>=I){if(a&256)return s[s.length-1][l]}else{var j=s.length;if(p&&a&256&&(p=s[j-1][l],p!=null)){if(vo(s,a,I,l)&&ie!=null){var O;s=(O=D)!=null?O:D={},O=s[ie]||0,O>=4||(s[ie]=O+1,Q())}return p}return vo(s,a,I,l)}}function hs(s,a,l){const p=s.m;let I=p[W];return rr(I),Ne(p,I,a,l),s}function Ne(s,a,l,p){const I=a>>15&1023||536870912;if(l>=I){let j,O=a;if(a&256)j=s[s.length-1];else{if(p==null)return O;j=s[I+(+!!(a&512)-1)]={},O|=256}return j[l]=p,l<I&&(s[l+(+!!(a&512)-1)]=void 0),O!==a&&(s[W]=O),O}return s[l+(+!!(a&512)-1)]=p,a&256&&(s=s[s.length-1],l in s&&delete s[l]),a}function tn(s,a,l,p){return l=Ct(s,p)===l?l:-1,So(s,a,l)!==void 0}function nn(s){return!!(2&s)&&!!(4&s)||!!(2048&s)}function Ae(s,a,l,p){const I=s.m;let j=I[W];return rr(j),Ne(I,j,a,(p==="0"?Number(l)===0:l===p)?void 0:l),s}function Ct(s,a){return s=s.m,_s(gs(s),s,s[W],a)}function gs(s){let a;return(a=s[ue])!=null?a:s[ue]=new Map}function _s(s,a,l,p){let I=s.get(p);if(I!=null)return I;I=0;for(let j=0;j<p.length;j++){const O=p[j];en(a,l,O)!=null&&(I!==0&&(l=Ne(a,l,I)),I=O)}return s.set(p,I),I}function So(s,a,l,p){s=s.m;let I=s[W];return p=en(s,I,l,p),a=_o(p,a,I),a!==p&&a!=null&&Ne(s,I,l,a),a}function ps(s,a,l){if(a=So(s,a,l,!1),a==null)return a;s=s.m;let p=s[W];if(!(p&2)){const I=ds(a);I!==a&&(a=I,Ne(s,p,l,a))}return a}function rn(s,a,l){return l==null&&(l=void 0),hs(s,a,l)}function we(s,a,l,p){p==null&&(p=void 0);e:{const O=s.m;var I=O[W];if(rr(I),p==null){var j=gs(O);if(_s(j,O,I,l)===a)j.set(l,0);else break e}else{j=O;const re=gs(j),ne=_s(re,j,I,l);ne!==a&&(ne&&(I=Ne(j,I,ne)),re.set(l,a))}Ne(O,I,a,p)}return s}function xo(s,a){const l=s.m;let p=l[W];if(rr(p),a==null)return Ne(l,p,1),s;var I=a,j;a=((j=cs)==null?void 0:j.get(I))||I,j=I=a[W]|0;const O=nn(I),re=O||Object.isFrozen(a);let ne=!0,Re=!0;for(let ze=0;ze<a.length;ze++){var Be=a[ze];O||(Be=!!((Be.m[W]|0)&2),ne&&(ne=!Be),Re&&(Re=Be))}return O||(I=ne?13:5,I=Re?I|16:I&-17),re&&I===j||(a=w(a),j=0,I=ar(I,p),I=ys(I,p,!0)),I!==j&&(a[W]=I),Ne(l,p,1,a),s}function ar(s,a){return s=(2&a?s|2:s&-3)|32,s&=-2049}function ys(s,a,l){return 32&a&&l||(s&=-33),s}function sn(s,a){return s??a}function Io(s){return s=kt(s,1),s!=null&&(typeof s=="bigint"?rs(s)?s=Number(s):(s=BigInt.asIntN(64,s),s=rs(s)?Number(s):String(s)):s=lo(s)?typeof s=="number"?ho(s):go(s):void 0),sn(s,0)}function Je(s,a){return s=kt(s,a),sn(s==null||typeof s=="string"?s:void 0,"")}function Ut(s,a){return s=kt(s,a),s=s==null?s:Number.isFinite(s)?s|0:void 0,sn(s,0)}function Ee(s,a,l,p){return l=Ct(s,p)===l?l:-1,ps(s,a,l)}let on;function ms(s){try{return on=!0,JSON.stringify(bs(s),bl)}finally{on=!1}}function Sl(){var s=oa||(oa=xl("[1,2,0]"));s=ds(s),s=hs(s,4,Et("dev-706864954"));const a=s.m,l=a[W];return l&2?s:new s.constructor(ls(a,l,!0))}var ae=class{constructor(s){e:{var a=a??0;if(s==null){var l=96;s=[]}else{if(!Array.isArray(s))throw Error("narr");if(l=s[W]|0,l&2048)throw Error("farr");if(l&64)break e;a===1||a===2||(l|=64),a=s;var p=a.length;if(p&&(--p,jt(a[p]))){if(l|=256,a=p-(+!!(l&512)-1),a>=1024)throw Error("pvtlmt");l=l&-33521665|(a&1023)<<15}}s[W]=l}this.m=s}toJSON(){return bs(this)}};ae.prototype.H=ge,ae.prototype.toString=function(){try{return on=!0,bs(this).toString()}finally{on=!1}};function bs(s){s=s.m,s=on?s:fs(s,vl,void 0,void 0,!1);{var a=!on;let Re=s.length;if(Re){var l=s[Re-1],p=jt(l);p?Re--:l=void 0;var I=s;if(p){e:{var j=l,O,re=!1;if(j){for(let Be in j)if(isNaN(+Be)){let ze;((ze=O)!=null?ze:O={})[Be]=j[Be]}else if(p=j[Be],Array.isArray(p)&&(Dt(p)||Ie(p)&&p.size===0)&&(p=null),p==null&&(re=!0),p!=null){let ze;((ze=O)!=null?ze:O={})[Be]=p}}if(re||(O=j),O)for(let Be in O){re=O;break e}re=null}j=re==null?l!=null:re!==l}for(;Re>0&&(O=I[Re-1],!!(O==null||Dt(O)||Ie(O)&&O.size===0));Re--)var ne=!0;(I!==s||j||ne)&&(a?(ne||j||re)&&(I.length=Re):I=Array.prototype.slice.call(I,0,Re),re&&I.push(re)),ne=I}else ne=s}return ne}function cr(s){return a=>{if(a==null||a=="")a=new s;else{if(a=JSON.parse(a),!Array.isArray(a))throw Error("dnarr");a[W]|=32,a=new s(a)}return a}}var xl=function(s){return a=>{if(a=JSON.parse(a),!Array.isArray(a)){var l=typeof a;throw Error("Expected jspb data to be an array, got "+(l!="object"?l:a?Array.isArray(a)?"array":l:"null")+": "+a)}return a[W]|=34,new s(a)}}(class extends ae{}),Ao=class extends ae{};function Il(s){var a=new Co(500);let l=0,p;return(...I)=>{Eo(a)?s(...I):(p=()=>void s(...I),l||(l=setTimeout(()=>{l=0;let j;(j=p)==null||j()},El(a))))}}function Al(s){var a=new Co(100),l=Promise.resolve();return(...p)=>Eo(a)?s(...p):l}function Eo(s){return ko(s,s.index)>=s.g?(s.h[s.index]=Date.now(),s.index=(s.index+1)%1,!0):!1}function El(s){const a=s.g;return s=ko(s,s.index),s>=a?0:a-s}function ko(s,a){let l;return Date.now()-((l=s.h[a])!=null?l:-1*s.g)}var Co=class{constructor(s){this.g=s,this.h=[],this.index=0}},To=class extends ae{},kl=[2,3],Cl=class extends ae{},me=class extends Error{constructor({errorType:s,message:a,i:l}){super(`Meet Add-on SDK error: ${`${a}${l?` - ${l}`:""}`}`),this.errorType=s}},Ht={errorType:"InternalError",message:"An unexpected error has occurred.",i:"No further information is available."},Oo={errorType:"MissingUrlParameter",message:"Missing required Meet SDK URL parameter",i:"This parameter is automatically appended by Meet to the iframe URL. Ensure that your infrastructure does not strip URL parameters (e.g. as part of a redirect)."},Ro={errorType:"NeedsMainStageContext",message:"This method can only be invoked if the addon is running in the main stage.",i:"Use getFrameType to check whether the addon is running in the main stage before invoking this method."},Tl={errorType:"NeedsSidePanelContext",message:"This method can only be invoked if the addon is running in the side panel.",i:"Use getFrameType to check whether the addon is running in the side panel before invoking this method."},Ol={errorType:"NotSupportedInStandalone",message:"This method is not supported in standalone mode.",i:"Do not call this method in standalone mode."},Rl={errorType:"InternalError",message:"The frame type URL parameter is set to an unexpected value.",i:"This parameter is automatically appended by Meet to the iframe URL. Ensure that your infrastructure does not modify URL parameters (e.g. as part of a redirect)."},Ml={errorType:"InvalidCloudProjectNumber",message:"Cloud Project Number provided by meet does not match the one passed in by the SDK. Ensure that the correct Cloud Project Number is passed to the SDK as a string.",i:"This parameter is automatically appended by Meet to the iframe URL. Ensure that your infrastructure does not modify URL parameters (e.g. as part of a redirect) and ensure that the correct Cloud Project Number was passed into the SDK as a string."},jl={errorType:"DestinationNotReady",message:"The recipient frame is not connected via the addon SDK and cannot receive the notification.",i:"Make sure the destination frame has connected before sending messages to it."},Dl={errorType:"InvalidActivityStartingState",message:"Origin of the ActivityStartingState iframeURLs does not match the origin of the URLs provided in the Add-on manifest.",i:"Ensure that the ActivityStartingState iframeURL origins match the origins of the URLs provided in the Add-on manifest."},Ul={errorType:"ActivityStartingStateMissingAttributes",message:"The supplied ActivityStartingState object does not contain any recognized attributes.",i:"Ensure that the ActivityStartingState object contains at least one of the following attributes: mainStageUrl, sidePanelUrl, additionalData."},Hl={errorType:"ActivityStartingStateUnrecognizedAttributes",message:"The supplied ActivityStartingState object contains attributes that are not recognized.",i:"Ensure that the ActivityStartingState object has only the following attributes: mainStageUrl, sidePanelUrl, additionalData."},Pl={errorType:"AddonStartingStateMissingAttributes",message:"The supplied AddonStartingState object does not contain any recognized attributes.",i:"Ensure that the AddonStartingState object contains at least one of the following attributes: sidePanelUrl, additionalData."},Bl={errorType:"AddonStartingStateUnrecognizedAttributes",message:"The supplied AddonStartingState object contains attributes that are not recognized.",i:"Ensure that the AddonStartingState object has only the following attributes: sidePanelUrl, additionalData."},ws=s=>({errorType:"ArgumentNullError",message:`The argument supplied for '${s}' was 'null' but a value was expected.`,i:"Ensure you are passing a value of the expected type for the argument."}),_t=(s,a,l)=>({errorType:"ArgumentTypeError",message:`The type '${a}' of argument supplied for '${s}' did not match the expected type '${l}'.`,i:"Ensure the type of the argument provided matches the expected type."}),Mo=s=>({errorType:"InternalError",message:`Could not connect to ${s} channel. Unknown error`,i:"No further information is available."}),Ll={errorType:"ActivityIsOngoing",message:"Operation cannot be performed while an activity is ongoing.",i:"Ensure that no activity is ongoing."},$l={errorType:"InternalError",message:"Frame message missing required Meet SDK command.",i:"Send one of the available commands in the frame message."},Fl={errorType:"NoActivityFound",message:"No activity found.",i:"Ensure that the activity is started before performing this operation."},Nl={errorType:"RequiresEapEnrollment",message:"This feature is only available to early access partners.",i:"Meet add-on early access enrollment is currently closed."},zl={errorType:"UserNotInitiator",message:"Operation cannot be performed because the user is not the initiator of the current activity.",i:"Ensure that the user is the initiator of the current activity or that the activity has ended."},Vl={errorType:"SizeLimitExceededActivityStartingState",message:"The size of the activityStartingState URLs and/or its data exceed the limits allowed.",i:"Ensure that the activityStartingState URL size is less than 512 characters and the additional data size is less than 4096 characters."},Wl={errorType:"SizeLimitExceededFrameToFrameMessage",message:"The size of the frame to frame message exceeds the limits allowed.",i:"Ensure that the frame to frame message size is less than 1,000,000 characters."},ql={errorType:"AddonSessionAlreadyCreated",message:"The addon session has already been created.",i:"Only instantiate the AddonSession once."},Gl={errorType:"UserCancelled",message:"The user cancelled starting an activity.",i:"The user needs to click continue to start the activity."},Jl={errorType:"NotSupportedInMeetCall",message:"This method is not supported during a Meet call.",i:"Do not call this method during a Meet call."},Kl={errorType:"InvalidAddonStartingState",message:"Origin of the AddonStartingState iframeURLs does not match the origin of the URLs provided in the Add-on manifest.",i:"Ensure that the AddonStartingState iframeURL origins match the origins of the URLs provided in the Add-on manifest."},Yl={errorType:"SizeLimitExceededAddonStartingState",message:"The size of the AddonStartingState URLs and/or its data exceed the limits allowed.",i:"Ensure that the AddonStartingState URL size is less than 512 characters and the additional data size is less than 4096 characters."},Xl={errorType:"MeetingPolicyPreventsStartingActivity",message:"A meeting policy (such as using host control settings) prevents the user from starting the activity.",i:"Have a meeting host or administrator modify the necessary settings to allow the current user to start the activity."};function Zl(s){switch(s){case 0:return Ht;case 1:return jl;case 2:return Dl;case 3:return Ll;case 4:return $l;case 5:return Nl;case 6:return Ol;case 7:return zl;case 8:return Vl;case 9:return Wl;case 10:return Gl;case 11:return Jl;case 12:return Kl;case 13:return Yl;case 14:return Fl;case 15:return Xl;default:return Ht}}function Ql(s){let a;var l=(a=Ut(s,1))!=null?a:0;switch(s=ed(Ct(s,kl)),l){case 1:return{errorType:"InternalError",message:`Could not connect to ${s} channel. Meet did not respond with a MessagePort.`,i:"No further information is available."};case 2:return{errorType:"InternalError",message:`Could not connect to ${s}. A conflicting ${s} exists.`,i:"No further information is available."};case 3:return{errorType:"InternalError",message:`Could not connect to ${s} channel. The addon does not have permission to open a ${s}.`,i:"This method might require EAP enrollment."};case 4:return{errorType:"InternalError",message:`Could not connect to ${s} channel. The addon is not authorized for this ${s}.`,i:"No further information is available."};case 0:return Mo(s);case 5:e:switch(s){case"co":l={errorType:"InternalError",message:`Could not connect to ${s} channel. The coActivity was not found.`,i:`Consider starting the ${s} only after after the startActivity promise returns.`};break e;default:l={errorType:"InternalError",message:`Could not connect to ${s} channel.`,i:"No further information is available."}}return l;default:return Mo(s)}}function ed(s){switch(s){case 2:return"co";case 3:return"gd";case 0:return"unknown";default:return"unknown"}}function an({errorType:s,message:a,i:l},p=""){throw new me({errorType:s,message:p?`${a} ${p}`:a,i:l})}function ur(s,a){an({...Oo,message:`${Oo.message}: ${s}. In URL ${a}`})}function vs(s){var a=new jo;return Ae(a,1,At(s),0)}function Ss(s,a){return Ae(s,2,Et(a),"")}function xs(s,a){return Ae(s,3,Et(a),"")}var jo=class extends ae{getFrameType(){return Ut(this,1)}};function Do(s){var a;al===void 0?a=2:a=4;var l=s.m[W],p=l,I=!(2&l),j=jo;s=s.m,a=(l=!!(2&p))?1:a,I&&(I=!l),l=en(s,p,1),l=Array.isArray(l)?l:ro;var O=l[W]|0,re=!!(4&O);if(!re){var ne=O;ne===0&&(ne=ar(ne,p)),O=l,ne|=1;var Re=p;const _r=!!(2&ne);_r&&(Re|=2);let zs=!_r,Vs=!0,pr=0,Ws=0;for(;pr<O.length;pr++){const qs=_o(O[pr],j,Re);if(qs instanceof j){if(!_r){const ma=!!((qs.m[W]|0)&2);zs&&(zs=!ma),Vs&&(Vs=ma)}O[Ws++]=qs}}Ws<pr&&(O.length=Ws),ne|=4,ne=Vs?ne|16:ne&-17,ne=zs?ne|8:ne&-9,O[W]=ne,_r&&Object.freeze(O),O=ne}if(I&&!(8&O||!l.length&&(a===1||a===4&&32&O))){for(nn(O)&&(l=w(l),O=ar(O,p),p=Ne(s,p,1,l)),I=l,j=O,O=0;O<I.length;O++)ne=I[O],Re=ds(ne),ne!==Re&&(I[O]=Re);j|=8,j=I.length?j&-17:j|16,O=I[W]=j}let Be;if(a===1||a===4&&32&O){if(!nn(O)){p=O;var ze=!!(32&O);O|=!l.length||16&O&&(!re||ze)?2:2048,O!==p&&(l[W]=O),Object.freeze(l)}}else re=a!==5?!1:!!(32&O)||nn(O)||!!po(l),(a===2||re)&&nn(O)&&(l=w(l),O=ar(O,p),O=ys(O,p,!1),l[W]=O,p=Ne(s,p,1,l)),nn(O)||(s=O,O=ys(O,p,!1),O!==s&&(l[W]=O)),re?Be=_l(l):a===2&&((ze=or)==null||ze.delete(l));return Be||l}function Uo(s){var a=new Ho;return xo(a,s)}var Ho=class extends ae{},td=class extends ae{};function Is(s){var a=new nd;return Ae(a,1,At(s),0)}var nd=class extends ae{},rd=class extends ae{},sd=class extends ae{},id=class extends ae{},od=class extends ae{getMeetingInfo(){return Ee(this,id,3,As)}getMeetPlatformInfo(){return Ee(this,sd,4,As)}},As=[2,3,4,5],fr=class extends ae{},cn=[1,4,5,6,7,8,9,10,11,12,13,14,15,16,17],ad=class extends ae{},cd=class extends ae{},ud=new Map([[2,"MAIN_STAGE"],[1,"SIDE_PANEL"]]),fd=new Map([[0,"UNKNOWN"],[1,"OPEN_ADDON"],[2,"START_ACTIVITY"],[3,"JOIN_ACTIVITY"]]);function ld(s){s&&typeof s.dispose=="function"&&s.dispose()}function Tt(){this.s=this.s,this.g=this.g}Tt.prototype.s=!1,Tt.prototype.dispose=function(){this.s||(this.s=!0,this.G())},Tt.prototype[Symbol.dispose]=function(){this.dispose()};function Po(s,a){s.s?a():(s.g||(s.g=[]),s.g.push(a))}Tt.prototype.G=function(){if(this.g)for(;this.g.length;)this.g.shift()()};function Bo({J:s,R:a}){if(s===null)throw new me(ws("activityStartingState"));if(a||s!==void 0){if(typeof s!="object")throw new me(_t("activityStartingState",typeof s,`object${a?"":" | undefined"}`));if(s.mainStageUrl!==void 0&&typeof s.mainStageUrl!="string")throw new me(_t("mainStageUrl",typeof s.mainStageUrl,"string | undefined"));if(s.sidePanelUrl!==void 0&&typeof s.sidePanelUrl!="string")throw new me(_t("sidePanelUrl",typeof s.sidePanelUrl,"string | undefined"));if(s.additionalData!==void 0&&typeof s.additionalData!="string")throw new me(_t("additionalData",typeof s.additionalData,"string | undefined"));if(Object.keys(s).length!==+!!s.mainStageUrl+ +!!s.sidePanelUrl+ +!!s.additionalData)throw new me(Hl);if(Object.keys(s).length===0)throw new me(Ul)}}function Lo(s){const a=[];return a.push(xs(Ss(vs(2),s.mainStageUrl),s.additionalData)),a.push(xs(Ss(vs(1),s.sidePanelUrl),s.additionalData)),a}var Es=class extends Tt{constructor(s){super(),this.context=s,this.h={},Rn(this.context.g.U,a=>{switch(Ct(a.content,cn)){case 7:const p=this.h.frameToFrameMessage;if(a=Ee(a.content,rd,7,cn),p&&a){var l=Ut(a,1);if(l=ud.get(l),l===void 0)throw Error("Unknown frame type.");p({originator:l,payload:Je(a,2)})}}})}async getMeetingInfo(){const s=await Bs(this.context.g,Is(2));return{meetingId:Je(s.getMeetingInfo(),1),meetingCode:Je(s.getMeetingInfo(),2)}}async getFrameOpenReason(){let s;const a=(s=this.context.h.ca)!=null?s:0;let l;return(l=fd.get(a))!=null?l:"UNKNOWN"}async getActivityStartingState(){var s=Ee(await Bs(this.context.g,Is(1)),Ho,2,As);const a=s==null?void 0:Do(s).find(l=>l.getFrameType()===2);return s=s==null?void 0:Do(s).find(l=>l.getFrameType()===1),{mainStageUrl:(a==null?void 0:Je(a,2))||void 0,sidePanelUrl:(s==null?void 0:Je(s,2))||void 0,additionalData:(s==null?void 0:Je(s,3))||void 0}}async setActivityStartingState(s){Bo({J:s,R:!0});var a=Lo(s);s=Xd;var l=this.context.g,p=new ad;a=Uo(a),p=rn(p,1,a),await s(l,p)}on(s,a){this.h[s]=a}async getMeetPlatformInfo(){const s=await Bs(this.context.g,Is(3));return{isMeetHardware:sn(fo(kt(s.getMeetPlatformInfo(),1)),!1)}}async closeAddon(){await Zd(this.context.g)}async startActivity(s){Bo({J:s,R:!1});const a=new cd;s&&(s=Lo(s),s=Uo(s),rn(a,1,s)),await Qd(this.context.g,a)}async endActivity(s){var a=eh,l=this.context.g,p=new td;s=Ae(p,1,At(s==="aab61ee0-51b4-475d-aa4d-849f2498640d"?999:0),0),await a(l,s)}},dd=cr(class extends ae{getFrameOpenReason(){return Ut(this,5)}});function ks(){var s=window.location.href,a=window.location.href,l=new URL(a).searchParams.get("meet_sdk");if(l?a=dd(atob(l)):(ur("meet_sdk",a),a=void 0),(l=Je(a,1))||ur("meet_addon_frame_type",s),l=Number(l),l!==2&&l!==1)throw new me(Rl);const p=Je(a,2);p||ur("meet_control_channel_name",s);const I=Je(a,4);I||ur("addon_cloud_project_number",s);var j;return s=(j=a.getFrameOpenReason())!=null?j:0,j=Je(a,3)||"https://meet.google.com",{ca:s,frameType:l,ba:p,cloudProjectNumber:I,S:j}}var hd=class extends ae{},gd=class extends ae{};function _d(){var s=new pd,a=new gd;return we(s,1,yd,a)}var pd=class extends ae{},yd=[1,2];function md(s){var a=new wd;return rn(a,2,s)}function bd(s,a){return Ae(s,3,Et(a),"")}var wd=class extends ae{},vd=class extends ae{},Sd=class extends ae{},xd=class extends ae{},Id=class extends ae{},Ad=class extends ae{setAddonStartingState(s){return rn(this,1,s)}},Ed=class extends ae{};function kd(s,a){return we(s,2,Ye,a)}var Ke=class extends ae{},Ye=[1,2,5,6,7,8,9,10,11,13,14,15,16],$o=class extends ae{},lr=cr($o),un=[1,2];class Cd{constructor(a,l){this.data=a,this.channel=l}}var Td=Promise;function Fo(s){const a=new MessageChannel;return No(a.port1,s),a}function Cs(s,a){return No(s,a),new Od(s)}class Od{constructor(a){this.g=a}send(a,l,p=[]){l=Fo(l),this.g.postMessage(a,[l.port2].concat(p))}C(a,l){return new Td(p=>{this.send(a,p,l)})}}function No(s,a){a&&(s.onmessage=l=>{var p=l.data;l=Cs(l.ports[0]),a(new Cd(p,l))})}var Ts=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?s=>s&&AsyncContext.Snapshot.wrap(s):s=>s;function zo(s,a){s.l(a),s.h<100&&(s.h++,a.next=s.g,s.g=a)}class Vo{constructor(a,l){this.j=a,this.l=l,this.h=0,this.g=null}get(){let a;return this.h>0?(this.h--,a=this.g,this.g=a.next,a.next=null):a=this.j(),a}}function Rd(){var s=qo;let a=null;return s.g&&(a=s.g,s.g=s.g.next,s.g||(s.h=null),a.next=null),a}class Md{constructor(){this.h=this.g=null}add(a,l){const p=Wo.get();p.set(a,l),this.h?this.h.next=p:this.g=p,this.h=p}}var Wo=new Vo(()=>new jd,s=>s.reset());class jd{constructor(){this.next=this.g=this.h=null}set(a,l){this.h=a,this.g=l,this.next=null}reset(){this.next=this.g=this.h=null}}let Os,Rs=!1,qo=new Md,Ms=(s,a)=>{Os||Dd(),Rs||(Os(),Rs=!0),qo.add(s,a)},Dd=()=>{const s=Promise.resolve(void 0);Os=()=>{s.then(Ud)}};function Ud(){let s;for(;s=Rd();){try{s.h.call(s.g)}catch(a){f(a)}zo(Wo,s)}Rs=!1}function Go(){}function pt(s){if(this.g=0,this.T=void 0,this.l=this.h=this.j=null,this.v=this.B=!1,s!=Go)try{const a=this;s.call(void 0,function(l){fn(a,2,l)},function(l){fn(a,3,l)})}catch(a){fn(this,3,a)}}function Jo(){this.next=this.context=this.h=this.l=this.g=null,this.j=!1}Jo.prototype.reset=function(){this.context=this.h=this.l=this.g=null,this.j=!1};var Ko=new Vo(function(){return new Jo},function(s){s.reset()});function js(s,a,l){const p=Ko.get();return p.l=s,p.h=a,p.context=l,p}function Hd(){let s,a;const l=new pt(function(p,I){s=p,a=I});return new $d(l,s,a)}pt.prototype.then=function(s,a,l){return Pd(this,Ts(typeof s=="function"?s:null),Ts(typeof a=="function"?a:null),l)},pt.prototype.$goog_Thenable=!0;function Yo(s,a){a=Ts(a),a=js(a,a),a.j=!0,Ds(s,a)}pt.prototype.cancel=function(s){if(this.g==0){const a=new yt(s);Ms(function(){Xo(this,a)},this)}};function Xo(s,a){if(s.g==0)if(s.j){var l=s.j;if(l.h){var p=0,I=null,j=null;for(let O=l.h;O&&(O.j||(p++,O.g==s&&(I=O),!(I&&p>1)));O=O.next)I||(j=O);I&&(l.g==0&&p==1?Xo(l,a):(j?(p=j,p.next==l.l&&(l.l=p),p.next=p.next.next):Qo(l),ea(l,I,3,a)))}s.j=null}else fn(s,3,a)}function Ds(s,a){s.h||s.g!=2&&s.g!=3||Zo(s),s.l?s.l.next=a:s.h=a,s.l=a}function Pd(s,a,l,p){const I=js(null,null,null);return I.g=new pt(function(j,O){I.l=a?function(re){try{const ne=a.call(p,re);j(ne)}catch(ne){O(ne)}}:j,I.h=l?function(re){try{const ne=l.call(p,re);ne===void 0&&re instanceof yt?O(re):j(ne)}catch(ne){O(ne)}}:O}),I.g.j=s,Ds(s,I),I.g}pt.prototype.ma=function(s){this.g=0,fn(this,2,s)},pt.prototype.na=function(s){this.g=0,fn(this,3,s)};function fn(s,a,l){if(s.g==0){s===l&&(a=3,l=new TypeError("Promise cannot resolve to itself")),s.g=1;e:{var p=l,I=s.ma,j=s.na;if(p instanceof pt){Ds(p,js(I||Go,j||null,s));var O=!0}else{if(p)try{var re=!!p.$goog_Thenable}catch{re=!1}else re=!1;if(re)p.then(I,j,s),O=!0;else{if(re=typeof p,re=="object"&&p!=null||re=="function")try{const ne=p.then;if(typeof ne=="function"){Bd(p,ne,I,j,s),O=!0;break e}}catch(ne){j.call(s,ne),O=!0;break e}O=!1}}}O||(s.T=l,s.g=a,s.j=null,Zo(s),a!=3||l instanceof yt||Ld(s,l))}}function Bd(s,a,l,p,I){function j(ne){re||(re=!0,p.call(I,ne))}function O(ne){re||(re=!0,l.call(I,ne))}let re=!1;try{a.call(s,O,j)}catch(ne){j(ne)}}function Zo(s){s.B||(s.B=!0,Ms(s.la,s))}function Qo(s){let a=null;return s.h&&(a=s.h,s.h=a.next,a.next=null),s.h||(s.l=null),a}pt.prototype.la=function(){let s;for(;s=Qo(this);)ea(this,s,this.g,this.T);this.B=!1};function ea(s,a,l,p){if(l==3&&a.h&&!a.j)for(;s&&s.v;s=s.j)s.v=!1;if(a.g)a.g.j=null,ta(a,l,p);else try{a.j?a.l.call(a.context):ta(a,l,p)}catch(I){na.call(null,I)}zo(Ko,a)}function ta(s,a,l){a==2?s.l.call(s.context,l):s.h&&s.h.call(s.context,l)}function Ld(s,a){s.v=!0,Ms(function(){s.v&&na.call(null,a)})}var na=f;function yt(s){u.call(this,s)}c(yt,u),yt.prototype.name="cancel";function $d(s,a,l){this.promise=s,this.resolve=a,this.reject=l}let Fd=1,On=new WeakMap;function dr(s,a,l){var p=Nd;s.h.has(a),p(a,l)}var Us=class extends Tt{constructor(){super(),this.h=new Set}signal(){const s=new Vd;return this.h.add(s),Po(this,o(ld,s)),s}};function Nd(s,a){return new Promise(l=>{ln(()=>{s.L&&(s.ea=a,s.P=!0);for(const{I:p,slot:I}of s.o.values())try{I(a,{signal:s,I:p})}catch(j){f(j)}for(const p of s.A)p.resolve(a);s.A.clear(),l()})})}function Rn(s,a,l){const p=Fd++;return ln(()=>{zd(s,p,a,l)}),p}function zd(s,a,l,p){if(!s.s)if(p){if(!p.s){const I=()=>{ln(()=>{s.o.delete(a);const j=On.get(p);j&&q(j,I)})};s.o.set(a,{I:a,slot:l,F:I}),sa(p,I)}}else s.o.set(a,{I:a,slot:l,F:()=>s.o.delete(a)})}var Vd=class extends Tt{constructor(){super(),this.L=!1,this.o=new Map,this.A=new Set,this.P=!1}detach(s){ln(()=>{const a=this.o.get(s);a&&a.F()})}value(s){return this.promise(!0,s)}next(s){return this.promise(!1,s)}promise(s,a){const l=Hd();return ln(()=>{if(this.s)l.reject(new yt("Signal initially disposed"));else if(a&&a.s)l.reject(new yt("Owner initially disposed"));else if(s&&this.L&&this.P)l.resolve(this.ea);else if(this.A.add(l),Yo(l.promise,()=>{this.A.delete(l)}),a){const p=()=>{l.reject(new yt("Owner asynchronously disposed"))};Yo(l.promise,()=>{const I=On.get(a);I&&q(I,p)}),sa(a,p)}}),l.promise}G(){super.G(),ln(()=>{for(const{F:s}of this.o.values())s();this.o.clear();for(const s of this.A)s.reject(new yt("Signal asynchronously disposed"));this.A.clear()})}};const Mn=[];let Hs=!1;function ln(s){Mn.push(s),Wd()}async function Wd(){if(!Hs)try{Hs=!0;let s=ra(0);for(;s<Mn.length;)await Promise.resolve(),s=ra(s)}catch(s){f(s)}finally{Mn.length=0,Hs=!1}}function ra(s){const a=s+100;for(;s<a&&s<Mn.length;)try{Mn[s++]()}catch(l){f(l)}return s}function sa(s,a){if(s.s)a();else{var l=On.get(s);if(l)l.push(a);else{const p=[a];On.set(s,p),Po(s,()=>{for(const I of[...p])I();On.delete(s)})}}}function Xe(s){var a=new $o;return s=we(a,1,un,s),{content:ms(s)}}const ia=new Us;function qd(s,a){const l=ia.signal();return{channel:Cs(s,p=>{const I=a(p.data);dr(ia,l,{content:I,ka:p})}),signal:l}}let oa;var Pt=class extends ae{},Bt=class extends ae{},Ps=class extends ae{h(){return Ee(this,Pt,2,hr)}g(){return tn(this,Pt,2,hr)}j(){return Ee(this,Bt,3,hr)}l(){return tn(this,Bt,3,hr)}},hr=[2,3],Gd=cr(class extends ae{}),Jd=cr(class extends ae{}),gr=[1,2],Kd=({destination:s,origin:a,ra:l,Y:p="ZNWN1d",onMessage:I})=>{if(a==="*")throw Error("Sending to wildcard origin not allowed.");const j=Fo(I);return s.postMessage(l?{n:p,t:l}:p,a,[j.port2]),Cs(j.port1,I)};function Yd(s,a,l){const p=new Us,I=p.signal();return s=Kd({destination:window.parent,origin:a,Y:s,onMessage:j=>{const O=lr(j.data.content);Ct(O,un)===2&&dr(p,I,{content:Ee(O,fr,2,un),ka:j,messagePort:j.data.messagePort})}}),new oh(I,s,l)}async function Bs(s,a){var l=st,p=new Ke;a=we(p,9,Ye,a),s=await l(s,Xe(a));let I;return(I=Ee(lr(s.data.content),fr,2,un))==null?void 0:Ee(I,od,9,cn)}async function Xd(s,a){var l=st,p=new Ke;a=we(p,8,Ye,a),await l(s,Xe(a))}async function Zd(s){var a=st,l=new Ke,p=new hd;l=we(l,11,Ye,p),await a(s,Xe(l))}async function Qd(s,a){var l=st,p=new Ke;a=we(p,14,Ye,a),await l(s,Xe(a))}async function eh(s,a){var l=st,p=new Ke;a=we(p,15,Ye,a),await l(s,Xe(a))}async function th(s){await s.h()}async function st(s,a){(s=await s.channel.C(a))||an(Ht,`Falsy response received from the message channel. ${JSON.stringify(s)}`),(a=s.data)||an(Ht,`Data field in the response from the message channel is falsy. ${JSON.stringify(a)}`),(a=a.content)||an(Ht,`Content field in the response from the message channel is falsy. ${JSON.stringify(a)}`);let l;try{l=lr(a)}catch(p){an(Ht,`The ControlMessage can't be deserialized. ${JSON.stringify(a)}. ${JSON.stringify(p)}`)}if((a=Ee(l,fr,2,un))||an(Ht,`MeetToAddonMessage field on ControlMessage is falsy. ${JSON.stringify(a)}`),a=a==null?void 0:Ee(a,Cl,10,cn),(a==null?void 0:Ut(a,1))!==void 0)throw new me(Zl(Ut(a,1)));return s}async function nh(s,a,l){var p=st,I=new Ke;a=we(I,1,Ye,a),p=await p(s,Xe(a)),s=p.data.messagePort;var j;return(p=(j=Ee(lr(p.data.content),fr,2,un))==null?void 0:Ee(j,To,1,cn))!=null?j=p:(j=new To,j=Ae(j,1,At(0),0)),{channel:s?qd(s,l):void 0,response:j}}async function aa(s){const a=_d(),{channel:l,response:p}=await nh(s,a,I=>Jd(I));if(!l)throw new me(Ql(p));return l}async function rh(s){var a=st,l=new Ke,p=new Ed;l=we(l,5,Ye,p),await a(s,Xe(l))}async function sh(s){var a=st,l=new Ke,p=new vd;l=we(l,6,Ye,p),await a(s,Xe(l))}async function ca(s,a,l){var p=st,I=new Ke,j=new Sd;a=Ae(j,1,At(a),0),l=Ae(a,2,Et(l),""),I=we(I,7,Ye,l),await p(s,Xe(I))}async function ih(s,a){var l=st,p=new Ke;a=we(p,16,Ye,a),await l(s,Xe(a))}class oh extends Tt{constructor(a,l,p){super(),this.U=a,this.channel=l,this.h=Al(async()=>{var I=this.channel,j=I.C,O=new Ke,re=new xd;O=we(O,13,Ye,re),await j.call(I,Xe(O))}),a=Sl(),Je(a,4),os(kt(a,1)),os(kt(a,2)),os(kt(a,3)),p=kd(new Ke,bd(md(a),p)),this.channel.send(Xe(p)),Rn(this.U,async I=>{switch(Ct(I.content,cn)){case 16:await th(this)}})}}let Ls;var ah=class{constructor(s){var a=Ls;this.h=s,this.g=a}delete(){throw Error("Not implemented.")}},ch=class extends ae{h(){return Ee(this,Pt,2,dn)}g(){return tn(this,Pt,2,dn)}j(){return Ee(this,Bt,3,dn)}l(){return tn(this,Bt,3,dn)}},dn=[2,3],uh=class extends ae{},fh=class extends ae{},lh=class extends ae{},dh=class extends ae{h(){return Ee(this,Pt,2,hn)}g(){return tn(this,Pt,2,hn)}j(){return Ee(this,Bt,3,hn)}l(){return tn(this,Bt,3,hn)}},hn=[2,3],ua=[5,6],hh=class extends ae{},$s=class extends ae{},Fs=[1,2,3],gh=class extends Error{constructor(){super("Failed to create CoActivity: Connection refused - Meet refused to begin Live Sharing")}},_h=class{constructor(s){this.config=s}start(){return this.g!=null||(this.g=setInterval(()=>{this.config.ha()},this.config.da)),this}shutdown(){clearInterval(this.g)}};function Ns(){const s=new Map,a={set(l,p){return s.set(l,p),a},D:()=>s};return a}function ph(s){if(s.g()){s=s.h().m;var a=s[W],l=en(s,a,1),p=nr(l,!0);if(p!=null&&p!==l&&Ne(s,a,1,p),s=p,a=s??se(),s=Uint8Array,U(K),l=a.g,l!=null&&!z(l))if(typeof l=="string"){te.test(l)&&(l=l.replace(te,$)),l=atob(l),p=new Uint8Array(l.length);for(let I=0;I<l.length;I++)p[I]=l.charCodeAt(I);l=p}else l=null;return a=l==null?l:a.g=l,{bytes:new s(a||0)}}}function yh(s,a){return a=fa(a),we(s,2,hn,a),s}function mh(s,a){return a=fa(a),we(s,2,dn,a),s}function fa(s){var a=new Pt;return Ae(a,1,nr(s.bytes,!1),se())}function bh(s){if(s.l()){s=s.j();var a,l,p=Je(s,1),I=(l=(a=ps(s,Ao,2))==null?void 0:Io(a))!=null?l:0;l=s.m;let j=l[W];const O=en(l,j,4);return a=O==null||typeof O=="number"?O:O==="NaN"||O==="Infinity"||O==="-Infinity"?Number(O):void 0,a!=null&&a!==O&&Ne(l,j,4,a),{mediaId:p,mediaPlayoutPosition:I,mediaPlayoutRate:sn(a,0),playbackState:Sh.get(Ut(s,3))}}}function wh(s,a){return a=la(a),we(s,3,hn,a),s}function vh(s,a){return a=la(a),we(s,3,dn,a),s}const Sh=Ns().set(0,"INVALID").set(1,"BUFFERING").set(2,"PLAY").set(3,"PAUSE").set(4,"ENDED").D(),xh=Ns().set("INVALID",0).set("BUFFERING",1).set("PLAY",2).set("PAUSE",3).set("ENDED",4).D();function la(s){var a=new Bt;a=Ae(a,1,Et(s.mediaId),"");var l=s.mediaPlayoutRate;if(l!=null&&typeof l!="number")throw Error(`Value of float/double field must be a number, found ${typeof l}: ${l}`);return a=Ae(a,4,l,0),l=new Ao,l=Ae(l,1,as(s.mediaPlayoutPosition),"0"),a=rn(a,2,l),s=xh.get(s.playbackState),Ae(a,3,At(s),0)}function Ih({activityTitle:s}){var a=new lh;return hs(a,4,Et(s))}function Ah(s,a){var l=new fh;return a=Ae(l,1,At(a.u),0),we(s,6,ua,a),s}function Eh(s){var a=new uh;return we(s,5,ua,a),s}const kh=Ns().set("co-doing",1).set("co-watching",2).D();async function da(s,a,l){var p=a.C,I=new $s,j=new hh;j=Ae(j,1,Et(s.activityTitle),"");var O=kh.get(s.K);j=Ae(j,2,At(O),0),I=we(I,3,Fs,j),p=await p.call(a,I,Gd);let re;if((re=sn(fo(kt(p,1)),!1))!=null&&re)return new Ch(s,a,l,ps(p,Ps,2));throw new gh}function ha(s,a){const l=s.config.N(a);l&&!s.config.M(s.g,l)&&(s.g=l,s.j=Io(a),s.v(s.g))}function Lt(s,a){const{state:l,fa:p,context:I}=a(s.g);s.g=l,s.notify(s.g,I,p)}class Ch{constructor(a,l,p,I){this.l=a,this.h=l,this.config=p,this.v=Il(j=>void this.l.O(j)),jh(this.h,j=>{const O=Ct(j,gr);switch(O){case 1:ha(this,Ee(j,Ps,1,gr));break;case 2:case 0:console.warn(`IllegalMessage: ${O} - Unhandled message - Please raise a bug with the MeetJS team`)}}),this.B=new _h({da:1e3,ha:()=>{var j,O,re=(O=(j=this.l).ja)==null?void 0:O.call(j);if(this.g!==null){this.g={...this.g,...re},j=new $s,O=this.config,re=O.W;var ne=new ch;ne=Ae(ne,1,as(this.j),"0"),O=re.call(O,ne,this.g),j=we(j,1,Fs,O),this.h.send(j)}}}).start(),this.g=null,this.j=0,I&&ha(this,I)}disconnect(){this.h.shutdown(),this.B.shutdown()}notify(a,l,p){var I=p?Ih(p):void 0;p=this.config;var j=p.X,O=new dh;O=Ae(O,1,as(this.j),"0"),I=rn(O,4,I),a=j.call(p,I,a),a=this.config.V(a,l),l=this.h,p=l.send,j=new $s,a=we(j,2,Fs,a),p.call(l,a)}}var Th=class{constructor(s){this.g=s}broadcastStateUpdate(s){Lt(this.g,()=>({state:s,context:{}}))}disconnect(){this.g.disconnect()}};function Oh(s,a){return s==null||a==null?!1:s.bytes.length===a.bytes.length&&s.bytes.every((l,p)=>l===a.bytes[p])}var Rh=class{constructor(s){this.g=s}notifySwitchedToMedia(s,a,l){Lt(this.g,()=>({state:{mediaId:a,mediaPlayoutRate:1,mediaPlayoutPosition:l,playbackState:"PLAY"},fa:{activityTitle:s},context:{u:1}}))}notifyPauseState(s,a){Lt(this.g,l=>{if(l==null)throw Error("Invalid before coWatchingState");return{state:{...l,playbackState:s?"PAUSE":"PLAY",mediaPlayoutPosition:a},context:{u:3}}})}notifySeekToTimestamp(s){Lt(this.g,a=>{if(a==null)throw Error("Invalid before coWatchingState");return{state:{...a,mediaPlayoutPosition:s},context:{u:2}}})}notifyPlayoutRate(s){Lt(this.g,a=>{if(a==null)throw Error("Invalid before coWatchingState");return{state:{...a,mediaPlayoutRate:s},context:{u:4}}})}notifyBuffering(s){Lt(this.g,a=>{if(a==null)throw Error("Invalid before coWatchingState");return{state:{...a,mediaPlayoutPosition:s,playbackState:"BUFFERING"},context:{u:3}}})}notifyReady(s){Lt(this.g,a=>{if(a==null)throw Error("Invalid before coWatchingState");return{state:{...a,mediaPlayoutPosition:s},context:{u:3}}})}disconnect(){this.g.disconnect()}};function Mh(s,a){if(s==null||a==null)return!1;const l=s.playbackState==="PLAY"?3*Math.max(s.mediaPlayoutRate,1):0,p=Math.abs(s.mediaPlayoutPosition-a.mediaPlayoutPosition);return s.mediaId===a.mediaId&&s.mediaPlayoutRate===a.mediaPlayoutRate&&p<=l&&s.playbackState===a.playbackState}function jh(s,a){const l=Rn(s.signal,p=>{a(p)});s.o.push(l)}var ga=class{constructor(s,a){this.channel=s,this.signal=a,this.o=[]}send(s){this.channel.send(ms(s))}async C(s,a){return s=await this.channel.C(ms(s)),a(s.data)}shutdown(){this.o.forEach(s=>{this.signal.detach(s)})}};function Dh(s,a){var l=Bh;const p=s.signal(),I=s.signal();return Rn(a,j=>{const O=l(j)?p:I;dr(s,O,j)},s),{ia:p,ga:I}}function Uh(s,a,l,p=I=>I){Rn(l,I=>{dr(s,a,p(I))},s)}async function Hh(s,a){if(a)return s=await da({activityTitle:a.activityTitle,K:"co-watching",ja:()=>a.onCoWatchingStateQuery(),O:l=>{a.onCoWatchingStateChanged(l)}},s,{X:wh,W:vh,V:Ah,N:bh,M:Mh}),new Rh(s)}async function Ph(s,a){if(a)return s=await da({activityTitle:a.activityTitle,K:"co-doing",O:l=>{a.onCoDoingStateChanged(l)}},s,{X:yh,W:mh,V:Eh,N:ph,M:Oh}),new Th(s)}async function _a(s){const a=new Us,l=a.signal();s=await s,Uh(a,l,s.signal,j=>j.content);const{ia:p,ga:I}=Dh(a,l);return{Z:new ga(s.channel,p),aa:new ga(s.channel,I)}}function Bh(s){e:switch(Ct(s,gr)){case 1:s=Ee(s,Ps,1,gr);break e;default:throw Error("CA Message arrived with no known content message set")}return s.g()}async function Lh(s,a){if({Z:s}=await _a(aa(s.g)),a=await Ph(s,a),!a)throw Error("Failed to create co-doing session");return a}async function $h(s,a){if({aa:s}=await _a(aa(s.g)),a=await Hh(s,a),!a)throw Error("Failed to create co-watching session");return a}var Fh=class extends Es{async notifySidePanel(s){await ca(this.context.g,1,s)}async unloadSidePanel(){await rh(this.context.g)}async loadSidePanel(){await sh(this.context.g)}},Nh=class extends Es{async setAddonStartingState(s){if(s===null)throw new me(ws("addonStartingState"));if(typeof s!="object")throw new me(_t("addonStartingState",typeof s,"object | undefined"));if(s.sidePanelUrl!==void 0&&typeof s.sidePanelUrl!="string")throw new me(_t("sidePanelUrl",typeof s.sidePanelUrl,"string | undefined"));if(s.additionalData!==void 0&&typeof s.additionalData!="string")throw new me(_t("additionalData",typeof s.additionalData,"string | undefined"));if(Object.keys(s).length!==+!!s.sidePanelUrl+ +!!s.additionalData)throw new me(Bl);if(Object.keys(s).length===0)throw new me(Pl);var a=[];a.push(xs(Ss(vs(1),s.sidePanelUrl),s.additionalData)),s=this.context.g;var l=new Ad,p=l.setAddonStartingState,I=new Id;a=xo(I,a),await ih(s,p.call(l,a))}},zh=class extends Es{async notifyMainStage(s){await ca(this.context.g,2,s)}},Vh=class{constructor(s){s=s.cloudProjectNumber;const a=ks();if(a.cloudProjectNumber!==s)throw new me(Ml);const l=a.S,p=a.ba;let I;Ls=(I=Ls)!=null?I:Yd(p,l,s),this.g=new ah(a)}async createMainStageClient(){var s=this.g;if(s.h.frameType!==2)throw new me(Ro);return await Promise.resolve(new Fh(s))}async createSidePanelClient(){var s=this.g;if(s.h.frameType!==1)throw new me(Tl);return await Promise.resolve(new zh(s))}async createCoWatchingClient(s){return await $h(this.g,s)}async createCoDoingClient(s){return await Lh(this.g,s)}async createRoomsStandaloneClient(){var s=this.g;if(s.h.frameType!==2)throw new me(Ro);return await Promise.resolve(new Nh(s))}};let pa=null;var ya={addon:{getFrameType:function(){e:{var s=ks().frameType;switch(s){case 2:s="MAIN_STAGE";break e;case 1:s="SIDE_PANEL";break e;default:throw Error(`Unknown frame type: ${s}`)}}return s},createAddonSession:async function(s){if(s===null)throw new me(ws("config"));if(typeof s!="object")throw new me(_t("config",typeof s,"object"));if(typeof s.cloudProjectNumber!="string")throw new me(_t("cloudProjectNumber",typeof s.cloudProjectNumber,"string"));if(pa&&ks().S!=="integration.test.google.com")throw new me(ql);return pa=new Vh(s)}}},jn=["meet"],it=i;jn[0]in it||typeof it.execScript>"u"||it.execScript("var "+jn[0]);for(var $t;jn.length&&($t=jn.shift());)jn.length||ya===void 0?it[$t]&&it[$t]!==Object.prototype[$t]?it=it[$t]:it=it[$t]={}:it[$t]=ya}).apply(ol);ol.meet;async function Bm(){let t="";const e=new l0({storage:new Pm("parking-lot"),network:[new Em,new Um("wss://sync.automerge.org")]});let n;t??!1?n=await e.find(t):(n=e.create(),t=n.url,n.change(u=>u.list=[])),n.on("change",({doc:u})=>{i(u)});const[r,i]=wc(n.doc());function o(u,f,d,_){n.change(h=>{h.list[u]=h.list[u].slice(0,f)+_+h.list[u].slice(d)})}function c(u){n.change(f=>{f.list.push(u)})}return[r,c,o]}const Lm="_App_9g4xh_1",$m={App:Lm};var Fm=Cc("<div><input type=text>"),Nm=Cc("<input type=text>");const[zm,Vm,gi]=await Bm(),Wm=()=>{const t=()=>zm().list;let e;function n(r){r.code==="Enter"&&e.value&&(Vm(e.value),e.value="")}return(()=>{var r=Fm(),i=r.firstChild;Rc(r,pi(ng,{get each(){return t()},children:(c,u)=>pi(qm,{item:c,index:u})}),i);var o=e;return typeof o=="function"?Oc(o,i):e=i,Tc(i,"keydown",n),Fn(()=>ig(r,$m.App)),r})()},qm=t=>{let e;function n(i,o){if(e){const c=e?.selectionStart,u=e?.selectionEnd,f=o.data??"";if(o.inputType=="deleteContentBackward")if(c===u){const d=Math.max(0,c-1);gi(i,d,u,""),r(d)}else gi(i,c,u,""),r(c);else gi(i,c,u,f),r(u+1);o.preventDefault()}}function r(i){e&&(e.selectionStart=i,e.selectionEnd=i)}return(()=>{var i=Nm();Tc(i,"beforeinput",c=>n(t.index,c));var o=e;return typeof o=="function"?Oc(o,i):e=i,Fn(()=>i.value=t.item()),i})()},Gm=document.getElementById("root");sg(()=>pi(Wm,{}),Gm);
