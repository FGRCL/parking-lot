(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const Gh=!1,Jh=(t,e)=>t===e,Kh=Symbol("solid-track"),Dr={equals:Jh};let Yh=Tc;const en=1,Ur=2,xc={owned:null,cleanups:null,context:null,owner:null};var Ce=null;let Ys=null,Xh=null,Se=null,Ue=null,Jt=null,Yr=0;function yi(t,e){const n=Se,r=Ce,i=t.length===0,o=e===void 0?r:e,a=i?xc:{owned:null,cleanups:null,context:o?o.context:null,owner:o},u=i?t:()=>t(()=>Zn(()=>zn(a)));Ce=a,Se=null;try{return Qn(u,!0)}finally{Se=n,Ce=r}}function Ic(t,e){e=e?Object.assign({},Dr,e):Dr;const n={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},r=i=>(typeof i=="function"&&(i=i(n.value)),Ec(n,i));return[Ac.bind(n),r]}function Xt(t,e,n){const r=kc(t,e,!1,en);Xr(r)}function Zh(t,e,n){n=n?Object.assign({},Dr,n):Dr;const r=kc(t,e,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Xr(r),Ac.bind(r)}function Zn(t){if(Se===null)return t();const e=Se;Se=null;try{return t()}finally{Se=e}}function Qh(t){return Ce===null||(Ce.cleanups===null?Ce.cleanups=[t]:Ce.cleanups.push(t)),t}function Ac(){if(this.sources&&this.state)if(this.state===en)Xr(this);else{const t=Ue;Ue=null,Qn(()=>Hr(this),!1),Ue=t}if(Se){const t=this.observers?this.observers.length:0;Se.sources?(Se.sources.push(this),Se.sourceSlots.push(t)):(Se.sources=[this],Se.sourceSlots=[t]),this.observers?(this.observers.push(Se),this.observerSlots.push(Se.sources.length-1)):(this.observers=[Se],this.observerSlots=[Se.sources.length-1])}return this.value}function Ec(t,e,n){let r=t.value;return(!t.comparator||!t.comparator(r,e))&&(t.value=e,t.observers&&t.observers.length&&Qn(()=>{for(let i=0;i<t.observers.length;i+=1){const o=t.observers[i],a=Ys&&Ys.running;a&&Ys.disposed.has(o),(a?!o.tState:!o.state)&&(o.pure?Ue.push(o):Jt.push(o),o.observers&&Oc(o)),a||(o.state=en)}if(Ue.length>1e6)throw Ue=[],new Error},!1)),e}function Xr(t){if(!t.fn)return;zn(t);const e=Yr;e0(t,t.value,e)}function e0(t,e,n){let r;const i=Ce,o=Se;Se=Ce=t;try{r=t.fn(e)}catch(a){return t.pure&&(t.state=en,t.owned&&t.owned.forEach(zn),t.owned=null),t.updatedAt=n+1,Rc(a)}finally{Se=o,Ce=i}(!t.updatedAt||t.updatedAt<=n)&&(t.updatedAt!=null&&"observers"in t?Ec(t,r):t.value=r,t.updatedAt=n)}function kc(t,e,n,r=en,i){const o={fn:t,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:Ce,context:Ce?Ce.context:null,pure:n};return Ce===null||Ce!==xc&&(Ce.owned?Ce.owned.push(o):Ce.owned=[o]),o}function Cc(t){if(t.state===0)return;if(t.state===Ur)return Hr(t);if(t.suspense&&Zn(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<Yr);)t.state&&e.push(t);for(let n=e.length-1;n>=0;n--)if(t=e[n],t.state===en)Xr(t);else if(t.state===Ur){const r=Ue;Ue=null,Qn(()=>Hr(t,e[0]),!1),Ue=r}}function Qn(t,e){if(Ue)return t();let n=!1;e||(Ue=[]),Jt?n=!0:Jt=[],Yr++;try{const r=t();return t0(n),r}catch(r){n||(Jt=null),Ue=null,Rc(r)}}function t0(t){if(Ue&&(Tc(Ue),Ue=null),t)return;const e=Jt;Jt=null,e.length&&Qn(()=>Yh(e),!1)}function Tc(t){for(let e=0;e<t.length;e++)Cc(t[e])}function Hr(t,e){t.state=0;for(let n=0;n<t.sources.length;n+=1){const r=t.sources[n];if(r.sources){const i=r.state;i===en?r!==e&&(!r.updatedAt||r.updatedAt<Yr)&&Cc(r):i===Ur&&Hr(r,e)}}}function Oc(t){for(let e=0;e<t.observers.length;e+=1){const n=t.observers[e];n.state||(n.state=Ur,n.pure?Ue.push(n):Jt.push(n),n.observers&&Oc(n))}}function zn(t){let e;if(t.sources)for(;t.sources.length;){const n=t.sources.pop(),r=t.sourceSlots.pop(),i=n.observers;if(i&&i.length){const o=i.pop(),a=n.observerSlots.pop();r<i.length&&(o.sourceSlots[a]=r,i[r]=o,n.observerSlots[r]=a)}}if(t.tOwned){for(e=t.tOwned.length-1;e>=0;e--)zn(t.tOwned[e]);delete t.tOwned}if(t.owned){for(e=t.owned.length-1;e>=0;e--)zn(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function n0(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function Rc(t,e=Ce){throw n0(t)}const Sa=Symbol("fallback");function xa(t){for(let e=0;e<t.length;e++)t[e]()}function r0(t,e,n={}){let r=[],i=[],o=[],a=[],u=0,f;return Qh(()=>xa(o)),()=>{const d=t()||[],_=d.length;return d[Kh],Zn(()=>{if(_===0)return u!==0&&(xa(o),o=[],r=[],i=[],u=0,a=[]),n.fallback&&(r=[Sa],i[0]=yi(g=>(o[0]=g,n.fallback())),u=1),i;for(r[0]===Sa&&(o[0](),o=[],r=[],i=[],u=0),f=0;f<_;f++)f<r.length&&r[f]!==d[f]?a[f](()=>d[f]):f>=r.length&&(i[f]=yi(h));for(;f<r.length;f++)o[f]();return u=a.length=o.length=_,r=d.slice(0),i=i.slice(0,u)});function h(g){o[f]=g;const[y,m]=Ic(d[f]);return a[f]=m,e(y,f)}}}function Cr(t,e){return Zn(()=>t(e||{}))}function s0(t){const e="fallback"in t&&{fallback:()=>t.fallback};return Zh(r0(()=>t.each,t.children,e||void 0))}function i0(t,e,n){let r=n.length,i=e.length,o=r,a=0,u=0,f=e[i-1].nextSibling,d=null;for(;a<i||u<o;){if(e[a]===n[u]){a++,u++;continue}for(;e[i-1]===n[o-1];)i--,o--;if(i===a){const _=o<r?u?n[u-1].nextSibling:n[o-u]:f;for(;u<o;)t.insertBefore(n[u++],_)}else if(o===u)for(;a<i;)(!d||!d.has(e[a]))&&e[a].remove(),a++;else if(e[a]===n[o-1]&&n[u]===e[i-1]){const _=e[--i].nextSibling;t.insertBefore(n[u++],e[a++].nextSibling),t.insertBefore(n[--o],_),e[i]=n[o]}else{if(!d){d=new Map;let h=u;for(;h<o;)d.set(n[h],h++)}const _=d.get(e[a]);if(_!=null)if(u<_&&_<o){let h=a,g=1,y;for(;++h<i&&h<o&&!((y=d.get(e[h]))==null||y!==_+g);)g++;if(g>_-u){const m=e[a];for(;u<_;)t.insertBefore(n[u++],m)}else t.replaceChild(n[u++],e[a++])}else a++;else e[a++].remove()}}}function o0(t,e,n,r={}){let i;return yi(o=>{i=o,e===document?t():mi(e,t(),e.firstChild?null:void 0,n)},r.owner),()=>{i(),e.textContent=""}}function Bi(t,e,n,r){let i;const o=()=>{const u=document.createElement("template");return u.innerHTML=t,u.content.firstChild},a=()=>(i||(i=o())).cloneNode(!0);return a.cloneNode=a,a}function a0(t,e,n){t.setAttribute(e,n)}function Rt(t,e){e==null?t.removeAttribute("class"):t.className=e}function Mc(t,e,n,r){if(Array.isArray(n)){const i=n[0];t.addEventListener(e,n[0]=o=>i.call(t,n[1],o))}else t.addEventListener(e,n,typeof n!="function"&&n)}function jc(t,e,n){return Zn(()=>t(e,n))}function mi(t,e,n,r){if(n!==void 0&&!r&&(r=[]),typeof e!="function")return Pr(t,e,r,n);Xt(i=>Pr(t,e(),i,n),r)}function Pr(t,e,n,r,i){for(;typeof n=="function";)n=n();if(e===n)return n;const o=typeof e,a=r!==void 0;if(t=a&&n[0]&&n[0].parentNode||t,o==="string"||o==="number"){if(o==="number"&&(e=e.toString(),e===n))return n;if(a){let u=n[0];u&&u.nodeType===3?u.data!==e&&(u.data=e):u=document.createTextNode(e),n=yn(t,n,r,u)}else n!==""&&typeof n=="string"?n=t.firstChild.data=e:n=t.textContent=e}else if(e==null||o==="boolean")n=yn(t,n,r);else{if(o==="function")return Xt(()=>{let u=e();for(;typeof u=="function";)u=u();n=Pr(t,u,n,r)}),()=>n;if(Array.isArray(e)){const u=[],f=n&&Array.isArray(n);if(bi(u,e,n,i))return Xt(()=>n=Pr(t,u,n,r,!0)),()=>n;if(u.length===0){if(n=yn(t,n,r),a)return n}else f?n.length===0?Ia(t,u,r):i0(t,n,u):(n&&yn(t),Ia(t,u));n=u}else if(e.nodeType){if(Array.isArray(n)){if(a)return n=yn(t,n,r,e);yn(t,n,null,e)}else n==null||n===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);n=e}}return n}function bi(t,e,n,r){let i=!1;for(let o=0,a=e.length;o<a;o++){let u=e[o],f=n&&n[t.length],d;if(!(u==null||u===!0||u===!1))if((d=typeof u)=="object"&&u.nodeType)t.push(u);else if(Array.isArray(u))i=bi(t,u,f)||i;else if(d==="function")if(r){for(;typeof u=="function";)u=u();i=bi(t,Array.isArray(u)?u:[u],Array.isArray(f)?f:[f])||i}else t.push(u),i=!0;else{const _=String(u);f&&f.nodeType===3&&f.data===_?t.push(f):t.push(document.createTextNode(_))}}return i}function Ia(t,e,n=null){for(let r=0,i=e.length;r<i;r++)t.insertBefore(e[r],n)}function yn(t,e,n,r){if(n===void 0)return t.textContent="";const i=r||document.createTextNode("");if(e.length){let o=!1;for(let a=e.length-1;a>=0;a--){const u=e[a];if(i!==u){const f=u.parentNode===t;!o&&!a?f?t.replaceChild(i,u):t.insertBefore(i,n):f&&u.remove()}else o=!0}}else t.insertBefore(i,n);return[i]}const jt=Symbol.for("_am_meta"),En=Symbol.for("_am_trace"),kn=Symbol.for("_am_objectId"),Zr=Symbol.for("_am_isProxy"),Dc=Symbol.for("_am_clearCache"),c0=Symbol.for("_am_uint"),u0=Symbol.for("_am_int"),f0=Symbol.for("_am_f64"),Uc=Symbol.for("_am_counter"),wi=Symbol.for("_am_text"),Hc=Symbol.for("_am_rawString");var Aa;class Kt{constructor(e){if(this[Aa]=!0,typeof e=="string")this.elems=[...e];else if(Array.isArray(e))this.elems=e;else if(e===void 0)this.elems=[];else throw new TypeError(`Unsupported initial value for Text: ${e}`);Reflect.defineProperty(this,wi,{value:!0})}get length(){return this.elems.length}get(e){return this.elems[e]}[(Aa=wi,Symbol.iterator)](){const e=this.elems;let n=-1;return{next(){return n+=1,n<e.length?{done:!1,value:e[n]}:{done:!0}}}}toString(){if(!this.str){this.str="";for(const e of this.elems)typeof e=="string"?this.str+=e:this.str+="ï¿¼"}return this.str}toSpans(){if(!this.spans){this.spans=[];let e="";for(const n of this.elems)typeof n=="string"?e+=n:(e.length>0&&(this.spans.push(e),e=""),this.spans.push(n));e.length>0&&this.spans.push(e)}return this.spans}toJSON(){return this.toString()}set(e,n){if(this[jt])throw new RangeError("object cannot be modified outside of a change block");this.elems[e]=n}insertAt(e,...n){if(this[jt])throw new RangeError("object cannot be modified outside of a change block");n.every(r=>typeof r=="string")?this.elems.splice(e,0,...n.join("")):this.elems.splice(e,0,...n)}deleteAt(e,n=1){if(this[jt])throw new RangeError("object cannot be modified outside of a change block");this.elems.splice(e,n)}map(e){this.elems.map(e)}lastIndexOf(e,n){this.elems.lastIndexOf(e,n)}concat(e){return new Kt(this.elems.concat(e.elems))}every(e){return this.elems.every(e)}filter(e){return new Kt(this.elems.filter(e))}find(e){return this.elems.find(e)}findIndex(e){return this.elems.findIndex(e)}forEach(e){this.elems.forEach(e)}includes(e){return this.elems.includes(e)}indexOf(e){return this.elems.indexOf(e)}join(e){return this.elems.join(e)}reduce(e){this.elems.reduce(e)}reduceRight(e){this.elems.reduceRight(e)}slice(e,n){return new Kt(this.elems.slice(e,n))}some(e){return this.elems.some(e)}toLocaleString(){this.toString()}}class vi{constructor(e){this.value=e||0,Reflect.defineProperty(this,Uc,{value:!0})}valueOf(){return this.value}toString(){return this.valueOf().toString()}toJSON(){return this.value}increment(e){throw new Error("Counters should not be incremented outside of a change callback")}decrement(e){throw new Error("Counters should not be decremented outside of a change callback")}}class l0 extends vi{constructor(e,n,r,i,o){super(e),this.context=n,this.path=r,this.objectId=i,this.key=o}increment(e){return e=typeof e=="number"?e:1,this.context.increment(this.objectId,this.key,e),this.value+=e,this.value}decrement(e){return this.increment(typeof e=="number"?-e:-1)}}function d0(t,e,n,r,i){return new l0(t,e,n,r,i)}var Pc;class Lc{constructor(e){this[Pc]=!0,this.val=e}toString(){return this.val}toJSON(){return this.val}}Pc=Hc;function lt(t){if(typeof t=="string"&&/^[0-9]+$/.test(t)&&(t=parseInt(t,10)),typeof t!="number")return t;if(t<0||isNaN(t)||t===1/0||t===-1/0)throw new RangeError("A list index must be positive, but you passed "+t);return t}function We(t,e){const{context:n,objectId:r,path:i,textV2:o}=t,a=n.getWithType(r,e);if(a===null)return;const u=a[0],f=a[1];switch(u){case void 0:return;case"map":return er(n,f,o,[...i,e]);case"list":return es(n,f,o,[...i,e]);case"text":return o?n.text(f):Wn(n,f,[...i,e]);case"str":return o?new Lc(f):f;case"uint":return f;case"int":return f;case"f64":return f;case"boolean":return f;case"null":return null;case"bytes":return f;case"timestamp":return f;case"counter":return d0(f,n,i,r,e);default:throw RangeError(`datatype ${u} unimplemented`)}}function Lr(t,e,n,r){const i=typeof t;switch(i){case"object":if(t==null)return[null,"null"];if(t[c0])return[t.value,"uint"];if(t[u0])return[t.value,"int"];if(t[f0])return[t.value,"f64"];if(t[Uc])return[t.value,"counter"];if(t instanceof Date)return[t.getTime(),"timestamp"];if($c(t))return[t.toString(),"str"];if(Fc(t))return[t,"text"];if(t instanceof Uint8Array)return[t,"bytes"];if(t instanceof Array)return[t,"list"];if(Object.prototype.toString.call(t)==="[object Object]")return[t,"map"];throw Qr(t,r)?new RangeError("Cannot create a reference to an existing document object"):new RangeError(`Cannot assign unknown object: ${t}`);case"boolean":return[t,"boolean"];case"number":return Number.isInteger(t)?[t,"int"]:[t,"f64"];case"string":return e?[t,"text"]:[t,"str"];case"undefined":throw new RangeError([`Cannot assign undefined value at ${Ea(n)}, `,"because `undefined` is not a valid JSON data type. ","You might consider setting the property's value to `null`, ","or using `delete` to remove it altogether."].join(""));default:throw new RangeError([`Cannot assign ${i} value at ${Ea(n)}. `,"All JSON primitive datatypes (object, array, string, number, boolean, null) ",`are supported in an Automerge document; ${i} values are not. `].join(""))}}function Qr(t,e){var n,r;return t instanceof Date?!1:!!(t&&((r=(n=t[jt])===null||n===void 0?void 0:n.handle)===null||r===void 0?void 0:r.__wbg_ptr)===e.__wbg_ptr)}const h0={get(t,e){const{context:n,objectId:r,cache:i}=t;return e===Symbol.toStringTag?t[Symbol.toStringTag]:e===kn?r:e===Zr?!0:e===En?t.trace:e===jt?{handle:n,textV2:t.textV2}:(i[e]||(i[e]=We(t,e)),i[e])},set(t,e,n){const{context:r,objectId:i,path:o,textV2:a}=t;if(t.cache={},Qr(n,r))throw new RangeError("Cannot create a reference to an existing document object");if(e===En)return t.trace=n,!0;if(e===Dc)return!0;const[u,f]=Lr(n,a,[...o,e],r);switch(f){case"list":{const d=r.putObject(i,e,[]),_=es(r,d,a,[...o,e]);for(let h=0;h<u.length;h++)_[h]=u[h];break}case"text":{if(a)Br(u),r.putObject(i,e,u);else{Fi(u);const d=r.putObject(i,e,"");Wn(r,d,[...o,e]).splice(0,0,...u)}break}case"map":{const d=r.putObject(i,e,{}),_=er(r,d,a,[...o,e]);for(const h in u)_[h]=u[h];break}default:r.put(i,e,u,f)}return!0},deleteProperty(t,e){const{context:n,objectId:r}=t;return t.cache={},n.delete(r,e),!0},has(t,e){return this.get(t,e)!==void 0},getOwnPropertyDescriptor(t,e){const n=this.get(t,e);if(typeof n<"u")return{configurable:!0,enumerable:!0,value:n}},ownKeys(t){const{context:e,objectId:n}=t,r=e.keys(n);return[...new Set(r)]}},Bc={get(t,e){const{context:n,objectId:r}=t;return e=lt(e),e===Symbol.hasInstance?i=>Array.isArray(i):e===Symbol.toStringTag?t[Symbol.toStringTag]:e===kn?r:e===Zr?!0:e===En?t.trace:e===jt?{handle:n}:e==="length"?n.length(r):typeof e=="number"?We(t,e):$i(t)[e]},set(t,e,n){const{context:r,objectId:i,path:o,textV2:a}=t;if(e=lt(e),Qr(n,r))throw new RangeError("Cannot create a reference to an existing document object");if(e===Dc)return!0;if(e===En)return t.trace=n,!0;if(typeof e=="string")throw new RangeError("list index must be a number");const[u,f]=Lr(n,a,[...o,e],r);switch(f){case"list":{let d;e>=r.length(i)?d=r.insertObject(i,e,[]):d=r.putObject(i,e,[]),es(r,d,a,[...o,e]).splice(0,0,...u);break}case"text":{if(a)Br(u),e>=r.length(i)?r.insertObject(i,e,u):r.putObject(i,e,u);else{let d;Fi(u),e>=r.length(i)?d=r.insertObject(i,e,""):d=r.putObject(i,e,""),Wn(r,d,[...o,e]).splice(0,0,...u)}break}case"map":{let d;e>=r.length(i)?d=r.insertObject(i,e,{}):d=r.putObject(i,e,{});const _=er(r,d,a,[...o,e]);for(const h in u)_[h]=u[h];break}default:e>=r.length(i)?r.insert(i,e,u,f):r.put(i,e,u,f)}return!0},deleteProperty(t,e){const{context:n,objectId:r}=t;e=lt(e);const i=n.get(r,e);if(i!=null&&i[0]=="counter")throw new TypeError("Unsupported operation: deleting a counter from a list");return n.delete(r,e),!0},has(t,e){const{context:n,objectId:r}=t;return e=lt(e),typeof e=="number"?e<n.length(r):e==="length"},getOwnPropertyDescriptor(t,e){const{context:n,objectId:r}=t;return e==="length"?{writable:!0,value:n.length(r)}:e===kn?{configurable:!1,enumerable:!1,value:r}:(e=lt(e),{configurable:!0,enumerable:!0,value:We(t,e)})},getPrototypeOf(t){return Object.getPrototypeOf(t)},ownKeys(){const t=[];return t.push("length"),t}},g0=Object.assign({},Bc,{get(t,e){const{context:n,objectId:r}=t;return e=lt(e),e===Symbol.hasInstance?i=>Array.isArray(i):e===Symbol.toStringTag?t[Symbol.toStringTag]:e===kn?r:e===Zr?!0:e===En?t.trace:e===jt?{handle:n}:e==="length"?n.length(r):typeof e=="number"?We(t,e):p0(t)[e]||$i(t)[e]},getPrototypeOf(){return Object.getPrototypeOf(new Kt)}});function er(t,e,n,r){const i={context:t,objectId:e,path:r||[],cache:{},textV2:n},o={};return Object.assign(o,i),new Proxy(o,h0)}function es(t,e,n,r){const i={context:t,objectId:e,path:r||[],cache:{},textV2:n},o=[];return Object.assign(o,i),new Proxy(o,Bc)}function Wn(t,e,n){const r={context:t,objectId:e,path:n||[],cache:{},textV2:!1},i={};return Object.assign(i,r),new Proxy(i,g0)}function _0(t,e){return er(t,"_root",e,[])}function $i(t){const{context:e,objectId:n,path:r,textV2:i}=t;return{at(a){return We(t,a)},deleteAt(a,u){return typeof u=="number"?e.splice(n,a,u):e.delete(n,a),this},fill(a,u,f){const[d,_]=Lr(a,i,[...r,u],e),h=e.length(n);u=lt(u||0),f=lt(f||h);for(let g=u;g<Math.min(f,h);g++)if(_==="list"||_==="map")e.putObject(n,g,d);else if(_==="text")if(i)Br(d),e.putObject(n,g,d);else{Fi(d);const y=e.putObject(n,g,""),m=Wn(e,y,[...r,g]);for(let v=0;v<d.length;v++)m[v]=d.get(v)}else e.put(n,g,d,_);return this},indexOf(a,u=0){const f=e.length(n);for(let d=u;d<f;d++){const _=e.getWithType(n,d);if(_&&(_[1]===a[kn]||_[1]===a))return d}return-1},insertAt(a,...u){return this.splice(a,0,...u),this},pop(){const a=e.length(n);if(a==0)return;const u=We(t,a-1);return e.delete(n,a-1),u},push(...a){const u=e.length(n);return this.splice(u,0,...a),e.length(n)},shift(){if(e.length(n)==0)return;const a=We(t,0);return e.delete(n,0),a},splice(a,u,...f){a=lt(a),typeof u!="number"&&(u=e.length(n)-a),u=lt(u);for(const h of f)if(Qr(h,e))throw new RangeError("Cannot create a reference to an existing document object");const d=[];for(let h=0;h<u;h++){const g=We(t,a);g!==void 0&&d.push(g),e.delete(n,a)}const _=f.map((h,g)=>{try{return Lr(h,i,[...r],e)}catch(y){throw y instanceof RangeError?new RangeError(`${y.message} (at index ${g} in the input)`):y}});for(const[h,g]of _){switch(g){case"list":{const y=e.insertObject(n,a,[]);es(e,y,i,[...r,a]).splice(0,0,...h);break}case"text":{if(i)Br(h),e.insertObject(n,a,h);else{const y=e.insertObject(n,a,"");Wn(e,y,[...r,a]).splice(0,0,...h)}break}case"map":{const y=e.insertObject(n,a,{}),m=er(e,y,i,[...r,a]);for(const v in h)m[v]=h[v];break}default:e.insert(n,a,h,g)}a+=1}return d},unshift(...a){return this.splice(0,0,...a),e.length(n)},entries(){let a=0;return{next:()=>{const f=We(t,a);return f===void 0?{value:void 0,done:!0}:{value:[a++,f],done:!1}},[Symbol.iterator](){return this}}},keys(){let a=0;const u=e.length(n);return{next:()=>a<u?{value:a++,done:!1}:{value:void 0,done:!0},[Symbol.iterator](){return this}}},values(){let a=0;return{next:()=>{const f=We(t,a++);return f===void 0?{value:void 0,done:!0}:{value:f,done:!1}},[Symbol.iterator](){return this}}},toArray(){const a=[];let u;do u=We(t,a.length),u!==void 0&&a.push(u);while(u!==void 0);return a},map(a){return this.toArray().map(a)},toString(){return this.toArray().toString()},toLocaleString(){return this.toArray().toLocaleString()},forEach(a){return this.toArray().forEach(a)},concat(a){return this.toArray().concat(a)},every(a){return this.toArray().every(a)},filter(a){return this.toArray().filter(a)},find(a){let u=0;for(const f of this){if(a(f,u))return f;u+=1}},findIndex(a){let u=0;for(const f of this){if(a(f,u))return u;u+=1}return-1},includes(a){return this.find(u=>u===a)!==void 0},join(a){return this.toArray().join(a)},reduce(a,u){return this.toArray().reduce(a,u)},reduceRight(a,u){return this.toArray().reduceRight(a,u)},lastIndexOf(a,u=1/0){return this.toArray().lastIndexOf(a,u)},slice(a,u){return this.toArray().slice(a,u)},some(a){let u=0;for(const f of this){if(a(f,u))return!0;u+=1}return!1},[Symbol.iterator]:function*(){let a=0,u=We(t,a);for(;u!==void 0;)yield u,a+=1,u=We(t,a)}}}function p0(t){const{context:e,objectId:n}=t;return{set(i,o){return this[i]=o},get(i){return this[i]},toString(){return e.text(n).replace(/ï¿¼/g,"")},toSpans(){const i=[];let o="";const a=e.length(n);for(let u=0;u<a;u++){const f=this[u];typeof f=="string"?o+=f:(o.length>0&&(i.push(o),o=""),i.push(f))}return o.length>0&&i.push(o),i},toJSON(){return this.toString()},indexOf(i,o=0){return e.text(n).indexOf(i,o)},insertAt(i,...o){o.every(a=>typeof a=="string")?e.splice(n,i,0,o.join("")):$i(t).insertAt(i,...o)}}}function Fi(t){if(!Fc(t))throw new Error("value was not a Text instance")}function Br(t){if(typeof t!="string")throw new Error("value was not a string")}function Ea(t){const e=t.map(n=>{if(typeof n=="number")return n.toString();if(typeof n=="string")return n.replace(/~/g,"~0").replace(/\//g,"~1")});return t.length===0?"":"/"+e.join("/")}function $c(t){return typeof t=="object"&&t!==null&&Object.prototype.hasOwnProperty.call(t,Hc)}function Fc(t){return typeof t=="object"&&t!==null&&Object.prototype.hasOwnProperty.call(t,wi)}let Nc;const Vc=new Array(128).fill(void 0);Vc.push(void 0,null,!0,!1);const Xs=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}};Xs.encodeInto;Vc.length;const y0=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&y0.decode();typeof FinalizationRegistry>"u"||new FinalizationRegistry(t=>Nc.__wbg_automerge_free(t>>>0,1));typeof FinalizationRegistry>"u"||new FinalizationRegistry(t=>Nc.__wbg_syncstate_free(t>>>0,1));let m0=[];function b0(t){for(const e in t)Fe[e]=t[e];for(const e of m0)e()}const Fe={create(t){throw new RangeError("Automerge.use() not called")},load(t,e){throw new RangeError("Automerge.use() not called (load)")},encodeChange(t){throw new RangeError("Automerge.use() not called (encodeChange)")},decodeChange(t){throw new RangeError("Automerge.use() not called (decodeChange)")},initSyncState(){throw new RangeError("Automerge.use() not called (initSyncState)")},encodeSyncMessage(t){throw new RangeError("Automerge.use() not called (encodeSyncMessage)")},decodeSyncMessage(t){throw new RangeError("Automerge.use() not called (decodeSyncMessage)")},encodeSyncState(t){throw new RangeError("Automerge.use() not called (encodeSyncState)")},decodeSyncState(t){throw new RangeError("Automerge.use() not called (decodeSyncState)")},exportSyncState(t){throw new RangeError("Automerge.use() not called (exportSyncState)")},importSyncState(t){throw new RangeError("Automerge.use() not called (importSyncState)")}};function Oe(t,e=!0){if(typeof t!="object")throw new RangeError("must be the document root");const n=Reflect.get(t,jt);if(n===void 0||n==null||e&&w0(t)!=="_root")throw new RangeError("must be the document root");return n}function zc(t){return Reflect.get(t,En)}function w0(t){return typeof t!="object"||t===null?null:Reflect.get(t,kn)}function ts(t){return!!Reflect.get(t,Zr)}var v0=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Ni(t){return typeof t=="object"?t:{actor:t}}function Vi(t){const e=Ni(t),n=!!e.freeze,r=e.patchCallback,i=!e.enableTextV2,o=e.actor,a=Fe.create({actor:o,text_v1:i});a.enableFreeze(!!e.freeze);const u=e.enableTextV2||!1;return Kc(a,u),a.materialize("/",void 0,{handle:a,heads:void 0,freeze:n,patchCallback:r,textV2:u})}function S0(t,e){const n=Oe(t),r=n.handle;return n.handle.materialize("/",e,Object.assign(Object.assign({},n),{handle:r,heads:e}))}function x0(t,e){const n=Oe(t),r=n.heads,i=Ni(e),o=n.handle.fork(i.actor,r);o.updateDiffCursor();const{heads:a}=n,u=v0(n,["heads"]);return u.patchCallback=i.patchCallback,o.applyPatches(t,Object.assign(Object.assign({},u),{handle:o}))}function I0(t,e){return qn(Vi(e),"from",{},n=>Object.assign(n,t)).newDoc}function A0(t,e,n){if(typeof e=="function")return qn(t,"change",{},e).newDoc;if(typeof n=="function")return typeof e=="string"&&(e={message:e}),qn(t,"change",e,n).newDoc;throw RangeError("Invalid args for change")}function E0(t,e,n,r){if(typeof n=="function")return qn(t,"changeAt",{},n,e);if(typeof r=="function")return typeof n=="string"&&(n={message:n}),qn(t,"changeAt",n,r,e);throw RangeError("Invalid args for changeAt")}function tr(t,e,n,r){if(n==null)return t;const i=Oe(t),o=Object.assign(Object.assign({},i),{heads:void 0}),{value:a,patches:u}=i.handle.applyAndReturnPatches(t,o);if(u.length>0){r?.(u,{before:t,after:a,source:e});const f=Oe(a);f.mostRecentPatch={before:Oe(t).heads,after:f.handle.getHeads(),patches:u}}return i.heads=n,a}function qn(t,e,n,r,i){if(typeof r!="function")throw new RangeError("invalid change function");const o=Oe(t);if(t===void 0||o===void 0)throw new RangeError("must be the document root");if(o.heads)throw new RangeError("Attempting to change an outdated document.  Use Automerge.clone() if you wish to make a writable copy.");if(ts(t))throw new RangeError("Calls to Automerge.change cannot be nested");let a=o.handle.getHeads();i&&T0(i,a)&&(i=void 0),i&&(o.handle.isolate(i),a=i),"time"in n||(n.time=Math.floor(Date.now()/1e3));try{o.heads=a;const u=_0(o.handle,o.textV2);if(r(u),o.handle.pendingOps()===0)return o.heads=void 0,i&&o.handle.integrate(),{newDoc:t,newHeads:null};{const f=o.handle.commit(n.message,n.time);return o.handle.integrate(),{newDoc:tr(t,e,a,n.patchCallback||o.patchCallback),newHeads:f!=null?[f]:null}}}catch(u){throw o.heads=void 0,o.handle.rollback(),u}}function k0(t,e){e===void 0&&(e={}),typeof e=="string"&&(e={message:e}),"time"in e||(e.time=Math.floor(Date.now()/1e3));const n=Oe(t);if(n.heads)throw new RangeError("Attempting to change an outdated document.  Use Automerge.clone() if you wish to make a writable copy.");if(ts(t))throw new RangeError("Calls to Automerge.change cannot be nested");const r=n.handle.getHeads();return n.handle.emptyChange(e.message,e.time),tr(t,"emptyChange",r)}function C0(t,e){const n=Ni(e),r=n.actor,i=n.patchCallback,o=!n.enableTextV2,a=n.unchecked||!1,u=n.allowMissingChanges||!1,f=n.convertRawStringsToText||!1,d=Fe.load(t,{text_v1:o,actor:r,unchecked:a,allowMissingDeps:u,convertRawStringsToText:f});d.enableFreeze(!!n.freeze);const _=n.enableTextV2||!1;return Kc(d,_),d.materialize("/",void 0,{handle:d,heads:void 0,patchCallback:i,textV2:_})}function Wc(t,e,n){n||(n={});const r=Oe(t);if(r.heads)throw new RangeError("Attempting to change an out of date document - set at: "+zc(t));if(ts(t))throw new RangeError("Calls to Automerge.change cannot be nested");const i=r.handle.getHeads();return r.handle.loadIncremental(e),tr(t,"loadIncremental",i,n.patchCallback||r.patchCallback)}function qc(t){return Oe(t).handle.save()}function ka(t,e){const n=Oe(t);if(n.heads)throw new RangeError("Attempting to change an out of date document - set at: "+zc(t));const r=n.handle.getHeads(),i=Oe(e),o=n.handle.getChangesAdded(i.handle);return n.handle.applyChanges(o),tr(t,"merge",r,n.patchCallback)}function Zs(t,e,n){Ca(e,"before"),Ca(n,"after");const r=Oe(t);return r.mostRecentPatch&&Si(r.mostRecentPatch.before,e)&&Si(r.mostRecentPatch.after,n)?r.mostRecentPatch.patches:r.handle.diff(e,n)}function T0(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Ca(t,e){if(!Array.isArray(t))throw new Error(`${e} must be an array`)}function Si(t,e){if(!Ta(t)||!Ta(e))return t===e;const n=Object.keys(t).sort(),r=Object.keys(e).sort();if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i]!==r[i]||!Si(t[n[i]],e[r[i]]))return!1;return!0}function Gc(t){const e=Fe.importSyncState(t),n=Fe.encodeSyncState(e);return e.free(),n}function Jc(t){const e=Fe.decodeSyncState(t),n=Fe.exportSyncState(e);return e.free(),n}function O0(t,e){const n=Oe(t),r=Fe.importSyncState(e),i=n.handle.generateSyncMessage(r);return[Fe.exportSyncState(r),i]}function R0(t,e,n,r){const i=Fe.importSyncState(e);r||(r={});const o=Oe(t);if(o.heads)throw new RangeError("Attempting to change an outdated document.  Use Automerge.clone() if you wish to make a writable copy.");if(ts(t))throw new RangeError("Calls to Automerge.change cannot be nested");const a=o.handle.getHeads();o.handle.receiveSyncMessage(i,n);const u=Fe.exportSyncState(i);return[tr(t,"receiveSyncMessage",a,r.patchCallback||o.patchCallback),u,null]}function M0(){return Fe.exportSyncState(Fe.initSyncState())}function j0(t){return Fe.decodeSyncMessage(t)}function wt(t){const e=Oe(t);return e.heads||e.handle.getHeads()}function Ta(t){return typeof t=="object"&&t!==null}function D0(t,e){return Oe(t).handle.saveSince(e)}function Kc(t,e){t.registerDatatype("counter",n=>new vi(n),n=>{if(n instanceof vi)return n.value}),e?t.registerDatatype("str",n=>new Lc(n),n=>{if($c(n))return n.val}):t.registerDatatype("text",n=>new Kt(n),n=>{if(n instanceof Kt)return n.join("")})}function U0(t){return Oe(t).handle.topoHistoryTraversal()}function H0(t,e){return Oe(t).handle.getDecodedChangeByHash(e)}function zi(t){return Oe(t).handle.stats()}function vt(t){const e=ns(t);return e.enableTextV2=!0,Vi(e)}function $r(t,e){const n=ns(e);return n.enableTextV2=!0,x0(t,n)}function P0(t,e){const n=ns(e);return n.enableTextV2=!0,I0(t,n)}function L0(t,e){const n=ns(e);return n.enableTextV2=!0,n.patchCallback?Wc(Vi(n),t):C0(t,n)}function ns(t){return{actor:t}}function Wi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var br={exports:{}},Qs,Oa;function B0(){if(Oa)return Qs;Oa=1;var t=1e3,e=t*60,n=e*60,r=n*24,i=r*7,o=r*365.25;Qs=function(_,h){h=h||{};var g=typeof _;if(g==="string"&&_.length>0)return a(_);if(g==="number"&&isFinite(_))return h.long?f(_):u(_);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(_))};function a(_){if(_=String(_),!(_.length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(_);if(h){var g=parseFloat(h[1]),y=(h[2]||"ms").toLowerCase();switch(y){case"years":case"year":case"yrs":case"yr":case"y":return g*o;case"weeks":case"week":case"w":return g*i;case"days":case"day":case"d":return g*r;case"hours":case"hour":case"hrs":case"hr":case"h":return g*n;case"minutes":case"minute":case"mins":case"min":case"m":return g*e;case"seconds":case"second":case"secs":case"sec":case"s":return g*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return g;default:return}}}}function u(_){var h=Math.abs(_);return h>=r?Math.round(_/r)+"d":h>=n?Math.round(_/n)+"h":h>=e?Math.round(_/e)+"m":h>=t?Math.round(_/t)+"s":_+"ms"}function f(_){var h=Math.abs(_);return h>=r?d(_,h,r,"day"):h>=n?d(_,h,n,"hour"):h>=e?d(_,h,e,"minute"):h>=t?d(_,h,t,"second"):_+" ms"}function d(_,h,g,y){var m=h>=g*1.5;return Math.round(_/g)+" "+y+(m?"s":"")}return Qs}var ei,Ra;function $0(){if(Ra)return ei;Ra=1;function t(e){r.debug=r,r.default=r,r.coerce=d,r.disable=u,r.enable=o,r.enabled=f,r.humanize=B0(),r.destroy=_,Object.keys(e).forEach(h=>{r[h]=e[h]}),r.names=[],r.skips=[],r.formatters={};function n(h){let g=0;for(let y=0;y<h.length;y++)g=(g<<5)-g+h.charCodeAt(y),g|=0;return r.colors[Math.abs(g)%r.colors.length]}r.selectColor=n;function r(h){let g,y=null,m,v;function A(...N){if(!A.enabled)return;const H=A,C=Number(new Date),Z=C-(g||C);H.diff=Z,H.prev=g,H.curr=C,g=C,N[0]=r.coerce(N[0]),typeof N[0]!="string"&&N.unshift("%O");let q=0;N[0]=N[0].replace(/%([a-zA-Z%])/g,(te,X)=>{if(te==="%%")return"%";q++;const $=r.formatters[X];if(typeof $=="function"){const V=N[q];te=$.call(H,V),N.splice(q,1),q--}return te}),r.formatArgs.call(H,N),(H.log||r.log).apply(H,N)}return A.namespace=h,A.useColors=r.useColors(),A.color=r.selectColor(h),A.extend=i,A.destroy=r.destroy,Object.defineProperty(A,"enabled",{enumerable:!0,configurable:!1,get:()=>y!==null?y:(m!==r.namespaces&&(m=r.namespaces,v=r.enabled(h)),v),set:N=>{y=N}}),typeof r.init=="function"&&r.init(A),A}function i(h,g){const y=r(this.namespace+(typeof g>"u"?":":g)+h);return y.log=this.log,y}function o(h){r.save(h),r.namespaces=h,r.names=[],r.skips=[];const g=(typeof h=="string"?h:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const y of g)y[0]==="-"?r.skips.push(y.slice(1)):r.names.push(y)}function a(h,g){let y=0,m=0,v=-1,A=0;for(;y<h.length;)if(m<g.length&&(g[m]===h[y]||g[m]==="*"))g[m]==="*"?(v=m,A=y,m++):(y++,m++);else if(v!==-1)m=v+1,A++,y=A;else return!1;for(;m<g.length&&g[m]==="*";)m++;return m===g.length}function u(){const h=[...r.names,...r.skips.map(g=>"-"+g)].join(",");return r.enable(""),h}function f(h){for(const g of r.skips)if(a(h,g))return!1;for(const g of r.names)if(a(h,g))return!0;return!1}function d(h){return h instanceof Error?h.stack||h.message:h}function _(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return ei=t,ei}var Ma;function F0(){return Ma||(Ma=1,function(t,e){var n={};e.formatArgs=i,e.save=o,e.load=a,e.useColors=r,e.storage=u(),e.destroy=(()=>{let d=!1;return()=>{d||(d=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let d;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(d=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(d[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(d){if(d[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+d[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const _="color: "+this.color;d.splice(1,0,_,"color: inherit");let h=0,g=0;d[0].replace(/%[a-zA-Z%]/g,y=>{y!=="%%"&&(h++,y==="%c"&&(g=h))}),d.splice(g,0,_)}e.log=console.debug||console.log||(()=>{});function o(d){try{d?e.storage.setItem("debug",d):e.storage.removeItem("debug")}catch{}}function a(){let d;try{d=e.storage.getItem("debug")||e.storage.getItem("DEBUG")}catch{}return!d&&typeof process<"u"&&"env"in process&&(d=n.DEBUG),d}function u(){try{return localStorage}catch{}}t.exports=$0()(e);const{formatters:f}=t.exports;f.j=function(d){try{return JSON.stringify(d)}catch(_){return"[UnexpectedJSONParseError]: "+_.message}}}(br,br.exports)),br.exports}var N0=F0();const gt=Wi(N0);var ti={exports:{}},ja;function V0(){return ja||(ja=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(f,d,_){this.fn=f,this.context=d,this.once=_||!1}function o(f,d,_,h,g){if(typeof _!="function")throw new TypeError("The listener must be a function");var y=new i(_,h||f,g),m=n?n+d:d;return f._events[m]?f._events[m].fn?f._events[m]=[f._events[m],y]:f._events[m].push(y):(f._events[m]=y,f._eventsCount++),f}function a(f,d){--f._eventsCount===0?f._events=new r:delete f._events[d]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var d=[],_,h;if(this._eventsCount===0)return d;for(h in _=this._events)e.call(_,h)&&d.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(_)):d},u.prototype.listeners=function(d){var _=n?n+d:d,h=this._events[_];if(!h)return[];if(h.fn)return[h.fn];for(var g=0,y=h.length,m=new Array(y);g<y;g++)m[g]=h[g].fn;return m},u.prototype.listenerCount=function(d){var _=n?n+d:d,h=this._events[_];return h?h.fn?1:h.length:0},u.prototype.emit=function(d,_,h,g,y,m){var v=n?n+d:d;if(!this._events[v])return!1;var A=this._events[v],N=arguments.length,H,C;if(A.fn){switch(A.once&&this.removeListener(d,A.fn,void 0,!0),N){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,_),!0;case 3:return A.fn.call(A.context,_,h),!0;case 4:return A.fn.call(A.context,_,h,g),!0;case 5:return A.fn.call(A.context,_,h,g,y),!0;case 6:return A.fn.call(A.context,_,h,g,y,m),!0}for(C=1,H=new Array(N-1);C<N;C++)H[C-1]=arguments[C];A.fn.apply(A.context,H)}else{var Z=A.length,q;for(C=0;C<Z;C++)switch(A[C].once&&this.removeListener(d,A[C].fn,void 0,!0),N){case 1:A[C].fn.call(A[C].context);break;case 2:A[C].fn.call(A[C].context,_);break;case 3:A[C].fn.call(A[C].context,_,h);break;case 4:A[C].fn.call(A[C].context,_,h,g);break;default:if(!H)for(q=1,H=new Array(N-1);q<N;q++)H[q-1]=arguments[q];A[C].fn.apply(A[C].context,H)}}return!0},u.prototype.on=function(d,_,h){return o(this,d,_,h,!1)},u.prototype.once=function(d,_,h){return o(this,d,_,h,!0)},u.prototype.removeListener=function(d,_,h,g){var y=n?n+d:d;if(!this._events[y])return this;if(!_)return a(this,y),this;var m=this._events[y];if(m.fn)m.fn===_&&(!g||m.once)&&(!h||m.context===h)&&a(this,y);else{for(var v=0,A=[],N=m.length;v<N;v++)(m[v].fn!==_||g&&!m[v].once||h&&m[v].context!==h)&&A.push(m[v]);A.length?this._events[y]=A.length===1?A[0]:A:a(this,y)}return this},u.prototype.removeAllListeners=function(d){var _;return d?(_=n?n+d:d,this._events[_]&&a(this,_)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,t.exports=u}(ti)),ti.exports}var z0=V0();const tn=Wi(z0);function W0(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function q0(){const t=W0();if(t.__xstate__)return t.__xstate__}const G0=t=>{if(typeof window>"u")return;const e=q0();e&&e.register(t)};class Da{constructor(e){this._process=e,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(e){const n={value:e,next:null};if(this._current){this._last.next=n,this._last=n;return}this._current=n,this._last=n,this._active&&this.flush()}flush(){for(;this._current;){const e=this._current;this._process(e.value),this._current=e.next}this._last=null}}const Yc=".",J0="",Xc="",K0="#",Y0="*",Zc="xstate.init",xi="xstate.stop";function X0(t,e){return{type:`xstate.after.${t}.${e}`}}function Ii(t,e){return{type:`xstate.done.state.${t}`,output:e}}function Z0(t,e){return{type:`xstate.done.actor.${t}`,output:e,actorId:t}}function Q0(t,e){return{type:`xstate.error.actor.${t}`,error:e,actorId:t}}function Qc(t){return{type:Zc,input:t}}function ot(t){setTimeout(()=>{throw t})}const eg=typeof Symbol=="function"&&Symbol.observable||"@@observable";function eu(t,e){const n=Ua(t),r=Ua(e);return typeof r=="string"?typeof n=="string"?r===n:!1:typeof n=="string"?n in r:Object.keys(n).every(i=>i in r?eu(n[i],r[i]):!1)}function qi(t){if(nu(t))return t;const e=[];let n="";for(let r=0;r<t.length;r++){switch(t.charCodeAt(r)){case 92:n+=t[r+1],r++;continue;case 46:e.push(n),n="";continue}n+=t[r]}return e.push(n),e}function Ua(t){if(Dg(t))return t.value;if(typeof t!="string")return t;const e=qi(t);return tg(e)}function tg(t){if(t.length===1)return t[0];const e={};let n=e;for(let r=0;r<t.length-1;r++)if(r===t.length-2)n[t[r]]=t[r+1];else{const i=n;n={},i[t[r]]=n}return e}function Ha(t,e){const n={},r=Object.keys(t);for(let i=0;i<r.length;i++){const o=r[i];n[o]=e(t[o],o,t,i)}return n}function tu(t){return nu(t)?t:[t]}function xt(t){return t===void 0?[]:tu(t)}function Ai(t,e,n,r){return typeof t=="function"?t({context:e,event:n,self:r}):t}function nu(t){return Array.isArray(t)}function ng(t){return t.type.startsWith("xstate.error.actor")}function Sn(t){return tu(t).map(e=>typeof e>"u"||typeof e=="string"?{target:e}:e)}function ru(t){if(!(t===void 0||t===J0))return xt(t)}function Ei(t,e,n){const r=typeof t=="object",i=r?t:void 0;return{next:(r?t.next:t)?.bind(i),error:(r?t.error:e)?.bind(i),complete:(r?t.complete:n)?.bind(i)}}function Pa(t,e){return`${e}.${t}`}function Gi(t,e){const n=e.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!n)return t.implementations.actors[e];const[,r,i]=n,a=t.getStateNodeById(i).config.invoke;return(Array.isArray(a)?a[r]:a).src}function La(t,e){return`${t.sessionId}.${e}`}let rg=0;function sg(t,e){const n=new Map,r=new Map,i=new WeakMap,o=new Set,a={},{clock:u,logger:f}=e,d={schedule:(g,y,m,v,A=Math.random().toString(36).slice(2))=>{const N={source:g,target:y,event:m,delay:v,id:A,startedAt:Date.now()},H=La(g,A);h._snapshot._scheduledEvents[H]=N;const C=u.setTimeout(()=>{delete a[H],delete h._snapshot._scheduledEvents[H],h._relay(g,y,m)},v);a[H]=C},cancel:(g,y)=>{const m=La(g,y),v=a[m];delete a[m],delete h._snapshot._scheduledEvents[m],v!==void 0&&u.clearTimeout(v)},cancelAll:g=>{for(const y in h._snapshot._scheduledEvents){const m=h._snapshot._scheduledEvents[y];m.source===g&&d.cancel(g,m.id)}}},_=g=>{if(!o.size)return;const y={...g,rootId:t.sessionId};o.forEach(m=>m.next?.(y))},h={_snapshot:{_scheduledEvents:(e?.snapshot&&e.snapshot.scheduler)??{}},_bookId:()=>`x:${rg++}`,_register:(g,y)=>(n.set(g,y),g),_unregister:g=>{n.delete(g.sessionId);const y=i.get(g);y!==void 0&&(r.delete(y),i.delete(g))},get:g=>r.get(g),_set:(g,y)=>{const m=r.get(g);if(m&&m!==y)throw new Error(`Actor with system ID '${g}' already exists.`);r.set(g,y),i.set(y,g)},inspect:g=>{const y=Ei(g);return o.add(y),{unsubscribe(){o.delete(y)}}},_sendInspectionEvent:_,_relay:(g,y,m)=>{h._sendInspectionEvent({type:"@xstate.event",sourceRef:g,actorRef:y,event:m}),y._send(m)},scheduler:d,getSnapshot:()=>({_scheduledEvents:{...h._snapshot._scheduledEvents}}),start:()=>{const g=h._snapshot._scheduledEvents;h._snapshot._scheduledEvents={};for(const y in g){const{source:m,target:v,event:A,delay:N,id:H}=g[y];d.schedule(m,v,A,N,H)}},_clock:u,_logger:f};return h}let ni=!1;const Ji=1;let Be=function(t){return t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped",t}({});const ig={clock:{setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t)},logger:console.log.bind(console),devTools:!1};class og{constructor(e,n){this.logic=e,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new Da(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=Be.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const r={...ig,...n},{clock:i,logger:o,parent:a,syncSnapshot:u,id:f,systemId:d,inspect:_}=r;this.system=a?a.system:sg(this,{clock:i,logger:o}),_&&!a&&this.system.inspect(Ei(_)),this.sessionId=this.system._bookId(),this.id=f??this.sessionId,this.logger=n?.logger??this.system._logger,this.clock=n?.clock??this.system._clock,this._parent=a,this._syncSnapshot=u,this.options=r,this.src=r.src??e,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:h=>{this._deferred.push(h)},system:this.system,stopChild:h=>{if(h._parent!==this)throw new Error(`Cannot stop child actor ${h.id} of ${this.id} because it is not a child`);h._stop()},emit:h=>{const g=this.eventListeners.get(h.type),y=this.eventListeners.get("*");if(!g&&!y)return;const m=[...g?g.values():[],...y?y.values():[]];for(const v of m)try{v(h)}catch(A){ot(A)}},actionExecutor:h=>{const g=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:h.type,params:h.params}}),!h.exec)return;const y=ni;try{ni=!0,h.exec(h.info,h.params)}finally{ni=y}};this._processingStatus===Be.Running?g():this._deferred.push(g)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),d&&(this._systemId=d,this.system._set(d,this)),this._initState(n?.snapshot??n?.state),d&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(e){try{this._snapshot=e?this.logic.restoreSnapshot?this.logic.restoreSnapshot(e,this._actorScope):e:this.logic.getInitialSnapshot(this._actorScope,this.options?.input)}catch(n){this._snapshot={status:"error",output:void 0,error:n}}}update(e,n){this._snapshot=e;let r;for(;r=this._deferred.shift();)try{r()}catch(i){this._deferred.length=0,this._snapshot={...e,status:"error",error:i}}switch(this._snapshot.status){case"active":for(const i of this.observers)try{i.next?.(e)}catch(o){ot(o)}break;case"done":for(const i of this.observers)try{i.next?.(e)}catch(o){ot(o)}this._stopProcedure(),this._complete(),this._doneEvent=Z0(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:n,snapshot:e})}subscribe(e,n,r){const i=Ei(e,n,r);if(this._processingStatus!==Be.Stopped)this.observers.add(i);else switch(this._snapshot.status){case"done":try{i.complete?.()}catch(o){ot(o)}break;case"error":{const o=this._snapshot.error;if(!i.error)ot(o);else try{i.error(o)}catch(a){ot(a)}break}}return{unsubscribe:()=>{this.observers.delete(i)}}}on(e,n){let r=this.eventListeners.get(e);r||(r=new Set,this.eventListeners.set(e,r));const i=n.bind(void 0);return r.add(i),{unsubscribe:()=>{r.delete(i)}}}start(){if(this._processingStatus===Be.Running)return this;this._syncSnapshot&&this.subscribe({next:r=>{r.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:r})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=Be.Running;const e=Qc(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:e}),this._snapshot.status){case"done":return this.update(this._snapshot,e),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(r){return this._snapshot={...this._snapshot,status:"error",error:r},this._error(r),this}return this.update(this._snapshot,e),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(e){let n,r;try{n=this.logic.transition(this._snapshot,e,this._actorScope)}catch(i){r={err:i}}if(r){const{err:i}=r;this._snapshot={...this._snapshot,status:"error",error:i},this._error(i);return}this.update(n,e),e.type===xi&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===Be.Stopped?this:(this.mailbox.clear(),this._processingStatus===Be.NotStarted?(this._processingStatus=Be.Stopped,this):(this.mailbox.enqueue({type:xi}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){for(const e of this.observers)try{e.complete?.()}catch(n){ot(n)}this.observers.clear()}_reportError(e){if(!this.observers.size){this._parent||ot(e);return}let n=!1;for(const r of this.observers){const i=r.error;n||=!i;try{i?.(e)}catch(o){ot(o)}}this.observers.clear(),n&&ot(e)}_error(e){this._stopProcedure(),this._reportError(e),this._parent&&this.system._relay(this,this._parent,Q0(this.id,e))}_stopProcedure(){return this._processingStatus!==Be.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new Da(this._process.bind(this)),this._processingStatus=Be.Stopped,this.system._unregister(this),this)}_send(e){this._processingStatus!==Be.Stopped&&this.mailbox.enqueue(e)}send(e){this.system._relay(void 0,this,e)}attachDevTools(){const{devTools:e}=this.options;e&&(typeof e=="function"?e:G0)(this)}toJSON(){return{xstate$$type:Ji,id:this.id}}getPersistedSnapshot(e){return this.logic.getPersistedSnapshot(this._snapshot,e)}[eg](){return this}getSnapshot(){return this._snapshot}}function Gn(t,...[e]){return new og(t,e)}function ag(t,e,n,r,{sendId:i}){const o=typeof i=="function"?i(n,r):i;return[e,{sendId:o},void 0]}function cg(t,e){t.defer(()=>{t.system.scheduler.cancel(t.self,e.sendId)})}function ug(t){function e(n,r){}return e.type="xstate.cancel",e.sendId=t,e.resolve=ag,e.execute=cg,e}function fg(t,e,n,r,{id:i,systemId:o,src:a,input:u,syncSnapshot:f}){const d=typeof a=="string"?Gi(e.machine,a):a,_=typeof i=="function"?i(n):i;let h,g;return d&&(g=typeof u=="function"?u({context:e.context,event:n.event,self:t.self}):u,h=Gn(d,{id:_,src:a,parent:t.self,syncSnapshot:f,systemId:o,input:g})),[Zt(e,{children:{...e.children,[_]:h}}),{id:i,systemId:o,actorRef:h,src:a,input:g},void 0]}function lg(t,{actorRef:e}){e&&t.defer(()=>{e._processingStatus!==Be.Stopped&&e.start()})}function dg(...[t,{id:e,systemId:n,input:r,syncSnapshot:i=!1}={}]){function o(a,u){}return o.type="xstate.spawnChild",o.id=e,o.systemId=n,o.src=t,o.input=r,o.syncSnapshot=i,o.resolve=fg,o.execute=lg,o}function hg(t,e,n,r,{actorRef:i}){const o=typeof i=="function"?i(n,r):i,a=typeof o=="string"?e.children[o]:o;let u=e.children;return a&&(u={...u},delete u[a.id]),[Zt(e,{children:u}),a,void 0]}function gg(t,e){if(e){if(t.system._unregister(e),e._processingStatus!==Be.Running){t.stopChild(e);return}t.defer(()=>{t.stopChild(e)})}}function su(t){function e(n,r){}return e.type="xstate.stopChild",e.actorRef=t,e.resolve=hg,e.execute=gg,e}function Ki(t,e,n,r){const{machine:i}=r,o=typeof t=="function",a=o?t:i.implementations.guards[typeof t=="string"?t:t.type];if(!o&&!a)throw new Error(`Guard '${typeof t=="string"?t:t.type}' is not implemented.'.`);if(typeof a!="function")return Ki(a,e,n,r);const u={context:e,event:n},f=o||typeof t=="string"?void 0:"params"in t?typeof t.params=="function"?t.params({context:e,event:n}):t.params:void 0;return"check"in a?a.check(r,u,a):a(u,f)}const Yi=t=>t.type==="atomic"||t.type==="final";function Cn(t){return Object.values(t.states).filter(e=>e.type!=="history")}function nr(t,e){const n=[];if(e===t)return n;let r=t.parent;for(;r&&r!==e;)n.push(r),r=r.parent;return n}function Fr(t){const e=new Set(t),n=ou(e);for(const r of e)if(r.type==="compound"&&(!n.get(r)||!n.get(r).length))Ba(r).forEach(i=>e.add(i));else if(r.type==="parallel"){for(const i of Cn(r))if(i.type!=="history"&&!e.has(i)){const o=Ba(i);for(const a of o)e.add(a)}}for(const r of e){let i=r.parent;for(;i;)e.add(i),i=i.parent}return e}function iu(t,e){const n=e.get(t);if(!n)return{};if(t.type==="compound"){const i=n[0];if(i){if(Yi(i))return i.key}else return{}}const r={};for(const i of n)r[i.key]=iu(i,e);return r}function ou(t){const e=new Map;for(const n of t)e.has(n)||e.set(n,[]),n.parent&&(e.has(n.parent)||e.set(n.parent,[]),e.get(n.parent).push(n));return e}function au(t,e){const n=Fr(e);return iu(t,ou(n))}function Xi(t,e){return e.type==="compound"?Cn(e).some(n=>n.type==="final"&&t.has(n)):e.type==="parallel"?Cn(e).every(n=>Xi(t,n)):e.type==="final"}const rs=t=>t[0]===K0;function _g(t,e){return t.transitions.get(e)||[...t.transitions.keys()].filter(r=>{if(r===Y0)return!0;if(!r.endsWith(".*"))return!1;const i=r.split("."),o=e.split(".");for(let a=0;a<i.length;a++){const u=i[a],f=o[a];if(u==="*")return a===i.length-1;if(u!==f)return!1}return!0}).sort((r,i)=>i.length-r.length).flatMap(r=>t.transitions.get(r))}function pg(t){const e=t.config.after;if(!e)return[];const n=i=>{const o=X0(i,t.id),a=o.type;return t.entry.push(zg(o,{id:a,delay:i})),t.exit.push(ug(a)),a};return Object.keys(e).flatMap(i=>{const o=e[i],a=typeof o=="string"?{target:o}:o,u=Number.isNaN(+i)?i:+i,f=n(u);return xt(a).map(d=>({...d,event:f,delay:u}))}).map(i=>{const{delay:o}=i;return{...Wt(t,i.event,i),delay:o}})}function Wt(t,e,n){const r=ru(n.target),i=n.reenter??!1,o=bg(t,r),a={...n,actions:xt(n.actions),guard:n.guard,target:o,source:t,reenter:i,eventType:e,toJSON:()=>({...a,source:`#${t.id}`,target:o?o.map(u=>`#${u.id}`):void 0})};return a}function yg(t){const e=new Map;if(t.config.on)for(const n of Object.keys(t.config.on)){if(n===Xc)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const r=t.config.on[n];e.set(n,Sn(r).map(i=>Wt(t,n,i)))}if(t.config.onDone){const n=`xstate.done.state.${t.id}`;e.set(n,Sn(t.config.onDone).map(r=>Wt(t,n,r)))}for(const n of t.invoke){if(n.onDone){const r=`xstate.done.actor.${n.id}`;e.set(r,Sn(n.onDone).map(i=>Wt(t,r,i)))}if(n.onError){const r=`xstate.error.actor.${n.id}`;e.set(r,Sn(n.onError).map(i=>Wt(t,r,i)))}if(n.onSnapshot){const r=`xstate.snapshot.${n.id}`;e.set(r,Sn(n.onSnapshot).map(i=>Wt(t,r,i)))}}for(const n of t.after){let r=e.get(n.eventType);r||(r=[],e.set(n.eventType,r)),r.push(n)}return e}function mg(t,e){const n=typeof e=="string"?t.states[e]:e?t.states[e.target]:void 0;if(!n&&e)throw new Error(`Initial state node "${e}" not found on parent state node #${t.id}`);const r={source:t,actions:!e||typeof e=="string"?[]:xt(e.actions),eventType:null,reenter:!1,target:n?[n]:[],toJSON:()=>({...r,source:`#${t.id}`,target:n?[`#${n.id}`]:[]})};return r}function bg(t,e){if(e!==void 0)return e.map(n=>{if(typeof n!="string")return n;if(rs(n))return t.machine.getStateNodeById(n);const r=n[0]===Yc;if(r&&!t.parent)return Nr(t,n.slice(1));const i=r?t.key+n:n;if(t.parent)try{return Nr(t.parent,i)}catch(o){throw new Error(`Invalid transition definition for state node '${t.id}':
${o.message}`)}else throw new Error(`Invalid target: "${n}" is not a valid target from the root node. Did you mean ".${n}"?`)})}function cu(t){const e=ru(t.config.target);return e?{target:e.map(n=>typeof n=="string"?Nr(t.parent,n):n)}:t.parent.initial}function Gt(t){return t.type==="history"}function Ba(t){const e=uu(t);for(const n of e)for(const r of nr(n,t))e.add(r);return e}function uu(t){const e=new Set;function n(r){if(!e.has(r)){if(e.add(r),r.type==="compound")n(r.initial.target[0]);else if(r.type==="parallel")for(const i of Cn(r))n(i)}}return n(t),e}function Tn(t,e){if(rs(e))return t.machine.getStateNodeById(e);if(!t.states)throw new Error(`Unable to retrieve child state '${e}' from '${t.id}'; no child states exist.`);const n=t.states[e];if(!n)throw new Error(`Child state '${e}' does not exist on '${t.id}'`);return n}function Nr(t,e){if(typeof e=="string"&&rs(e))try{return t.machine.getStateNodeById(e)}catch{}const n=qi(e).slice();let r=t;for(;n.length;){const i=n.shift();if(!i.length)break;r=Tn(r,i)}return r}function Vr(t,e){if(typeof e=="string"){const i=t.states[e];if(!i)throw new Error(`State '${e}' does not exist on '${t.id}'`);return[t,i]}const n=Object.keys(e),r=n.map(i=>Tn(t,i)).filter(Boolean);return[t.machine.root,t].concat(r,n.reduce((i,o)=>{const a=Tn(t,o);if(!a)return i;const u=Vr(a,e[o]);return i.concat(u)},[]))}function wg(t,e,n,r){const o=Tn(t,e).next(n,r);return!o||!o.length?t.next(n,r):o}function vg(t,e,n,r){const i=Object.keys(e),o=Tn(t,i[0]),a=Zi(o,e[i[0]],n,r);return!a||!a.length?t.next(n,r):a}function Sg(t,e,n,r){const i=[];for(const o of Object.keys(e)){const a=e[o];if(!a)continue;const u=Tn(t,o),f=Zi(u,a,n,r);f&&i.push(...f)}return i.length?i:t.next(n,r)}function Zi(t,e,n,r){return typeof e=="string"?wg(t,e,n,r):Object.keys(e).length===1?vg(t,e,n,r):Sg(t,e,n,r)}function xg(t){return Object.keys(t.states).map(e=>t.states[e]).filter(e=>e.type==="history")}function Dt(t,e){let n=t;for(;n.parent&&n.parent!==e;)n=n.parent;return n.parent===e}function Ig(t,e){const n=new Set(t),r=new Set(e);for(const i of n)if(r.has(i))return!0;for(const i of r)if(n.has(i))return!0;return!1}function fu(t,e,n){const r=new Set;for(const i of t){let o=!1;const a=new Set;for(const u of r)if(Ig(ki([i],e,n),ki([u],e,n)))if(Dt(i.source,u.source))a.add(u);else{o=!0;break}if(!o){for(const u of a)r.delete(u);r.add(i)}}return Array.from(r)}function Ag(t){const[e,...n]=t;for(const r of nr(e,void 0))if(n.every(i=>Dt(i,r)))return r}function Qi(t,e){if(!t.target)return[];const n=new Set;for(const r of t.target)if(Gt(r))if(e[r.id])for(const i of e[r.id])n.add(i);else for(const i of Qi(cu(r),e))n.add(i);else n.add(r);return[...n]}function lu(t,e){const n=Qi(t,e);if(!n)return;if(!t.reenter&&n.every(i=>i===t.source||Dt(i,t.source)))return t.source;const r=Ag(n.concat(t.source));if(r)return r;if(!t.reenter)return t.source.machine.root}function ki(t,e,n){const r=new Set;for(const i of t)if(i.target?.length){const o=lu(i,n);i.reenter&&i.source===o&&r.add(o);for(const a of e)Dt(a,o)&&r.add(a)}return[...r]}function Eg(t,e){if(t.length!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function Ci(t,e,n,r,i,o){if(!t.length)return e;const a=new Set(e._nodes);let u=e.historyValue;const f=fu(t,a,u);let d=e;i||([d,u]=Og(d,r,n,f,a,u,o,n.actionExecutor)),d=On(d,r,n,f.flatMap(h=>h.actions),o,void 0),d=Cg(d,r,n,f,a,o,u,i);const _=[...a];d.status==="done"&&(d=On(d,r,n,_.sort((h,g)=>g.order-h.order).flatMap(h=>h.exit),o,void 0));try{return u===e.historyValue&&Eg(e._nodes,a)?d:Zt(d,{_nodes:_,historyValue:u})}catch(h){throw h}}function kg(t,e,n,r,i){if(r.output===void 0)return;const o=Ii(i.id,i.output!==void 0&&i.parent?Ai(i.output,t.context,e,n.self):void 0);return Ai(r.output,t.context,o,n.self)}function Cg(t,e,n,r,i,o,a,u){let f=t;const d=new Set,_=new Set;Tg(r,a,_,d),u&&_.add(t.machine.root);const h=new Set;for(const g of[...d].sort((y,m)=>y.order-m.order)){i.add(g);const y=[];y.push(...g.entry);for(const m of g.invoke)y.push(dg(m.src,{...m,syncSnapshot:!!m.onSnapshot}));if(_.has(g)){const m=g.initial.actions;y.push(...m)}if(f=On(f,e,n,y,o,g.invoke.map(m=>m.id)),g.type==="final"){const m=g.parent;let v=m?.type==="parallel"?m:m?.parent,A=v||g;for(m?.type==="compound"&&o.push(Ii(m.id,g.output!==void 0?Ai(g.output,f.context,e,n.self):void 0));v?.type==="parallel"&&!h.has(v)&&Xi(i,v);)h.add(v),o.push(Ii(v.id)),A=v,v=v.parent;if(v)continue;f=Zt(f,{status:"done",output:kg(f,e,n,f.machine.root,A)})}}return f}function Tg(t,e,n,r){for(const i of t){const o=lu(i,e);for(const u of i.target||[])!Gt(u)&&(i.source!==u||i.source!==o||i.reenter)&&(r.add(u),n.add(u)),In(u,e,n,r);const a=Qi(i,e);for(const u of a){const f=nr(u,o);o?.type==="parallel"&&f.push(o),du(r,e,n,f,!i.source.parent&&i.reenter?void 0:o)}}}function In(t,e,n,r){if(Gt(t))if(e[t.id]){const i=e[t.id];for(const o of i)r.add(o),In(o,e,n,r);for(const o of i)ri(o,t.parent,r,e,n)}else{const i=cu(t);for(const o of i.target)r.add(o),i===t.parent?.initial&&n.add(t.parent),In(o,e,n,r);for(const o of i.target)ri(o,t.parent,r,e,n)}else if(t.type==="compound"){const[i]=t.initial.target;Gt(i)||(r.add(i),n.add(i)),In(i,e,n,r),ri(i,t,r,e,n)}else if(t.type==="parallel")for(const i of Cn(t).filter(o=>!Gt(o)))[...r].some(o=>Dt(o,i))||(Gt(i)||(r.add(i),n.add(i)),In(i,e,n,r))}function du(t,e,n,r,i){for(const o of r)if((!i||Dt(o,i))&&t.add(o),o.type==="parallel")for(const a of Cn(o).filter(u=>!Gt(u)))[...t].some(u=>Dt(u,a))||(t.add(a),In(a,e,n,t))}function ri(t,e,n,r,i){du(n,r,i,nr(t,e))}function Og(t,e,n,r,i,o,a,u){let f=t;const d=ki(r,i,o);d.sort((h,g)=>g.order-h.order);let _;for(const h of d)for(const g of xg(h)){let y;g.history==="deep"?y=m=>Yi(m)&&Dt(m,h):y=m=>m.parent===h,_??={...o},_[g.id]=Array.from(i).filter(y)}for(const h of d)f=On(f,e,n,[...h.exit,...h.invoke.map(g=>su(g.id))],a,void 0),i.delete(h);return[f,_||o]}function Rg(t,e){return t.implementations.actions[e]}function hu(t,e,n,r,i,o){const{machine:a}=t;let u=t;for(const f of r){const d=typeof f=="function",_=d?f:Rg(a,typeof f=="string"?f:f.type),h={context:u.context,event:e,self:n.self,system:n.system},g=d||typeof f=="string"?void 0:"params"in f?typeof f.params=="function"?f.params({context:u.context,event:e}):f.params:void 0;if(!_||!("resolve"in _)){n.actionExecutor({type:typeof f=="string"?f:typeof f=="object"?f.type:f.name||"(anonymous)",info:h,params:g,exec:_});continue}const y=_,[m,v,A]=y.resolve(n,u,h,g,_,i);u=m,"retryResolve"in y&&o?.push([y,v]),"execute"in y&&n.actionExecutor({type:y.type,info:h,params:v,exec:y.execute.bind(null,n,v)}),A&&(u=hu(u,e,n,A,i,o))}return u}function On(t,e,n,r,i,o){const a=o?[]:void 0,u=hu(t,e,n,r,{internalQueue:i,deferredActorIds:o},a);return a?.forEach(([f,d])=>{f.retryResolve(n,u,d)}),u}function si(t,e,n,r){let i=t;const o=[];function a(d,_,h){n.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:n.self,event:_,snapshot:d,_transitions:h}),o.push(d)}if(e.type===xi)return i=Zt($a(i,e,n),{status:"stopped"}),a(i,e,[]),{snapshot:i,microstates:o};let u=e;if(u.type!==Zc){const d=u,_=ng(d),h=Fa(d,i);if(_&&!h.length)return i=Zt(t,{status:"error",error:d.error}),a(i,d,[]),{snapshot:i,microstates:o};i=Ci(h,t,n,u,!1,r),a(i,d,h)}let f=!0;for(;i.status==="active";){let d=f?Mg(i,u):[];const _=d.length?i:void 0;if(!d.length){if(!r.length)break;u=r.shift(),d=Fa(u,i)}i=Ci(d,i,n,u,!1,r),f=i!==_,a(i,u,d)}return i.status!=="active"&&$a(i,u,n),{snapshot:i,microstates:o}}function $a(t,e,n){return On(t,e,n,Object.values(t.children).map(r=>su(r)),[],void 0)}function Fa(t,e){return e.machine.getTransitionData(e,t)}function Mg(t,e){const n=new Set,r=t._nodes.filter(Yi);for(const i of r)e:for(const o of[i].concat(nr(i,void 0)))if(o.always){for(const a of o.always)if(a.guard===void 0||Ki(a.guard,t.context,e,t)){n.add(a);break e}}return fu(Array.from(n),new Set(t._nodes),t.historyValue)}function jg(t,e){const n=Fr(Vr(t,e));return au(t,[...n])}function Dg(t){return!!t&&typeof t=="object"&&"machine"in t&&"value"in t}const Ug=function(e){return eu(e,this.value)},Hg=function(e){return this.tags.has(e)},Pg=function(e){const n=this.machine.getTransitionData(this,e);return!!n?.length&&n.some(r=>r.target!==void 0||r.actions.length)},Lg=function(){const{_nodes:e,tags:n,machine:r,getMeta:i,toJSON:o,can:a,hasTag:u,matches:f,...d}=this;return{...d,tags:Array.from(n)}},Bg=function(){return this._nodes.reduce((e,n)=>(n.meta!==void 0&&(e[n.id]=n.meta),e),{})};function Tr(t,e){return{status:t.status,output:t.output,error:t.error,machine:e,context:t.context,_nodes:t._nodes,value:au(e.root,t._nodes),tags:new Set(t._nodes.flatMap(n=>n.tags)),children:t.children,historyValue:t.historyValue||{},matches:Ug,hasTag:Hg,can:Pg,getMeta:Bg,toJSON:Lg}}function Zt(t,e={}){return Tr({...t,...e},t.machine)}function $g(t){if(typeof t!="object"||t===null)return{};const e={};for(const n in t){const r=t[n];Array.isArray(r)&&(e[n]=r.map(i=>({id:i.id})))}return e}function Fg(t,e){const{_nodes:n,tags:r,machine:i,children:o,context:a,can:u,hasTag:f,matches:d,getMeta:_,toJSON:h,...g}=t,y={};for(const v in o){const A=o[v];y[v]={snapshot:A.getPersistedSnapshot(e),src:A.src,systemId:A._systemId,syncSnapshot:A._syncSnapshot}}return{...g,context:gu(a),children:y,historyValue:$g(g.historyValue)}}function gu(t){let e;for(const n in t){const r=t[n];if(r&&typeof r=="object")if("sessionId"in r&&"send"in r&&"ref"in r)e??=Array.isArray(t)?t.slice():{...t},e[n]={xstate$$type:Ji,id:r.id};else{const i=gu(r);i!==r&&(e??=Array.isArray(t)?t.slice():{...t},e[n]=i)}}return e??t}function Ng(t,e,n,r,{event:i,id:o,delay:a},{internalQueue:u}){const f=e.machine.implementations.delays;if(typeof i=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${i}" }) instead`);const d=typeof i=="function"?i(n,r):i;let _;if(typeof a=="string"){const h=f&&f[a];_=typeof h=="function"?h(n,r):h}else _=typeof a=="function"?a(n,r):a;return typeof _!="number"&&u.push(d),[e,{event:d,id:o,delay:_},void 0]}function Vg(t,e){const{event:n,delay:r,id:i}=e;if(typeof r=="number"){t.defer(()=>{const o=t.self;t.system.scheduler.schedule(o,o,n,r,i)});return}}function zg(t,e){function n(r,i){}return n.type="xstate.raise",n.event=t,n.id=e?.id,n.delay=e?.delay,n.resolve=Ng,n.execute=Vg,n}function Wg(t,{machine:e,context:n},r,i){const o=(a,u)=>{if(typeof a=="string"){const f=Gi(e,a);if(!f)throw new Error(`Actor logic '${a}' not implemented in machine '${e.id}'`);const d=Gn(f,{id:u?.id,parent:t.self,syncSnapshot:u?.syncSnapshot,input:typeof u?.input=="function"?u.input({context:n,event:r,self:t.self}):u?.input,src:a,systemId:u?.systemId});return i[d.id]=d,d}else return Gn(a,{id:u?.id,parent:t.self,syncSnapshot:u?.syncSnapshot,input:u?.input,src:a,systemId:u?.systemId})};return(a,u)=>{const f=o(a,u);return i[f.id]=f,t.defer(()=>{f._processingStatus!==Be.Stopped&&f.start()}),f}}function qg(t,e,n,r,{assignment:i}){if(!e.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const o={},a={context:e.context,event:n.event,spawn:Wg(t,e,n.event,o),self:t.self,system:t.system};let u={};if(typeof i=="function")u=i(a,r);else for(const d of Object.keys(i)){const _=i[d];u[d]=typeof _=="function"?_(a,r):_}const f=Object.assign({},e.context,u);return[Zt(e,{context:f,children:Object.keys(o).length?{...e.children,...o}:e.children}),void 0,void 0]}function $n(t){function e(n,r){}return e.type="xstate.assign",e.assignment=t,e.resolve=qg,e}const Na=new WeakMap;function mn(t,e,n){let r=Na.get(t);return r?e in r||(r[e]=n()):(r={[e]:n()},Na.set(t,r)),r[e]}const Gg={},Pn=t=>typeof t=="string"?{type:t}:typeof t=="function"?"resolve"in t?{type:t.type}:{type:t.name}:t;class zr{constructor(e,n){if(this.config=e,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=n._parent,this.key=n._key,this.machine=n._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(Yc),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?Ha(this.config.states,(r,i)=>new zr(r,{_parent:this,_key:i,_machine:this.machine})):Gg,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=xt(this.config.entry).slice(),this.exit=xt(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=xt(e.tags).slice()}_initialize(){this.transitions=yg(this),this.config.always&&(this.always=Sn(this.config.always).map(e=>Wt(this,Xc,e))),Object.keys(this.states).forEach(e=>{this.states[e]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(Pn),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(e=>`#${e.id}`),source:`#${this.id}`,actions:this.initial.actions.map(Pn),eventType:null})}:void 0,history:this.history,states:Ha(this.states,e=>e.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(e=>({...e,actions:e.actions.map(Pn)})),entry:this.entry.map(Pn),exit:this.exit.map(Pn),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return mn(this,"invoke",()=>xt(this.config.invoke).map((e,n)=>{const{src:r,systemId:i}=e,o=e.id??Pa(this.id,n),a=typeof r=="string"?r:`xstate.invoke.${Pa(this.id,n)}`;return{...e,src:a,id:o,systemId:i,toJSON(){const{onDone:u,onError:f,...d}=e;return{...d,type:"xstate.invoke",src:a,id:o}}}}))}get on(){return mn(this,"on",()=>[...this.transitions].flatMap(([n,r])=>r.map(i=>[n,i])).reduce((n,[r,i])=>(n[r]=n[r]||[],n[r].push(i),n),{}))}get after(){return mn(this,"delayedTransitions",()=>pg(this))}get initial(){return mn(this,"initial",()=>mg(this,this.config.initial))}next(e,n){const r=n.type,i=[];let o;const a=mn(this,`candidates-${r}`,()=>_g(this,r));for(const u of a){const{guard:f}=u,d=e.context;let _=!1;try{_=!f||Ki(f,d,n,e)}catch(h){const g=typeof f=="string"?f:typeof f=="object"?f.type:void 0;throw new Error(`Unable to evaluate guard ${g?`'${g}' `:""}in transition for event '${r}' in state node '${this.id}':
${h.message}`)}if(_){i.push(...u.actions),o=u;break}}return o?[o]:void 0}get events(){return mn(this,"events",()=>{const{states:e}=this,n=new Set(this.ownEvents);if(e)for(const r of Object.keys(e)){const i=e[r];if(i.states)for(const o of i.events)n.add(`${o}`)}return Array.from(n)})}get ownEvents(){const e=new Set([...this.transitions.keys()].filter(n=>this.transitions.get(n).some(r=>!(!r.target&&!r.actions.length&&!r.reenter))));return Array.from(e)}}const Jg="#";class eo{constructor(e,n){this.config=e,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=e.id||"(machine)",this.implementations={actors:n?.actors??{},actions:n?.actions??{},delays:n?.delays??{},guards:n?.guards??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new zr(e,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(e){const{actions:n,guards:r,actors:i,delays:o}=this.implementations;return new eo(this.config,{actions:{...n,...e.actions},guards:{...r,...e.guards},actors:{...i,...e.actors},delays:{...o,...e.delays}})}resolveState(e){const n=jg(this.root,e.value),r=Fr(Vr(this.root,n));return Tr({_nodes:[...r],context:e.context||{},children:{},status:Xi(r,this.root)?"done":e.status||"active",output:e.output,error:e.error,historyValue:e.historyValue},this)}transition(e,n,r){return si(e,n,r,[]).snapshot}microstep(e,n,r){return si(e,n,r,[]).microstates}getTransitionData(e,n){return Zi(this.root,e.value,e,n)||[]}getPreInitialState(e,n,r){const{context:i}=this.config,o=Tr({context:typeof i!="function"&&i?i:{},_nodes:[this.root],children:{},status:"active"},this);return typeof i=="function"?On(o,n,e,[$n(({spawn:u,event:f,self:d})=>i({spawn:u,input:f.input,self:d}))],r,void 0):o}getInitialSnapshot(e,n){const r=Qc(n),i=[],o=this.getPreInitialState(e,r,i),a=Ci([{target:[...uu(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],o,e,r,!0,i),{snapshot:u}=si(a,r,e,i);return u}start(e){Object.values(e.children).forEach(n=>{n.getSnapshot().status==="active"&&n.start()})}getStateNodeById(e){const n=qi(e),r=n.slice(1),i=rs(n[0])?n[0].slice(Jg.length):n[0],o=this.idMap.get(i);if(!o)throw new Error(`Child state node '#${i}' does not exist on machine '${this.id}'`);return Nr(o,r)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(e,n){return Fg(e,n)}restoreSnapshot(e,n){const r={},i=e.children;Object.keys(i).forEach(h=>{const g=i[h],y=g.snapshot,m=g.src,v=typeof m=="string"?Gi(this,m):m;if(!v)return;const A=Gn(v,{id:h,parent:n.self,syncSnapshot:g.syncSnapshot,snapshot:y,src:m,systemId:g.systemId});r[h]=A});function o(h,g){if(g instanceof zr)return g;try{return h.machine.getStateNodeById(g.id)}catch{}}function a(h,g){if(!g||typeof g!="object")return{};const y={};for(const m in g){const v=g[m];for(const A of v){const N=o(h,A);N&&(y[m]??=[],y[m].push(N))}}return y}const u=a(this.root,e.historyValue),f=Tr({...e,children:r,_nodes:Array.from(Fr(Vr(this.root,e.value))),historyValue:u},this),d=new Set;function _(h,g){if(!d.has(h)){d.add(h);for(const y in h){const m=h[y];if(m&&typeof m=="object"){if("xstate$$type"in m&&m.xstate$$type===Ji){h[y]=g[m.id];continue}_(m,g)}}}}return _(f.context,r),f}}function Kg(t,e){const n=xt(e);if(!n.includes(t.type)){const r=n.length===1?`type "${n[0]}"`:`one of types "${n.join('", "')}"`;throw new Error(`Expected event ${JSON.stringify(t)} to have ${r}`)}}function Yg(t,e){return new eo(t,e)}function Xg({schemas:t,actors:e,actions:n,guards:r,delays:i}){return{createMachine:o=>Yg({...o,schemas:t},{actors:e,actions:n,guards:r,delays:i})}}const Zg={timeout:1/0};function Qg(t,e,n){const r={...Zg,...n};return new Promise((i,o)=>{const{signal:a}=r;if(a?.aborted){o(a.reason);return}let u=!1;const f=r.timeout===1/0?void 0:setTimeout(()=>{d(),o(new Error(`Timeout of ${r.timeout} ms exceeded`))},r.timeout),d=()=>{clearTimeout(f),u=!0,g?.unsubscribe(),h&&a.removeEventListener("abort",h)};function _(y){e(y)&&(d(),i(y))}let h,g;_(t.getSnapshot()),!u&&(a&&(h=()=>{d(),o(a.reason)},a.addEventListener("abort",h)),g=t.subscribe({next:_,error:y=>{d(),o(y)},complete:()=>{d(),o(new Error("Actor terminated without satisfying predicate"))}}),u&&g.unsubscribe())})}let wr;const e_=new Uint8Array(16);function t_(){if(!wr&&(wr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!wr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return wr(e_)}const n_=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ss(t){return typeof t=="string"&&n_.test(t)}const je=[];for(let t=0;t<256;++t)je.push((t+256).toString(16).slice(1));function _u(t,e=0){return je[t[e+0]]+je[t[e+1]]+je[t[e+2]]+je[t[e+3]]+"-"+je[t[e+4]]+je[t[e+5]]+"-"+je[t[e+6]]+je[t[e+7]]+"-"+je[t[e+8]]+je[t[e+9]]+"-"+je[t[e+10]]+je[t[e+11]]+je[t[e+12]]+je[t[e+13]]+je[t[e+14]]+je[t[e+15]]}function r_(t,e=0){const n=_u(t,e);if(!ss(n))throw TypeError("Stringified UUID is invalid");return n}function s_(t){if(!ss(t))throw TypeError("Invalid UUID");let e;const n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}const i_=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Va={randomUUID:i_};function pu(t,e,n){if(Va.randomUUID&&!e&&!t)return Va.randomUUID();t=t||{};const r=t.random||(t.rng||t_)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return _u(r)}var rt={},pe={},De={},ii={},Ln={},za;function o_(){return za||(za=1,Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.crypto=void 0,Ln.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),Ln}var Wa;function yu(){return Wa||(Wa=1,function(t){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.Hash=t.nextTick=t.swap32IfBE=t.byteSwapIfBE=t.swap8IfBE=t.isLE=void 0,t.isBytes=n,t.anumber=r,t.abytes=i,t.ahash=o,t.aexists=a,t.aoutput=u,t.u8=f,t.u32=d,t.clean=_,t.createView=h,t.rotr=g,t.rotl=y,t.byteSwap=m,t.byteSwap32=v,t.bytesToHex=H,t.hexToBytes=q,t.asyncLoop=te,t.utf8ToBytes=X,t.bytesToUtf8=$,t.toBytes=V,t.kdfInputToBytes=K,t.concatBytes=se,t.checkOpts=S,t.createHasher=U,t.createOptHasher=L,t.createXOFer=D,t.randomBytes=Q;const e=o_();function n(k){return k instanceof Uint8Array||ArrayBuffer.isView(k)&&k.constructor.name==="Uint8Array"}function r(k){if(!Number.isSafeInteger(k)||k<0)throw new Error("positive integer expected, got "+k)}function i(k,...F){if(!n(k))throw new Error("Uint8Array expected");if(F.length>0&&!F.includes(k.length))throw new Error("Uint8Array expected of length "+F+", got length="+k.length)}function o(k){if(typeof k!="function"||typeof k.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");r(k.outputLen),r(k.blockLen)}function a(k,F=!0){if(k.destroyed)throw new Error("Hash instance has been destroyed");if(F&&k.finished)throw new Error("Hash#digest() has already been called")}function u(k,F){i(k);const w=F.outputLen;if(k.length<w)throw new Error("digestInto() expects output buffer of length at least "+w)}function f(k){return new Uint8Array(k.buffer,k.byteOffset,k.byteLength)}function d(k){return new Uint32Array(k.buffer,k.byteOffset,Math.floor(k.byteLength/4))}function _(...k){for(let F=0;F<k.length;F++)k[F].fill(0)}function h(k){return new DataView(k.buffer,k.byteOffset,k.byteLength)}function g(k,F){return k<<32-F|k>>>F}function y(k,F){return k<<F|k>>>32-F>>>0}t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function m(k){return k<<24&4278190080|k<<8&16711680|k>>>8&65280|k>>>24&255}t.swap8IfBE=t.isLE?k=>k:k=>m(k),t.byteSwapIfBE=t.swap8IfBE;function v(k){for(let F=0;F<k.length;F++)k[F]=m(k[F]);return k}t.swap32IfBE=t.isLE?k=>k:v;const A=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",N=Array.from({length:256},(k,F)=>F.toString(16).padStart(2,"0"));function H(k){if(i(k),A)return k.toHex();let F="";for(let w=0;w<k.length;w++)F+=N[k[w]];return F}const C={_0:48,_9:57,A:65,F:70,a:97,f:102};function Z(k){if(k>=C._0&&k<=C._9)return k-C._0;if(k>=C.A&&k<=C.F)return k-(C.A-10);if(k>=C.a&&k<=C.f)return k-(C.a-10)}function q(k){if(typeof k!="string")throw new Error("hex string expected, got "+typeof k);if(A)return Uint8Array.fromHex(k);const F=k.length,w=F/2;if(F%2)throw new Error("hex string expected, got unpadded hex of length "+F);const R=new Uint8Array(w);for(let W=0,ie=0;W<w;W++,ie+=2){const ue=Z(k.charCodeAt(ie)),le=Z(k.charCodeAt(ie+1));if(ue===void 0||le===void 0){const de=k[ie]+k[ie+1];throw new Error('hex string expected, got non-hex character "'+de+'" at index '+ie)}R[W]=ue*16+le}return R}const J=async()=>{};t.nextTick=J;async function te(k,F,w){let R=Date.now();for(let W=0;W<k;W++){w(W);const ie=Date.now()-R;ie>=0&&ie<F||(await(0,t.nextTick)(),R+=ie)}}function X(k){if(typeof k!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(k))}function $(k){return new TextDecoder().decode(k)}function V(k){return typeof k=="string"&&(k=X(k)),i(k),k}function K(k){return typeof k=="string"&&(k=X(k)),i(k),k}function se(...k){let F=0;for(let R=0;R<k.length;R++){const W=k[R];i(W),F+=W.length}const w=new Uint8Array(F);for(let R=0,W=0;R<k.length;R++){const ie=k[R];w.set(ie,W),W+=ie.length}return w}function S(k,F){if(F!==void 0&&{}.toString.call(F)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(k,F)}class z{}t.Hash=z;function U(k){const F=R=>k().update(V(R)).digest(),w=k();return F.outputLen=w.outputLen,F.blockLen=w.blockLen,F.create=()=>k(),F}function L(k){const F=(R,W)=>k(W).update(V(R)).digest(),w=k({});return F.outputLen=w.outputLen,F.blockLen=w.blockLen,F.create=R=>k(R),F}function D(k){const F=(R,W)=>k(W).update(V(R)).digest(),w=k({});return F.outputLen=w.outputLen,F.blockLen=w.blockLen,F.create=R=>k(R),F}t.wrapConstructor=U,t.wrapConstructorWithOpts=L,t.wrapXOFConstructorWithOpts=D;function Q(k=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(k));if(e.crypto&&typeof e.crypto.randomBytes=="function")return Uint8Array.from(e.crypto.randomBytes(k));throw new Error("crypto.getRandomValues must be defined")}}(ii)),ii}var qa;function a_(){if(qa)return De;qa=1,Object.defineProperty(De,"__esModule",{value:!0}),De.SHA512_IV=De.SHA384_IV=De.SHA224_IV=De.SHA256_IV=De.HashMD=void 0,De.setBigUint64=e,De.Chi=n,De.Maj=r;const t=yu();function e(o,a,u,f){if(typeof o.setBigUint64=="function")return o.setBigUint64(a,u,f);const d=BigInt(32),_=BigInt(4294967295),h=Number(u>>d&_),g=Number(u&_),y=f?4:0,m=f?0:4;o.setUint32(a+y,h,f),o.setUint32(a+m,g,f)}function n(o,a,u){return o&a^~o&u}function r(o,a,u){return o&a^o&u^a&u}class i extends t.Hash{constructor(a,u,f,d){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=a,this.outputLen=u,this.padOffset=f,this.isLE=d,this.buffer=new Uint8Array(a),this.view=(0,t.createView)(this.buffer)}update(a){(0,t.aexists)(this),a=(0,t.toBytes)(a),(0,t.abytes)(a);const{view:u,buffer:f,blockLen:d}=this,_=a.length;for(let h=0;h<_;){const g=Math.min(d-this.pos,_-h);if(g===d){const y=(0,t.createView)(a);for(;d<=_-h;h+=d)this.process(y,h);continue}f.set(a.subarray(h,h+g),this.pos),this.pos+=g,h+=g,this.pos===d&&(this.process(u,0),this.pos=0)}return this.length+=a.length,this.roundClean(),this}digestInto(a){(0,t.aexists)(this),(0,t.aoutput)(a,this),this.finished=!0;const{buffer:u,view:f,blockLen:d,isLE:_}=this;let{pos:h}=this;u[h++]=128,(0,t.clean)(this.buffer.subarray(h)),this.padOffset>d-h&&(this.process(f,0),h=0);for(let A=h;A<d;A++)u[A]=0;e(f,d-8,BigInt(this.length*8),_),this.process(f,0);const g=(0,t.createView)(a),y=this.outputLen;if(y%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const m=y/4,v=this.get();if(m>v.length)throw new Error("_sha2: outputLen bigger than state");for(let A=0;A<m;A++)g.setUint32(4*A,v[A],_)}digest(){const{buffer:a,outputLen:u}=this;this.digestInto(a);const f=a.slice(0,u);return this.destroy(),f}_cloneInto(a){a||(a=new this.constructor),a.set(...this.get());const{blockLen:u,buffer:f,length:d,finished:_,destroyed:h,pos:g}=this;return a.destroyed=h,a.finished=_,a.length=d,a.pos=g,d%u&&a.buffer.set(f),a}clone(){return this._cloneInto()}}return De.HashMD=i,De.SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),De.SHA224_IV=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),De.SHA384_IV=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),De.SHA512_IV=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),De}var oe={},Ga;function c_(){if(Ga)return oe;Ga=1,Object.defineProperty(oe,"__esModule",{value:!0}),oe.toBig=oe.shrSL=oe.shrSH=oe.rotrSL=oe.rotrSH=oe.rotrBL=oe.rotrBH=oe.rotr32L=oe.rotr32H=oe.rotlSL=oe.rotlSH=oe.rotlBL=oe.rotlBH=oe.add5L=oe.add5H=oe.add4L=oe.add4H=oe.add3L=oe.add3H=void 0,oe.add=N,oe.fromBig=n,oe.split=r;const t=BigInt(2**32-1),e=BigInt(32);function n($,V=!1){return V?{h:Number($&t),l:Number($>>e&t)}:{h:Number($>>e&t)|0,l:Number($&t)|0}}function r($,V=!1){const K=$.length;let se=new Uint32Array(K),S=new Uint32Array(K);for(let z=0;z<K;z++){const{h:U,l:L}=n($[z],V);[se[z],S[z]]=[U,L]}return[se,S]}const i=($,V)=>BigInt($>>>0)<<e|BigInt(V>>>0);oe.toBig=i;const o=($,V,K)=>$>>>K;oe.shrSH=o;const a=($,V,K)=>$<<32-K|V>>>K;oe.shrSL=a;const u=($,V,K)=>$>>>K|V<<32-K;oe.rotrSH=u;const f=($,V,K)=>$<<32-K|V>>>K;oe.rotrSL=f;const d=($,V,K)=>$<<64-K|V>>>K-32;oe.rotrBH=d;const _=($,V,K)=>$>>>K-32|V<<64-K;oe.rotrBL=_;const h=($,V)=>V;oe.rotr32H=h;const g=($,V)=>$;oe.rotr32L=g;const y=($,V,K)=>$<<K|V>>>32-K;oe.rotlSH=y;const m=($,V,K)=>V<<K|$>>>32-K;oe.rotlSL=m;const v=($,V,K)=>V<<K-32|$>>>64-K;oe.rotlBH=v;const A=($,V,K)=>$<<K-32|V>>>64-K;oe.rotlBL=A;function N($,V,K,se){const S=(V>>>0)+(se>>>0);return{h:$+K+(S/2**32|0)|0,l:S|0}}const H=($,V,K)=>($>>>0)+(V>>>0)+(K>>>0);oe.add3L=H;const C=($,V,K,se)=>V+K+se+($/2**32|0)|0;oe.add3H=C;const Z=($,V,K,se)=>($>>>0)+(V>>>0)+(K>>>0)+(se>>>0);oe.add4L=Z;const q=($,V,K,se,S)=>V+K+se+S+($/2**32|0)|0;oe.add4H=q;const J=($,V,K,se,S)=>($>>>0)+(V>>>0)+(K>>>0)+(se>>>0)+(S>>>0);oe.add5L=J;const te=($,V,K,se,S,z)=>V+K+se+S+z+($/2**32|0)|0;oe.add5H=te;const X={fromBig:n,split:r,toBig:i,shrSH:o,shrSL:a,rotrSH:u,rotrSL:f,rotrBH:d,rotrBL:_,rotr32H:h,rotr32L:g,rotlSH:y,rotlSL:m,rotlBH:v,rotlBL:A,add:N,add3L:H,add3H:C,add4L:Z,add4H:q,add5H:te,add5L:J};return oe.default=X,oe}var Ja;function u_(){if(Ja)return pe;Ja=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.sha512_224=pe.sha512_256=pe.sha384=pe.sha512=pe.sha224=pe.sha256=pe.SHA512_256=pe.SHA512_224=pe.SHA384=pe.SHA512=pe.SHA224=pe.SHA256=void 0;const t=a_(),e=c_(),n=yu(),r=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),i=new Uint32Array(64);class o extends t.HashMD{constructor(C=32){super(64,C,8,!1),this.A=t.SHA256_IV[0]|0,this.B=t.SHA256_IV[1]|0,this.C=t.SHA256_IV[2]|0,this.D=t.SHA256_IV[3]|0,this.E=t.SHA256_IV[4]|0,this.F=t.SHA256_IV[5]|0,this.G=t.SHA256_IV[6]|0,this.H=t.SHA256_IV[7]|0}get(){const{A:C,B:Z,C:q,D:J,E:te,F:X,G:$,H:V}=this;return[C,Z,q,J,te,X,$,V]}set(C,Z,q,J,te,X,$,V){this.A=C|0,this.B=Z|0,this.C=q|0,this.D=J|0,this.E=te|0,this.F=X|0,this.G=$|0,this.H=V|0}process(C,Z){for(let S=0;S<16;S++,Z+=4)i[S]=C.getUint32(Z,!1);for(let S=16;S<64;S++){const z=i[S-15],U=i[S-2],L=(0,n.rotr)(z,7)^(0,n.rotr)(z,18)^z>>>3,D=(0,n.rotr)(U,17)^(0,n.rotr)(U,19)^U>>>10;i[S]=D+i[S-7]+L+i[S-16]|0}let{A:q,B:J,C:te,D:X,E:$,F:V,G:K,H:se}=this;for(let S=0;S<64;S++){const z=(0,n.rotr)($,6)^(0,n.rotr)($,11)^(0,n.rotr)($,25),U=se+z+(0,t.Chi)($,V,K)+r[S]+i[S]|0,D=((0,n.rotr)(q,2)^(0,n.rotr)(q,13)^(0,n.rotr)(q,22))+(0,t.Maj)(q,J,te)|0;se=K,K=V,V=$,$=X+U|0,X=te,te=J,J=q,q=U+D|0}q=q+this.A|0,J=J+this.B|0,te=te+this.C|0,X=X+this.D|0,$=$+this.E|0,V=V+this.F|0,K=K+this.G|0,se=se+this.H|0,this.set(q,J,te,X,$,V,K,se)}roundClean(){(0,n.clean)(i)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,n.clean)(this.buffer)}}pe.SHA256=o;class a extends o{constructor(){super(28),this.A=t.SHA224_IV[0]|0,this.B=t.SHA224_IV[1]|0,this.C=t.SHA224_IV[2]|0,this.D=t.SHA224_IV[3]|0,this.E=t.SHA224_IV[4]|0,this.F=t.SHA224_IV[5]|0,this.G=t.SHA224_IV[6]|0,this.H=t.SHA224_IV[7]|0}}pe.SHA224=a;const u=e.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(H=>BigInt(H))),f=u[0],d=u[1],_=new Uint32Array(80),h=new Uint32Array(80);class g extends t.HashMD{constructor(C=64){super(128,C,16,!1),this.Ah=t.SHA512_IV[0]|0,this.Al=t.SHA512_IV[1]|0,this.Bh=t.SHA512_IV[2]|0,this.Bl=t.SHA512_IV[3]|0,this.Ch=t.SHA512_IV[4]|0,this.Cl=t.SHA512_IV[5]|0,this.Dh=t.SHA512_IV[6]|0,this.Dl=t.SHA512_IV[7]|0,this.Eh=t.SHA512_IV[8]|0,this.El=t.SHA512_IV[9]|0,this.Fh=t.SHA512_IV[10]|0,this.Fl=t.SHA512_IV[11]|0,this.Gh=t.SHA512_IV[12]|0,this.Gl=t.SHA512_IV[13]|0,this.Hh=t.SHA512_IV[14]|0,this.Hl=t.SHA512_IV[15]|0}get(){const{Ah:C,Al:Z,Bh:q,Bl:J,Ch:te,Cl:X,Dh:$,Dl:V,Eh:K,El:se,Fh:S,Fl:z,Gh:U,Gl:L,Hh:D,Hl:Q}=this;return[C,Z,q,J,te,X,$,V,K,se,S,z,U,L,D,Q]}set(C,Z,q,J,te,X,$,V,K,se,S,z,U,L,D,Q){this.Ah=C|0,this.Al=Z|0,this.Bh=q|0,this.Bl=J|0,this.Ch=te|0,this.Cl=X|0,this.Dh=$|0,this.Dl=V|0,this.Eh=K|0,this.El=se|0,this.Fh=S|0,this.Fl=z|0,this.Gh=U|0,this.Gl=L|0,this.Hh=D|0,this.Hl=Q|0}process(C,Z){for(let w=0;w<16;w++,Z+=4)_[w]=C.getUint32(Z),h[w]=C.getUint32(Z+=4);for(let w=16;w<80;w++){const R=_[w-15]|0,W=h[w-15]|0,ie=e.rotrSH(R,W,1)^e.rotrSH(R,W,8)^e.shrSH(R,W,7),ue=e.rotrSL(R,W,1)^e.rotrSL(R,W,8)^e.shrSL(R,W,7),le=_[w-2]|0,de=h[w-2]|0,ge=e.rotrSH(le,de,19)^e.rotrBH(le,de,61)^e.shrSH(le,de,6),_e=e.rotrSL(le,de,19)^e.rotrBL(le,de,61)^e.shrSL(le,de,6),Ie=e.add4L(ue,_e,h[w-7],h[w-16]),Ut=e.add4H(Ie,ie,ge,_[w-7],_[w-16]);_[w]=Ut|0,h[w]=Ie|0}let{Ah:q,Al:J,Bh:te,Bl:X,Ch:$,Cl:V,Dh:K,Dl:se,Eh:S,El:z,Fh:U,Fl:L,Gh:D,Gl:Q,Hh:k,Hl:F}=this;for(let w=0;w<80;w++){const R=e.rotrSH(S,z,14)^e.rotrSH(S,z,18)^e.rotrBH(S,z,41),W=e.rotrSL(S,z,14)^e.rotrSL(S,z,18)^e.rotrBL(S,z,41),ie=S&U^~S&D,ue=z&L^~z&Q,le=e.add5L(F,W,ue,d[w],h[w]),de=e.add5H(le,k,R,ie,f[w],_[w]),ge=le|0,_e=e.rotrSH(q,J,28)^e.rotrBH(q,J,34)^e.rotrBH(q,J,39),Ie=e.rotrSL(q,J,28)^e.rotrBL(q,J,34)^e.rotrBL(q,J,39),Ut=q&te^q&$^te&$,sr=J&X^J&V^X&V;k=D|0,F=Q|0,D=U|0,Q=L|0,U=S|0,L=z|0,{h:S,l:z}=e.add(K|0,se|0,de|0,ge|0),K=$|0,se=V|0,$=te|0,V=X|0,te=q|0,X=J|0;const Ht=e.add3L(ge,Ie,sr);q=e.add3H(Ht,de,_e,Ut),J=Ht|0}({h:q,l:J}=e.add(this.Ah|0,this.Al|0,q|0,J|0)),{h:te,l:X}=e.add(this.Bh|0,this.Bl|0,te|0,X|0),{h:$,l:V}=e.add(this.Ch|0,this.Cl|0,$|0,V|0),{h:K,l:se}=e.add(this.Dh|0,this.Dl|0,K|0,se|0),{h:S,l:z}=e.add(this.Eh|0,this.El|0,S|0,z|0),{h:U,l:L}=e.add(this.Fh|0,this.Fl|0,U|0,L|0),{h:D,l:Q}=e.add(this.Gh|0,this.Gl|0,D|0,Q|0),{h:k,l:F}=e.add(this.Hh|0,this.Hl|0,k|0,F|0),this.set(q,J,te,X,$,V,K,se,S,z,U,L,D,Q,k,F)}roundClean(){(0,n.clean)(_,h)}destroy(){(0,n.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}pe.SHA512=g;class y extends g{constructor(){super(48),this.Ah=t.SHA384_IV[0]|0,this.Al=t.SHA384_IV[1]|0,this.Bh=t.SHA384_IV[2]|0,this.Bl=t.SHA384_IV[3]|0,this.Ch=t.SHA384_IV[4]|0,this.Cl=t.SHA384_IV[5]|0,this.Dh=t.SHA384_IV[6]|0,this.Dl=t.SHA384_IV[7]|0,this.Eh=t.SHA384_IV[8]|0,this.El=t.SHA384_IV[9]|0,this.Fh=t.SHA384_IV[10]|0,this.Fl=t.SHA384_IV[11]|0,this.Gh=t.SHA384_IV[12]|0,this.Gl=t.SHA384_IV[13]|0,this.Hh=t.SHA384_IV[14]|0,this.Hl=t.SHA384_IV[15]|0}}pe.SHA384=y;const m=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),v=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class A extends g{constructor(){super(28),this.Ah=m[0]|0,this.Al=m[1]|0,this.Bh=m[2]|0,this.Bl=m[3]|0,this.Ch=m[4]|0,this.Cl=m[5]|0,this.Dh=m[6]|0,this.Dl=m[7]|0,this.Eh=m[8]|0,this.El=m[9]|0,this.Fh=m[10]|0,this.Fl=m[11]|0,this.Gh=m[12]|0,this.Gl=m[13]|0,this.Hh=m[14]|0,this.Hl=m[15]|0}}pe.SHA512_224=A;class N extends g{constructor(){super(32),this.Ah=v[0]|0,this.Al=v[1]|0,this.Bh=v[2]|0,this.Bl=v[3]|0,this.Ch=v[4]|0,this.Cl=v[5]|0,this.Dh=v[6]|0,this.Dl=v[7]|0,this.Eh=v[8]|0,this.El=v[9]|0,this.Fh=v[10]|0,this.Fl=v[11]|0,this.Gh=v[12]|0,this.Gl=v[13]|0,this.Hh=v[14]|0,this.Hl=v[15]|0}}return pe.SHA512_256=N,pe.sha256=(0,n.createHasher)(()=>new o),pe.sha224=(0,n.createHasher)(()=>new a),pe.sha512=(0,n.createHasher)(()=>new g),pe.sha384=(0,n.createHasher)(()=>new y),pe.sha512_256=(0,n.createHasher)(()=>new N),pe.sha512_224=(0,n.createHasher)(()=>new A),pe}var Ka;function f_(){if(Ka)return rt;Ka=1,Object.defineProperty(rt,"__esModule",{value:!0}),rt.sha224=rt.SHA224=rt.sha256=rt.SHA256=void 0;const t=u_();return rt.SHA256=t.SHA256,rt.sha256=t.sha256,rt.SHA224=t.SHA224,rt.sha224=t.sha224,rt}var oi,Ya;function l_(){if(Ya)return oi;Ya=1;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),a=o.charCodeAt(0);if(n[a]!==255)throw new TypeError(o+" is ambiguous");n[a]=i}var u=e.length,f=e.charAt(0),d=Math.log(u)/Math.log(256),_=Math.log(256)/Math.log(u);function h(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var v=0,A=0,N=0,H=m.length;N!==H&&m[N]===0;)N++,v++;for(var C=(H-N)*_+1>>>0,Z=new Uint8Array(C);N!==H;){for(var q=m[N],J=0,te=C-1;(q!==0||J<A)&&te!==-1;te--,J++)q+=256*Z[te]>>>0,Z[te]=q%u>>>0,q=q/u>>>0;if(q!==0)throw new Error("Non-zero carry");A=J,N++}for(var X=C-A;X!==C&&Z[X]===0;)X++;for(var $=f.repeat(v);X<C;++X)$+=e.charAt(Z[X]);return $}function g(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;for(var v=0,A=0,N=0;m[v]===f;)A++,v++;for(var H=(m.length-v)*d+1>>>0,C=new Uint8Array(H);m[v];){var Z=m.charCodeAt(v);if(Z>255)return;var q=n[Z];if(q===255)return;for(var J=0,te=H-1;(q!==0||J<N)&&te!==-1;te--,J++)q+=u*C[te]>>>0,C[te]=q%256>>>0,q=q/256>>>0;if(q!==0)throw new Error("Non-zero carry");N=J,v++}for(var X=H-N;X!==H&&C[X]===0;)X++;for(var $=new Uint8Array(A+(H-X)),V=A;X!==H;)$[V++]=C[X++];return $}function y(m){var v=g(m);if(v)return v;throw new Error("Non-base"+u+" character")}return{encode:h,decodeUnsafe:g,decode:y}}return oi=t,oi}var ai,Xa;function d_(){return Xa||(Xa=1,ai=l_()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),ai}var ci,Za;function h_(){if(Za)return ci;Za=1;var t=d_();return ci=function(e){function n(a){var u=Uint8Array.from(a),f=e(u),d=u.length+4,_=new Uint8Array(d);return _.set(u,0),_.set(f.subarray(0,4),u.length),t.encode(_,d)}function r(a){var u=a.slice(0,-4),f=a.slice(-4),d=e(u);if(!(f[0]^d[0]|f[1]^d[1]|f[2]^d[2]|f[3]^d[3]))return u}function i(a){var u=t.decodeUnsafe(a);if(u)return r(u)}function o(a){var u=t.decode(a),f=r(u);if(!f)throw new Error("Invalid checksum");return f}return{encode:n,decode:o,decodeUnsafe:i}},ci}var ui,Qa;function g_(){if(Qa)return ui;Qa=1;var{sha256:t}=f_(),e=h_();function n(r){return t(t(r))}return ui=e(n),ui}var __=g_();const nn=Wi(__),p_=t=>{if(t.length%2!==0)throw new Error("Hex string must have an even length");const e=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2)e[n>>1]=parseInt(t.slice(n,n+2),16);return e},mu=t=>Array.from(t,e=>e.toString(16).padStart(2,"0")).join(""),Wr="automerge:",Jn=t=>{const[e,n,...r]=t.split("#");if(r.length>0)throw new Error("Invalid URL: contains multiple heads sections");const i=new RegExp(`^${Wr}(\\w+)$`),[,o]=e.match(i)||[],a=o,u=Su(a);if(!u)throw new Error("Invalid document URL: "+t);if(n===void 0)return{binaryDocumentId:u,documentId:a};const f=n===""?[]:n.split("|"),d=f.map(_=>{try{return mu(nn.decode(_))}catch{throw new Error(`Invalid head in URL: ${_}`)}});return{binaryDocumentId:u,hexHeads:d,documentId:a,heads:f}},bu=t=>{if(t instanceof Uint8Array||typeof t=="string")return Wr+(t instanceof Uint8Array?qr(t):t);const{documentId:e,heads:n=void 0}=t;if(e===void 0)throw new Error("Invalid documentId: "+e);const r=e instanceof Uint8Array?qr(e):e;let i=`${Wr}${r}`;return n!==void 0&&(n.forEach(o=>{try{nn.decode(o)}catch{throw new Error(`Invalid head: ${o}`)}}),i+="#"+n.join("|")),i},wu=t=>{if(typeof t!="string"||!t||!t.startsWith(Wr))return!1;try{const{documentId:e,heads:n}=Jn(t);return!(!vu(e)||n&&!n.every(r=>{try{return nn.decode(r),!0}catch{return!1}}))}catch{return!1}},vu=t=>{if(typeof t!="string")return!1;const e=Su(t);if(e===void 0)return!1;const n=r_(e);return ss(n)},y_=t=>typeof t=="string"&&ss(t),m_=()=>{const t=pu(null,new Uint8Array(16));return bu({documentId:t})},Su=t=>nn.decodeUnsafe(t),qr=t=>nn.encode(t),dt=t=>t.map(e=>nn.encode(p_(e))),Vt=t=>t.map(e=>mu(nn.decode(e))),vr=t=>{if(t instanceof Uint8Array)return qr(t);if(wu(t))return Jn(t).documentId;if(vu(t))return t;if(y_(t)){console.warn("Future versions will not support UUIDs as document IDs; use Automerge URLs instead.");const e=s_(t);return qr(e)}throw new Error(`Invalid AutomergeUrl: '${t}'`)};let Ti;try{Ti=new TextDecoder}catch{}let ee,Yt,P=0;const b_=105,w_=57342,v_=57343,ec=57337,tc=6,bn={};let Bn=11281e4,mt=1681e4,fe={},ve,Gr,Jr=0,Kn=0,Te,Ze,xe=[],Oi=[],$e,He,Fn,nc={useRecords:!1,mapsAsObjects:!0},Yn=!1,xu=2;try{new Function("")}catch{xu=1/0}class Xn{constructor(e){if(e&&((e.keyMap||e._keyMap)&&!e.useRecords&&(e.useRecords=!1,e.mapsAsObjects=!0),e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.getStructures&&(e.getShared=e.getStructures),e.getShared&&!e.structures&&((e.structures=[]).uninitialized=!0),e.keyMap)){this.mapKey=new Map;for(let[n,r]of Object.entries(e.keyMap))this.mapKey.set(r,n)}Object.assign(this,e)}decodeKey(e){return this.keyMap&&this.mapKey.get(e)||e}encodeKey(e){return this.keyMap&&this.keyMap.hasOwnProperty(e)?this.keyMap[e]:e}encodeKeys(e){if(!this._keyMap)return e;let n=new Map;for(let[r,i]of Object.entries(e))n.set(this._keyMap.hasOwnProperty(r)?this._keyMap[r]:r,i);return n}decodeKeys(e){if(!this._keyMap||e.constructor.name!="Map")return e;if(!this._mapKey){this._mapKey=new Map;for(let[r,i]of Object.entries(this._keyMap))this._mapKey.set(i,r)}let n={};return e.forEach((r,i)=>n[Qe(this._mapKey.has(i)?this._mapKey.get(i):i)]=r),n}mapDecode(e,n){let r=this.decode(e);if(this._keyMap)switch(r.constructor.name){case"Array":return r.map(i=>this.decodeKeys(i))}return r}decode(e,n){if(ee)return ku(()=>(Di(),this?this.decode(e,n):Xn.prototype.decode.call(nc,e,n)));Yt=n>-1?n:e.length,P=0,Kn=0,Gr=null,Te=null,ee=e;try{He=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(r){throw ee=null,e instanceof Uint8Array?r:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof Xn){if(fe=this,$e=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues),this.structures)return ve=this.structures,Sr();(!ve||ve.length>0)&&(ve=[])}else fe=nc,(!ve||ve.length>0)&&(ve=[]),$e=null;return Sr()}decodeMultiple(e,n){let r,i=0;try{let o=e.length;Yn=!0;let a=this?this.decode(e,o):ro.decode(e,o);if(n){if(n(a)===!1)return;for(;P<o;)if(i=P,n(Sr())===!1)return}else{for(r=[a];P<o;)i=P,r.push(Sr());return r}}catch(o){throw o.lastPosition=i,o.values=r,o}finally{Yn=!1,Di()}}}function Sr(){try{let t=he();if(Te){if(P>=Te.postBundlePosition){let e=new Error("Unexpected bundle position");throw e.incomplete=!0,e}P=Te.postBundlePosition,Te=null}if(P==Yt)ve=null,ee=null,Ze&&(Ze=null);else if(P>Yt){let e=new Error("Unexpected end of CBOR data");throw e.incomplete=!0,e}else if(!Yn)throw new Error("Data read, but end of buffer not reached");return t}catch(t){throw Di(),(t instanceof RangeError||t.message.startsWith("Unexpected end of buffer"))&&(t.incomplete=!0),t}}function he(){let t=ee[P++],e=t>>5;if(t=t&31,t>23)switch(t){case 24:t=ee[P++];break;case 25:if(e==7)return A_();t=He.getUint16(P),P+=2;break;case 26:if(e==7){let n=He.getFloat32(P);if(fe.useFloat32>2){let r=no[(ee[P]&127)<<1|ee[P+1]>>7];return P+=4,(r*n+(n>0?.5:-.5)>>0)/r}return P+=4,n}t=He.getUint32(P),P+=4;break;case 27:if(e==7){let n=He.getFloat64(P);return P+=8,n}if(e>1){if(He.getUint32(P)>0)throw new Error("JavaScript does not support arrays, maps, or strings with length over 4294967295");t=He.getUint32(P+4)}else fe.int64AsNumber?(t=He.getUint32(P)*4294967296,t+=He.getUint32(P+4)):t=He.getBigUint64(P);P+=8;break;case 31:switch(e){case 2:case 3:throw new Error("Indefinite length not supported for byte or text strings");case 4:let n=[],r,i=0;for(;(r=he())!=bn;){if(i>=Bn)throw new Error(`Array length exceeds ${Bn}`);n[i++]=r}return e==4?n:e==3?n.join(""):Buffer.concat(n);case 5:let o;if(fe.mapsAsObjects){let a={},u=0;if(fe.keyMap)for(;(o=he())!=bn;){if(u++>=mt)throw new Error(`Property count exceeds ${mt}`);a[Qe(fe.decodeKey(o))]=he()}else for(;(o=he())!=bn;){if(u++>=mt)throw new Error(`Property count exceeds ${mt}`);a[Qe(o)]=he()}return a}else{Fn&&(fe.mapsAsObjects=!0,Fn=!1);let a=new Map;if(fe.keyMap){let u=0;for(;(o=he())!=bn;){if(u++>=mt)throw new Error(`Map size exceeds ${mt}`);a.set(fe.decodeKey(o),he())}}else{let u=0;for(;(o=he())!=bn;){if(u++>=mt)throw new Error(`Map size exceeds ${mt}`);a.set(o,he())}}return a}case 7:return bn;default:throw new Error("Invalid major type for indefinite length "+e)}default:throw new Error("Unknown token "+t)}switch(e){case 0:return t;case 1:return~t;case 2:return I_(t);case 3:if(Kn>=P)return Gr.slice(P-Jr,(P+=t)-Jr);if(Kn==0&&Yt<140&&t<32){let i=t<16?Iu(t):x_(t);if(i!=null)return i}return S_(t);case 4:if(t>=Bn)throw new Error(`Array length exceeds ${Bn}`);let n=new Array(t);for(let i=0;i<t;i++)n[i]=he();return n;case 5:if(t>=mt)throw new Error(`Map size exceeds ${Bn}`);if(fe.mapsAsObjects){let i={};if(fe.keyMap)for(let o=0;o<t;o++)i[Qe(fe.decodeKey(he()))]=he();else for(let o=0;o<t;o++)i[Qe(he())]=he();return i}else{Fn&&(fe.mapsAsObjects=!0,Fn=!1);let i=new Map;if(fe.keyMap)for(let o=0;o<t;o++)i.set(fe.decodeKey(he()),he());else for(let o=0;o<t;o++)i.set(he(),he());return i}case 6:if(t>=ec){let i=ve[t&8191];if(i)return i.read||(i.read=Ri(i)),i.read();if(t<65536){if(t==v_){let o=An(),a=he(),u=he();ji(a,u);let f={};if(fe.keyMap)for(let d=2;d<o;d++){let _=fe.decodeKey(u[d-2]);f[Qe(_)]=he()}else for(let d=2;d<o;d++){let _=u[d-2];f[Qe(_)]=he()}return f}else if(t==w_){let o=An(),a=he();for(let u=2;u<o;u++)ji(a++,he());return he()}else if(t==ec)return R_();if(fe.getShared&&(to(),i=ve[t&8191],i))return i.read||(i.read=Ri(i)),i.read()}}let r=xe[t];if(r)return r.handlesRead?r(he):r(he());{let i=he();for(let o=0;o<Oi.length;o++){let a=Oi[o](t,i);if(a!==void 0)return a}return new Qt(i,t)}case 7:switch(t){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;case 31:default:let i=($e||zt())[t];if(i!==void 0)return i;throw new Error("Unknown token "+t)}default:if(isNaN(t)){let i=new Error("Unexpected end of CBOR data");throw i.incomplete=!0,i}throw new Error("Unknown CBOR token "+t)}}const rc=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function Ri(t){if(!t)throw new Error("Structure is required in record definition");function e(){let n=ee[P++];if(n=n&31,n>23)switch(n){case 24:n=ee[P++];break;case 25:n=He.getUint16(P),P+=2;break;case 26:n=He.getUint32(P),P+=4;break;default:throw new Error("Expected array header, but got "+ee[P-1])}let r=this.compiledReader;for(;r;){if(r.propertyCount===n)return r(he);r=r.next}if(this.slowReads++>=xu){let o=this.length==n?this:this.slice(0,n);return r=fe.keyMap?new Function("r","return {"+o.map(a=>fe.decodeKey(a)).map(a=>rc.test(a)?Qe(a)+":r()":"["+JSON.stringify(a)+"]:r()").join(",")+"}"):new Function("r","return {"+o.map(a=>rc.test(a)?Qe(a)+":r()":"["+JSON.stringify(a)+"]:r()").join(",")+"}"),this.compiledReader&&(r.next=this.compiledReader),r.propertyCount=n,this.compiledReader=r,r(he)}let i={};if(fe.keyMap)for(let o=0;o<n;o++)i[Qe(fe.decodeKey(this[o]))]=he();else for(let o=0;o<n;o++)i[Qe(this[o])]=he();return i}return t.slowReads=0,e}function Qe(t){if(typeof t=="string")return t==="__proto__"?"__proto_":t;if(typeof t=="number"||typeof t=="boolean"||typeof t=="bigint")return t.toString();if(t==null)return t+"";throw new Error("Invalid property name type "+typeof t)}let S_=Mi;function Mi(t){let e;if(t<16&&(e=Iu(t)))return e;if(t>64&&Ti)return Ti.decode(ee.subarray(P,P+=t));const n=P+t,r=[];for(e="";P<n;){const i=ee[P++];if((i&128)===0)r.push(i);else if((i&224)===192){const o=ee[P++]&63;r.push((i&31)<<6|o)}else if((i&240)===224){const o=ee[P++]&63,a=ee[P++]&63;r.push((i&31)<<12|o<<6|a)}else if((i&248)===240){const o=ee[P++]&63,a=ee[P++]&63,u=ee[P++]&63;let f=(i&7)<<18|o<<12|a<<6|u;f>65535&&(f-=65536,r.push(f>>>10&1023|55296),f=56320|f&1023),r.push(f)}else r.push(i);r.length>=4096&&(e+=Me.apply(String,r),r.length=0)}return r.length>0&&(e+=Me.apply(String,r)),e}let Me=String.fromCharCode;function x_(t){let e=P,n=new Array(t);for(let r=0;r<t;r++){const i=ee[P++];if((i&128)>0){P=e;return}n[r]=i}return Me.apply(String,n)}function Iu(t){if(t<4)if(t<2){if(t===0)return"";{let e=ee[P++];if((e&128)>1){P-=1;return}return Me(e)}}else{let e=ee[P++],n=ee[P++];if((e&128)>0||(n&128)>0){P-=2;return}if(t<3)return Me(e,n);let r=ee[P++];if((r&128)>0){P-=3;return}return Me(e,n,r)}else{let e=ee[P++],n=ee[P++],r=ee[P++],i=ee[P++];if((e&128)>0||(n&128)>0||(r&128)>0||(i&128)>0){P-=4;return}if(t<6){if(t===4)return Me(e,n,r,i);{let o=ee[P++];if((o&128)>0){P-=5;return}return Me(e,n,r,i,o)}}else if(t<8){let o=ee[P++],a=ee[P++];if((o&128)>0||(a&128)>0){P-=6;return}if(t<7)return Me(e,n,r,i,o,a);let u=ee[P++];if((u&128)>0){P-=7;return}return Me(e,n,r,i,o,a,u)}else{let o=ee[P++],a=ee[P++],u=ee[P++],f=ee[P++];if((o&128)>0||(a&128)>0||(u&128)>0||(f&128)>0){P-=8;return}if(t<10){if(t===8)return Me(e,n,r,i,o,a,u,f);{let d=ee[P++];if((d&128)>0){P-=9;return}return Me(e,n,r,i,o,a,u,f,d)}}else if(t<12){let d=ee[P++],_=ee[P++];if((d&128)>0||(_&128)>0){P-=10;return}if(t<11)return Me(e,n,r,i,o,a,u,f,d,_);let h=ee[P++];if((h&128)>0){P-=11;return}return Me(e,n,r,i,o,a,u,f,d,_,h)}else{let d=ee[P++],_=ee[P++],h=ee[P++],g=ee[P++];if((d&128)>0||(_&128)>0||(h&128)>0||(g&128)>0){P-=12;return}if(t<14){if(t===12)return Me(e,n,r,i,o,a,u,f,d,_,h,g);{let y=ee[P++];if((y&128)>0){P-=13;return}return Me(e,n,r,i,o,a,u,f,d,_,h,g,y)}}else{let y=ee[P++],m=ee[P++];if((y&128)>0||(m&128)>0){P-=14;return}if(t<15)return Me(e,n,r,i,o,a,u,f,d,_,h,g,y,m);let v=ee[P++];if((v&128)>0){P-=15;return}return Me(e,n,r,i,o,a,u,f,d,_,h,g,y,m,v)}}}}}function I_(t){return fe.copyBuffers?Uint8Array.prototype.slice.call(ee,P,P+=t):ee.subarray(P,P+=t)}let Au=new Float32Array(1),xr=new Uint8Array(Au.buffer,0,4);function A_(){let t=ee[P++],e=ee[P++],n=(t&127)>>2;if(n===31)return e||t&3?NaN:t&128?-1/0:1/0;if(n===0){let r=((t&3)<<8|e)/16777216;return t&128?-r:r}return xr[3]=t&128|(n>>1)+56,xr[2]=(t&7)<<5|e>>3,xr[1]=e<<5,xr[0]=0,Au[0]}new Array(4096);class Qt{constructor(e,n){this.value=e,this.tag=n}}xe[0]=t=>new Date(t);xe[1]=t=>new Date(Math.round(t*1e3));xe[2]=t=>{let e=BigInt(0);for(let n=0,r=t.byteLength;n<r;n++)e=BigInt(t[n])+(e<<BigInt(8));return e};xe[3]=t=>BigInt(-1)-xe[2](t);xe[4]=t=>+(t[1]+"e"+t[0]);xe[5]=t=>t[1]*Math.exp(t[0]*Math.log(2));const ji=(t,e)=>{t=t-57344;let n=ve[t];n&&n.isShared&&((ve.restoreStructures||(ve.restoreStructures=[]))[t]=n),ve[t]=e,e.read=Ri(e)};xe[b_]=t=>{let e=t.length,n=t[1];ji(t[0],n);let r={};for(let i=2;i<e;i++){let o=n[i-2];r[Qe(o)]=t[i]}return r};xe[14]=t=>Te?Te[0].slice(Te.position0,Te.position0+=t):new Qt(t,14);xe[15]=t=>Te?Te[1].slice(Te.position1,Te.position1+=t):new Qt(t,15);let E_={Error,RegExp};xe[27]=t=>(E_[t[0]]||Error)(t[1],t[2]);const Eu=t=>{if(ee[P++]!=132){let n=new Error("Packed values structure must be followed by a 4 element array");throw ee.length<P&&(n.incomplete=!0),n}let e=t();if(!e||!e.length){let n=new Error("Packed values structure must be followed by a 4 element array");throw n.incomplete=!0,n}return $e=$e?e.concat($e.slice(e.length)):e,$e.prefixes=t(),$e.suffixes=t(),t()};Eu.handlesRead=!0;xe[51]=Eu;xe[tc]=t=>{if(!$e)if(fe.getShared)to();else return new Qt(t,tc);if(typeof t=="number")return $e[16+(t>=0?2*t:-2*t-1)];let e=new Error("No support for non-integer packed references yet");throw t===void 0&&(e.incomplete=!0),e};xe[28]=t=>{Ze||(Ze=new Map,Ze.id=0);let e=Ze.id++,n=P,r=ee[P],i;r>>5==4?i=[]:i={};let o={target:i};Ze.set(e,o);let a=t();return o.used?(Object.getPrototypeOf(i)!==Object.getPrototypeOf(a)&&(P=n,i=a,Ze.set(e,{target:i}),a=t()),Object.assign(i,a)):(o.target=a,a)};xe[28].handlesRead=!0;xe[29]=t=>{let e=Ze.get(t);return e.used=!0,e.target};xe[258]=t=>new Set(t);(xe[259]=t=>(fe.mapsAsObjects&&(fe.mapsAsObjects=!1,Fn=!0),t())).handlesRead=!0;function wn(t,e){return typeof t=="string"?t+e:t instanceof Array?t.concat(e):Object.assign({},t,e)}function zt(){if(!$e)if(fe.getShared)to();else throw new Error("No packed values available");return $e}const k_=1399353956;Oi.push((t,e)=>{if(t>=225&&t<=255)return wn(zt().prefixes[t-224],e);if(t>=28704&&t<=32767)return wn(zt().prefixes[t-28672],e);if(t>=1879052288&&t<=2147483647)return wn(zt().prefixes[t-1879048192],e);if(t>=216&&t<=223)return wn(e,zt().suffixes[t-216]);if(t>=27647&&t<=28671)return wn(e,zt().suffixes[t-27639]);if(t>=1811940352&&t<=1879048191)return wn(e,zt().suffixes[t-1811939328]);if(t==k_)return{packedValues:$e,structures:ve.slice(0),version:e};if(t==55799)return e});const C_=new Uint8Array(new Uint16Array([1]).buffer)[0]==1,sc=[Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?{name:"BigUint64Array"}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?{name:"BigInt64Array"}:BigInt64Array,Float32Array,Float64Array],T_=[64,68,69,70,71,72,77,78,79,85,86];for(let t=0;t<sc.length;t++)O_(sc[t],T_[t]);function O_(t,e){let n="get"+t.name.slice(0,-5),r;typeof t=="function"?r=t.BYTES_PER_ELEMENT:t=null;for(let i=0;i<2;i++){if(!i&&r==1)continue;let o=r==2?1:r==4?2:r==8?3:0;xe[i?e:e-4]=r==1||i==C_?a=>{if(!t)throw new Error("Could not find typed array for code "+e);return!fe.copyBuffers&&(r===1||r===2&&!(a.byteOffset&1)||r===4&&!(a.byteOffset&3)||r===8&&!(a.byteOffset&7))?new t(a.buffer,a.byteOffset,a.byteLength>>o):new t(Uint8Array.prototype.slice.call(a,0).buffer)}:a=>{if(!t)throw new Error("Could not find typed array for code "+e);let u=new DataView(a.buffer,a.byteOffset,a.byteLength),f=a.length>>o,d=new t(f),_=u[n];for(let h=0;h<f;h++)d[h]=_.call(u,h<<o,i);return d}}}function R_(){let t=An(),e=P+he();for(let r=2;r<t;r++){let i=An();P+=i}let n=P;return P=e,Te=[Mi(An()),Mi(An())],Te.position0=0,Te.position1=0,Te.postBundlePosition=P,P=n,he()}function An(){let t=ee[P++]&31;if(t>23)switch(t){case 24:t=ee[P++];break;case 25:t=He.getUint16(P),P+=2;break;case 26:t=He.getUint32(P),P+=4;break}return t}function to(){if(fe.getShared){let t=ku(()=>(ee=null,fe.getShared()))||{},e=t.structures||[];fe.sharedVersion=t.version,$e=fe.sharedValues=t.packedValues,ve===!0?fe.structures=ve=e:ve.splice.apply(ve,[0,e.length].concat(e))}}function ku(t){let e=Yt,n=P,r=Jr,i=Kn,o=Gr,a=Ze,u=Te,f=new Uint8Array(ee.slice(0,Yt)),d=ve,_=fe,h=Yn,g=t();return Yt=e,P=n,Jr=r,Kn=i,Gr=o,Ze=a,Te=u,ee=f,Yn=h,ve=d,fe=_,He=new DataView(ee.buffer,ee.byteOffset,ee.byteLength),g}function Di(){ee=null,Ze=null,ve=null}const no=new Array(147);for(let t=0;t<256;t++)no[t]=+("1e"+Math.floor(45.15-t*.30103));let ro=new Xn({useRecords:!1});const Cu=ro.decode;ro.decodeMultiple;let Or;try{Or=new TextEncoder}catch{}let Ui,Tu;const is=typeof globalThis=="object"&&globalThis.Buffer,rr=typeof is<"u",fi=rr?is.allocUnsafeSlow:Uint8Array,ic=rr?is:Uint8Array,oc=256,ac=rr?4294967296:2144337920;let li,T,be,x=0,Ot,ke=null;const M_=61440,j_=/[\u0080-\uFFFF]/,ze=Symbol("record-id");class Ou extends Xn{constructor(e){super(e),this.offset=0;let n,r,i,o,a;e=e||{};let u=ic.prototype.utf8Write?function(S,z,U){return T.utf8Write(S,z,U)}:Or&&Or.encodeInto?function(S,z){return Or.encodeInto(S,T.subarray(z)).written}:!1,f=this,d=e.structures||e.saveStructures,_=e.maxSharedStructures;if(_==null&&(_=d?128:0),_>8190)throw new Error("Maximum maxSharedStructure is 8190");let h=e.sequential;h&&(_=0),this.structures||(this.structures=[]),this.saveStructures&&(this.saveShared=this.saveStructures);let g,y,m=e.sharedValues,v;if(m){v=Object.create(null);for(let S=0,z=m.length;S<z;S++)v[m[S]]=S}let A=[],N=0,H=0;this.mapEncode=function(S,z){if(this._keyMap&&!this._mapped)switch(S.constructor.name){case"Array":S=S.map(U=>this.encodeKeys(U));break}return this.encode(S,z)},this.encode=function(S,z){if(T||(T=new fi(8192),be=new DataView(T.buffer,0,8192),x=0),Ot=T.length-10,Ot-x<2048?(T=new fi(T.length),be=new DataView(T.buffer,0,T.length),Ot=T.length-10,x=0):z===fc&&(x=x+7&2147483640),n=x,f.useSelfDescribedHeader&&(be.setUint32(x,3654940416),x+=3),a=f.structuredClone?new Map:null,f.bundleStrings&&typeof S!="string"?(ke=[],ke.size=1/0):ke=null,r=f.structures,r){if(r.uninitialized){let L=f.getShared()||{};f.structures=r=L.structures||[],f.sharedVersion=L.version;let D=f.sharedValues=L.packedValues;if(D){v={};for(let Q=0,k=D.length;Q<k;Q++)v[D[Q]]=Q}}let U=r.length;if(U>_&&!h&&(U=_),!r.transitions){r.transitions=Object.create(null);for(let L=0;L<U;L++){let D=r[L];if(!D)continue;let Q,k=r.transitions;for(let F=0,w=D.length;F<w;F++){k[ze]===void 0&&(k[ze]=L);let R=D[F];Q=k[R],Q||(Q=k[R]=Object.create(null)),k=Q}k[ze]=L|1048576}}h||(r.nextId=U)}if(i&&(i=!1),o=r||[],y=v,e.pack){let U=new Map;if(U.values=[],U.encoder=f,U.maxValues=e.maxPrivatePackedValues||(v?16:1/0),U.objectMap=v||!1,U.samplingPackedValues=g,Rr(S,U),U.values.length>0){T[x++]=216,T[x++]=51,ct(4);let L=U.values;C(L),ct(0),ct(0),y=Object.create(v||null);for(let D=0,Q=L.length;D<Q;D++)y[L[D]]=D}}li=z&hi;try{if(li)return;if(C(S),ke&&uc(n,C),f.offset=x,a&&a.idsToInsert){x+=a.idsToInsert.length*2,x>Ot&&q(x),f.offset=x;let U=H_(T.subarray(n,x),a.idsToInsert);return a=null,U}return z&fc?(T.start=n,T.end=x,T):T.subarray(n,x)}finally{if(r){if(H<10&&H++,r.length>_&&(r.length=_),N>1e4)r.transitions=null,H=0,N=0,A.length>0&&(A=[]);else if(A.length>0&&!h){for(let U=0,L=A.length;U<L;U++)A[U][ze]=void 0;A=[]}}if(i&&f.saveShared){f.structures.length>_&&(f.structures=f.structures.slice(0,_));let U=T.subarray(n,x);return f.updateSharedData()===!1?f.encode(S):U}z&P_&&(x=n)}},this.findCommonStringsToPack=()=>(g=new Map,v||(v=Object.create(null)),S=>{let z=S&&S.threshold||4,U=this.pack?S.maxPrivatePackedValues||16:0;m||(m=this.sharedValues=[]);for(let[L,D]of g)D.count>z&&(v[L]=U++,m.push(L),i=!0);for(;this.saveShared&&this.updateSharedData()===!1;);g=null});const C=S=>{x>Ot&&(T=q(x));var z=typeof S,U;if(z==="string"){if(y){let k=y[S];if(k>=0){k<16?T[x++]=k+224:(T[x++]=198,k&1?C(15-k>>1):C(k-16>>1));return}else if(g&&!e.pack){let F=g.get(S);F?F.count++:g.set(S,{count:1})}}let L=S.length;if(ke&&L>=4&&L<1024){if((ke.size+=L)>M_){let F,w=(ke[0]?ke[0].length*3+ke[1].length:0)+10;x+w>Ot&&(T=q(x+w)),T[x++]=217,T[x++]=223,T[x++]=249,T[x++]=ke.position?132:130,T[x++]=26,F=x-n,x+=4,ke.position&&uc(n,C),ke=["",""],ke.size=0,ke.position=F}let k=j_.test(S);ke[k?0:1]+=S,T[x++]=k?206:207,C(L);return}let D;L<32?D=1:L<256?D=2:L<65536?D=3:D=5;let Q=L*3;if(x+Q>Ot&&(T=q(x+Q)),L<64||!u){let k,F,w,R=x+D;for(k=0;k<L;k++)F=S.charCodeAt(k),F<128?T[R++]=F:F<2048?(T[R++]=F>>6|192,T[R++]=F&63|128):(F&64512)===55296&&((w=S.charCodeAt(k+1))&64512)===56320?(F=65536+((F&1023)<<10)+(w&1023),k++,T[R++]=F>>18|240,T[R++]=F>>12&63|128,T[R++]=F>>6&63|128,T[R++]=F&63|128):(T[R++]=F>>12|224,T[R++]=F>>6&63|128,T[R++]=F&63|128);U=R-x-D}else U=u(S,x+D,Q);U<24?T[x++]=96|U:U<256?(D<2&&T.copyWithin(x+2,x+1,x+1+U),T[x++]=120,T[x++]=U):U<65536?(D<3&&T.copyWithin(x+3,x+2,x+2+U),T[x++]=121,T[x++]=U>>8,T[x++]=U&255):(D<5&&T.copyWithin(x+5,x+3,x+3+U),T[x++]=122,be.setUint32(x,U),x+=4),x+=U}else if(z==="number")if(!this.alwaysUseFloat&&S>>>0===S)S<24?T[x++]=S:S<256?(T[x++]=24,T[x++]=S):S<65536?(T[x++]=25,T[x++]=S>>8,T[x++]=S&255):(T[x++]=26,be.setUint32(x,S),x+=4);else if(!this.alwaysUseFloat&&S>>0===S)S>=-24?T[x++]=31-S:S>=-256?(T[x++]=56,T[x++]=~S):S>=-65536?(T[x++]=57,be.setUint16(x,~S),x+=2):(T[x++]=58,be.setUint32(x,~S),x+=4);else{let L;if((L=this.useFloat32)>0&&S<4294967296&&S>=-2147483648){T[x++]=250,be.setFloat32(x,S);let D;if(L<4||(D=S*no[(T[x]&127)<<1|T[x+1]>>7])>>0===D){x+=4;return}else x--}T[x++]=251,be.setFloat64(x,S),x+=8}else if(z==="object")if(!S)T[x++]=246;else{if(a){let D=a.get(S);if(D){if(T[x++]=216,T[x++]=29,T[x++]=25,!D.references){let Q=a.idsToInsert||(a.idsToInsert=[]);D.references=[],Q.push(D)}D.references.push(x-n),x+=2;return}else a.set(S,{offset:x-n})}let L=S.constructor;if(L===Object)Z(S);else if(L===Array){U=S.length,U<24?T[x++]=128|U:ct(U);for(let D=0;D<U;D++)C(S[D])}else if(L===Map)if((this.mapsAsObjects?this.useTag259ForMaps!==!1:this.useTag259ForMaps)&&(T[x++]=217,T[x++]=1,T[x++]=3),U=S.size,U<24?T[x++]=160|U:U<256?(T[x++]=184,T[x++]=U):U<65536?(T[x++]=185,T[x++]=U>>8,T[x++]=U&255):(T[x++]=186,be.setUint32(x,U),x+=4),f.keyMap)for(let[D,Q]of S)C(f.encodeKey(D)),C(Q);else for(let[D,Q]of S)C(D),C(Q);else{for(let D=0,Q=Ui.length;D<Q;D++){let k=Tu[D];if(S instanceof k){let F=Ui[D],w=F.tag;w==null&&(w=F.getTag&&F.getTag.call(this,S)),w<24?T[x++]=192|w:w<256?(T[x++]=216,T[x++]=w):w<65536?(T[x++]=217,T[x++]=w>>8,T[x++]=w&255):w>-1&&(T[x++]=218,be.setUint32(x,w),x+=4),F.encode.call(this,S,C,q);return}}if(S[Symbol.iterator]){if(li){let D=new Error("Iterable should be serialized as iterator");throw D.iteratorNotHandled=!0,D}T[x++]=159;for(let D of S)C(D);T[x++]=255;return}if(S[Symbol.asyncIterator]||di(S)){let D=new Error("Iterable/blob should be serialized as iterator");throw D.iteratorNotHandled=!0,D}if(this.useToJSON&&S.toJSON){const D=S.toJSON();if(D!==S)return C(D)}Z(S)}}else if(z==="boolean")T[x++]=S?245:244;else if(z==="bigint"){if(S<BigInt(1)<<BigInt(64)&&S>=0)T[x++]=27,be.setBigUint64(x,S);else if(S>-(BigInt(1)<<BigInt(64))&&S<0)T[x++]=59,be.setBigUint64(x,-S-BigInt(1));else if(this.largeBigIntToFloat)T[x++]=251,be.setFloat64(x,Number(S));else{S>=BigInt(0)?T[x++]=194:(T[x++]=195,S=BigInt(-1)-S);let L=[];for(;S;)L.push(Number(S&BigInt(255))),S>>=BigInt(8);Hi(new Uint8Array(L.reverse()),q);return}x+=8}else if(z==="undefined")T[x++]=247;else throw new Error("Unknown type: "+z)},Z=this.useRecords===!1?this.variableMapSize?S=>{let z=Object.keys(S),U=Object.values(S),L=z.length;if(L<24?T[x++]=160|L:L<256?(T[x++]=184,T[x++]=L):L<65536?(T[x++]=185,T[x++]=L>>8,T[x++]=L&255):(T[x++]=186,be.setUint32(x,L),x+=4),f.keyMap)for(let D=0;D<L;D++)C(f.encodeKey(z[D])),C(U[D]);else for(let D=0;D<L;D++)C(z[D]),C(U[D])}:S=>{T[x++]=185;let z=x-n;x+=2;let U=0;if(f.keyMap)for(let L in S)(typeof S.hasOwnProperty!="function"||S.hasOwnProperty(L))&&(C(f.encodeKey(L)),C(S[L]),U++);else for(let L in S)(typeof S.hasOwnProperty!="function"||S.hasOwnProperty(L))&&(C(L),C(S[L]),U++);T[z+++n]=U>>8,T[z+n]=U&255}:(S,z)=>{let U,L=o.transitions||(o.transitions=Object.create(null)),D=0,Q=0,k,F;if(this.keyMap){F=Object.keys(S).map(R=>this.encodeKey(R)),Q=F.length;for(let R=0;R<Q;R++){let W=F[R];U=L[W],U||(U=L[W]=Object.create(null),D++),L=U}}else for(let R in S)(typeof S.hasOwnProperty!="function"||S.hasOwnProperty(R))&&(U=L[R],U||(L[ze]&1048576&&(k=L[ze]&65535),U=L[R]=Object.create(null),D++),L=U,Q++);let w=L[ze];if(w!==void 0)w&=65535,T[x++]=217,T[x++]=w>>8|224,T[x++]=w&255;else if(F||(F=L.__keys__||(L.__keys__=Object.keys(S))),k===void 0?(w=o.nextId++,w||(w=0,o.nextId=1),w>=oc&&(o.nextId=(w=_)+1)):w=k,o[w]=F,w<_){T[x++]=217,T[x++]=w>>8|224,T[x++]=w&255,L=o.transitions;for(let R=0;R<Q;R++)(L[ze]===void 0||L[ze]&1048576)&&(L[ze]=w),L=L[F[R]];L[ze]=w|1048576,i=!0}else{if(L[ze]=w,be.setUint32(x,3655335680),x+=3,D&&(N+=H*D),A.length>=oc-_&&(A.shift()[ze]=void 0),A.push(L),ct(Q+2),C(57344+w),C(F),z)return;for(let R in S)(typeof S.hasOwnProperty!="function"||S.hasOwnProperty(R))&&C(S[R]);return}if(Q<24?T[x++]=128|Q:ct(Q),!z)for(let R in S)(typeof S.hasOwnProperty!="function"||S.hasOwnProperty(R))&&C(S[R])},q=S=>{let z;if(S>16777216){if(S-n>ac)throw new Error("Encoded buffer would be larger than maximum buffer size");z=Math.min(ac,Math.round(Math.max((S-n)*(S>67108864?1.25:2),4194304)/4096)*4096)}else z=(Math.max(S-n<<2,T.length-1)>>12)+1<<12;let U=new fi(z);return be=new DataView(U.buffer,0,z),T.copy?T.copy(U,0,n,S):U.set(T.slice(n,S)),x-=n,n=0,Ot=U.length-10,T=U};let J=100,te=1e3;this.encodeAsIterable=function(S,z){return K(S,z,X)},this.encodeAsAsyncIterable=function(S,z){return K(S,z,se)};function*X(S,z,U){let L=S.constructor;if(L===Object){let D=f.useRecords!==!1;D?Z(S,!0):cc(Object.keys(S).length,160);for(let Q in S){let k=S[Q];D||C(Q),k&&typeof k=="object"?z[Q]?yield*X(k,z[Q]):yield*$(k,z,Q):C(k)}}else if(L===Array){let D=S.length;ct(D);for(let Q=0;Q<D;Q++){let k=S[Q];k&&(typeof k=="object"||x-n>J)?z.element?yield*X(k,z.element):yield*$(k,z,"element"):C(k)}}else if(S[Symbol.iterator]&&!S.buffer){T[x++]=159;for(let D of S)D&&(typeof D=="object"||x-n>J)?z.element?yield*X(D,z.element):yield*$(D,z,"element"):C(D);T[x++]=255}else di(S)?(cc(S.size,64),yield T.subarray(n,x),yield S,V()):S[Symbol.asyncIterator]?(T[x++]=159,yield T.subarray(n,x),yield S,V(),T[x++]=255):C(S);U&&x>n?yield T.subarray(n,x):x-n>J&&(yield T.subarray(n,x),V())}function*$(S,z,U){let L=x-n;try{C(S),x-n>J&&(yield T.subarray(n,x),V())}catch(D){if(D.iteratorNotHandled)z[U]={},x=n+L,yield*X.call(this,S,z[U]);else throw D}}function V(){J=te,f.encode(null,hi)}function K(S,z,U){return z&&z.chunkThreshold?J=te=z.chunkThreshold:J=100,S&&typeof S=="object"?(f.encode(null,hi),U(S,f.iterateProperties||(f.iterateProperties={}),!0)):[f.encode(S)]}async function*se(S,z){for(let U of X(S,z,!0)){let L=U.constructor;if(L===ic||L===Uint8Array)yield U;else if(di(U)){let D=U.stream().getReader(),Q;for(;!(Q=await D.read()).done;)yield Q.value}else if(U[Symbol.asyncIterator])for await(let D of U)V(),D?yield*se(D,z.async||(z.async={})):yield f.encode(D);else yield U}}}useBuffer(e){T=e,be=new DataView(T.buffer,T.byteOffset,T.byteLength),x=0}clearSharedData(){this.structures&&(this.structures=[]),this.sharedValues&&(this.sharedValues=void 0)}updateSharedData(){let e=this.sharedVersion||0;this.sharedVersion=e+1;let n=this.structures.slice(0),r=new Ru(n,this.sharedValues,this.sharedVersion),i=this.saveShared(r,o=>(o&&o.version||0)==e);return i===!1?(r=this.getShared()||{},this.structures=r.structures||[],this.sharedValues=r.packedValues,this.sharedVersion=r.version,this.structures.nextId=this.structures.length):n.forEach((o,a)=>this.structures[a]=o),i}}function cc(t,e){t<24?T[x++]=e|t:t<256?(T[x++]=e|24,T[x++]=t):t<65536?(T[x++]=e|25,T[x++]=t>>8,T[x++]=t&255):(T[x++]=e|26,be.setUint32(x,t),x+=4)}class Ru{constructor(e,n,r){this.structures=e,this.packedValues=n,this.version=r}}function ct(t){t<24?T[x++]=128|t:t<256?(T[x++]=152,T[x++]=t):t<65536?(T[x++]=153,T[x++]=t>>8,T[x++]=t&255):(T[x++]=154,be.setUint32(x,t),x+=4)}const D_=typeof Blob>"u"?function(){}:Blob;function di(t){if(t instanceof D_)return!0;let e=t[Symbol.toStringTag];return e==="Blob"||e==="File"}function Rr(t,e){switch(typeof t){case"string":if(t.length>3){if(e.objectMap[t]>-1||e.values.length>=e.maxValues)return;let r=e.get(t);if(r)++r.count==2&&e.values.push(t);else if(e.set(t,{count:1}),e.samplingPackedValues){let i=e.samplingPackedValues.get(t);i?i.count++:e.samplingPackedValues.set(t,{count:1})}}break;case"object":if(t)if(t instanceof Array)for(let r=0,i=t.length;r<i;r++)Rr(t[r],e);else{let r=!e.encoder.useRecords;for(var n in t)t.hasOwnProperty(n)&&(r&&Rr(n,e),Rr(t[n],e))}break;case"function":console.log(t)}}const U_=new Uint8Array(new Uint16Array([1]).buffer)[0]==1;Tu=[Date,Set,Error,RegExp,Qt,ArrayBuffer,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?function(){}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?function(){}:BigInt64Array,Float32Array,Float64Array,Ru];Ui=[{tag:1,encode(t,e){let n=t.getTime()/1e3;(this.useTimestamp32||t.getMilliseconds()===0)&&n>=0&&n<4294967296?(T[x++]=26,be.setUint32(x,n),x+=4):(T[x++]=251,be.setFloat64(x,n),x+=8)}},{tag:258,encode(t,e){let n=Array.from(t);e(n)}},{tag:27,encode(t,e){e([t.name,t.message])}},{tag:27,encode(t,e){e(["RegExp",t.source,t.flags])}},{getTag(t){return t.tag},encode(t,e){e(t.value)}},{encode(t,e,n){Hi(t,n)}},{getTag(t){if(t.constructor===Uint8Array&&(this.tagUint8Array||rr&&this.tagUint8Array!==!1))return 64},encode(t,e,n){Hi(t,n)}},at(68,1),at(69,2),at(70,4),at(71,8),at(72,1),at(77,2),at(78,4),at(79,8),at(85,4),at(86,8),{encode(t,e){let n=t.packedValues||[],r=t.structures||[];if(n.values.length>0){T[x++]=216,T[x++]=51,ct(4);let i=n.values;e(i),ct(0),ct(0),packedObjectMap=Object.create(sharedPackedObjectMap||null);for(let o=0,a=i.length;o<a;o++)packedObjectMap[i[o]]=o}if(r){be.setUint32(x,3655335424),x+=3;let i=r.slice(0);i.unshift(57344),i.push(new Qt(t.version,1399353956)),e(i)}else e(new Qt(t.version,1399353956))}}];function at(t,e){return!U_&&e>1&&(t-=4),{tag:t,encode:function(r,i){let o=r.byteLength,a=r.byteOffset||0,u=r.buffer||r;i(rr?is.from(u,a,o):new Uint8Array(u,a,o))}}}function Hi(t,e){let n=t.byteLength;n<24?T[x++]=64+n:n<256?(T[x++]=88,T[x++]=n):n<65536?(T[x++]=89,T[x++]=n>>8,T[x++]=n&255):(T[x++]=90,be.setUint32(x,n),x+=4),x+n>=T.length&&e(x+n),T.set(t.buffer?t:new Uint8Array(t),x),x+=n}function H_(t,e){let n,r=e.length*2,i=t.length-r;e.sort((o,a)=>o.offset>a.offset?1:-1);for(let o=0;o<e.length;o++){let a=e[o];a.id=o;for(let u of a.references)t[u++]=o>>8,t[u]=o&255}for(;n=e.pop();){let o=n.offset;t.copyWithin(o+r,o,i),r-=2;let a=o+r;t[a++]=216,t[a++]=28,i=o}return t}function uc(t,e){be.setUint32(ke.position+t,x-ke.position-t+1);let n=ke;ke=null,e(n[0]),e(n[1])}let so=new Ou({useRecords:!1});so.encode;so.encodeAsIterable;so.encodeAsAsyncIterable;const fc=512,P_=1024,hi=2048;function Mu(t){return new Ou({tagUint8Array:!1,useRecords:!1}).encode(t)}function L_(t){return Cu(t)}const B_=(t,e)=>t.length===e.length&&t.every((n,r)=>n===e[r]),io=(t,e)=>B_(t,e),$_=async(t,e)=>{let n;const r=new Promise((i,o)=>{n=setTimeout(()=>o(new F_(`withTimeout: timed out after ${e}ms`)),e)});try{return await Promise.race([t,r])}finally{clearTimeout(n)}};class F_ extends Error{constructor(e){super(e),this.name="TimeoutError"}}class Kr extends tn{documentId;#e;#t;#r;#n=vt();#s=6e4;#i={};#c=new Map;constructor(e,n={}){super(),this.documentId=e,"timeoutDelay"in n&&n.timeoutDelay&&(this.#s=n.timeoutDelay),"heads"in n&&(this.#r=n.heads);const r=vt();this.#e=gt(`automerge-repo:dochandle:${this.documentId.slice(0,5)}`);const i=this.#s,o=Xg({actions:{onUpdate:$n(({context:a,event:u})=>{const f=a.doc;Kg(u,dc);const{callback:d}=u.payload;return{doc:d(f)}}),onDelete:$n(()=>(this.emit("delete",{handle:this}),{doc:vt()})),onUnavailable:$n(()=>({doc:vt()})),onUnload:$n(()=>({doc:vt()}))}}).createMachine({initial:"idle",context:{documentId:e,doc:r},on:{UPDATE:{actions:"onUpdate"},UNLOAD:".unloaded",DELETE:".deleted"},states:{idle:{on:{BEGIN:"loading"}},loading:{on:{REQUEST:"requesting",DOC_READY:"ready"},after:{[i]:"unavailable"}},requesting:{on:{DOC_UNAVAILABLE:"unavailable",DOC_READY:"ready"},after:{[i]:"unavailable"}},unavailable:{entry:"onUnavailable",on:{DOC_READY:"ready"}},ready:{},unloaded:{entry:"onUnload",on:{RELOAD:"loading"}},deleted:{entry:"onDelete",type:"final"}}});this.#t=Gn(o),this.#t.subscribe(a=>{const u=this.#n,f=a.context.doc;this.#e(`â ${a.value} %o`,f),this.#u(u,f)}),this.#t.start(),this.begin()}get#a(){return this.#t?.getSnapshot().context.doc}get#o(){return this.#t?.getSnapshot().value}#f(e){const n=Array.isArray(e)?e:[e];return Qg(this.#t,r=>n.some(i=>r.matches(i)),{timeout:this.#s*2})}#l(e){let n=null;if(this.#t.send({type:dc,payload:{callback:r=>{try{return e(r)}catch(i){return n=i,r}}}}),n)throw n}#u(e,n){const r=wt(e),i=wt(n);if(!io(dt(i),dt(r))){this.emit("heads-changed",{handle:this,doc:n});const a=Zs(n,r,i);a.length>0&&this.emit("change",{handle:this,doc:n,patches:a,patchInfo:{before:e,after:n,source:"change"}}),this.isReady()||this.#t.send({type:lc})}this.#n=n}get url(){return bu({documentId:this.documentId,heads:this.#r})}isReady=()=>this.inState(["ready"]);isUnloaded=()=>this.inState(["unloaded"]);isDeleted=()=>this.inState(["deleted"]);isUnavailable=()=>this.inState(["unavailable"]);inState=e=>e.some(n=>this.#t.getSnapshot().matches(n));get state(){return this.#t.getSnapshot().value}async whenReady(e=["ready"]){await $_(this.#f(e),this.#s)}doc(){if(!this.isReady())throw new Error("DocHandle is not ready");return this.#r?S0(this.#a,Vt(this.#r)):this.#a}docSync(){return console.warn("docSync is deprecated. Use doc() instead. This function will be removed as part of the 2.0 release."),this.doc()}heads(){if(!this.isReady())throw new Error("DocHandle is not ready");return this.#r?this.#r:dt(wt(this.#a))}begin(){this.#t.send({type:z_})}history(){if(this.isReady())return U0(this.#a).map(e=>dt([e]))}view(e){if(!this.isReady())throw new Error(`DocHandle#${this.documentId} is not ready. Check \`handle.isReady()\` before calling view().`);const n=JSON.stringify(e),r=this.#c.get(n);if(r)return r;const i=new Kr(this.documentId,{heads:e,timeoutDelay:this.#s});return i.update(()=>$r(this.#a)),i.doneLoading(),this.#c.set(n,i),i}diff(e,n){if(!this.isReady())throw new Error(`DocHandle#${this.documentId} is not ready. Check \`handle.isReady()\` before calling diff().`);const r=this.#a;if(!r)throw new Error("Document not available");if(e instanceof Kr){if(!e.isReady())throw new Error("Cannot diff against a handle that isn't ready");const a=e.heads();if(!a)throw new Error("Other document's heads not available");const u=ka($r(r),e.doc());return Zs(u,Vt(this.heads()),Vt(a))}const i=n?e:this.heads()||[],o=n||e;return Zs(r,Vt(i),Vt(o))}metadata(e){if(this.isReady())return e||(e=this.heads()[0]),H0(this.#a,Vt([e])[0])||void 0}update(e){this.#l(e)}doneLoading(){this.#t.send({type:lc})}setSyncInfo(e,n){this.#i[e]=n,this.emit("remote-heads",{storageId:e,heads:n.lastHeads,timestamp:n.lastSyncTimestamp})}getRemoteHeads(e){return this.#i[e]?.lastHeads}getSyncInfo(e){return this.#i[e]}change(e,n={}){if(!this.isReady())throw new Error(`DocHandle#${this.documentId} is in ${this.state} and not ready. Check \`handle.isReady()\` before accessing the document.`);if(this.#r)throw new Error(`DocHandle#${this.documentId} is in view-only mode at specific heads. Use clone() to create a new document from this state.`);this.#l(r=>A0(r,n,e))}changeAt(e,n,r={}){if(!this.isReady())throw new Error(`DocHandle#${this.documentId} is not ready. Check \`handle.isReady()\` before accessing the document.`);if(this.#r)throw new Error(`DocHandle#${this.documentId} is in view-only mode at specific heads. Use clone() to create a new document from this state.`);let i;return this.#l(o=>{const a=E0(o,Vt(e),r,n);return i=a.newHeads?dt(a.newHeads):void 0,a.newDoc}),i}isReadOnly(){return!!this.#r}merge(e){if(!this.isReady()||!e.isReady())throw new Error("Both handles must be ready to merge");if(this.#r)throw new Error(`DocHandle#${this.documentId} is in view-only mode at specific heads. Use clone() to create a new document from this state.`);const n=e.doc();this.update(r=>ka(r,n))}unavailable(){this.#t.send({type:K_})}request(){this.#o==="loading"&&this.#t.send({type:W_})}unload(){this.#t.send({type:q_})}reload(){this.#t.send({type:G_})}delete(){this.#t.send({type:J_})}broadcast(e){this.emit("ephemeral-message-outbound",{handle:this,data:new Uint8Array(Mu(e))})}metrics(){return zi(this.#a)}}const N_={REQUESTING:"requesting",READY:"ready",UNLOADED:"unloaded",DELETED:"deleted",UNAVAILABLE:"unavailable"},{REQUESTING:Ir,READY:ut,UNLOADED:V_,DELETED:Ar,UNAVAILABLE:qe}=N_,z_="BEGIN",W_="REQUEST",lc="DOC_READY",dc="UPDATE",q_="UNLOAD",G_="RELOAD",J_="DELETE",K_="DOC_UNAVAILABLE";class Y_ extends tn{#e=new Map;#t=new Set;#r=new Map;#n=new Set;#s=new Map;#i=gt("automerge-repo:remote-heads-subscriptions");subscribeToRemotes(e){this.#i("subscribeToRemotes",e);const n=[];for(const r of e)this.#t.has(r)||(this.#t.add(r),n.push(r));n.length>0&&this.emit("change-remote-subs",{add:n,peers:Array.from(this.#n)})}unsubscribeFromRemotes(e){this.#i("subscribeToRemotes",e);const n=[];for(const r of e)this.#t.has(r)&&(this.#t.delete(r),this.#r.has(r)||n.push(r));n.length>0&&this.emit("change-remote-subs",{remove:n,peers:Array.from(this.#n)})}handleControlMessage(e){const n=[],r=[],i=[];if(this.#i("handleControlMessage",e),e.add)for(const o of e.add){let a=this.#r.get(o);(this.#t.has(o)||a)&&i.push(o),a||(a=new Set,this.#r.set(o,a),this.#t.has(o)||n.push(o)),a.add(e.senderId)}if(e.remove)for(const o of e.remove){const a=this.#r.get(o);a&&(a.delete(e.senderId),a.size==0&&!this.#t.has(o)&&r.push(o))}(n.length>0||r.length>0)&&this.emit("change-remote-subs",{peers:Array.from(this.#n),add:n,remove:r});for(const o of i){const a=this.#s.get(e.senderId);if(a)for(const u of a){const f=this.#e.get(u);if(!f)continue;const d=f.get(o);d&&this.emit("notify-remote-heads",{targetId:e.senderId,documentId:u,heads:d.lastHeads,timestamp:d.lastSyncTimestamp,storageId:o})}}}handleRemoteHeads(e){this.#i("handleRemoteHeads",e);const n=this.#a(e);for(const r of n)this.#t.has(r.storageId)&&this.emit("remote-heads-changed",r);for(const r of n)for(const i of this.#n)i!==e.senderId&&this.emit("notify-remote-heads",{targetId:i,documentId:r.documentId,heads:r.remoteHeads,timestamp:r.timestamp,storageId:r.storageId});for(const r of n){const i=this.#r.get(r.storageId);if(i)for(const o of i)this.#c(o,r.documentId)&&this.emit("notify-remote-heads",{targetId:o,documentId:r.documentId,heads:r.remoteHeads,timestamp:r.timestamp,storageId:r.storageId})}}handleImmediateRemoteHeadsChanged(e,n,r){this.#i("handleLocalHeadsChanged",e,n,r);const i=this.#e.get(e),o=Date.now();if(!i)this.#e.set(e,new Map([[n,{lastSyncTimestamp:o,lastHeads:r}]]));else{const u=i.get(n);(!u||u.lastSyncTimestamp<Date.now())&&i.set(n,{lastSyncTimestamp:Date.now(),lastHeads:r})}const a=this.#r.get(n);if(a)for(const u of a)this.#c(u,e)&&this.emit("notify-remote-heads",{targetId:u,documentId:e,heads:r,timestamp:o,storageId:n})}addGenerousPeer(e){this.#i("addGenerousPeer",e),this.#n.add(e),this.#t.size>0&&this.emit("change-remote-subs",{add:Array.from(this.#t),peers:[e]});for(const[n,r]of this.#e)for(const[i,{lastHeads:o,lastSyncTimestamp:a}]of r)this.emit("notify-remote-heads",{targetId:e,documentId:n,heads:o,timestamp:a,storageId:i})}removePeer(e){this.#i("removePeer",e);const n=[];this.#n.delete(e),this.#s.delete(e);for(const[r,i]of this.#r)i.has(e)&&(i.delete(e),i.size==0&&(n.push(r),this.#r.delete(r)));n.length>0&&this.emit("change-remote-subs",{remove:n,peers:Array.from(this.#n)})}subscribePeerToDoc(e,n){let r=this.#s.get(e);r||(r=new Set,this.#s.set(e,r)),r.add(n);const i=this.#e.get(n);if(i)for(const[o,a]of i){const u=this.#r.get(o);u&&u.has(e)&&this.emit("notify-remote-heads",{targetId:e,documentId:n,heads:a.lastHeads,timestamp:a.lastSyncTimestamp,storageId:o})}}#c(e,n){const r=this.#s.get(e);return r&&r.has(n)}#a(e){const n=[],{documentId:r,newHeads:i}=e;for(const[o,{heads:a,timestamp:u}]of Object.entries(i)){if(!this.#t.has(o)&&!this.#r.has(o))continue;let f=this.#e.get(r);f||(f=new Map,this.#e.set(r,f));const d=f.get(o);d&&d.lastSyncTimestamp>=u||(f.set(o,{lastSyncTimestamp:u,lastHeads:a}),n.push({documentId:r,storageId:o,remoteHeads:a,timestamp:u}))}return n}}const Pi=(t,e)=>{let n=Date.now(),r,i;return function(...o){r=n+e-Date.now(),clearTimeout(i),i=setTimeout(()=>{t(...o),n=Date.now()},r)}},X_=t=>Q_(t)||Du(t)||ju(t)||Z_(t)||ep(t)||tp(t),Z_=t=>t.type==="doc-unavailable",ju=t=>t.type==="request",Q_=t=>t.type==="sync",Du=t=>t.type==="ephemeral",ep=t=>t.type==="remote-subscription-change",tp=t=>t.type==="remote-heads-changed",np=t=>`${t.senderId}:${t.sessionId}`;class rp extends tn{peerId;peerMetadata;#e;#t={};#r=0;#n=Math.random().toString(36).slice(2);#s={};adapters=[];constructor(e,n,r){super(),this.peerId=n,this.peerMetadata=r,this.#e=gt(`automerge-repo:network:${this.peerId}`),e.forEach(i=>this.addNetworkAdapter(i))}disconnect(){this.adapters.forEach(e=>e.disconnect())}reconnect(){this.adapters.forEach(e=>e.connect(this.peerId))}addNetworkAdapter(e){this.adapters.push(e),e.on("peer-candidate",({peerId:n,peerMetadata:r})=>{this.#e(`peer candidate: ${n} `),this.#t[n]||(this.#t[n]=e),this.emit("peer",{peerId:n,peerMetadata:r})}),e.on("peer-disconnected",({peerId:n})=>{this.#e(`peer disconnected: ${n} `),delete this.#t[n],this.emit("peer-disconnected",{peerId:n})}),e.on("message",n=>{if(!X_(n)){this.#e(`invalid message: ${JSON.stringify(n)}`);return}if(this.#e(`message from ${n.senderId}`),Du(n)){const r=np(n);(this.#s[r]===void 0||n.count>this.#s[r])&&(this.#s[r]=n.count,this.emit("message",n));return}this.emit("message",n)}),e.on("close",()=>{this.#e("adapter closed"),Object.entries(this.#t).forEach(([n,r])=>{r===e&&delete this.#t[n]}),this.adapters=this.adapters.filter(n=>n!==e)}),this.peerMetadata.then(n=>{e.connect(this.peerId,n)}).catch(n=>{this.#e("error connecting to network",n)})}removeNetworkAdapter(e){this.adapters=this.adapters.filter(n=>n!==e),e.disconnect()}send(e){const n=this.#t[e.targetId];if(!n){this.#e(`Tried to send message but peer not found: ${e.targetId}`);return}const i=(o=>o.type==="ephemeral"?"count"in o?o:{...o,count:++this.#r,sessionId:this.#n,senderId:this.peerId}:{...o,senderId:this.peerId})(e);this.#e("sending message %o",i),n.send(i)}isReady=()=>this.adapters.every(e=>e.isReady());whenReady=async()=>Promise.all(this.adapters.map(e=>e.whenReady()))}function Uu(t){let e=0;t.forEach(i=>{e+=i.length});const n=new Uint8Array(e);let r=0;return t.forEach(i=>{n.set(i,r),r+=i.length}),n}var Mr={exports:{}},sp=Mr.exports,hc;function ip(){return hc||(hc=1,function(t){(function(e,n){var r={};n(r);var i=r.default;for(var o in r)i[o]=r[o];t.exports=i})(sp,function(e){e.__esModule=!0,e.digestLength=32,e.blockSize=64;var n=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function r(g,y,m,v,A){for(var N,H,C,Z,q,J,te,X,$,V,K,se,S;A>=64;){for(N=y[0],H=y[1],C=y[2],Z=y[3],q=y[4],J=y[5],te=y[6],X=y[7],V=0;V<16;V++)K=v+V*4,g[V]=(m[K]&255)<<24|(m[K+1]&255)<<16|(m[K+2]&255)<<8|m[K+3]&255;for(V=16;V<64;V++)$=g[V-2],se=($>>>17|$<<15)^($>>>19|$<<13)^$>>>10,$=g[V-15],S=($>>>7|$<<25)^($>>>18|$<<14)^$>>>3,g[V]=(se+g[V-7]|0)+(S+g[V-16]|0);for(V=0;V<64;V++)se=(((q>>>6|q<<26)^(q>>>11|q<<21)^(q>>>25|q<<7))+(q&J^~q&te)|0)+(X+(n[V]+g[V]|0)|0)|0,S=((N>>>2|N<<30)^(N>>>13|N<<19)^(N>>>22|N<<10))+(N&H^N&C^H&C)|0,X=te,te=J,J=q,q=Z+se|0,Z=C,C=H,H=N,N=se+S|0;y[0]+=N,y[1]+=H,y[2]+=C,y[3]+=Z,y[4]+=q,y[5]+=J,y[6]+=te,y[7]+=X,v+=64,A-=64}return v}var i=function(){function g(){this.digestLength=e.digestLength,this.blockSize=e.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return g.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},g.prototype.clean=function(){for(var y=0;y<this.buffer.length;y++)this.buffer[y]=0;for(var y=0;y<this.temp.length;y++)this.temp[y]=0;this.reset()},g.prototype.update=function(y,m){if(m===void 0&&(m=y.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var v=0;if(this.bytesHashed+=m,this.bufferLength>0){for(;this.bufferLength<64&&m>0;)this.buffer[this.bufferLength++]=y[v++],m--;this.bufferLength===64&&(r(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(m>=64&&(v=r(this.temp,this.state,y,v,m),m%=64);m>0;)this.buffer[this.bufferLength++]=y[v++],m--;return this},g.prototype.finish=function(y){if(!this.finished){var m=this.bytesHashed,v=this.bufferLength,A=m/536870912|0,N=m<<3,H=m%64<56?64:128;this.buffer[v]=128;for(var C=v+1;C<H-8;C++)this.buffer[C]=0;this.buffer[H-8]=A>>>24&255,this.buffer[H-7]=A>>>16&255,this.buffer[H-6]=A>>>8&255,this.buffer[H-5]=A>>>0&255,this.buffer[H-4]=N>>>24&255,this.buffer[H-3]=N>>>16&255,this.buffer[H-2]=N>>>8&255,this.buffer[H-1]=N>>>0&255,r(this.temp,this.state,this.buffer,0,H),this.finished=!0}for(var C=0;C<8;C++)y[C*4+0]=this.state[C]>>>24&255,y[C*4+1]=this.state[C]>>>16&255,y[C*4+2]=this.state[C]>>>8&255,y[C*4+3]=this.state[C]>>>0&255;return this},g.prototype.digest=function(){var y=new Uint8Array(this.digestLength);return this.finish(y),y},g.prototype._saveState=function(y){for(var m=0;m<this.state.length;m++)y[m]=this.state[m]},g.prototype._restoreState=function(y,m){for(var v=0;v<this.state.length;v++)this.state[v]=y[v];this.bytesHashed=m,this.finished=!1,this.bufferLength=0},g}();e.Hash=i;var o=function(){function g(y){this.inner=new i,this.outer=new i,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var m=new Uint8Array(this.blockSize);if(y.length>this.blockSize)new i().update(y).finish(m).clean();else for(var v=0;v<y.length;v++)m[v]=y[v];for(var v=0;v<m.length;v++)m[v]^=54;this.inner.update(m);for(var v=0;v<m.length;v++)m[v]^=106;this.outer.update(m),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate);for(var v=0;v<m.length;v++)m[v]=0}return g.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},g.prototype.clean=function(){for(var y=0;y<this.istate.length;y++)this.ostate[y]=this.istate[y]=0;this.inner.clean(),this.outer.clean()},g.prototype.update=function(y){return this.inner.update(y),this},g.prototype.finish=function(y){return this.outer.finished?this.outer.finish(y):(this.inner.finish(y),this.outer.update(y,this.digestLength).finish(y)),this},g.prototype.digest=function(){var y=new Uint8Array(this.digestLength);return this.finish(y),y},g}();e.HMAC=o;function a(g){var y=new i().update(g),m=y.digest();return y.clean(),m}e.hash=a,e.default=a;function u(g,y){var m=new o(g).update(y),v=m.digest();return m.clean(),v}e.hmac=u;function f(g,y,m,v){var A=v[0];if(A===0)throw new Error("hkdf: cannot expand more");y.reset(),A>1&&y.update(g),m&&y.update(m),y.update(v),y.finish(g),v[0]++}var d=new Uint8Array(e.digestLength);function _(g,y,m,v){y===void 0&&(y=d),v===void 0&&(v=32);for(var A=new Uint8Array([1]),N=u(y,g),H=new o(N),C=new Uint8Array(H.digestLength),Z=C.length,q=new Uint8Array(v),J=0;J<v;J++)Z===C.length&&(f(C,H,m,A),Z=0),q[J]=C[Z++];return H.clean(),C.fill(0),A.fill(0),q}e.hkdf=_;function h(g,y,m,v){for(var A=new o(g),N=A.digestLength,H=new Uint8Array(4),C=new Uint8Array(N),Z=new Uint8Array(N),q=new Uint8Array(v),J=0;J*N<v;J++){var te=J+1;H[0]=te>>>24&255,H[1]=te>>>16&255,H[2]=te>>>8&255,H[3]=te>>>0&255,A.reset(),A.update(y),A.update(H),A.finish(Z);for(var X=0;X<N;X++)C[X]=Z[X];for(var X=2;X<=m;X++){A.reset(),A.update(Z).finish(Z);for(var $=0;$<N;$++)C[$]^=Z[$]}for(var X=0;X<N&&J*N+X<v;X++)q[J*N+X]=C[X]}for(var J=0;J<N;J++)C[J]=Z[J]=0;for(var J=0;J<4;J++)H[J]=0;return A.clean(),q}e.pbkdf2=h})}(Mr)),Mr.exports}var op=ip();function Hu(t){const e=op.hash(t);return cp(e)}function ap(t){const e=new TextEncoder,n=Uu(t.map(r=>e.encode(r)));return Hu(n)}function cp(t){return Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}class up extends tn{#e;#t=new Map;#r=new Map;#n=!1;#s=gt("automerge-repo:storage-subsystem");constructor(e){super(),this.#e=e}async id(){const e=await this.#e.load(["storage-adapter-id"]);let n;return e?n=new TextDecoder().decode(e):(n=pu(),await this.#e.save(["storage-adapter-id"],new TextEncoder().encode(n))),n}async load(e,n){const r=[e,n];return await this.#e.load(r)}async save(e,n,r){const i=[e,n];await this.#e.save(i,r)}async remove(e,n){const r=[e,n];await this.#e.remove(r)}async loadDocData(e){const n=await this.#e.loadRange([e,"snapshot"]),r=await this.#e.loadRange([e,"incremental"]),i=[],o=[];for(const a of n)a.data!==void 0&&(o.push({key:a.key,type:"snapshot",size:a.data.length}),i.push(a.data));for(const a of r)a.data!==void 0&&(o.push({key:a.key,type:"incremental",size:a.data.length}),i.push(a.data));return this.#r.set(e,o),i.length===0?null:Uu(i)}async loadDoc(e){const n=await this.loadDocData(e);if(!n)return null;const r=performance.now(),i=Wc(vt(),n),o=performance.now();return this.emit("document-loaded",{documentId:e,durationMillis:o-r,...zi(i)}),this.#t.set(e,wt(i)),i}async saveDoc(e,n){if(!this.#a(e,n))return;const r=this.#r.get(e)??[];this.#o(r)?await this.#c(e,n,r):await this.#i(e,n),this.#t.set(e,wt(n))}async removeDoc(e){await this.#e.removeRange([e,"snapshot"]),await this.#e.removeRange([e,"incremental"]),await this.#e.removeRange([e,"sync-state"])}async#i(e,n){const r=D0(n,this.#t.get(e)??[]);if(r&&r.length>0){const i=[e,"incremental",Hu(r)];this.#s(`Saving incremental ${i} for document ${e}`),await this.#e.save(i,r),this.#r.has(e)||this.#r.set(e,[]),this.#r.get(e).push({key:i,type:"incremental",size:r.length}),this.#t.set(e,wt(n))}else return Promise.resolve()}async#c(e,n,r){this.#n=!0;const i=qc(n),o=ap(wt(n)),a=[e,"snapshot",o],u=new Set(r.map(d=>d.key).filter(d=>d[2]!==o));this.#s(`Saving snapshot ${a} for document ${e}`),this.#s(`deleting old chunks ${Array.from(u)}`),await this.#e.save(a,i);for(const d of u)await this.#e.remove(d);const f=this.#r.get(e)?.filter(d=>!u.has(d.key))??[];f.push({key:a,type:"snapshot",size:i.length}),this.#r.set(e,f),this.#n=!1}async loadSyncState(e,n){const r=[e,"sync-state",n];try{const i=await this.#e.load(r);return i?Jc(i):void 0}catch{this.#s(`Error loading sync state for ${e} from ${n}`);return}}async saveSyncState(e,n,r){const i=[e,"sync-state",n];await this.#e.save(i,Gc(r))}#a(e,n){const r=this.#t.get(e);if(!r)return!0;const i=wt(n);return!io(dt(i),dt(r))}#o(e){if(this.#n)return!1;let n=0,r=0;for(const i of e)i.type==="snapshot"?n+=i.size:r+=i.size;return n<1024||r>=n}}class Pu extends tn{}class fp extends Pu{#e;syncDebounceRate=100;#t=[];#r={};#n={};#s={};#i=[];#c;#a=!1;#o;#f;constructor({handle:e,peerId:n,onLoadSyncState:r}){super(),this.#c=n,this.#o=e,this.#f=r??(()=>Promise.resolve(void 0));const i=e.documentId.slice(0,5);this.#e=gt(`automerge-repo:docsync:${i}`),e.on("change",Pi(()=>this.#l(),this.syncDebounceRate)),e.on("ephemeral-message-outbound",o=>this.#u(o)),(async()=>this.#m())()}get peerStates(){return this.#n}get documentId(){return this.#o.documentId}async#l(){try{await this.#o.whenReady();const e=this.#o.doc();this.#t.forEach(n=>this.#p(n,e))}catch{console.log("sync with peers threw an exception")}}async#u({data:e}){this.#e("broadcastToPeers",this.#t),this.#t.forEach(n=>this.#g(n,e))}#g(e,n){this.#e(`sendEphemeralMessage ->${e}`);const r={type:"ephemeral",targetId:e,documentId:this.#o.documentId,data:n};this.emit("message",r)}#h(e,n){this.#b(e),e in this.#n||(this.#n[e]="unknown");const r=this.#s[e];if(r){n(r);return}let i=this.#r[e];i||(this.#f(e).then(o=>{this.#w(e,o??M0())}).catch(o=>{this.#e(`Error loading sync state for ${e}: ${o}`)}),i=this.#r[e]=[]),i.push(n)}#b(e){this.#t.includes(e)||(this.#t.push(e),this.emit("open-doc",{documentId:this.documentId,peerId:e}))}#w(e,n){const r=this.#r[e];if(r)for(const i of r)i(n);delete this.#r[e],this.#s[e]=n}#_(e,n){this.#s[e]=n,this.emit("sync-state",{peerId:e,syncState:n,documentId:this.#o.documentId})}#p(e,n){this.#e(`sendSyncMessage ->${e}`),this.#h(e,r=>{const[i,o]=O0(n,r);if(o){this.#_(e,i);const a=wt(n).length===0;!this.#o.isReady()&&a&&i.sharedHeads.length===0&&!Object.values(this.#n).includes("has")&&this.#n[e]==="unknown"?this.emit("message",{type:"request",targetId:e,documentId:this.#o.documentId,data:o}):this.emit("message",{type:"sync",targetId:e,data:o,documentId:this.#o.documentId}),a||(this.#n[e]="has")}})}hasPeer(e){return this.#t.includes(e)}async beginSync(e){this.#o.whenReady([ut,Ir,qe]).then(()=>{this.#a=!0,this.#d()}).catch(r=>{console.log("caught whenready",r),this.#a=!0,this.#d()}),this.#t.some(r=>this.#n[r]=="has")&&await this.#o.whenReady(),e.forEach(r=>{this.#h(r,i=>{const o=Jc(Gc(i));this.#_(r,o),this.#o.whenReady([ut,Ir,qe]).then(()=>{const a=this.#o.isReady()?this.#o.doc():vt(),u=e.every(d=>this.#n[d]in["unavailable","wants"]);a===void 0&&u||this.#p(r,a??vt())}).catch(a=>{this.#e(`Error loading doc for ${r}: ${a}`)})})})}endSync(e){this.#e(`removing peer ${e}`),this.#t=this.#t.filter(n=>n!==e),delete this.#n[e],this.#d()}receiveMessage(e){switch(e.type){case"sync":case"request":this.receiveSyncMessage(e);break;case"ephemeral":this.receiveEphemeralMessage(e);break;case"doc-unavailable":this.#n[e.senderId]="unavailable",this.#d();break;default:throw new Error(`unknown message type: ${e}`)}}receiveEphemeralMessage(e){if(e.documentId!==this.#o.documentId)throw new Error("channelId doesn't match documentId");const{senderId:n,data:r}=e,i=Cu(new Uint8Array(r));this.#o.emit("ephemeral-message",{handle:this.#o,senderId:n,message:i}),this.#t.forEach(o=>{o!==n&&this.emit("message",{...e,targetId:o})})}receiveSyncMessage(e){if(e.documentId!==this.#o.documentId)throw new Error("channelId doesn't match documentId");if(!this.#o.inState([ut,Ir,qe])){this.#i.push({message:e,received:new Date});return}this.#m(),this.#y(e)}#y(e){ju(e)&&(this.#n[e.senderId]="wants"),this.#d(),j0(e.data).heads.length>0&&(this.#n[e.senderId]="has"),this.#h(e.senderId,n=>{this.#o.update(r=>{const i=performance.now(),[o,a]=R0(r,n,e.data),u=performance.now();return this.emit("metrics",{type:"receive-sync-message",documentId:this.#o.documentId,durationMillis:u-i,...zi(r)}),this.#_(e.senderId,a),this.#p(e.senderId,r),o}),this.#d()})}#d(){this.#a&&this.#o.inState([Ir,qe])&&this.#t.every(e=>this.#n[e]==="unavailable"||this.#n[e]==="wants")&&(this.#t.filter(e=>this.#n[e]==="wants").forEach(e=>{this.#n[e]="unavailable";const n={type:"doc-unavailable",documentId:this.#o.documentId,targetId:e};this.emit("message",n)}),this.#o.unavailable())}#m(){for(const e of this.#i)this.#y(e.message);this.#i=[]}metrics(){return{peers:this.#t,size:this.#o.metrics()}}}const Er=gt("automerge-repo:collectionsync");class lp extends Pu{repo;#e=new Set;docSynchronizers={};#t={};#r;constructor(e,n=[]){super(),this.repo=e,this.#r=n.map(r=>Jn(r).documentId)}#n(e){return this.docSynchronizers[e.documentId]||(this.docSynchronizers[e.documentId]=this.#s(e)),this.docSynchronizers[e.documentId]}#s(e){const n=new fp({handle:e,peerId:this.repo.networkSubsystem.peerId,onLoadSyncState:async r=>{if(!this.repo.storageSubsystem)return;const{storageId:i,isEphemeral:o}=this.repo.peerMetadataByPeerId[r]||{};if(!(!i||o))return this.repo.storageSubsystem.loadSyncState(e.documentId,i)}});return n.on("message",r=>this.emit("message",r)),n.on("open-doc",r=>this.emit("open-doc",r)),n.on("sync-state",r=>this.emit("sync-state",r)),n.on("metrics",r=>this.emit("metrics",r)),n}async#i(e){const n=Array.from(this.#e),r=[];for(const i of n)await this.repo.sharePolicy(i,e)&&r.push(i);return r}async receiveMessage(e){Er(`onSyncMessage: ${e.senderId}, ${e.documentId}, ${"data"in e?e.data.byteLength+"bytes":""}`);const n=e.documentId;if(!n)throw new Error("received a message with an invalid documentId");if(this.#r.includes(n)){this.emit("metrics",{type:"doc-denied",documentId:n}),this.emit("message",{type:"doc-unavailable",documentId:n,targetId:e.senderId});return}this.#t[n]=!0;const r=await this.repo.find(n,{allowableStates:["ready","unavailable","requesting"]}),i=this.#n(r);i.receiveMessage(e);const o=await this.#i(n);i.beginSync(o.filter(a=>!i.hasPeer(a)))}addDocument(e){if(this.#t[e.documentId])return;const n=this.#n(e);this.#i(e.documentId).then(r=>{n.beginSync(r)})}removeDocument(e){Er(`removing document ${e}`);const n=this.docSynchronizers[e];n!==void 0&&this.peers.forEach(r=>n.endSync(r)),delete this.docSynchronizers[e],delete this.#t[e]}addPeer(e){if(Er(`adding ${e} & synchronizing with them`),!this.#e.has(e)){this.#e.add(e);for(const n of Object.values(this.docSynchronizers)){const{documentId:r}=n;this.repo.sharePolicy(e,r).then(i=>{i&&n.beginSync([e])})}}}removePeer(e){Er(`removing peer ${e}`),this.#e.delete(e);for(const n of Object.values(this.docSynchronizers))n.endSync(e)}get peers(){return Array.from(this.#e)}metrics(){return Object.fromEntries(Object.entries(this.docSynchronizers).map(([e,n])=>[e,n.metrics()]))}}function gc(t,e){let n=!1;return new Promise((r,i)=>{e?.addEventListener("abort",()=>{n||i(new DOMException("Operation aborted","AbortError"))},{once:!0}),t.then(o=>{r(o)}).catch(o=>{i(o)}).finally(()=>{n=!0})})}function dp(){return"peer-"+Math.random().toString(36).slice(4)}class hp extends tn{#e;networkSubsystem;storageSubsystem;#t;#r;#n={};synchronizer;sharePolicy=async()=>!0;peerMetadataByPeerId={};#s=new Y_;#i=!1;#c={};constructor({storage:e,network:n=[],peerId:r=dp(),sharePolicy:i,isEphemeral:o=e===void 0,enableRemoteHeadsGossiping:a=!1,denylist:u=[],saveDebounceRate:f=100}={}){super(),this.#i=a,this.#e=gt("automerge-repo:repo"),this.sharePolicy=i??this.sharePolicy,this.on("delete-document",({documentId:g})=>{this.synchronizer.removeDocument(g),d&&d.removeDoc(g).catch(y=>{this.#e("error deleting document",{documentId:g,err:y})})}),this.synchronizer=new lp(this,u),this.synchronizer.on("message",g=>{this.#e(`sending ${g.type} message to ${g.targetId}`),h.send(g)}),this.synchronizer.on("metrics",g=>this.emit("doc-metrics",g)),this.#i&&this.synchronizer.on("open-doc",({peerId:g,documentId:y})=>{this.#s.subscribePeerToDoc(g,y)});const d=e?new up(e):void 0;if(d&&d.on("document-loaded",g=>this.emit("doc-metrics",{type:"doc-loaded",...g})),this.storageSubsystem=d,this.#t=f,this.storageSubsystem){const g=({handle:y,doc:m})=>{this.storageSubsystem.saveDoc(y.documentId,m)};this.#r=Pi(g,this.#t)}else this.#r=()=>{};const _=(async()=>({storageId:await d?.id(),isEphemeral:o}))(),h=new rp(n,r,_);this.networkSubsystem=h,h.on("peer",async({peerId:g,peerMetadata:y})=>{this.#e("peer connected",{peerId:g}),y&&(this.peerMetadataByPeerId[g]={...y}),this.sharePolicy(g).then(m=>{m&&this.#i&&this.#s.addGenerousPeer(g)}).catch(m=>{console.log("error in share policy",{err:m})}),this.synchronizer.addPeer(g)}),h.on("peer-disconnected",({peerId:g})=>{this.synchronizer.removePeer(g),this.#s.removePeer(g)}),h.on("message",async g=>{this.#o(g)}),this.synchronizer.on("sync-state",g=>{this.#l(g);const y=this.#n[g.documentId],{storageId:m}=this.peerMetadataByPeerId[g.peerId]||{};if(!m)return;const v=y.getSyncInfo(m)?.lastHeads;g.syncState.theirHeads&&(!v||!io(v,dt(g.syncState.theirHeads)))&&g.syncState.theirHeads&&(y.setSyncInfo(m,{lastHeads:dt(g.syncState.theirHeads),lastSyncTimestamp:Date.now()}),m&&this.#i&&this.#s.handleImmediateRemoteHeadsChanged(g.documentId,m,dt(g.syncState.theirHeads)))}),this.#i&&(this.#s.on("notify-remote-heads",g=>{this.networkSubsystem.send({type:"remote-heads-changed",targetId:g.targetId,documentId:g.documentId,newHeads:{[g.storageId]:{heads:g.heads,timestamp:g.timestamp}}})}),this.#s.on("change-remote-subs",g=>{this.#e("change-remote-subs",g);for(const y of g.peers)this.networkSubsystem.send({type:"remote-subscription-change",targetId:y,add:g.add,remove:g.remove})}),this.#s.on("remote-heads-changed",({documentId:g,storageId:y,remoteHeads:m,timestamp:v})=>{this.#n[g].setSyncInfo(y,{lastHeads:m,lastSyncTimestamp:v})}))}#a(e){this.storageSubsystem&&(e.listeners("heads-changed").some(r=>r===this.#r)||e.on("heads-changed",this.#r)),this.synchronizer.addDocument(e)}#o(e){switch(e.type){case"remote-subscription-change":this.#i&&this.#s.handleControlMessage(e);break;case"remote-heads-changed":this.#i&&this.#s.handleRemoteHeads(e);break;case"sync":case"request":case"ephemeral":case"doc-unavailable":this.synchronizer.receiveMessage(e).catch(n=>{console.log("error receiving message",{err:n,message:e})})}}#f={};#l(e){if(!this.storageSubsystem)return;const{storageId:n,isEphemeral:r}=this.peerMetadataByPeerId[e.peerId]||{};if(!n||r)return;let i=this.#f[n];i||(i=this.#f[n]=Pi(({documentId:o,syncState:a})=>{this.storageSubsystem.saveSyncState(o,n,a)},this.#t)),i(e)}#u({documentId:e}){if(this.#n[e])return this.#n[e];if(!e)throw new Error(`Invalid documentId ${e}`);const n=new Kr(e);return this.#n[e]=n,n}get handles(){return this.#n}get peers(){return this.synchronizer.peers}getStorageIdOfPeer(e){return this.peerMetadataByPeerId[e]?.storageId}create(e){const{documentId:n}=Jn(m_()),r=this.#u({documentId:n});return this.#a(r),r.update(()=>{let i;return e?i=P0(e):i=k0(vt()),i}),r.doneLoading(),r}clone(e){if(!e.isReady())throw new Error(`Cloned handle is not yet in ready state.
        (Try await handle.whenReady() first.)`);const n=e.doc(),r=this.create();return r.update(()=>$r(n)),r}findWithProgress(e,n={}){const{signal:r}=n,{documentId:i,heads:o}=wu(e)?Jn(e):{documentId:vr(e),heads:void 0};if(this.#n[i]){const h=this.#n[i];if(h.state===qe)return{state:"unavailable",error:new Error(`Document ${e} is unavailable`),handle:h};if(h.state===Ar)return{state:"failed",error:new Error(`Document ${e} was deleted`),handle:h};if(h.state===ut)return{state:"ready",handle:o?h.view(o):h}}const a=this.#c[i];if(a){const h=this.#n[i];if(h&&(h.state===ut||h.state===qe||h.state===Ar||h.state==="loading"))return a}const u=this.#u({documentId:i}),f={state:"loading",progress:0,handle:u},d={subscribers:new Set,currentProgress:void 0,notify:h=>{d.currentProgress=h,d.subscribers.forEach(g=>g(h)),this.#c[i]=h},peek:()=>d.currentProgress||f,subscribe:h=>(d.subscribers.add(h),()=>d.subscribers.delete(h))};d.notify(f),this.#g(e,i,u,d,r?gc(new Promise(()=>{}),r):new Promise(()=>{}));const _={...f,peek:d.peek,subscribe:d.subscribe};return this.#c[i]=_,_}async#g(e,n,r,i,o){try{i.notify({state:"loading",progress:25,handle:r});const a=await(this.storageSubsystem?this.storageSubsystem.loadDoc(r.documentId):Promise.resolve(null)),u=await Promise.race([a,o]);if(u?(r.update(()=>u),r.doneLoading(),i.notify({state:"loading",progress:50,handle:r})):(await Promise.race([this.networkSubsystem.whenReady(),o]),r.request(),i.notify({state:"loading",progress:75,handle:r})),this.#a(r),await Promise.race([r.whenReady([ut,qe]),o]),r.state===qe){const f={state:"unavailable",handle:r};i.notify(f);return}if(r.state===Ar)throw new Error(`Document ${e} was deleted`);i.notify({state:"ready",handle:r})}catch(a){i.notify({state:"failed",error:a instanceof Error?a:new Error(String(a)),handle:this.#u({documentId:n})})}}async find(e,n={}){const{allowableStates:r=["ready"],signal:i}=n;if(i?.aborted)throw new Error("Operation aborted");const o=this.findWithProgress(e,{signal:i});if("subscribe"in o)return this.#a(o.handle),new Promise((a,u)=>{const f=o.subscribe(d=>{r.includes(d.handle.state)?(f(),a(d.handle)):d.state==="unavailable"?(f(),u(new Error(`Document ${e} is unavailable`))):d.state==="failed"&&(f(),u(d.error))})});if(o.handle.state===ut)return o.handle;if(await o.handle.whenReady([ut,qe]),o.handle.state==="unavailable"&&!r.includes(qe))throw new Error(`Document ${e} is unavailable`);return o.handle}async#h(e){if(this.#n[e])return this.#n[e];const n=this.#u({documentId:e}),r=await(this.storageSubsystem?this.storageSubsystem.loadDoc(n.documentId):Promise.resolve(null));return r?(n.update(()=>r),n.doneLoading()):(await this.networkSubsystem.whenReady(),n.request()),this.#a(n),n}async findClassic(e,n={}){const r=vr(e),{allowableStates:i,signal:o}=n;return gc((async()=>{const a=await this.#h(r);if(!i&&(await a.whenReady([ut,qe]),a.state===qe&&!o?.aborted))throw new Error(`Document ${e} is unavailable`);return a})(),o)}delete(e){const n=vr(e);this.#u({documentId:n}).delete(),delete this.#n[n],delete this.#c[n],this.emit("delete-document",{documentId:n})}async export(e){const n=vr(e),i=this.#u({documentId:n}).doc();return qc(i)}import(e){const n=L0(e),r=this.create();return r.update(()=>$r(n)),r}subscribeToRemotes=e=>{this.#i?(this.#e("subscribeToRemotes",{remotes:e}),this.#s.subscribeToRemotes(e)):this.#e("WARN: subscribeToRemotes called but remote heads gossiping is not enabled")};storageId=async()=>{if(this.storageSubsystem)return this.storageSubsystem.id()};async flush(e){if(!this.storageSubsystem)return;const n=e?e.map(r=>this.#n[r]):Object.values(this.#n);await Promise.all(n.map(async r=>this.storageSubsystem.saveDoc(r.documentId,r.doc())))}async removeFromCache(e){if(!this.#n[e]){this.#e(`WARN: removeFromCache called but handle not found in handleCache for documentId: ${e}`);return}const n=this.#u({documentId:e});await n.whenReady([ut,V_,Ar,qe]),n.doc()?(n.isReady()?n.unload():this.#e(`WARN: removeFromCache called but handle for documentId: ${e} in unexpected state: ${n.state}`),delete this.#n[e],delete this.#c[e],this.synchronizer.removeDocument(e)):this.#e(`WARN: removeFromCache called but doc undefined for documentId: ${e}`)}shutdown(){return this.networkSubsystem.adapters.forEach(e=>{e.disconnect()}),this.flush()}metrics(){return{documents:this.synchronizer.metrics()}}}class Lu extends tn{peerId;peerMetadata}const gp="/parking-lot/assets/automerge_wasm_bg-B_JtgnFP.wasm",_p=async(t={},e)=>{let n;if(e.startsWith("data:")){const r=e.replace(/^data:.*?base64,/,"");let i;if(typeof Buffer=="function"&&typeof Buffer.from=="function")i=Buffer.from(r,"base64");else if(typeof atob=="function"){const o=atob(r);i=new Uint8Array(o.length);for(let a=0;a<o.length;a++)i[a]=o.charCodeAt(a)}else throw new Error("Cannot decode base64-encoded data URL");n=await WebAssembly.instantiate(i,t)}else{const r=await fetch(e),i=r.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&i.startsWith("application/wasm"))n=await WebAssembly.instantiateStreaming(r,t);else{const o=await r.arrayBuffer();n=await WebAssembly.instantiate(o,t)}}return n.instance.exports};let b;function Bu(t){b=t}const St=new Array(128).fill(void 0);St.push(void 0,null,!0,!1);function Y(t){return St[t]}let et=0,kr=null;function Nn(){return(kr===null||kr.byteLength===0)&&(kr=new Uint8Array(b.memory.buffer)),kr}const pp=typeof TextEncoder>"u"?(0,module.require)("util").TextEncoder:TextEncoder;let jr=new pp("utf-8");const yp=typeof jr.encodeInto=="function"?function(t,e){return jr.encodeInto(t,e)}:function(t,e){const n=jr.encode(t);return e.set(n),{read:t.length,written:n.length}};function ht(t,e,n){if(n===void 0){const u=jr.encode(t),f=e(u.length,1)>>>0;return Nn().subarray(f,f+u.length).set(u),et=u.length,f}let r=t.length,i=e(r,1)>>>0;const o=Nn();let a=0;for(;a<r;a++){const u=t.charCodeAt(a);if(u>127)break;o[i+a]=u}if(a!==r){a!==0&&(t=t.slice(a)),i=n(i,r,r=a+t.length*3,1)>>>0;const u=Nn().subarray(i+a,i+r),f=yp(t,u);a+=f.written,i=n(i,r,a,1)>>>0}return et=a,i}let vn=null;function E(){return(vn===null||vn.buffer.detached===!0||vn.buffer.detached===void 0&&vn.buffer!==b.memory.buffer)&&(vn=new DataView(b.memory.buffer)),vn}let Vn=St.length;function M(t){Vn===St.length&&St.push(St.length+1);const e=Vn;return Vn=St[e],St[e]=t,e}function It(t,e){try{return t.apply(this,e)}catch(n){b.__wbindgen_exn_store(M(n))}}const mp=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let $u=new mp("utf-8",{ignoreBOM:!0,fatal:!0});$u.decode();function tt(t,e){return t=t>>>0,$u.decode(Nn().subarray(t,t+e))}function bp(t,e){return t=t>>>0,Nn().subarray(t/1,t/1+e)}function wp(t){t<132||(St[t]=Vn,Vn=t)}function B(t){const e=Y(t);return wp(t),e}function Li(t){const e=typeof t;if(e=="number"||e=="boolean"||t==null)return`${t}`;if(e=="string")return`"${t}"`;if(e=="symbol"){const i=t.description;return i==null?"Symbol":`Symbol(${i})`}if(e=="function"){const i=t.name;return typeof i=="string"&&i.length>0?`Function(${i})`:"Function"}if(Array.isArray(t)){const i=t.length;let o="[";i>0&&(o+=Li(t[0]));for(let a=1;a<i;a++)o+=", "+Li(t[a]);return o+="]",o}const n=/\[object ([^\]]+)\]/.exec(toString.call(t));let r;if(n&&n.length>1)r=n[1];else return toString.call(t);if(r=="Object")try{return"Object("+JSON.stringify(t)+")"}catch{return"Object"}return t instanceof Error?`${t.name}: ${t.message}
${t.stack}`:r}function ye(t){return t==null}function qt(t,e){if(!(t instanceof e))throw new Error(`expected instance of ${e.name}`)}function vp(t){try{const i=b.__wbindgen_add_to_stack_pointer(-16);b.create(i,M(t));var e=E().getInt32(i+0,!0),n=E().getInt32(i+4,!0),r=E().getInt32(i+8,!0);if(r)throw B(n);return ft.__wrap(e)}finally{b.__wbindgen_add_to_stack_pointer(16)}}function Sp(t,e){try{const o=b.__wbindgen_add_to_stack_pointer(-16);b.load(o,M(t),M(e));var n=E().getInt32(o+0,!0),r=E().getInt32(o+4,!0),i=E().getInt32(o+8,!0);if(i)throw B(r);return ft.__wrap(n)}finally{b.__wbindgen_add_to_stack_pointer(16)}}function xp(t){try{const i=b.__wbindgen_add_to_stack_pointer(-16);b.encodeChange(i,M(t));var e=E().getInt32(i+0,!0),n=E().getInt32(i+4,!0),r=E().getInt32(i+8,!0);if(r)throw B(n);return B(e)}finally{b.__wbindgen_add_to_stack_pointer(16)}}function Ip(t){try{const i=b.__wbindgen_add_to_stack_pointer(-16);b.decodeChange(i,M(t));var e=E().getInt32(i+0,!0),n=E().getInt32(i+4,!0),r=E().getInt32(i+8,!0);if(r)throw B(n);return B(e)}finally{b.__wbindgen_add_to_stack_pointer(16)}}function Ap(){const t=b.initSyncState();return nt.__wrap(t)}function Ep(t){try{const i=b.__wbindgen_add_to_stack_pointer(-16);b.importSyncState(i,M(t));var e=E().getInt32(i+0,!0),n=E().getInt32(i+4,!0),r=E().getInt32(i+8,!0);if(r)throw B(n);return nt.__wrap(e)}finally{b.__wbindgen_add_to_stack_pointer(16)}}function kp(t){qt(t,nt);const e=b.exportSyncState(t.__wbg_ptr);return B(e)}function Cp(t){try{const i=b.__wbindgen_add_to_stack_pointer(-16);b.encodeSyncMessage(i,M(t));var e=E().getInt32(i+0,!0),n=E().getInt32(i+4,!0),r=E().getInt32(i+8,!0);if(r)throw B(n);return B(e)}finally{b.__wbindgen_add_to_stack_pointer(16)}}function Tp(t){try{const i=b.__wbindgen_add_to_stack_pointer(-16);b.decodeSyncMessage(i,M(t));var e=E().getInt32(i+0,!0),n=E().getInt32(i+4,!0),r=E().getInt32(i+8,!0);if(r)throw B(n);return B(e)}finally{b.__wbindgen_add_to_stack_pointer(16)}}function Op(t){qt(t,nt);const e=b.encodeSyncState(t.__wbg_ptr);return B(e)}function Rp(t){try{const i=b.__wbindgen_add_to_stack_pointer(-16);b.decodeSyncState(i,M(t));var e=E().getInt32(i+0,!0),n=E().getInt32(i+4,!0),r=E().getInt32(i+8,!0);if(r)throw B(n);return nt.__wrap(e)}finally{b.__wbindgen_add_to_stack_pointer(16)}}const Mp=Object.freeze({Array:0,0:"Array",String:1,1:"String"}),_c=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>b.__wbg_automerge_free(t>>>0,1));class ft{static __wrap(e){e=e>>>0;const n=Object.create(ft.prototype);return n.__wbg_ptr=e,_c.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,_c.unregister(this),e}free(){const e=this.__destroy_into_raw();b.__wbg_automerge_free(e,0)}static new(e,n){try{const f=b.__wbindgen_add_to_stack_pointer(-16);var r=ye(e)?0:ht(e,b.__wbindgen_malloc,b.__wbindgen_realloc),i=et;b.automerge_new(f,r,i,n);var o=E().getInt32(f+0,!0),a=E().getInt32(f+4,!0),u=E().getInt32(f+8,!0);if(u)throw B(a);return ft.__wrap(o)}finally{b.__wbindgen_add_to_stack_pointer(16)}}clone(e){try{const u=b.__wbindgen_add_to_stack_pointer(-16);var n=ye(e)?0:ht(e,b.__wbindgen_malloc,b.__wbindgen_realloc),r=et;b.automerge_clone(u,this.__wbg_ptr,n,r);var i=E().getInt32(u+0,!0),o=E().getInt32(u+4,!0),a=E().getInt32(u+8,!0);if(a)throw B(o);return ft.__wrap(i)}finally{b.__wbindgen_add_to_stack_pointer(16)}}fork(e,n){try{const f=b.__wbindgen_add_to_stack_pointer(-16);var r=ye(e)?0:ht(e,b.__wbindgen_malloc,b.__wbindgen_realloc),i=et;b.automerge_fork(f,this.__wbg_ptr,r,i,M(n));var o=E().getInt32(f+0,!0),a=E().getInt32(f+4,!0),u=E().getInt32(f+8,!0);if(u)throw B(a);return ft.__wrap(o)}finally{b.__wbindgen_add_to_stack_pointer(16)}}pendingOps(){const e=b.automerge_pendingOps(this.__wbg_ptr);return B(e)}commit(e,n){var r=ye(e)?0:ht(e,b.__wbindgen_malloc,b.__wbindgen_realloc),i=et;const o=b.automerge_commit(this.__wbg_ptr,r,i,!ye(n),ye(n)?0:n);return B(o)}merge(e){try{const o=b.__wbindgen_add_to_stack_pointer(-16);qt(e,ft),b.automerge_merge(o,this.__wbg_ptr,e.__wbg_ptr);var n=E().getInt32(o+0,!0),r=E().getInt32(o+4,!0),i=E().getInt32(o+8,!0);if(i)throw B(r);return B(n)}finally{b.__wbindgen_add_to_stack_pointer(16)}}rollback(){return b.automerge_rollback(this.__wbg_ptr)}keys(e,n){try{const a=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_keys(a,this.__wbg_ptr,M(e),ye(n)?0:M(n));var r=E().getInt32(a+0,!0),i=E().getInt32(a+4,!0),o=E().getInt32(a+8,!0);if(o)throw B(i);return B(r)}finally{b.__wbindgen_add_to_stack_pointer(16)}}text(e,n){let r,i;try{const h=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_text(h,this.__wbg_ptr,M(e),ye(n)?0:M(n));var o=E().getInt32(h+0,!0),a=E().getInt32(h+4,!0),u=E().getInt32(h+8,!0),f=E().getInt32(h+12,!0),d=o,_=a;if(f)throw d=0,_=0,B(u);return r=d,i=_,tt(d,_)}finally{b.__wbindgen_add_to_stack_pointer(16),b.__wbindgen_free(r,i,1)}}spans(e,n){try{const a=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_spans(a,this.__wbg_ptr,M(e),ye(n)?0:M(n));var r=E().getInt32(a+0,!0),i=E().getInt32(a+4,!0),o=E().getInt32(a+8,!0);if(o)throw B(i);return B(r)}finally{b.__wbindgen_add_to_stack_pointer(16)}}splice(e,n,r,i){try{const u=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_splice(u,this.__wbg_ptr,M(e),n,r,M(i));var o=E().getInt32(u+0,!0),a=E().getInt32(u+4,!0);if(a)throw B(o)}finally{b.__wbindgen_add_to_stack_pointer(16)}}updateText(e,n){try{const o=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_updateText(o,this.__wbg_ptr,M(e),M(n));var r=E().getInt32(o+0,!0),i=E().getInt32(o+4,!0);if(i)throw B(r)}finally{b.__wbindgen_add_to_stack_pointer(16)}}updateSpans(e,n){try{const o=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_updateSpans(o,this.__wbg_ptr,M(e),M(n));var r=E().getInt32(o+0,!0),i=E().getInt32(o+4,!0);if(i)throw B(r)}finally{b.__wbindgen_add_to_stack_pointer(16)}}push(e,n,r){try{const a=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_push(a,this.__wbg_ptr,M(e),M(n),M(r));var i=E().getInt32(a+0,!0),o=E().getInt32(a+4,!0);if(o)throw B(i)}finally{b.__wbindgen_add_to_stack_pointer(16)}}pushObject(e,n){try{const u=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_pushObject(u,this.__wbg_ptr,M(e),M(n));var r=E().getInt32(u+0,!0),i=E().getInt32(u+4,!0),o=E().getInt32(u+8,!0),a=E().getInt32(u+12,!0);if(a)throw B(o);let f;return r!==0&&(f=tt(r,i).slice(),b.__wbindgen_free(r,i*1,1)),f}finally{b.__wbindgen_add_to_stack_pointer(16)}}insert(e,n,r,i){try{const u=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_insert(u,this.__wbg_ptr,M(e),n,M(r),M(i));var o=E().getInt32(u+0,!0),a=E().getInt32(u+4,!0);if(a)throw B(o)}finally{b.__wbindgen_add_to_stack_pointer(16)}}splitBlock(e,n,r){try{const a=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_splitBlock(a,this.__wbg_ptr,M(e),n,M(r));var i=E().getInt32(a+0,!0),o=E().getInt32(a+4,!0);if(o)throw B(i)}finally{b.__wbindgen_add_to_stack_pointer(16)}}joinBlock(e,n){try{const o=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_joinBlock(o,this.__wbg_ptr,M(e),n);var r=E().getInt32(o+0,!0),i=E().getInt32(o+4,!0);if(i)throw B(r)}finally{b.__wbindgen_add_to_stack_pointer(16)}}updateBlock(e,n,r){try{const a=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_updateBlock(a,this.__wbg_ptr,M(e),n,M(r));var i=E().getInt32(a+0,!0),o=E().getInt32(a+4,!0);if(o)throw B(i)}finally{b.__wbindgen_add_to_stack_pointer(16)}}getBlock(e,n,r){try{const u=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_getBlock(u,this.__wbg_ptr,M(e),n,ye(r)?0:M(r));var i=E().getInt32(u+0,!0),o=E().getInt32(u+4,!0),a=E().getInt32(u+8,!0);if(a)throw B(o);return B(i)}finally{b.__wbindgen_add_to_stack_pointer(16)}}insertObject(e,n,r){try{const f=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_insertObject(f,this.__wbg_ptr,M(e),n,M(r));var i=E().getInt32(f+0,!0),o=E().getInt32(f+4,!0),a=E().getInt32(f+8,!0),u=E().getInt32(f+12,!0);if(u)throw B(a);let d;return i!==0&&(d=tt(i,o).slice(),b.__wbindgen_free(i,o*1,1)),d}finally{b.__wbindgen_add_to_stack_pointer(16)}}put(e,n,r,i){try{const u=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_put(u,this.__wbg_ptr,M(e),M(n),M(r),M(i));var o=E().getInt32(u+0,!0),a=E().getInt32(u+4,!0);if(a)throw B(o)}finally{b.__wbindgen_add_to_stack_pointer(16)}}putObject(e,n,r){try{const u=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_putObject(u,this.__wbg_ptr,M(e),M(n),M(r));var i=E().getInt32(u+0,!0),o=E().getInt32(u+4,!0),a=E().getInt32(u+8,!0);if(a)throw B(o);return B(i)}finally{b.__wbindgen_add_to_stack_pointer(16)}}increment(e,n,r){try{const a=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_increment(a,this.__wbg_ptr,M(e),M(n),M(r));var i=E().getInt32(a+0,!0),o=E().getInt32(a+4,!0);if(o)throw B(i)}finally{b.__wbindgen_add_to_stack_pointer(16)}}get(e,n,r){try{const u=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_get(u,this.__wbg_ptr,M(e),M(n),ye(r)?0:M(r));var i=E().getInt32(u+0,!0),o=E().getInt32(u+4,!0),a=E().getInt32(u+8,!0);if(a)throw B(o);return B(i)}finally{b.__wbindgen_add_to_stack_pointer(16)}}getWithType(e,n,r){try{const u=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_getWithType(u,this.__wbg_ptr,M(e),M(n),ye(r)?0:M(r));var i=E().getInt32(u+0,!0),o=E().getInt32(u+4,!0),a=E().getInt32(u+8,!0);if(a)throw B(o);return B(i)}finally{b.__wbindgen_add_to_stack_pointer(16)}}objInfo(e,n){try{const a=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_objInfo(a,this.__wbg_ptr,M(e),ye(n)?0:M(n));var r=E().getInt32(a+0,!0),i=E().getInt32(a+4,!0),o=E().getInt32(a+8,!0);if(o)throw B(i);return B(r)}finally{b.__wbindgen_add_to_stack_pointer(16)}}getAll(e,n,r){try{const u=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_getAll(u,this.__wbg_ptr,M(e),M(n),ye(r)?0:M(r));var i=E().getInt32(u+0,!0),o=E().getInt32(u+4,!0),a=E().getInt32(u+8,!0);if(a)throw B(o);return B(i)}finally{b.__wbindgen_add_to_stack_pointer(16)}}enableFreeze(e){try{const o=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_enableFreeze(o,this.__wbg_ptr,M(e));var n=E().getInt32(o+0,!0),r=E().getInt32(o+4,!0),i=E().getInt32(o+8,!0);if(i)throw B(r);return B(n)}finally{b.__wbindgen_add_to_stack_pointer(16)}}registerDatatype(e,n,r){try{const a=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_registerDatatype(a,this.__wbg_ptr,M(e),M(n),M(r));var i=E().getInt32(a+0,!0),o=E().getInt32(a+4,!0);if(o)throw B(i)}finally{b.__wbindgen_add_to_stack_pointer(16)}}applyPatches(e,n){try{const a=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_applyPatches(a,this.__wbg_ptr,M(e),M(n));var r=E().getInt32(a+0,!0),i=E().getInt32(a+4,!0),o=E().getInt32(a+8,!0);if(o)throw B(i);return B(r)}finally{b.__wbindgen_add_to_stack_pointer(16)}}applyAndReturnPatches(e,n){try{const a=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_applyAndReturnPatches(a,this.__wbg_ptr,M(e),M(n));var r=E().getInt32(a+0,!0),i=E().getInt32(a+4,!0),o=E().getInt32(a+8,!0);if(o)throw B(i);return B(r)}finally{b.__wbindgen_add_to_stack_pointer(16)}}diffIncremental(){try{const i=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_diffIncremental(i,this.__wbg_ptr);var e=E().getInt32(i+0,!0),n=E().getInt32(i+4,!0),r=E().getInt32(i+8,!0);if(r)throw B(n);return B(e)}finally{b.__wbindgen_add_to_stack_pointer(16)}}updateDiffCursor(){b.automerge_updateDiffCursor(this.__wbg_ptr)}resetDiffCursor(){b.automerge_resetDiffCursor(this.__wbg_ptr)}diff(e,n){try{const a=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_diff(a,this.__wbg_ptr,M(e),M(n));var r=E().getInt32(a+0,!0),i=E().getInt32(a+4,!0),o=E().getInt32(a+8,!0);if(o)throw B(i);return B(r)}finally{b.__wbindgen_add_to_stack_pointer(16)}}isolate(e){try{const i=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_isolate(i,this.__wbg_ptr,M(e));var n=E().getInt32(i+0,!0),r=E().getInt32(i+4,!0);if(r)throw B(n)}finally{b.__wbindgen_add_to_stack_pointer(16)}}integrate(){b.automerge_integrate(this.__wbg_ptr)}length(e,n){try{const a=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_length(a,this.__wbg_ptr,M(e),ye(n)?0:M(n));var r=E().getFloat64(a+0,!0),i=E().getInt32(a+8,!0),o=E().getInt32(a+12,!0);if(o)throw B(i);return r}finally{b.__wbindgen_add_to_stack_pointer(16)}}delete(e,n){try{const o=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_delete(o,this.__wbg_ptr,M(e),M(n));var r=E().getInt32(o+0,!0),i=E().getInt32(o+4,!0);if(i)throw B(r)}finally{b.__wbindgen_add_to_stack_pointer(16)}}save(){const e=b.automerge_save(this.__wbg_ptr);return B(e)}saveIncremental(){const e=b.automerge_saveIncremental(this.__wbg_ptr);return B(e)}saveSince(e){try{const o=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_saveSince(o,this.__wbg_ptr,M(e));var n=E().getInt32(o+0,!0),r=E().getInt32(o+4,!0),i=E().getInt32(o+8,!0);if(i)throw B(r);return B(n)}finally{b.__wbindgen_add_to_stack_pointer(16)}}saveNoCompress(){const e=b.automerge_saveNoCompress(this.__wbg_ptr);return B(e)}saveAndVerify(){try{const i=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_saveAndVerify(i,this.__wbg_ptr);var e=E().getInt32(i+0,!0),n=E().getInt32(i+4,!0),r=E().getInt32(i+8,!0);if(r)throw B(n);return B(e)}finally{b.__wbindgen_add_to_stack_pointer(16)}}loadIncremental(e){try{const o=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_loadIncremental(o,this.__wbg_ptr,M(e));var n=E().getFloat64(o+0,!0),r=E().getInt32(o+8,!0),i=E().getInt32(o+12,!0);if(i)throw B(r);return n}finally{b.__wbindgen_add_to_stack_pointer(16)}}applyChanges(e){try{const i=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_applyChanges(i,this.__wbg_ptr,M(e));var n=E().getInt32(i+0,!0),r=E().getInt32(i+4,!0);if(r)throw B(n)}finally{b.__wbindgen_add_to_stack_pointer(16)}}getChanges(e){try{const o=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_getChanges(o,this.__wbg_ptr,M(e));var n=E().getInt32(o+0,!0),r=E().getInt32(o+4,!0),i=E().getInt32(o+8,!0);if(i)throw B(r);return B(n)}finally{b.__wbindgen_add_to_stack_pointer(16)}}getChangeByHash(e){try{const o=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_getChangeByHash(o,this.__wbg_ptr,M(e));var n=E().getInt32(o+0,!0),r=E().getInt32(o+4,!0),i=E().getInt32(o+8,!0);if(i)throw B(r);return B(n)}finally{b.__wbindgen_add_to_stack_pointer(16)}}getDecodedChangeByHash(e){try{const o=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_getDecodedChangeByHash(o,this.__wbg_ptr,M(e));var n=E().getInt32(o+0,!0),r=E().getInt32(o+4,!0),i=E().getInt32(o+8,!0);if(i)throw B(r);return B(n)}finally{b.__wbindgen_add_to_stack_pointer(16)}}getChangesAdded(e){qt(e,ft);const n=b.automerge_getChangesAdded(this.__wbg_ptr,e.__wbg_ptr);return B(n)}getHeads(){const e=b.automerge_getHeads(this.__wbg_ptr);return B(e)}getActorId(){let e,n;try{const o=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_getActorId(o,this.__wbg_ptr);var r=E().getInt32(o+0,!0),i=E().getInt32(o+4,!0);return e=r,n=i,tt(r,i)}finally{b.__wbindgen_add_to_stack_pointer(16),b.__wbindgen_free(e,n,1)}}getLastLocalChange(){const e=b.automerge_getLastLocalChange(this.__wbg_ptr);return B(e)}dump(){b.automerge_dump(this.__wbg_ptr)}getMissingDeps(e){try{const o=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_getMissingDeps(o,this.__wbg_ptr,ye(e)?0:M(e));var n=E().getInt32(o+0,!0),r=E().getInt32(o+4,!0),i=E().getInt32(o+8,!0);if(i)throw B(r);return B(n)}finally{b.__wbindgen_add_to_stack_pointer(16)}}receiveSyncMessage(e,n){try{const o=b.__wbindgen_add_to_stack_pointer(-16);qt(e,nt),b.automerge_receiveSyncMessage(o,this.__wbg_ptr,e.__wbg_ptr,M(n));var r=E().getInt32(o+0,!0),i=E().getInt32(o+4,!0);if(i)throw B(r)}finally{b.__wbindgen_add_to_stack_pointer(16)}}generateSyncMessage(e){qt(e,nt);const n=b.automerge_generateSyncMessage(this.__wbg_ptr,e.__wbg_ptr);return B(n)}toJS(e){try{const o=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_toJS(o,this.__wbg_ptr,M(e));var n=E().getInt32(o+0,!0),r=E().getInt32(o+4,!0),i=E().getInt32(o+8,!0);if(i)throw B(r);return B(n)}finally{b.__wbindgen_add_to_stack_pointer(16)}}materialize(e,n,r){try{const u=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_materialize(u,this.__wbg_ptr,M(e),ye(n)?0:M(n),M(r));var i=E().getInt32(u+0,!0),o=E().getInt32(u+4,!0),a=E().getInt32(u+8,!0);if(a)throw B(o);return B(i)}finally{b.__wbindgen_add_to_stack_pointer(16)}}getCursor(e,n,r,i){let o,a;try{const y=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_getCursor(y,this.__wbg_ptr,M(e),M(n),ye(r)?0:M(r),M(i));var u=E().getInt32(y+0,!0),f=E().getInt32(y+4,!0),d=E().getInt32(y+8,!0),_=E().getInt32(y+12,!0),h=u,g=f;if(_)throw h=0,g=0,B(d);return o=h,a=g,tt(h,g)}finally{b.__wbindgen_add_to_stack_pointer(16),b.__wbindgen_free(o,a,1)}}getCursorPosition(e,n,r){try{const u=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_getCursorPosition(u,this.__wbg_ptr,M(e),M(n),ye(r)?0:M(r));var i=E().getFloat64(u+0,!0),o=E().getInt32(u+8,!0),a=E().getInt32(u+12,!0);if(a)throw B(o);return i}finally{b.__wbindgen_add_to_stack_pointer(16)}}emptyChange(e,n){var r=ye(e)?0:ht(e,b.__wbindgen_malloc,b.__wbindgen_realloc),i=et;const o=b.automerge_emptyChange(this.__wbg_ptr,r,i,!ye(n),ye(n)?0:n);return B(o)}mark(e,n,r,i,o){try{const f=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_mark(f,this.__wbg_ptr,M(e),M(n),M(r),M(i),M(o));var a=E().getInt32(f+0,!0),u=E().getInt32(f+4,!0);if(u)throw B(a)}finally{b.__wbindgen_add_to_stack_pointer(16)}}unmark(e,n,r){try{const a=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_unmark(a,this.__wbg_ptr,M(e),M(n),M(r));var i=E().getInt32(a+0,!0),o=E().getInt32(a+4,!0);if(o)throw B(i)}finally{b.__wbindgen_add_to_stack_pointer(16)}}marks(e,n){try{const a=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_marks(a,this.__wbg_ptr,M(e),ye(n)?0:M(n));var r=E().getInt32(a+0,!0),i=E().getInt32(a+4,!0),o=E().getInt32(a+8,!0);if(o)throw B(i);return B(r)}finally{b.__wbindgen_add_to_stack_pointer(16)}}marksAt(e,n,r){try{const u=b.__wbindgen_add_to_stack_pointer(-16);b.automerge_marksAt(u,this.__wbg_ptr,M(e),n,ye(r)?0:M(r));var i=E().getInt32(u+0,!0),o=E().getInt32(u+4,!0),a=E().getInt32(u+8,!0);if(a)throw B(o);return B(i)}finally{b.__wbindgen_add_to_stack_pointer(16)}}hasOurChanges(e){qt(e,nt);const n=b.automerge_hasOurChanges(this.__wbg_ptr,e.__wbg_ptr);return B(n)}topoHistoryTraversal(){const e=b.automerge_topoHistoryTraversal(this.__wbg_ptr);return B(e)}stats(){const e=b.automerge_stats(this.__wbg_ptr);return B(e)}}const pc=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>b.__wbg_syncstate_free(t>>>0,1));class nt{static __wrap(e){e=e>>>0;const n=Object.create(nt.prototype);return n.__wbg_ptr=e,pc.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,pc.unregister(this),e}free(){const e=this.__destroy_into_raw();b.__wbg_syncstate_free(e,0)}get sharedHeads(){const e=b.syncstate_sharedHeads(this.__wbg_ptr);return B(e)}get lastSentHeads(){const e=b.syncstate_lastSentHeads(this.__wbg_ptr);return B(e)}set lastSentHeads(e){try{const i=b.__wbindgen_add_to_stack_pointer(-16);b.syncstate_set_lastSentHeads(i,this.__wbg_ptr,M(e));var n=E().getInt32(i+0,!0),r=E().getInt32(i+4,!0);if(r)throw B(n)}finally{b.__wbindgen_add_to_stack_pointer(16)}}set sentHashes(e){try{const i=b.__wbindgen_add_to_stack_pointer(-16);b.syncstate_set_sentHashes(i,this.__wbg_ptr,M(e));var n=E().getInt32(i+0,!0),r=E().getInt32(i+4,!0);if(r)throw B(n)}finally{b.__wbindgen_add_to_stack_pointer(16)}}clone(){const e=b.syncstate_clone(this.__wbg_ptr);return nt.__wrap(e)}}function Fu(t,e){const n=String(Y(e)),r=ht(n,b.__wbindgen_malloc,b.__wbindgen_realloc),i=et;E().setInt32(t+4,i,!0),E().setInt32(t+0,r,!0)}function Nu(){return It(function(t,e,n){const r=Reflect.apply(Y(t),Y(e),Y(n));return M(r)},arguments)}function Vu(t,e){const n=Object.assign(Y(t),Y(e));return M(n)}function zu(t){const e=Y(t).buffer;return M(e)}function Wu(){return It(function(t,e){const n=Y(t).call(Y(e));return M(n)},arguments)}function qu(){return It(function(t,e,n){const r=Y(t).call(Y(e),Y(n));return M(r)},arguments)}function Gu(t,e){const n=Y(t).concat(Y(e));return M(n)}function Ju(t,e,n){const r=Object.defineProperty(Y(t),Y(e),Y(n));return M(r)}function Ku(){return It(function(t,e){return Reflect.deleteProperty(Y(t),Y(e))},arguments)}function Yu(t){return Y(t).done}function Xu(t){const e=Object.entries(Y(t));return M(e)}function Zu(t,e){let n,r;try{n=t,r=e,console.error(tt(t,e))}finally{b.__wbindgen_free(n,r,1)}}function Qu(t,e){const n=Symbol.for(tt(t,e));return M(n)}function ef(t){const e=Object.freeze(Y(t));return M(e)}function tf(t){const e=Array.from(Y(t));return M(e)}function nf(){return It(function(t,e){globalThis.crypto.getRandomValues(bp(t,e))},arguments)}function rf(t){return Y(t).getTime()}function sf(){return It(function(t,e){const n=Reflect.get(Y(t),Y(e));return M(n)},arguments)}function of(t,e){const n=Y(t)[e>>>0];return M(n)}function af(t){let e;try{e=Y(t)instanceof ArrayBuffer}catch{e=!1}return e}function cf(t){let e;try{e=Y(t)instanceof Date}catch{e=!1}return e}function uf(t){let e;try{e=Y(t)instanceof Object}catch{e=!1}return e}function ff(t){let e;try{e=Y(t)instanceof Uint8Array}catch{e=!1}return e}function lf(t){return Array.isArray(Y(t))}function df(){return M(Symbol.iterator)}function hf(t){const e=Object.keys(Y(t));return M(e)}function gf(t){return Y(t).length}function _f(t){return Y(t).length}function pf(t){return Y(t).length}function yf(t,e){console.log(Y(t),Y(e))}function mf(t){console.log(Y(t))}function bf(t,e){const n=new RangeError(tt(t,e));return M(n)}function wf(t){const e=new Date(Y(t));return M(e)}function vf(){const t=new Object;return M(t)}function Sf(){const t=new Array;return M(t)}function xf(){const t=new Error;return M(t)}function If(t){const e=new Uint8Array(Y(t));return M(e)}function Af(t,e){const n=new Error(tt(t,e));return M(n)}function Ef(t,e,n){const r=new Uint8Array(Y(t),e>>>0,n>>>0);return M(r)}function kf(t){const e=Y(t).next;return M(e)}function Cf(){return It(function(t){const e=Y(t).next();return M(e)},arguments)}function Tf(){return It(function(t){const e=Reflect.ownKeys(Y(t));return M(e)},arguments)}function Of(t,e){return Y(t).push(Y(e))}function Rf(t,e,n){Y(t)[e>>>0]=B(n)}function Mf(t,e,n){Y(t)[B(e)]=B(n)}function jf(t,e,n){Y(t).set(Y(e),n>>>0)}function Df(){return It(function(t,e,n){return Reflect.set(Y(t),Y(e),Y(n))},arguments)}function Uf(t,e,n){const r=Y(t).slice(e>>>0,n>>>0);return M(r)}function Hf(t,e){const n=Y(e).stack,r=ht(n,b.__wbindgen_malloc,b.__wbindgen_realloc),i=et;E().setInt32(t+4,i,!0),E().setInt32(t+0,r,!0)}function Pf(t){const e=Y(t).toString();return M(e)}function Lf(t,e){return Y(t).unshift(Y(e))}function Bf(t){const e=Y(t).value;return M(e)}function $f(t){const e=Object.values(Y(t));return M(e)}function Ff(t){return M(t)}function Nf(t){const e=BigInt.asUintN(64,t);return M(e)}function Vf(t){const e=Y(t);return typeof e=="boolean"?e?1:0:2}function zf(t,e){const n=Li(Y(e)),r=ht(n,b.__wbindgen_malloc,b.__wbindgen_realloc),i=et;E().setInt32(t+4,i,!0),E().setInt32(t+0,r,!0)}function Wf(t,e){const n=new Error(tt(t,e));return M(n)}function qf(t){return Array.isArray(Y(t))}function Gf(t){return typeof Y(t)=="function"}function Jf(t){return Y(t)===null}function Kf(t){const e=Y(t);return typeof e=="object"&&e!==null}function Yf(t){return typeof Y(t)=="string"}function Xf(t){return Y(t)===void 0}function Zf(t,e){const n=Y(e),r=JSON.stringify(n===void 0?null:n),i=ht(r,b.__wbindgen_malloc,b.__wbindgen_realloc),o=et;E().setInt32(t+4,o,!0),E().setInt32(t+0,i,!0)}function Qf(t,e){return Y(t)==Y(e)}function el(){const t=b.memory;return M(t)}function tl(t,e){const n=Y(e),r=typeof n=="number"?n:void 0;E().setFloat64(t+8,ye(r)?0:r,!0),E().setInt32(t+0,!ye(r),!0)}function nl(t){return M(t)}function rl(t){const e=Y(t);return M(e)}function sl(t){B(t)}function il(t,e){const n=Y(e),r=typeof n=="string"?n:void 0;var i=ye(r)?0:ht(r,b.__wbindgen_malloc,b.__wbindgen_realloc),o=et;E().setInt32(t+4,o,!0),E().setInt32(t+0,i,!0)}function ol(t,e){const n=tt(t,e);return M(n)}function al(t,e){throw new Error(tt(t,e))}URL=globalThis.URL;const G=await _p({"./automerge_wasm_bg.js":{__wbindgen_object_drop_ref:sl,__wbindgen_string_get:il,__wbindgen_error_new:Wf,__wbindgen_string_new:ol,__wbindgen_number_new:nl,__wbindgen_object_clone_ref:rl,__wbindgen_number_get:tl,__wbindgen_is_undefined:Xf,__wbindgen_boolean_get:Vf,__wbindgen_is_null:Jf,__wbindgen_is_string:Yf,__wbindgen_is_function:Gf,__wbindgen_is_object:Kf,__wbindgen_is_array:qf,__wbindgen_json_serialize:Zf,__wbg_new_8a6f238a6ece86ea:xf,__wbg_stack_0ed75d68575b0f3c:Hf,__wbg_error_7534b8e9a36f1ab4:Zu,__wbindgen_jsval_loose_eq:Qf,__wbg_String_fed4d24b68977888:Fu,__wbindgen_bigint_from_i64:Ff,__wbindgen_bigint_from_u64:Nf,__wbg_set_3fda3bac07393de4:Mf,__wbg_getRandomValues_3d90134a348e46b3:nf,__wbg_log_c222819a41e063d3:mf,__wbg_log_1ae1e9f741096e91:yf,__wbg_get_b9b93047fe3cf45b:of,__wbg_length_e2d2a49132c1b256:pf,__wbg_new_78feb108b6472713:Sf,__wbg_next_25feadfc0913fea9:kf,__wbg_next_6574e1a8a62d1055:Cf,__wbg_done_769e5ede4b31c67b:Yu,__wbg_value_cd1ffa7b1ab794f1:Bf,__wbg_iterator_9a24c88df860dc65:df,__wbg_get_67b2ba62fc30de12:sf,__wbg_call_672a4d21634d4a24:Wu,__wbg_new_405e22f390576ce2:vf,__wbg_length_d56737991078581b:_f,__wbg_set_37837023f3d740e8:Rf,__wbg_from_2a5d3e218e67aa85:tf,__wbg_isArray_a1eab7e0d067391b:lf,__wbg_push_737cfc8c1432c2c6:Of,__wbg_unshift_c290010f73f04fb1:Lf,__wbg_instanceof_ArrayBuffer_e14585432e3737fc:af,__wbg_new_c68d7209be747379:Af,__wbg_call_7cccdd69e0791ae2:qu,__wbg_instanceof_Date_e9a9be8b9cea7890:cf,__wbg_getTime_46267b1c24877e30:rf,__wbg_new_31a97dac4f10fab7:wf,__wbg_instanceof_Object_7f2dcef8f78644a4:uf,__wbg_assign_3627b8559449930a:Vu,__wbg_defineProperty_a3ddad9901e2d29e:Ju,__wbg_entries_3265d4158b33e5dc:Xu,__wbg_freeze_ef6d70cf38e8d948:ef,__wbg_keys_5c77a08ddc2fb8a6:hf,__wbg_values_fcb8ba8c0aad8b58:$f,__wbg_new_1ab78df5e132f715:bf,__wbg_apply_eb9e9b97497f91e4:Nu,__wbg_deleteProperty_96363d4a1d977c97:Ku,__wbg_ownKeys_3930041068756f1f:Tf,__wbg_set_bb8cecf6a62b9f46:Df,__wbg_buffer_609cc3eee51ed158:zu,__wbg_concat_9de968491c4340cf:Gu,__wbg_slice_972c243648c9fd2e:Uf,__wbg_for_4ff07bddd743c5e7:Qu,__wbg_toString_66ab719c2a98bdf1:Pf,__wbg_newwithbyteoffsetandlength_d97e637ebe145a9a:Ef,__wbg_new_a12002a7f91c75be:If,__wbg_set_65595bdd868b3009:jf,__wbg_length_a446193dc22c12f8:gf,__wbg_instanceof_Uint8Array_17156bcf118086a9:ff,__wbindgen_debug_string:zf,__wbindgen_throw:al,__wbindgen_memory:el}},gp),jp=G.memory,Dp=G.__wbg_syncstate_free,Up=G.syncstate_sharedHeads,Hp=G.syncstate_lastSentHeads,Pp=G.syncstate_set_lastSentHeads,Lp=G.syncstate_set_sentHashes,Bp=G.syncstate_clone,$p=G.__wbg_automerge_free,Fp=G.automerge_new,Np=G.automerge_clone,Vp=G.automerge_fork,zp=G.automerge_pendingOps,Wp=G.automerge_commit,qp=G.automerge_merge,Gp=G.automerge_rollback,Jp=G.automerge_keys,Kp=G.automerge_text,Yp=G.automerge_spans,Xp=G.automerge_splice,Zp=G.automerge_updateText,Qp=G.automerge_updateSpans,ey=G.automerge_push,ty=G.automerge_pushObject,ny=G.automerge_insert,ry=G.automerge_splitBlock,sy=G.automerge_joinBlock,iy=G.automerge_updateBlock,oy=G.automerge_getBlock,ay=G.automerge_insertObject,cy=G.automerge_put,uy=G.automerge_putObject,fy=G.automerge_increment,ly=G.automerge_get,dy=G.automerge_getWithType,hy=G.automerge_objInfo,gy=G.automerge_getAll,_y=G.automerge_enableFreeze,py=G.automerge_registerDatatype,yy=G.automerge_applyPatches,my=G.automerge_applyAndReturnPatches,by=G.automerge_diffIncremental,wy=G.automerge_updateDiffCursor,vy=G.automerge_resetDiffCursor,Sy=G.automerge_diff,xy=G.automerge_isolate,Iy=G.automerge_integrate,Ay=G.automerge_length,Ey=G.automerge_delete,ky=G.automerge_save,Cy=G.automerge_saveIncremental,Ty=G.automerge_saveSince,Oy=G.automerge_saveNoCompress,Ry=G.automerge_saveAndVerify,My=G.automerge_loadIncremental,jy=G.automerge_applyChanges,Dy=G.automerge_getChanges,Uy=G.automerge_getChangeByHash,Hy=G.automerge_getDecodedChangeByHash,Py=G.automerge_getChangesAdded,Ly=G.automerge_getHeads,By=G.automerge_getActorId,$y=G.automerge_getLastLocalChange,Fy=G.automerge_dump,Ny=G.automerge_getMissingDeps,Vy=G.automerge_receiveSyncMessage,zy=G.automerge_generateSyncMessage,Wy=G.automerge_toJS,qy=G.automerge_materialize,Gy=G.automerge_getCursor,Jy=G.automerge_getCursorPosition,Ky=G.automerge_emptyChange,Yy=G.automerge_mark,Xy=G.automerge_unmark,Zy=G.automerge_marks,Qy=G.automerge_marksAt,em=G.automerge_hasOurChanges,tm=G.automerge_topoHistoryTraversal,nm=G.automerge_stats,rm=G.create,sm=G.load,im=G.encodeChange,om=G.decodeChange,am=G.initSyncState,cm=G.importSyncState,um=G.exportSyncState,fm=G.encodeSyncMessage,lm=G.decodeSyncMessage,dm=G.encodeSyncState,hm=G.decodeSyncState,gm=G.__wbindgen_malloc,_m=G.__wbindgen_realloc,pm=G.__wbindgen_exn_store,ym=G.__wbindgen_free,mm=G.__wbindgen_add_to_stack_pointer,bm=Object.freeze(Object.defineProperty({__proto__:null,__wbg_automerge_free:$p,__wbg_syncstate_free:Dp,__wbindgen_add_to_stack_pointer:mm,__wbindgen_exn_store:pm,__wbindgen_free:ym,__wbindgen_malloc:gm,__wbindgen_realloc:_m,automerge_applyAndReturnPatches:my,automerge_applyChanges:jy,automerge_applyPatches:yy,automerge_clone:Np,automerge_commit:Wp,automerge_delete:Ey,automerge_diff:Sy,automerge_diffIncremental:by,automerge_dump:Fy,automerge_emptyChange:Ky,automerge_enableFreeze:_y,automerge_fork:Vp,automerge_generateSyncMessage:zy,automerge_get:ly,automerge_getActorId:By,automerge_getAll:gy,automerge_getBlock:oy,automerge_getChangeByHash:Uy,automerge_getChanges:Dy,automerge_getChangesAdded:Py,automerge_getCursor:Gy,automerge_getCursorPosition:Jy,automerge_getDecodedChangeByHash:Hy,automerge_getHeads:Ly,automerge_getLastLocalChange:$y,automerge_getMissingDeps:Ny,automerge_getWithType:dy,automerge_hasOurChanges:em,automerge_increment:fy,automerge_insert:ny,automerge_insertObject:ay,automerge_integrate:Iy,automerge_isolate:xy,automerge_joinBlock:sy,automerge_keys:Jp,automerge_length:Ay,automerge_loadIncremental:My,automerge_mark:Yy,automerge_marks:Zy,automerge_marksAt:Qy,automerge_materialize:qy,automerge_merge:qp,automerge_new:Fp,automerge_objInfo:hy,automerge_pendingOps:zp,automerge_push:ey,automerge_pushObject:ty,automerge_put:cy,automerge_putObject:uy,automerge_receiveSyncMessage:Vy,automerge_registerDatatype:py,automerge_resetDiffCursor:vy,automerge_rollback:Gp,automerge_save:ky,automerge_saveAndVerify:Ry,automerge_saveIncremental:Cy,automerge_saveNoCompress:Oy,automerge_saveSince:Ty,automerge_spans:Yp,automerge_splice:Xp,automerge_splitBlock:ry,automerge_stats:nm,automerge_text:Kp,automerge_toJS:Wy,automerge_topoHistoryTraversal:tm,automerge_unmark:Xy,automerge_updateBlock:iy,automerge_updateDiffCursor:wy,automerge_updateSpans:Qp,automerge_updateText:Zp,create:rm,decodeChange:om,decodeSyncMessage:lm,decodeSyncState:hm,encodeChange:im,encodeSyncMessage:fm,encodeSyncState:dm,exportSyncState:um,importSyncState:cm,initSyncState:am,load:sm,memory:jp,syncstate_clone:Bp,syncstate_lastSentHeads:Hp,syncstate_set_lastSentHeads:Pp,syncstate_set_sentHashes:Lp,syncstate_sharedHeads:Up},Symbol.toStringTag,{value:"Module"}));Bu(bm);const wm=Object.freeze(Object.defineProperty({__proto__:null,Automerge:ft,SyncState:nt,TextRepresentation:Mp,__wbg_String_fed4d24b68977888:Fu,__wbg_apply_eb9e9b97497f91e4:Nu,__wbg_assign_3627b8559449930a:Vu,__wbg_buffer_609cc3eee51ed158:zu,__wbg_call_672a4d21634d4a24:Wu,__wbg_call_7cccdd69e0791ae2:qu,__wbg_concat_9de968491c4340cf:Gu,__wbg_defineProperty_a3ddad9901e2d29e:Ju,__wbg_deleteProperty_96363d4a1d977c97:Ku,__wbg_done_769e5ede4b31c67b:Yu,__wbg_entries_3265d4158b33e5dc:Xu,__wbg_error_7534b8e9a36f1ab4:Zu,__wbg_for_4ff07bddd743c5e7:Qu,__wbg_freeze_ef6d70cf38e8d948:ef,__wbg_from_2a5d3e218e67aa85:tf,__wbg_getRandomValues_3d90134a348e46b3:nf,__wbg_getTime_46267b1c24877e30:rf,__wbg_get_67b2ba62fc30de12:sf,__wbg_get_b9b93047fe3cf45b:of,__wbg_instanceof_ArrayBuffer_e14585432e3737fc:af,__wbg_instanceof_Date_e9a9be8b9cea7890:cf,__wbg_instanceof_Object_7f2dcef8f78644a4:uf,__wbg_instanceof_Uint8Array_17156bcf118086a9:ff,__wbg_isArray_a1eab7e0d067391b:lf,__wbg_iterator_9a24c88df860dc65:df,__wbg_keys_5c77a08ddc2fb8a6:hf,__wbg_length_a446193dc22c12f8:gf,__wbg_length_d56737991078581b:_f,__wbg_length_e2d2a49132c1b256:pf,__wbg_log_1ae1e9f741096e91:yf,__wbg_log_c222819a41e063d3:mf,__wbg_new_1ab78df5e132f715:bf,__wbg_new_31a97dac4f10fab7:wf,__wbg_new_405e22f390576ce2:vf,__wbg_new_78feb108b6472713:Sf,__wbg_new_8a6f238a6ece86ea:xf,__wbg_new_a12002a7f91c75be:If,__wbg_new_c68d7209be747379:Af,__wbg_newwithbyteoffsetandlength_d97e637ebe145a9a:Ef,__wbg_next_25feadfc0913fea9:kf,__wbg_next_6574e1a8a62d1055:Cf,__wbg_ownKeys_3930041068756f1f:Tf,__wbg_push_737cfc8c1432c2c6:Of,__wbg_set_37837023f3d740e8:Rf,__wbg_set_3fda3bac07393de4:Mf,__wbg_set_65595bdd868b3009:jf,__wbg_set_bb8cecf6a62b9f46:Df,__wbg_set_wasm:Bu,__wbg_slice_972c243648c9fd2e:Uf,__wbg_stack_0ed75d68575b0f3c:Hf,__wbg_toString_66ab719c2a98bdf1:Pf,__wbg_unshift_c290010f73f04fb1:Lf,__wbg_value_cd1ffa7b1ab794f1:Bf,__wbg_values_fcb8ba8c0aad8b58:$f,__wbindgen_bigint_from_i64:Ff,__wbindgen_bigint_from_u64:Nf,__wbindgen_boolean_get:Vf,__wbindgen_debug_string:zf,__wbindgen_error_new:Wf,__wbindgen_is_array:qf,__wbindgen_is_function:Gf,__wbindgen_is_null:Jf,__wbindgen_is_object:Kf,__wbindgen_is_string:Yf,__wbindgen_is_undefined:Xf,__wbindgen_json_serialize:Zf,__wbindgen_jsval_loose_eq:Qf,__wbindgen_memory:el,__wbindgen_number_get:tl,__wbindgen_number_new:nl,__wbindgen_object_clone_ref:rl,__wbindgen_object_drop_ref:sl,__wbindgen_string_get:il,__wbindgen_string_new:ol,__wbindgen_throw:al,create:vp,decodeChange:Ip,decodeSyncMessage:Tp,decodeSyncState:Rp,encodeChange:xp,encodeSyncMessage:Cp,encodeSyncState:Op,exportSyncState:kp,importSyncState:Ep,initSyncState:Ap,load:Sp},Symbol.toStringTag,{value:"Module"}));b0(wm);var gi={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yc;function vm(){if(yc)return ce;yc=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),h=Symbol.iterator;function g(w){return w===null||typeof w!="object"?null:(w=h&&w[h]||w["@@iterator"],typeof w=="function"?w:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function A(w,R,W){this.props=w,this.context=R,this.refs=v,this.updater=W||y}A.prototype.isReactComponent={},A.prototype.setState=function(w,R){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,R,"setState")},A.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function N(){}N.prototype=A.prototype;function H(w,R,W){this.props=w,this.context=R,this.refs=v,this.updater=W||y}var C=H.prototype=new N;C.constructor=H,m(C,A.prototype),C.isPureReactComponent=!0;var Z=Array.isArray,q=Object.prototype.hasOwnProperty,J={current:null},te={key:!0,ref:!0,__self:!0,__source:!0};function X(w,R,W){var ie,ue={},le=null,de=null;if(R!=null)for(ie in R.ref!==void 0&&(de=R.ref),R.key!==void 0&&(le=""+R.key),R)q.call(R,ie)&&!te.hasOwnProperty(ie)&&(ue[ie]=R[ie]);var ge=arguments.length-2;if(ge===1)ue.children=W;else if(1<ge){for(var _e=Array(ge),Ie=0;Ie<ge;Ie++)_e[Ie]=arguments[Ie+2];ue.children=_e}if(w&&w.defaultProps)for(ie in ge=w.defaultProps,ge)ue[ie]===void 0&&(ue[ie]=ge[ie]);return{$$typeof:t,type:w,key:le,ref:de,props:ue,_owner:J.current}}function $(w,R){return{$$typeof:t,type:w.type,key:R,ref:w.ref,props:w.props,_owner:w._owner}}function V(w){return typeof w=="object"&&w!==null&&w.$$typeof===t}function K(w){var R={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(W){return R[W]})}var se=/\/+/g;function S(w,R){return typeof w=="object"&&w!==null&&w.key!=null?K(""+w.key):R.toString(36)}function z(w,R,W,ie,ue){var le=typeof w;(le==="undefined"||le==="boolean")&&(w=null);var de=!1;if(w===null)de=!0;else switch(le){case"string":case"number":de=!0;break;case"object":switch(w.$$typeof){case t:case e:de=!0}}if(de)return de=w,ue=ue(de),w=ie===""?"."+S(de,0):ie,Z(ue)?(W="",w!=null&&(W=w.replace(se,"$&/")+"/"),z(ue,R,W,"",function(Ie){return Ie})):ue!=null&&(V(ue)&&(ue=$(ue,W+(!ue.key||de&&de.key===ue.key?"":(""+ue.key).replace(se,"$&/")+"/")+w)),R.push(ue)),1;if(de=0,ie=ie===""?".":ie+":",Z(w))for(var ge=0;ge<w.length;ge++){le=w[ge];var _e=ie+S(le,ge);de+=z(le,R,W,_e,ue)}else if(_e=g(w),typeof _e=="function")for(w=_e.call(w),ge=0;!(le=w.next()).done;)le=le.value,_e=ie+S(le,ge++),de+=z(le,R,W,_e,ue);else if(le==="object")throw R=String(w),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.");return de}function U(w,R,W){if(w==null)return w;var ie=[],ue=0;return z(w,ie,"","",function(le){return R.call(W,le,ue++)}),ie}function L(w){if(w._status===-1){var R=w._result;R=R(),R.then(function(W){(w._status===0||w._status===-1)&&(w._status=1,w._result=W)},function(W){(w._status===0||w._status===-1)&&(w._status=2,w._result=W)}),w._status===-1&&(w._status=0,w._result=R)}if(w._status===1)return w._result.default;throw w._result}var D={current:null},Q={transition:null},k={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:Q,ReactCurrentOwner:J};function F(){throw Error("act(...) is not supported in production builds of React.")}return ce.Children={map:U,forEach:function(w,R,W){U(w,function(){R.apply(this,arguments)},W)},count:function(w){var R=0;return U(w,function(){R++}),R},toArray:function(w){return U(w,function(R){return R})||[]},only:function(w){if(!V(w))throw Error("React.Children.only expected to receive a single React element child.");return w}},ce.Component=A,ce.Fragment=n,ce.Profiler=i,ce.PureComponent=H,ce.StrictMode=r,ce.Suspense=f,ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k,ce.act=F,ce.cloneElement=function(w,R,W){if(w==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+w+".");var ie=m({},w.props),ue=w.key,le=w.ref,de=w._owner;if(R!=null){if(R.ref!==void 0&&(le=R.ref,de=J.current),R.key!==void 0&&(ue=""+R.key),w.type&&w.type.defaultProps)var ge=w.type.defaultProps;for(_e in R)q.call(R,_e)&&!te.hasOwnProperty(_e)&&(ie[_e]=R[_e]===void 0&&ge!==void 0?ge[_e]:R[_e])}var _e=arguments.length-2;if(_e===1)ie.children=W;else if(1<_e){ge=Array(_e);for(var Ie=0;Ie<_e;Ie++)ge[Ie]=arguments[Ie+2];ie.children=ge}return{$$typeof:t,type:w.type,key:ue,ref:le,props:ie,_owner:de}},ce.createContext=function(w){return w={$$typeof:a,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},w.Provider={$$typeof:o,_context:w},w.Consumer=w},ce.createElement=X,ce.createFactory=function(w){var R=X.bind(null,w);return R.type=w,R},ce.createRef=function(){return{current:null}},ce.forwardRef=function(w){return{$$typeof:u,render:w}},ce.isValidElement=V,ce.lazy=function(w){return{$$typeof:_,_payload:{_status:-1,_result:w},_init:L}},ce.memo=function(w,R){return{$$typeof:d,type:w,compare:R===void 0?null:R}},ce.startTransition=function(w){var R=Q.transition;Q.transition={};try{w()}finally{Q.transition=R}},ce.unstable_act=F,ce.useCallback=function(w,R){return D.current.useCallback(w,R)},ce.useContext=function(w){return D.current.useContext(w)},ce.useDebugValue=function(){},ce.useDeferredValue=function(w){return D.current.useDeferredValue(w)},ce.useEffect=function(w,R){return D.current.useEffect(w,R)},ce.useId=function(){return D.current.useId()},ce.useImperativeHandle=function(w,R,W){return D.current.useImperativeHandle(w,R,W)},ce.useInsertionEffect=function(w,R){return D.current.useInsertionEffect(w,R)},ce.useLayoutEffect=function(w,R){return D.current.useLayoutEffect(w,R)},ce.useMemo=function(w,R){return D.current.useMemo(w,R)},ce.useReducer=function(w,R,W){return D.current.useReducer(w,R,W)},ce.useRef=function(w){return D.current.useRef(w)},ce.useState=function(w){return D.current.useState(w)},ce.useSyncExternalStore=function(w,R,W){return D.current.useSyncExternalStore(w,R,W)},ce.useTransition=function(){return D.current.useTransition()},ce.version="18.3.1",ce}var mc;function Sm(){return mc||(mc=1,gi.exports=vm()),gi.exports}var xm=Sm();xm.createContext(null);function Im(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bc={exports:{}},wc;function Am(){return wc||(wc=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(f,d,_){this.fn=f,this.context=d,this.once=_||!1}function o(f,d,_,h,g){if(typeof _!="function")throw new TypeError("The listener must be a function");var y=new i(_,h||f,g),m=n?n+d:d;return f._events[m]?f._events[m].fn?f._events[m]=[f._events[m],y]:f._events[m].push(y):(f._events[m]=y,f._eventsCount++),f}function a(f,d){--f._eventsCount===0?f._events=new r:delete f._events[d]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var f=[],d,_;if(this._eventsCount===0)return f;for(_ in d=this._events)e.call(d,_)&&f.push(n?_.slice(1):_);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(d)):f},u.prototype.listeners=function(f){var d=n?n+f:f,_=this._events[d];if(!_)return[];if(_.fn)return[_.fn];for(var h=0,g=_.length,y=new Array(g);h<g;h++)y[h]=_[h].fn;return y},u.prototype.listenerCount=function(f){var d=n?n+f:f,_=this._events[d];return _?_.fn?1:_.length:0},u.prototype.emit=function(f,d,_,h,g,y){var m=n?n+f:f;if(!this._events[m])return!1;var v=this._events[m],A=arguments.length,N,H;if(v.fn){switch(v.once&&this.removeListener(f,v.fn,void 0,!0),A){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,_),!0;case 4:return v.fn.call(v.context,d,_,h),!0;case 5:return v.fn.call(v.context,d,_,h,g),!0;case 6:return v.fn.call(v.context,d,_,h,g,y),!0}for(H=1,N=new Array(A-1);H<A;H++)N[H-1]=arguments[H];v.fn.apply(v.context,N)}else{var C=v.length,Z;for(H=0;H<C;H++)switch(v[H].once&&this.removeListener(f,v[H].fn,void 0,!0),A){case 1:v[H].fn.call(v[H].context);break;case 2:v[H].fn.call(v[H].context,d);break;case 3:v[H].fn.call(v[H].context,d,_);break;case 4:v[H].fn.call(v[H].context,d,_,h);break;default:if(!N)for(Z=1,N=new Array(A-1);Z<A;Z++)N[Z-1]=arguments[Z];v[H].fn.apply(v[H].context,N)}}return!0},u.prototype.on=function(f,d,_){return o(this,f,d,_,!1)},u.prototype.once=function(f,d,_){return o(this,f,d,_,!0)},u.prototype.removeListener=function(f,d,_,h){var g=n?n+f:f;if(!this._events[g])return this;if(!d)return a(this,g),this;var y=this._events[g];if(y.fn)y.fn===d&&(!h||y.once)&&(!_||y.context===_)&&a(this,g);else{for(var m=0,v=[],A=y.length;m<A;m++)(y[m].fn!==d||h&&!y[m].once||_&&y[m].context!==_)&&v.push(y[m]);v.length?this._events[g]=v.length===1?v[0]:v:a(this,g)}return this},u.prototype.removeAllListeners=function(f){var d;return f?(d=n?n+f:f,this._events[d]&&a(this,d)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,t.exports=u}(bc)),bc.exports}var Em=Am();const km=Im(Em);new km;class Cm extends Lu{#e;#t=!1;#r;#n=!1;#s;#i=new Promise(e=>{this.#s=e});#c=[];isReady(){return this.#n}whenReady(){return this.#i}#a(){this.#n||(this.#n=!0,this.#s?.())}constructor(e){super(),this.#r={channelName:"broadcast",...e??{}},this.#e=new BroadcastChannel(this.#r.channelName)}connect(e,n){this.peerId=e,this.peerMetadata=n,this.#t=!1,this.#e.addEventListener("message",r=>{const i=r.data;if("targetId"in i&&i.targetId!==this.peerId||this.#t)return;const{senderId:o,type:a}=i;switch(a){case"arrive":{const{peerMetadata:u}=i;this.#e.postMessage({senderId:this.peerId,targetId:o,type:"welcome",peerMetadata:this.peerMetadata}),this.#o(o,u)}break;case"welcome":{const{peerMetadata:u}=i;this.#o(o,u)}break;case"leave":this.#c=this.#c.filter(u=>u!==o),this.emit("peer-disconnected",{peerId:o});break;default:if(!("data"in i))this.emit("message",i);else{if(!i.data)throw new Error("We got a message without data, we can't send this.");const u=i.data;this.emit("message",{...i,data:new Uint8Array(u)})}break}}),this.#e.postMessage({senderId:this.peerId,type:"arrive",peerMetadata:n})}#o(e,n){this.#a(),this.#c.push(e),this.emit("peer-candidate",{peerId:e,peerMetadata:n})}send(e){if(this.#t)return!1;"data"in e?this.#e.postMessage({...e,data:e.data?e.data.buffer.slice(e.data.byteOffset,e.data.byteOffset+e.data.byteLength):void 0}):this.#e.postMessage(e)}disconnect(){this.#e.postMessage({senderId:this.peerId,type:"leave"});for(const e of this.#c)this.emit("peer-disconnected",{peerId:e});this.#t=!0}}var _i={exports:{}},vc;function Tm(){return vc||(vc=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(f,d,_){this.fn=f,this.context=d,this.once=_||!1}function o(f,d,_,h,g){if(typeof _!="function")throw new TypeError("The listener must be a function");var y=new i(_,h||f,g),m=n?n+d:d;return f._events[m]?f._events[m].fn?f._events[m]=[f._events[m],y]:f._events[m].push(y):(f._events[m]=y,f._eventsCount++),f}function a(f,d){--f._eventsCount===0?f._events=new r:delete f._events[d]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var d=[],_,h;if(this._eventsCount===0)return d;for(h in _=this._events)e.call(_,h)&&d.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(_)):d},u.prototype.listeners=function(d){var _=n?n+d:d,h=this._events[_];if(!h)return[];if(h.fn)return[h.fn];for(var g=0,y=h.length,m=new Array(y);g<y;g++)m[g]=h[g].fn;return m},u.prototype.listenerCount=function(d){var _=n?n+d:d,h=this._events[_];return h?h.fn?1:h.length:0},u.prototype.emit=function(d,_,h,g,y,m){var v=n?n+d:d;if(!this._events[v])return!1;var A=this._events[v],N=arguments.length,H,C;if(A.fn){switch(A.once&&this.removeListener(d,A.fn,void 0,!0),N){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,_),!0;case 3:return A.fn.call(A.context,_,h),!0;case 4:return A.fn.call(A.context,_,h,g),!0;case 5:return A.fn.call(A.context,_,h,g,y),!0;case 6:return A.fn.call(A.context,_,h,g,y,m),!0}for(C=1,H=new Array(N-1);C<N;C++)H[C-1]=arguments[C];A.fn.apply(A.context,H)}else{var Z=A.length,q;for(C=0;C<Z;C++)switch(A[C].once&&this.removeListener(d,A[C].fn,void 0,!0),N){case 1:A[C].fn.call(A[C].context);break;case 2:A[C].fn.call(A[C].context,_);break;case 3:A[C].fn.call(A[C].context,_,h);break;case 4:A[C].fn.call(A[C].context,_,h,g);break;default:if(!H)for(q=1,H=new Array(N-1);q<N;q++)H[q-1]=arguments[q];A[C].fn.apply(A[C].context,H)}}return!0},u.prototype.on=function(d,_,h){return o(this,d,_,h,!1)},u.prototype.once=function(d,_,h){return o(this,d,_,h,!0)},u.prototype.removeListener=function(d,_,h,g){var y=n?n+d:d;if(!this._events[y])return this;if(!_)return a(this,y),this;var m=this._events[y];if(m.fn)m.fn===_&&(!g||m.once)&&(!h||m.context===h)&&a(this,y);else{for(var v=0,A=[],N=m.length;v<N;v++)(m[v].fn!==_||g&&!m[v].once||h&&m[v].context!==h)&&A.push(m[v]);A.length?this._events[y]=A.length===1?A[0]:A:a(this,y)}return this},u.prototype.removeAllListeners=function(d){var _;return d?(_=n?n+d:d,this._events[_]&&a(this,_)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,t.exports=u}(_i)),_i.exports}Tm();gt("automerge-repo:messagechannel");var xn=null;typeof WebSocket<"u"?xn=WebSocket:typeof MozWebSocket<"u"?xn=MozWebSocket:typeof global<"u"?xn=global.WebSocket||global.MozWebSocket:typeof window<"u"?xn=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(xn=self.WebSocket||self.MozWebSocket);const pi=xn,Om=t=>t.type==="peer",Rm=t=>t.type==="error",Mm="1";function bt(t,e="Assertion failed"){if(t===!1||t===null||t===void 0){const n=new Error(jm(e));throw n.stack=Dm(n.stack,"assert.ts"),n}}const jm=t=>t.split(`
`).map(e=>e.trim()).join(`
`),Dm=(t="",e)=>t.split(`
`).filter(n=>!n.includes(e)).join(`
`),Um=t=>{const{buffer:e,byteOffset:n,byteLength:r}=t;return e.slice(n,n+r)};class Hm extends Lu{socket}class Pm extends Hm{url;retryInterval;#e=!1;#t;#r=new Promise(e=>{this.#t=e});isReady(){return this.#e}whenReady(){return this.#r}#n(){this.#e||(this.#e=!0,this.#t?.())}#s;#i=gt("automerge-repo:websocket:browser");remotePeerId;constructor(e,n=5e3){super(),this.url=e,this.retryInterval=n,this.#i=this.#i.extend(e)}connect(e,n){!this.socket||!this.peerId?(this.#i("connecting"),this.peerId=e,this.peerMetadata=n??{}):(this.#i("reconnecting"),bt(e===this.peerId),this.socket.removeEventListener("open",this.onOpen),this.socket.removeEventListener("close",this.onClose),this.socket.removeEventListener("message",this.onMessage),this.socket.removeEventListener("error",this.onError)),this.#s||(this.#s=setInterval(()=>{this.connect(e,n)},this.retryInterval)),this.socket=new pi(this.url),this.socket.binaryType="arraybuffer",this.socket.addEventListener("open",this.onOpen),this.socket.addEventListener("close",this.onClose),this.socket.addEventListener("message",this.onMessage),this.socket.addEventListener("error",this.onError),setTimeout(()=>this.#n(),1e3),this.join()}onOpen=()=>{this.#i("open"),clearInterval(this.#s),this.#s=void 0,this.join()};onClose=()=>{this.#i("close"),this.remotePeerId&&this.emit("peer-disconnected",{peerId:this.remotePeerId}),this.retryInterval>0&&!this.#s&&setTimeout(()=>(bt(this.peerId),this.connect(this.peerId,this.peerMetadata)),this.retryInterval)};onMessage=e=>{this.receiveMessage(e.data)};onError=e=>{if("error"in e&&e.error.code!=="ECONNREFUSED")throw e.error;this.#i("Connection failed, retrying...")};join(){bt(this.peerId),bt(this.socket),this.socket.readyState===pi.OPEN&&this.send(Lm(this.peerId,this.peerMetadata))}disconnect(){bt(this.peerId),bt(this.socket);const e=this.socket;e&&(e.removeEventListener("open",this.onOpen),e.removeEventListener("close",this.onClose),e.removeEventListener("message",this.onMessage),e.removeEventListener("error",this.onError),e.close()),clearInterval(this.#s),this.remotePeerId&&this.emit("peer-disconnected",{peerId:this.remotePeerId}),this.socket=void 0}send(e){if("data"in e&&e.data?.byteLength===0)throw new Error("Tried to send a zero-length message");if(bt(this.peerId),!this.socket){this.#i("Tried to send on a disconnected socket.");return}if(this.socket.readyState!==pi.OPEN)throw new Error(`Websocket not ready (${this.socket.readyState})`);const n=Mu(e);this.socket.send(Um(n))}peerCandidate(e,n){bt(this.socket),this.#n(),this.remotePeerId=e,this.emit("peer-candidate",{peerId:e,peerMetadata:n})}receiveMessage(e){let n;try{n=L_(new Uint8Array(e))}catch(r){this.#i("error decoding message:",r);return}if(bt(this.socket),e.byteLength===0)throw new Error("received a zero-length message");if(Om(n)){const{peerMetadata:r}=n;this.#i(`peer: ${n.senderId}`),this.peerCandidate(n.senderId,r)}else Rm(n)?this.#i(`error: ${n.message}`):this.emit("message",n)}}function Lm(t,e){return{type:"join",senderId:t,peerMetadata:e,supportedProtocolVersions:[Mm]}}gt("WebsocketServer");class Bm{database;store;dbPromise;constructor(e="automerge",n="documents"){this.database=e,this.store=n,this.dbPromise=this.createDatabasePromise()}createDatabasePromise(){return new Promise((e,n)=>{const r=indexedDB.open(this.database,1);r.onerror=()=>{n(r.error)},r.onupgradeneeded=i=>{i.target.result.createObjectStore(this.store)},r.onsuccess=i=>{const o=i.target.result;e(o)}})}async load(e){const r=(await this.dbPromise).transaction(this.store),o=r.objectStore(this.store).get(e);return new Promise((a,u)=>{r.onerror=()=>{u(o.error)},o.onsuccess=f=>{const d=f.target.result;d&&typeof d=="object"&&"binary"in d?a(d.binary):a(void 0)}})}async save(e,n){const i=(await this.dbPromise).transaction(this.store,"readwrite");return i.objectStore(this.store).put({key:e,binary:n},e),new Promise((a,u)=>{i.onerror=()=>{u(i.error)},i.oncomplete=()=>{a()}})}async remove(e){const r=(await this.dbPromise).transaction(this.store,"readwrite");return r.objectStore(this.store).delete(e),new Promise((o,a)=>{r.onerror=()=>{a(r.error)},r.oncomplete=()=>{o()}})}async loadRange(e){const n=await this.dbPromise,r=e,i=[...e,"ï¿¿"],o=IDBKeyRange.bound(r,i),a=n.transaction(this.store),f=a.objectStore(this.store).openCursor(o),d=[];return new Promise((_,h)=>{a.onerror=()=>{h(f.error)},f.onsuccess=g=>{const y=g.target.result;y?(d.push({data:y.value.binary,key:y.key}),y.continue()):_(d)}})}async removeRange(e){const n=await this.dbPromise,r=e,i=[...e,"ï¿¿"],o=IDBKeyRange.bound(r,i),a=n.transaction(this.store,"readwrite");return a.objectStore(this.store).delete(o),new Promise((f,d)=>{a.onerror=()=>{d(a.error)},a.oncomplete=()=>{f()}})}}const cl=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};(function(){var t=Object.defineProperty;function e(s){s=[typeof globalThis=="object"&&globalThis,s,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var c=0;c<s.length;++c){var l=s[c];if(l&&l.Math==Math)return l}throw Error("Cannot find global object")}var n=e(this);function r(s,c){if(c)e:{var l=n;s=s.split(".");for(var p=0;p<s.length-1;p++){var I=s[p];if(!(I in l))break e;l=l[I]}s=s[s.length-1],p=l[s],c=c(p),c!=p&&c!=null&&t(l,s,{configurable:!0,writable:!0,value:c})}}r("Symbol.dispose",function(s){return s||Symbol("Symbol.dispose")});var i=this||self;function o(s,c){var l=Array.prototype.slice.call(arguments,1);return function(){var p=l.slice();return p.push.apply(p,arguments),s.apply(this,p)}}function a(s,c){function l(){}l.prototype=c.prototype,s.qa=c.prototype,s.prototype=new l,s.prototype.constructor=s,s.oa=function(p,I,j){for(var O=Array(arguments.length-2),re=2;re<arguments.length;re++)O[re-2]=arguments[re];return c.prototype[I].apply(p,O)}}function u(s,c){if(Error.captureStackTrace)Error.captureStackTrace(this,u);else{const l=Error().stack;l&&(this.stack=l)}s&&(this.message=String(s)),c!==void 0&&(this.cause=c)}a(u,Error),u.prototype.name="CustomError";function f(s){i.setTimeout(()=>{throw s},0)}var d,_;e:{for(var h=["CLOSURE_FLAGS"],g=i,y=0;y<h.length;y++)if(g=g[h[y]],g==null){_=null;break e}_=g}var m=_&&_[610401301];d=m??!1;var v;const A=i.navigator;v=A&&A.userAgentData||null;function N(s){return d&&v?v.brands.some(({brand:c})=>c&&c.indexOf(s)!=-1):!1}function H(s){var c;e:{if((c=i.navigator)&&(c=c.userAgent))break e;c=""}return c.indexOf(s)!=-1}function C(){return d?!!v&&v.brands.length>0:!1}function Z(){return C()?N("Chromium"):(H("Chrome")||H("CriOS"))&&!(!C()&&H("Edge"))||H("Silk")}function q(s,c){c=Array.prototype.indexOf.call(s,c,void 0),c>=0&&Array.prototype.splice.call(s,c,1)}!H("Android")||Z(),Z(),H("Safari")&&(Z()||!C()&&H("Coast")||!C()&&H("Opera")||!C()&&H("Edge")||(C()?N("Microsoft Edge"):H("Edg/"))||C()&&N("Opera"));function J(s){let c="",l=0;const p=s.length-10240;for(;l<p;)c+=String.fromCharCode.apply(null,s.subarray(l,l+=10240));return c+=String.fromCharCode.apply(null,l?s.subarray(l):s),btoa(c)}const te=/[-_.]/g,X={"-":"+",_:"/",".":"="};function $(s){return X[s]||""}function V(s){return s!=null&&s instanceof Uint8Array}var K={};function se(){return z||(z=new S(null,K))}var S=class{constructor(s,c){if(U(c),this.g=s,s!=null&&s.length===0)throw Error("ByteString should be constructed with non-empty values")}};let z;function U(s){if(s!==K)throw Error("illegal external caller")}function L(s,c){s.__closure__error__context__984382||(s.__closure__error__context__984382={}),s.__closure__error__context__984382.severity=c}let D;function Q(){const s=Error();L(s,"incident"),f(s)}function k(s){return s=Error(s),L(s,"warning"),s}function F(){return typeof BigInt=="function"}function w(s){return Array.prototype.slice.call(s)}function R(s,c){return c&&Symbol.for&&s?Symbol.for(s):s!=null?Symbol(s):Symbol()}var W=R("jas",!0),ie=R(),ue=R();function le(s,c){c[W]=(s|0)&-30975}function de(s,c){c[W]=(s|34)&-30941}var ge={},_e={};function Ie(s){return!(!s||typeof s!="object"||s.g!==_e)}function Ut(s){return s!==null&&typeof s=="object"&&!Array.isArray(s)&&s.constructor===Object}function sr(s,c){if(s!=null){if(typeof s=="string")s=s?new S(s,K):se();else if(s.constructor!==S)if(V(s))s=s.length?new S(new Uint8Array(s),K):se();else{if(!c)throw Error();s=void 0}}return s}function Ht(s){return!Array.isArray(s)||s.length?!1:!!((s[W]|0)&1)}var oo;const ao=[];ao[W]=55,oo=Object.freeze(ao);function ir(s){if(s&2)throw Error()}var ul=Object.freeze({});function or(s){return s.pa=!0,s}var fl=or(s=>typeof s=="number"),co=or(s=>typeof s=="string"),ll=or(s=>typeof s=="boolean"),ar=typeof i.BigInt=="function"&&typeof i.BigInt(0)=="bigint",os=or(s=>ar?s>=hl&&s<=_l:s[0]==="-"?uo(s,dl):uo(s,gl));const dl=Number.MIN_SAFE_INTEGER.toString(),hl=ar?BigInt(Number.MIN_SAFE_INTEGER):void 0,gl=Number.MAX_SAFE_INTEGER.toString(),_l=ar?BigInt(Number.MAX_SAFE_INTEGER):void 0;function uo(s,c){if(s.length>c.length)return!1;if(s.length<c.length||s===c)return!0;for(let l=0;l<s.length;l++){const p=s[l],I=c[l];if(p>I)return!1;if(p<I)return!0}}let Pe=0,Ge=0;function fo(s){const c=s>>>0;Pe=c,Ge=(s-c)/4294967296>>>0}function lo(s){if(s<0){fo(-s);const[c,l]=cs(Pe,Ge);Pe=c>>>0,Ge=l>>>0}else fo(s)}function as(s,c){if(c>>>=0,s>>>=0,c<=2097151)var l=""+(4294967296*c+s);else F()?l=""+(BigInt(c)<<BigInt(32)|BigInt(s)):(l=(s>>>24|c<<8)&16777215,c=c>>16&65535,s=(s&16777215)+l*6777216+c*6710656,l+=c*8147497,c*=2,s>=1e7&&(l+=s/1e7>>>0,s%=1e7),l>=1e7&&(c+=l/1e7>>>0,l%=1e7),l=c+ho(l)+ho(s));return l}function ho(s){return s=String(s),"0000000".slice(s.length)+s}function cs(s,c){return c=~c,s?s=~s+1:c+=1,[s,c]}function go(s){if(s==null||typeof s=="boolean")return s;if(typeof s=="number")return!!s}const pl=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function _o(s){const c=typeof s;switch(c){case"bigint":return!0;case"number":return Number.isFinite(s)}return c!=="string"?!1:pl.test(s)}function At(s){if(s!=null){if(!Number.isFinite(s))throw k("enum");s|=0}return s}function us(s){if(s!=null&&typeof s=="string"){if(!s)return;s=+s}}function fs(s){if(s!=null)e:{if(!_o(s))throw k("int64");switch(typeof s){case"string":s=yo(s);break e;case"bigint":var c=s=BigInt.asIntN(64,s);if(co(c)){if(!/^\s*(?:-?[1-9]\d*|0)?\s*$/.test(c))throw Error(String(c))}else if(fl(c)&&!Number.isSafeInteger(c))throw Error(String(c));ar?s=BigInt(s):s=ll(s)?s?"1":"0":co(s)?s.trim()||"0":String(s);break e;default:s=po(s)}}return s}function po(s){if(s=Math.trunc(s),!Number.isSafeInteger(s)){lo(s);var c=Pe,l=Ge;(s=l&2147483648)&&(c=~c+1>>>0,l=~l>>>0,c==0&&(l=l+1>>>0));const p=l*4294967296+(c>>>0);c=Number.isSafeInteger(p)?p:as(c,l),s=typeof c=="number"?s?-c:c:s?"-"+c:c}return s}function yo(s){var c=Math.trunc(Number(s));if(Number.isSafeInteger(c))return String(c);if(c=s.indexOf("."),c!==-1&&(s=s.substring(0,c)),!(s[0]==="-"?s.length<20||s.length===20&&Number(s.substring(0,7))>-922337:s.length<19||s.length===19&&Number(s.substring(0,6))<922337)){if(s.length<16)lo(Number(s));else if(F())s=BigInt(s),Pe=Number(s&BigInt(4294967295))>>>0,Ge=Number(s>>BigInt(32)&BigInt(4294967295));else{c=+(s[0]==="-"),Ge=Pe=0;const l=s.length;for(let p=c,I=(l-c)%6+c;I<=l;p=I,I+=6){const j=Number(s.slice(p,I));Ge*=1e6,Pe=Pe*1e6+j,Pe>=4294967296&&(Ge+=Math.trunc(Pe/4294967296),Ge>>>=0,Pe>>>=0)}if(c){const[p,I]=cs(Pe,Ge);Pe=p,Ge=I}}if(s=Pe,c=Ge,c&2147483648)if(F())s=""+(BigInt(c|0)<<BigInt(32)|BigInt(s>>>0));else{const[l,p]=cs(s,c);s="-"+as(l,p)}else s=as(s,c)}return s}function Et(s){if(s!=null&&typeof s!="string")throw Error();return s}function mo(s,c,l){if(s!=null&&typeof s=="object"&&s.H===ge)return s;if(Array.isArray(s)){var p=s[W]|0,I=p;return I===0&&(I|=l&32),I|=l&2,I!==p&&(s[W]=I),new c(s)}}function yl(s){Rn===void 0&&(Rn=typeof Proxy=="function"?wo(Proxy):null);var c;return(c=!Rn)||(Mn===void 0&&(Mn=typeof WeakMap=="function"?wo(WeakMap):null),c=!Mn),c?s:(c=bo(s))?c:Math.random()>.01?s:(wl(s),c=new Rn(s,{set(l,p,I){return ml(),l[p]=I,!0}}),bl(s,c),c)}function ml(){Q()}let cr,ls;function bo(s){let c;return(c=cr)==null?void 0:c.get(s)}function bl(s,c){(cr||(cr=new Mn)).set(s,c),(ls||(ls=new Mn)).set(c,s)}let Rn,Mn;function wo(s){try{return s.toString().indexOf("[native code]")!==-1?s:null}catch{return null}}let ds;function wl(s){if(ds===void 0){const c=new Rn([],{});ds=Array.prototype.concat.call([],c).length===1}ds&&typeof Symbol=="function"&&Symbol.isConcatSpreadable&&(s[Symbol.isConcatSpreadable]=!0)}function vl(s,c){return vo(c)}function vo(s){switch(typeof s){case"number":return isFinite(s)?s:String(s);case"bigint":return os(s)?Number(s):String(s);case"boolean":return s?1:0;case"object":if(s)if(Array.isArray(s)){if(Ht(s))return}else{if(V(s))return J(s);if(s instanceof S){const c=s.g;return c==null?"":typeof c=="string"?c:s.g=J(c)}}}return s}function Sl(s,c,l){s=w(s);var p=s.length;const I=c&256?s[p-1]:void 0;for(p+=I?-1:0,c=c&512?1:0;c<p;c++)s[c]=l(s[c]);if(I){c=s[c]={};for(const j in I)c[j]=l(I[j])}return s}function So(s,c,l,p,I){if(s!=null){if(Array.isArray(s))s=Ht(s)?void 0:I&&(s[W]|0)&2?s:hs(s,c,l,p!==void 0,I);else if(Ut(s)){const j={};for(let O in s)j[O]=So(s[O],c,l,p,I);s=j}else s=c(s,p);return s}}function hs(s,c,l,p,I){const j=p||l?s[W]|0:0;p=p?!!(j&32):void 0,s=w(s);for(let O=0;O<s.length;O++)s[O]=So(s[O],c,l,p,I);return l&&l(j,s),s}function xl(s){return s.H===ge?s.toJSON():vo(s)}function xo(s,c,l=de){if(s!=null){if(s instanceof Uint8Array)return c?s:new Uint8Array(s);if(Array.isArray(s)){var p=s[W]|0;return p&2?s:(c&&(c=p===0||!!(p&32)&&!(p&64||!(p&16))),c?(s[W]=(p|34)&-12293,s):hs(s,xo,p&4?de:l,!0,!0))}return s.H===ge&&(l=s.m,p=l[W],s=p&2?s:new s.constructor(gs(l,p,!0))),s}}function gs(s,c,l){const p=l||c&2?de:le,I=!!(c&32);return s=Sl(s,c,j=>xo(j,I,p)),s[W]=s[W]|32|(l?2:0),s}function _s(s){const c=s.m,l=c[W];return l&2?new s.constructor(gs(c,l,!1)):s}function kt(s,c){return s=s.m,rn(s,s[W],c)}function Io(s,c,l,p){if(c=p+(+!!(c&512)-1),!(c<0||c>=s.length||c>=l))return s[c]}function rn(s,c,l,p){if(l===-1)return null;const I=c>>15&1023||536870912;if(l>=I){if(c&256)return s[s.length-1][l]}else{var j=s.length;if(p&&c&256&&(p=s[j-1][l],p!=null)){if(Io(s,c,I,l)&&ie!=null){var O;s=(O=D)!=null?O:D={},O=s[ie]||0,O>=4||(s[ie]=O+1,Q())}return p}return Io(s,c,I,l)}}function ps(s,c,l){const p=s.m;let I=p[W];return ir(I),Ne(p,I,c,l),s}function Ne(s,c,l,p){const I=c>>15&1023||536870912;if(l>=I){let j,O=c;if(c&256)j=s[s.length-1];else{if(p==null)return O;j=s[I+(+!!(c&512)-1)]={},O|=256}return j[l]=p,l<I&&(s[l+(+!!(c&512)-1)]=void 0),O!==c&&(s[W]=O),O}return s[l+(+!!(c&512)-1)]=p,c&256&&(s=s[s.length-1],l in s&&delete s[l]),c}function sn(s,c,l,p){return l=Ct(s,p)===l?l:-1,Ao(s,c,l)!==void 0}function on(s){return!!(2&s)&&!!(4&s)||!!(2048&s)}function Ae(s,c,l,p){const I=s.m;let j=I[W];return ir(j),Ne(I,j,c,(p==="0"?Number(l)===0:l===p)?void 0:l),s}function Ct(s,c){return s=s.m,ms(ys(s),s,s[W],c)}function ys(s){let c;return(c=s[ue])!=null?c:s[ue]=new Map}function ms(s,c,l,p){let I=s.get(p);if(I!=null)return I;I=0;for(let j=0;j<p.length;j++){const O=p[j];rn(c,l,O)!=null&&(I!==0&&(l=Ne(c,l,I)),I=O)}return s.set(p,I),I}function Ao(s,c,l,p){s=s.m;let I=s[W];return p=rn(s,I,l,p),c=mo(p,c,I),c!==p&&c!=null&&Ne(s,I,l,c),c}function bs(s,c,l){if(c=Ao(s,c,l,!1),c==null)return c;s=s.m;let p=s[W];if(!(p&2)){const I=_s(c);I!==c&&(c=I,Ne(s,p,l,c))}return c}function an(s,c,l){return l==null&&(l=void 0),ps(s,c,l)}function we(s,c,l,p){p==null&&(p=void 0);e:{const O=s.m;var I=O[W];if(ir(I),p==null){var j=ys(O);if(ms(j,O,I,l)===c)j.set(l,0);else break e}else{j=O;const re=ys(j),ne=ms(re,j,I,l);ne!==c&&(ne&&(I=Ne(j,I,ne)),re.set(l,c))}Ne(O,I,c,p)}return s}function Eo(s,c){const l=s.m;let p=l[W];if(ir(p),c==null)return Ne(l,p,1),s;var I=c,j;c=((j=ls)==null?void 0:j.get(I))||I,j=I=c[W]|0;const O=on(I),re=O||Object.isFrozen(c);let ne=!0,Re=!0;for(let Ve=0;Ve<c.length;Ve++){var Le=c[Ve];O||(Le=!!((Le.m[W]|0)&2),ne&&(ne=!Le),Re&&(Re=Le))}return O||(I=ne?13:5,I=Re?I|16:I&-17),re&&I===j||(c=w(c),j=0,I=ur(I,p),I=ws(I,p,!0)),I!==j&&(c[W]=I),Ne(l,p,1,c),s}function ur(s,c){return s=(2&c?s|2:s&-3)|32,s&=-2049}function ws(s,c,l){return 32&c&&l||(s&=-33),s}function cn(s,c){return s??c}function ko(s){return s=kt(s,1),s!=null&&(typeof s=="bigint"?os(s)?s=Number(s):(s=BigInt.asIntN(64,s),s=os(s)?Number(s):String(s)):s=_o(s)?typeof s=="number"?po(s):yo(s):void 0),cn(s,0)}function Je(s,c){return s=kt(s,c),cn(s==null||typeof s=="string"?s:void 0,"")}function Pt(s,c){return s=kt(s,c),s=s==null?s:Number.isFinite(s)?s|0:void 0,cn(s,0)}function Ee(s,c,l,p){return l=Ct(s,p)===l?l:-1,bs(s,c,l)}let un;function vs(s){try{return un=!0,JSON.stringify(Ss(s),vl)}finally{un=!1}}function Il(){var s=ua||(ua=Al("[1,2,0]"));s=_s(s),s=ps(s,4,Et("dev-706864954"));const c=s.m,l=c[W];return l&2?s:new s.constructor(gs(c,l,!0))}var ae=class{constructor(s){e:{var c=c??0;if(s==null){var l=96;s=[]}else{if(!Array.isArray(s))throw Error("narr");if(l=s[W]|0,l&2048)throw Error("farr");if(l&64)break e;c===1||c===2||(l|=64),c=s;var p=c.length;if(p&&(--p,Ut(c[p]))){if(l|=256,c=p-(+!!(l&512)-1),c>=1024)throw Error("pvtlmt");l=l&-33521665|(c&1023)<<15}}s[W]=l}this.m=s}toJSON(){return Ss(this)}};ae.prototype.H=ge,ae.prototype.toString=function(){try{return un=!0,Ss(this).toString()}finally{un=!1}};function Ss(s){s=s.m,s=un?s:hs(s,xl,void 0,void 0,!1);{var c=!un;let Re=s.length;if(Re){var l=s[Re-1],p=Ut(l);p?Re--:l=void 0;var I=s;if(p){e:{var j=l,O,re=!1;if(j){for(let Le in j)if(isNaN(+Le)){let Ve;((Ve=O)!=null?Ve:O={})[Le]=j[Le]}else if(p=j[Le],Array.isArray(p)&&(Ht(p)||Ie(p)&&p.size===0)&&(p=null),p==null&&(re=!0),p!=null){let Ve;((Ve=O)!=null?Ve:O={})[Le]=p}}if(re||(O=j),O)for(let Le in O){re=O;break e}re=null}j=re==null?l!=null:re!==l}for(;Re>0&&(O=I[Re-1],!!(O==null||Ht(O)||Ie(O)&&O.size===0));Re--)var ne=!0;(I!==s||j||ne)&&(c?(ne||j||re)&&(I.length=Re):I=Array.prototype.slice.call(I,0,Re),re&&I.push(re)),ne=I}else ne=s}return ne}function fr(s){return c=>{if(c==null||c=="")c=new s;else{if(c=JSON.parse(c),!Array.isArray(c))throw Error("dnarr");c[W]|=32,c=new s(c)}return c}}var Al=function(s){return c=>{if(c=JSON.parse(c),!Array.isArray(c)){var l=typeof c;throw Error("Expected jspb data to be an array, got "+(l!="object"?l:c?Array.isArray(c)?"array":l:"null")+": "+c)}return c[W]|=34,new s(c)}}(class extends ae{}),Co=class extends ae{};function El(s){var c=new Ro(500);let l=0,p;return(...I)=>{To(c)?s(...I):(p=()=>void s(...I),l||(l=setTimeout(()=>{l=0;let j;(j=p)==null||j()},Cl(c))))}}function kl(s){var c=new Ro(100),l=Promise.resolve();return(...p)=>To(c)?s(...p):l}function To(s){return Oo(s,s.index)>=s.g?(s.h[s.index]=Date.now(),s.index=(s.index+1)%1,!0):!1}function Cl(s){const c=s.g;return s=Oo(s,s.index),s>=c?0:c-s}function Oo(s,c){let l;return Date.now()-((l=s.h[c])!=null?l:-1*s.g)}var Ro=class{constructor(s){this.g=s,this.h=[],this.index=0}},Mo=class extends ae{},Tl=[2,3],Ol=class extends ae{},me=class extends Error{constructor({errorType:s,message:c,i:l}){super(`Meet Add-on SDK error: ${`${c}${l?` - ${l}`:""}`}`),this.errorType=s}},Lt={errorType:"InternalError",message:"An unexpected error has occurred.",i:"No further information is available."},jo={errorType:"MissingUrlParameter",message:"Missing required Meet SDK URL parameter",i:"This parameter is automatically appended by Meet to the iframe URL. Ensure that your infrastructure does not strip URL parameters (e.g. as part of a redirect)."},Do={errorType:"NeedsMainStageContext",message:"This method can only be invoked if the addon is running in the main stage.",i:"Use getFrameType to check whether the addon is running in the main stage before invoking this method."},Rl={errorType:"NeedsSidePanelContext",message:"This method can only be invoked if the addon is running in the side panel.",i:"Use getFrameType to check whether the addon is running in the side panel before invoking this method."},Ml={errorType:"NotSupportedInStandalone",message:"This method is not supported in standalone mode.",i:"Do not call this method in standalone mode."},jl={errorType:"InternalError",message:"The frame type URL parameter is set to an unexpected value.",i:"This parameter is automatically appended by Meet to the iframe URL. Ensure that your infrastructure does not modify URL parameters (e.g. as part of a redirect)."},Dl={errorType:"InvalidCloudProjectNumber",message:"Cloud Project Number provided by meet does not match the one passed in by the SDK. Ensure that the correct Cloud Project Number is passed to the SDK as a string.",i:"This parameter is automatically appended by Meet to the iframe URL. Ensure that your infrastructure does not modify URL parameters (e.g. as part of a redirect) and ensure that the correct Cloud Project Number was passed into the SDK as a string."},Ul={errorType:"DestinationNotReady",message:"The recipient frame is not connected via the addon SDK and cannot receive the notification.",i:"Make sure the destination frame has connected before sending messages to it."},Hl={errorType:"InvalidActivityStartingState",message:"Origin of the ActivityStartingState iframeURLs does not match the origin of the URLs provided in the Add-on manifest.",i:"Ensure that the ActivityStartingState iframeURL origins match the origins of the URLs provided in the Add-on manifest."},Pl={errorType:"ActivityStartingStateMissingAttributes",message:"The supplied ActivityStartingState object does not contain any recognized attributes.",i:"Ensure that the ActivityStartingState object contains at least one of the following attributes: mainStageUrl, sidePanelUrl, additionalData."},Ll={errorType:"ActivityStartingStateUnrecognizedAttributes",message:"The supplied ActivityStartingState object contains attributes that are not recognized.",i:"Ensure that the ActivityStartingState object has only the following attributes: mainStageUrl, sidePanelUrl, additionalData."},Bl={errorType:"AddonStartingStateMissingAttributes",message:"The supplied AddonStartingState object does not contain any recognized attributes.",i:"Ensure that the AddonStartingState object contains at least one of the following attributes: sidePanelUrl, additionalData."},$l={errorType:"AddonStartingStateUnrecognizedAttributes",message:"The supplied AddonStartingState object contains attributes that are not recognized.",i:"Ensure that the AddonStartingState object has only the following attributes: sidePanelUrl, additionalData."},xs=s=>({errorType:"ArgumentNullError",message:`The argument supplied for '${s}' was 'null' but a value was expected.`,i:"Ensure you are passing a value of the expected type for the argument."}),_t=(s,c,l)=>({errorType:"ArgumentTypeError",message:`The type '${c}' of argument supplied for '${s}' did not match the expected type '${l}'.`,i:"Ensure the type of the argument provided matches the expected type."}),Uo=s=>({errorType:"InternalError",message:`Could not connect to ${s} channel. Unknown error`,i:"No further information is available."}),Fl={errorType:"ActivityIsOngoing",message:"Operation cannot be performed while an activity is ongoing.",i:"Ensure that no activity is ongoing."},Nl={errorType:"InternalError",message:"Frame message missing required Meet SDK command.",i:"Send one of the available commands in the frame message."},Vl={errorType:"NoActivityFound",message:"No activity found.",i:"Ensure that the activity is started before performing this operation."},zl={errorType:"RequiresEapEnrollment",message:"This feature is only available to early access partners.",i:"Meet add-on early access enrollment is currently closed."},Wl={errorType:"UserNotInitiator",message:"Operation cannot be performed because the user is not the initiator of the current activity.",i:"Ensure that the user is the initiator of the current activity or that the activity has ended."},ql={errorType:"SizeLimitExceededActivityStartingState",message:"The size of the activityStartingState URLs and/or its data exceed the limits allowed.",i:"Ensure that the activityStartingState URL size is less than 512 characters and the additional data size is less than 4096 characters."},Gl={errorType:"SizeLimitExceededFrameToFrameMessage",message:"The size of the frame to frame message exceeds the limits allowed.",i:"Ensure that the frame to frame message size is less than 1,000,000 characters."},Jl={errorType:"AddonSessionAlreadyCreated",message:"The addon session has already been created.",i:"Only instantiate the AddonSession once."},Kl={errorType:"UserCancelled",message:"The user cancelled starting an activity.",i:"The user needs to click continue to start the activity."},Yl={errorType:"NotSupportedInMeetCall",message:"This method is not supported during a Meet call.",i:"Do not call this method during a Meet call."},Xl={errorType:"InvalidAddonStartingState",message:"Origin of the AddonStartingState iframeURLs does not match the origin of the URLs provided in the Add-on manifest.",i:"Ensure that the AddonStartingState iframeURL origins match the origins of the URLs provided in the Add-on manifest."},Zl={errorType:"SizeLimitExceededAddonStartingState",message:"The size of the AddonStartingState URLs and/or its data exceed the limits allowed.",i:"Ensure that the AddonStartingState URL size is less than 512 characters and the additional data size is less than 4096 characters."},Ql={errorType:"MeetingPolicyPreventsStartingActivity",message:"A meeting policy (such as using host control settings) prevents the user from starting the activity.",i:"Have a meeting host or administrator modify the necessary settings to allow the current user to start the activity."};function ed(s){switch(s){case 0:return Lt;case 1:return Ul;case 2:return Hl;case 3:return Fl;case 4:return Nl;case 5:return zl;case 6:return Ml;case 7:return Wl;case 8:return ql;case 9:return Gl;case 10:return Kl;case 11:return Yl;case 12:return Xl;case 13:return Zl;case 14:return Vl;case 15:return Ql;default:return Lt}}function td(s){let c;var l=(c=Pt(s,1))!=null?c:0;switch(s=nd(Ct(s,Tl)),l){case 1:return{errorType:"InternalError",message:`Could not connect to ${s} channel. Meet did not respond with a MessagePort.`,i:"No further information is available."};case 2:return{errorType:"InternalError",message:`Could not connect to ${s}. A conflicting ${s} exists.`,i:"No further information is available."};case 3:return{errorType:"InternalError",message:`Could not connect to ${s} channel. The addon does not have permission to open a ${s}.`,i:"This method might require EAP enrollment."};case 4:return{errorType:"InternalError",message:`Could not connect to ${s} channel. The addon is not authorized for this ${s}.`,i:"No further information is available."};case 0:return Uo(s);case 5:e:switch(s){case"co":l={errorType:"InternalError",message:`Could not connect to ${s} channel. The coActivity was not found.`,i:`Consider starting the ${s} only after after the startActivity promise returns.`};break e;default:l={errorType:"InternalError",message:`Could not connect to ${s} channel.`,i:"No further information is available."}}return l;default:return Uo(s)}}function nd(s){switch(s){case 2:return"co";case 3:return"gd";case 0:return"unknown";default:return"unknown"}}function fn({errorType:s,message:c,i:l},p=""){throw new me({errorType:s,message:p?`${c} ${p}`:c,i:l})}function lr(s,c){fn({...jo,message:`${jo.message}: ${s}. In URL ${c}`})}function Is(s){var c=new Ho;return Ae(c,1,At(s),0)}function As(s,c){return Ae(s,2,Et(c),"")}function Es(s,c){return Ae(s,3,Et(c),"")}var Ho=class extends ae{getFrameType(){return Pt(this,1)}};function Po(s){var c;ul===void 0?c=2:c=4;var l=s.m[W],p=l,I=!(2&l),j=Ho;s=s.m,c=(l=!!(2&p))?1:c,I&&(I=!l),l=rn(s,p,1),l=Array.isArray(l)?l:oo;var O=l[W]|0,re=!!(4&O);if(!re){var ne=O;ne===0&&(ne=ur(ne,p)),O=l,ne|=1;var Re=p;const yr=!!(2&ne);yr&&(Re|=2);let qs=!yr,Gs=!0,mr=0,Js=0;for(;mr<O.length;mr++){const Ks=mo(O[mr],j,Re);if(Ks instanceof j){if(!yr){const va=!!((Ks.m[W]|0)&2);qs&&(qs=!va),Gs&&(Gs=va)}O[Js++]=Ks}}Js<mr&&(O.length=Js),ne|=4,ne=Gs?ne|16:ne&-17,ne=qs?ne|8:ne&-9,O[W]=ne,yr&&Object.freeze(O),O=ne}if(I&&!(8&O||!l.length&&(c===1||c===4&&32&O))){for(on(O)&&(l=w(l),O=ur(O,p),p=Ne(s,p,1,l)),I=l,j=O,O=0;O<I.length;O++)ne=I[O],Re=_s(ne),ne!==Re&&(I[O]=Re);j|=8,j=I.length?j&-17:j|16,O=I[W]=j}let Le;if(c===1||c===4&&32&O){if(!on(O)){p=O;var Ve=!!(32&O);O|=!l.length||16&O&&(!re||Ve)?2:2048,O!==p&&(l[W]=O),Object.freeze(l)}}else re=c!==5?!1:!!(32&O)||on(O)||!!bo(l),(c===2||re)&&on(O)&&(l=w(l),O=ur(O,p),O=ws(O,p,!1),l[W]=O,p=Ne(s,p,1,l)),on(O)||(s=O,O=ws(O,p,!1),O!==s&&(l[W]=O)),re?Le=yl(l):c===2&&((Ve=cr)==null||Ve.delete(l));return Le||l}function Lo(s){var c=new Bo;return Eo(c,s)}var Bo=class extends ae{},rd=class extends ae{};function ks(s){var c=new sd;return Ae(c,1,At(s),0)}var sd=class extends ae{},id=class extends ae{},od=class extends ae{},ad=class extends ae{},cd=class extends ae{getMeetingInfo(){return Ee(this,ad,3,Cs)}getMeetPlatformInfo(){return Ee(this,od,4,Cs)}},Cs=[2,3,4,5],dr=class extends ae{},ln=[1,4,5,6,7,8,9,10,11,12,13,14,15,16,17],ud=class extends ae{},fd=class extends ae{},ld=new Map([[2,"MAIN_STAGE"],[1,"SIDE_PANEL"]]),dd=new Map([[0,"UNKNOWN"],[1,"OPEN_ADDON"],[2,"START_ACTIVITY"],[3,"JOIN_ACTIVITY"]]);function hd(s){s&&typeof s.dispose=="function"&&s.dispose()}function Tt(){this.s=this.s,this.g=this.g}Tt.prototype.s=!1,Tt.prototype.dispose=function(){this.s||(this.s=!0,this.G())},Tt.prototype[Symbol.dispose]=function(){this.dispose()};function $o(s,c){s.s?c():(s.g||(s.g=[]),s.g.push(c))}Tt.prototype.G=function(){if(this.g)for(;this.g.length;)this.g.shift()()};function Fo({J:s,R:c}){if(s===null)throw new me(xs("activityStartingState"));if(c||s!==void 0){if(typeof s!="object")throw new me(_t("activityStartingState",typeof s,`object${c?"":" | undefined"}`));if(s.mainStageUrl!==void 0&&typeof s.mainStageUrl!="string")throw new me(_t("mainStageUrl",typeof s.mainStageUrl,"string | undefined"));if(s.sidePanelUrl!==void 0&&typeof s.sidePanelUrl!="string")throw new me(_t("sidePanelUrl",typeof s.sidePanelUrl,"string | undefined"));if(s.additionalData!==void 0&&typeof s.additionalData!="string")throw new me(_t("additionalData",typeof s.additionalData,"string | undefined"));if(Object.keys(s).length!==+!!s.mainStageUrl+ +!!s.sidePanelUrl+ +!!s.additionalData)throw new me(Ll);if(Object.keys(s).length===0)throw new me(Pl)}}function No(s){const c=[];return c.push(Es(As(Is(2),s.mainStageUrl),s.additionalData)),c.push(Es(As(Is(1),s.sidePanelUrl),s.additionalData)),c}var Ts=class extends Tt{constructor(s){super(),this.context=s,this.h={},Dn(this.context.g.U,c=>{switch(Ct(c.content,ln)){case 7:const p=this.h.frameToFrameMessage;if(c=Ee(c.content,id,7,ln),p&&c){var l=Pt(c,1);if(l=ld.get(l),l===void 0)throw Error("Unknown frame type.");p({originator:l,payload:Je(c,2)})}}})}async getMeetingInfo(){const s=await Fs(this.context.g,ks(2));return{meetingId:Je(s.getMeetingInfo(),1),meetingCode:Je(s.getMeetingInfo(),2)}}async getFrameOpenReason(){let s;const c=(s=this.context.h.ca)!=null?s:0;let l;return(l=dd.get(c))!=null?l:"UNKNOWN"}async getActivityStartingState(){var s=Ee(await Fs(this.context.g,ks(1)),Bo,2,Cs);const c=s==null?void 0:Po(s).find(l=>l.getFrameType()===2);return s=s==null?void 0:Po(s).find(l=>l.getFrameType()===1),{mainStageUrl:(c==null?void 0:Je(c,2))||void 0,sidePanelUrl:(s==null?void 0:Je(s,2))||void 0,additionalData:(s==null?void 0:Je(s,3))||void 0}}async setActivityStartingState(s){Fo({J:s,R:!0});var c=No(s);s=Qd;var l=this.context.g,p=new ud;c=Lo(c),p=an(p,1,c),await s(l,p)}on(s,c){this.h[s]=c}async getMeetPlatformInfo(){const s=await Fs(this.context.g,ks(3));return{isMeetHardware:cn(go(kt(s.getMeetPlatformInfo(),1)),!1)}}async closeAddon(){await eh(this.context.g)}async startActivity(s){Fo({J:s,R:!1});const c=new fd;s&&(s=No(s),s=Lo(s),an(c,1,s)),await th(this.context.g,c)}async endActivity(s){var c=nh,l=this.context.g,p=new rd;s=Ae(p,1,At(s==="aab61ee0-51b4-475d-aa4d-849f2498640d"?999:0),0),await c(l,s)}},gd=fr(class extends ae{getFrameOpenReason(){return Pt(this,5)}});function Os(){var s=window.location.href,c=window.location.href,l=new URL(c).searchParams.get("meet_sdk");if(l?c=gd(atob(l)):(lr("meet_sdk",c),c=void 0),(l=Je(c,1))||lr("meet_addon_frame_type",s),l=Number(l),l!==2&&l!==1)throw new me(jl);const p=Je(c,2);p||lr("meet_control_channel_name",s);const I=Je(c,4);I||lr("addon_cloud_project_number",s);var j;return s=(j=c.getFrameOpenReason())!=null?j:0,j=Je(c,3)||"https://meet.google.com",{ca:s,frameType:l,ba:p,cloudProjectNumber:I,S:j}}var _d=class extends ae{},pd=class extends ae{};function yd(){var s=new md,c=new pd;return we(s,1,bd,c)}var md=class extends ae{},bd=[1,2];function wd(s){var c=new Sd;return an(c,2,s)}function vd(s,c){return Ae(s,3,Et(c),"")}var Sd=class extends ae{},xd=class extends ae{},Id=class extends ae{},Ad=class extends ae{},Ed=class extends ae{},kd=class extends ae{setAddonStartingState(s){return an(this,1,s)}},Cd=class extends ae{};function Td(s,c){return we(s,2,Ye,c)}var Ke=class extends ae{},Ye=[1,2,5,6,7,8,9,10,11,13,14,15,16],Vo=class extends ae{},hr=fr(Vo),dn=[1,2];class Od{constructor(c,l){this.data=c,this.channel=l}}var Rd=Promise;function zo(s){const c=new MessageChannel;return Wo(c.port1,s),c}function Rs(s,c){return Wo(s,c),new Md(s)}class Md{constructor(c){this.g=c}send(c,l,p=[]){l=zo(l),this.g.postMessage(c,[l.port2].concat(p))}C(c,l){return new Rd(p=>{this.send(c,p,l)})}}function Wo(s,c){c&&(s.onmessage=l=>{var p=l.data;l=Rs(l.ports[0]),c(new Od(p,l))})}var Ms=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?s=>s&&AsyncContext.Snapshot.wrap(s):s=>s;function qo(s,c){s.l(c),s.h<100&&(s.h++,c.next=s.g,s.g=c)}class Go{constructor(c,l){this.j=c,this.l=l,this.h=0,this.g=null}get(){let c;return this.h>0?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.j(),c}}function jd(){var s=Ko;let c=null;return s.g&&(c=s.g,s.g=s.g.next,s.g||(s.h=null),c.next=null),c}class Dd{constructor(){this.h=this.g=null}add(c,l){const p=Jo.get();p.set(c,l),this.h?this.h.next=p:this.g=p,this.h=p}}var Jo=new Go(()=>new Ud,s=>s.reset());class Ud{constructor(){this.next=this.g=this.h=null}set(c,l){this.h=c,this.g=l,this.next=null}reset(){this.next=this.g=this.h=null}}let js,Ds=!1,Ko=new Dd,Us=(s,c)=>{js||Hd(),Ds||(js(),Ds=!0),Ko.add(s,c)},Hd=()=>{const s=Promise.resolve(void 0);js=()=>{s.then(Pd)}};function Pd(){let s;for(;s=jd();){try{s.h.call(s.g)}catch(c){f(c)}qo(Jo,s)}Ds=!1}function Yo(){}function pt(s){if(this.g=0,this.T=void 0,this.l=this.h=this.j=null,this.v=this.B=!1,s!=Yo)try{const c=this;s.call(void 0,function(l){hn(c,2,l)},function(l){hn(c,3,l)})}catch(c){hn(this,3,c)}}function Xo(){this.next=this.context=this.h=this.l=this.g=null,this.j=!1}Xo.prototype.reset=function(){this.context=this.h=this.l=this.g=null,this.j=!1};var Zo=new Go(function(){return new Xo},function(s){s.reset()});function Hs(s,c,l){const p=Zo.get();return p.l=s,p.h=c,p.context=l,p}function Ld(){let s,c;const l=new pt(function(p,I){s=p,c=I});return new Nd(l,s,c)}pt.prototype.then=function(s,c,l){return Bd(this,Ms(typeof s=="function"?s:null),Ms(typeof c=="function"?c:null),l)},pt.prototype.$goog_Thenable=!0;function Qo(s,c){c=Ms(c),c=Hs(c,c),c.j=!0,Ps(s,c)}pt.prototype.cancel=function(s){if(this.g==0){const c=new yt(s);Us(function(){ea(this,c)},this)}};function ea(s,c){if(s.g==0)if(s.j){var l=s.j;if(l.h){var p=0,I=null,j=null;for(let O=l.h;O&&(O.j||(p++,O.g==s&&(I=O),!(I&&p>1)));O=O.next)I||(j=O);I&&(l.g==0&&p==1?ea(l,c):(j?(p=j,p.next==l.l&&(l.l=p),p.next=p.next.next):na(l),ra(l,I,3,c)))}s.j=null}else hn(s,3,c)}function Ps(s,c){s.h||s.g!=2&&s.g!=3||ta(s),s.l?s.l.next=c:s.h=c,s.l=c}function Bd(s,c,l,p){const I=Hs(null,null,null);return I.g=new pt(function(j,O){I.l=c?function(re){try{const ne=c.call(p,re);j(ne)}catch(ne){O(ne)}}:j,I.h=l?function(re){try{const ne=l.call(p,re);ne===void 0&&re instanceof yt?O(re):j(ne)}catch(ne){O(ne)}}:O}),I.g.j=s,Ps(s,I),I.g}pt.prototype.ma=function(s){this.g=0,hn(this,2,s)},pt.prototype.na=function(s){this.g=0,hn(this,3,s)};function hn(s,c,l){if(s.g==0){s===l&&(c=3,l=new TypeError("Promise cannot resolve to itself")),s.g=1;e:{var p=l,I=s.ma,j=s.na;if(p instanceof pt){Ps(p,Hs(I||Yo,j||null,s));var O=!0}else{if(p)try{var re=!!p.$goog_Thenable}catch{re=!1}else re=!1;if(re)p.then(I,j,s),O=!0;else{if(re=typeof p,re=="object"&&p!=null||re=="function")try{const ne=p.then;if(typeof ne=="function"){$d(p,ne,I,j,s),O=!0;break e}}catch(ne){j.call(s,ne),O=!0;break e}O=!1}}}O||(s.T=l,s.g=c,s.j=null,ta(s),c!=3||l instanceof yt||Fd(s,l))}}function $d(s,c,l,p,I){function j(ne){re||(re=!0,p.call(I,ne))}function O(ne){re||(re=!0,l.call(I,ne))}let re=!1;try{c.call(s,O,j)}catch(ne){j(ne)}}function ta(s){s.B||(s.B=!0,Us(s.la,s))}function na(s){let c=null;return s.h&&(c=s.h,s.h=c.next,c.next=null),s.h||(s.l=null),c}pt.prototype.la=function(){let s;for(;s=na(this);)ra(this,s,this.g,this.T);this.B=!1};function ra(s,c,l,p){if(l==3&&c.h&&!c.j)for(;s&&s.v;s=s.j)s.v=!1;if(c.g)c.g.j=null,sa(c,l,p);else try{c.j?c.l.call(c.context):sa(c,l,p)}catch(I){ia.call(null,I)}qo(Zo,c)}function sa(s,c,l){c==2?s.l.call(s.context,l):s.h&&s.h.call(s.context,l)}function Fd(s,c){s.v=!0,Us(function(){s.v&&ia.call(null,c)})}var ia=f;function yt(s){u.call(this,s)}a(yt,u),yt.prototype.name="cancel";function Nd(s,c,l){this.promise=s,this.resolve=c,this.reject=l}let Vd=1,jn=new WeakMap;function gr(s,c,l){var p=zd;s.h.has(c),p(c,l)}var Ls=class extends Tt{constructor(){super(),this.h=new Set}signal(){const s=new qd;return this.h.add(s),$o(this,o(hd,s)),s}};function zd(s,c){return new Promise(l=>{gn(()=>{s.L&&(s.ea=c,s.P=!0);for(const{I:p,slot:I}of s.o.values())try{I(c,{signal:s,I:p})}catch(j){f(j)}for(const p of s.A)p.resolve(c);s.A.clear(),l()})})}function Dn(s,c,l){const p=Vd++;return gn(()=>{Wd(s,p,c,l)}),p}function Wd(s,c,l,p){if(!s.s)if(p){if(!p.s){const I=()=>{gn(()=>{s.o.delete(c);const j=jn.get(p);j&&q(j,I)})};s.o.set(c,{I:c,slot:l,F:I}),aa(p,I)}}else s.o.set(c,{I:c,slot:l,F:()=>s.o.delete(c)})}var qd=class extends Tt{constructor(){super(),this.L=!1,this.o=new Map,this.A=new Set,this.P=!1}detach(s){gn(()=>{const c=this.o.get(s);c&&c.F()})}value(s){return this.promise(!0,s)}next(s){return this.promise(!1,s)}promise(s,c){const l=Ld();return gn(()=>{if(this.s)l.reject(new yt("Signal initially disposed"));else if(c&&c.s)l.reject(new yt("Owner initially disposed"));else if(s&&this.L&&this.P)l.resolve(this.ea);else if(this.A.add(l),Qo(l.promise,()=>{this.A.delete(l)}),c){const p=()=>{l.reject(new yt("Owner asynchronously disposed"))};Qo(l.promise,()=>{const I=jn.get(c);I&&q(I,p)}),aa(c,p)}}),l.promise}G(){super.G(),gn(()=>{for(const{F:s}of this.o.values())s();this.o.clear();for(const s of this.A)s.reject(new yt("Signal asynchronously disposed"));this.A.clear()})}};const Un=[];let Bs=!1;function gn(s){Un.push(s),Gd()}async function Gd(){if(!Bs)try{Bs=!0;let s=oa(0);for(;s<Un.length;)await Promise.resolve(),s=oa(s)}catch(s){f(s)}finally{Un.length=0,Bs=!1}}function oa(s){const c=s+100;for(;s<c&&s<Un.length;)try{Un[s++]()}catch(l){f(l)}return s}function aa(s,c){if(s.s)c();else{var l=jn.get(s);if(l)l.push(c);else{const p=[c];jn.set(s,p),$o(s,()=>{for(const I of[...p])I();jn.delete(s)})}}}function Xe(s){var c=new Vo;return s=we(c,1,dn,s),{content:vs(s)}}const ca=new Ls;function Jd(s,c){const l=ca.signal();return{channel:Rs(s,p=>{const I=c(p.data);gr(ca,l,{content:I,ka:p})}),signal:l}}let ua;var Bt=class extends ae{},$t=class extends ae{},$s=class extends ae{h(){return Ee(this,Bt,2,_r)}g(){return sn(this,Bt,2,_r)}j(){return Ee(this,$t,3,_r)}l(){return sn(this,$t,3,_r)}},_r=[2,3],Kd=fr(class extends ae{}),Yd=fr(class extends ae{}),pr=[1,2],Xd=({destination:s,origin:c,ra:l,Y:p="ZNWN1d",onMessage:I})=>{if(c==="*")throw Error("Sending to wildcard origin not allowed.");const j=zo(I);return s.postMessage(l?{n:p,t:l}:p,c,[j.port2]),Rs(j.port1,I)};function Zd(s,c,l){const p=new Ls,I=p.signal();return s=Xd({destination:window.parent,origin:c,Y:s,onMessage:j=>{const O=hr(j.data.content);Ct(O,dn)===2&&gr(p,I,{content:Ee(O,dr,2,dn),ka:j,messagePort:j.data.messagePort})}}),new ch(I,s,l)}async function Fs(s,c){var l=st,p=new Ke;c=we(p,9,Ye,c),s=await l(s,Xe(c));let I;return(I=Ee(hr(s.data.content),dr,2,dn))==null?void 0:Ee(I,cd,9,ln)}async function Qd(s,c){var l=st,p=new Ke;c=we(p,8,Ye,c),await l(s,Xe(c))}async function eh(s){var c=st,l=new Ke,p=new _d;l=we(l,11,Ye,p),await c(s,Xe(l))}async function th(s,c){var l=st,p=new Ke;c=we(p,14,Ye,c),await l(s,Xe(c))}async function nh(s,c){var l=st,p=new Ke;c=we(p,15,Ye,c),await l(s,Xe(c))}async function rh(s){await s.h()}async function st(s,c){(s=await s.channel.C(c))||fn(Lt,`Falsy response received from the message channel. ${JSON.stringify(s)}`),(c=s.data)||fn(Lt,`Data field in the response from the message channel is falsy. ${JSON.stringify(c)}`),(c=c.content)||fn(Lt,`Content field in the response from the message channel is falsy. ${JSON.stringify(c)}`);let l;try{l=hr(c)}catch(p){fn(Lt,`The ControlMessage can't be deserialized. ${JSON.stringify(c)}. ${JSON.stringify(p)}`)}if((c=Ee(l,dr,2,dn))||fn(Lt,`MeetToAddonMessage field on ControlMessage is falsy. ${JSON.stringify(c)}`),c=c==null?void 0:Ee(c,Ol,10,ln),(c==null?void 0:Pt(c,1))!==void 0)throw new me(ed(Pt(c,1)));return s}async function sh(s,c,l){var p=st,I=new Ke;c=we(I,1,Ye,c),p=await p(s,Xe(c)),s=p.data.messagePort;var j;return(p=(j=Ee(hr(p.data.content),dr,2,dn))==null?void 0:Ee(j,Mo,1,ln))!=null?j=p:(j=new Mo,j=Ae(j,1,At(0),0)),{channel:s?Jd(s,l):void 0,response:j}}async function fa(s){const c=yd(),{channel:l,response:p}=await sh(s,c,I=>Yd(I));if(!l)throw new me(td(p));return l}async function ih(s){var c=st,l=new Ke,p=new Cd;l=we(l,5,Ye,p),await c(s,Xe(l))}async function oh(s){var c=st,l=new Ke,p=new xd;l=we(l,6,Ye,p),await c(s,Xe(l))}async function la(s,c,l){var p=st,I=new Ke,j=new Id;c=Ae(j,1,At(c),0),l=Ae(c,2,Et(l),""),I=we(I,7,Ye,l),await p(s,Xe(I))}async function ah(s,c){var l=st,p=new Ke;c=we(p,16,Ye,c),await l(s,Xe(c))}class ch extends Tt{constructor(c,l,p){super(),this.U=c,this.channel=l,this.h=kl(async()=>{var I=this.channel,j=I.C,O=new Ke,re=new Ad;O=we(O,13,Ye,re),await j.call(I,Xe(O))}),c=Il(),Je(c,4),us(kt(c,1)),us(kt(c,2)),us(kt(c,3)),p=Td(new Ke,vd(wd(c),p)),this.channel.send(Xe(p)),Dn(this.U,async I=>{switch(Ct(I.content,ln)){case 16:await rh(this)}})}}let Ns;var uh=class{constructor(s){var c=Ns;this.h=s,this.g=c}delete(){throw Error("Not implemented.")}},fh=class extends ae{h(){return Ee(this,Bt,2,_n)}g(){return sn(this,Bt,2,_n)}j(){return Ee(this,$t,3,_n)}l(){return sn(this,$t,3,_n)}},_n=[2,3],lh=class extends ae{},dh=class extends ae{},hh=class extends ae{},gh=class extends ae{h(){return Ee(this,Bt,2,pn)}g(){return sn(this,Bt,2,pn)}j(){return Ee(this,$t,3,pn)}l(){return sn(this,$t,3,pn)}},pn=[2,3],da=[5,6],_h=class extends ae{},Vs=class extends ae{},zs=[1,2,3],ph=class extends Error{constructor(){super("Failed to create CoActivity: Connection refused - Meet refused to begin Live Sharing")}},yh=class{constructor(s){this.config=s}start(){return this.g!=null||(this.g=setInterval(()=>{this.config.ha()},this.config.da)),this}shutdown(){clearInterval(this.g)}};function Ws(){const s=new Map,c={set(l,p){return s.set(l,p),c},D:()=>s};return c}function mh(s){if(s.g()){s=s.h().m;var c=s[W],l=rn(s,c,1),p=sr(l,!0);if(p!=null&&p!==l&&Ne(s,c,1,p),s=p,c=s??se(),s=Uint8Array,U(K),l=c.g,l!=null&&!V(l))if(typeof l=="string"){te.test(l)&&(l=l.replace(te,$)),l=atob(l),p=new Uint8Array(l.length);for(let I=0;I<l.length;I++)p[I]=l.charCodeAt(I);l=p}else l=null;return c=l==null?l:c.g=l,{bytes:new s(c||0)}}}function bh(s,c){return c=ha(c),we(s,2,pn,c),s}function wh(s,c){return c=ha(c),we(s,2,_n,c),s}function ha(s){var c=new Bt;return Ae(c,1,sr(s.bytes,!1),se())}function vh(s){if(s.l()){s=s.j();var c,l,p=Je(s,1),I=(l=(c=bs(s,Co,2))==null?void 0:ko(c))!=null?l:0;l=s.m;let j=l[W];const O=rn(l,j,4);return c=O==null||typeof O=="number"?O:O==="NaN"||O==="Infinity"||O==="-Infinity"?Number(O):void 0,c!=null&&c!==O&&Ne(l,j,4,c),{mediaId:p,mediaPlayoutPosition:I,mediaPlayoutRate:cn(c,0),playbackState:Ih.get(Pt(s,3))}}}function Sh(s,c){return c=ga(c),we(s,3,pn,c),s}function xh(s,c){return c=ga(c),we(s,3,_n,c),s}const Ih=Ws().set(0,"INVALID").set(1,"BUFFERING").set(2,"PLAY").set(3,"PAUSE").set(4,"ENDED").D(),Ah=Ws().set("INVALID",0).set("BUFFERING",1).set("PLAY",2).set("PAUSE",3).set("ENDED",4).D();function ga(s){var c=new $t;c=Ae(c,1,Et(s.mediaId),"");var l=s.mediaPlayoutRate;if(l!=null&&typeof l!="number")throw Error(`Value of float/double field must be a number, found ${typeof l}: ${l}`);return c=Ae(c,4,l,0),l=new Co,l=Ae(l,1,fs(s.mediaPlayoutPosition),"0"),c=an(c,2,l),s=Ah.get(s.playbackState),Ae(c,3,At(s),0)}function Eh({activityTitle:s}){var c=new hh;return ps(c,4,Et(s))}function kh(s,c){var l=new dh;return c=Ae(l,1,At(c.u),0),we(s,6,da,c),s}function Ch(s){var c=new lh;return we(s,5,da,c),s}const Th=Ws().set("co-doing",1).set("co-watching",2).D();async function _a(s,c,l){var p=c.C,I=new Vs,j=new _h;j=Ae(j,1,Et(s.activityTitle),"");var O=Th.get(s.K);j=Ae(j,2,At(O),0),I=we(I,3,zs,j),p=await p.call(c,I,Kd);let re;if((re=cn(go(kt(p,1)),!1))!=null&&re)return new Oh(s,c,l,bs(p,$s,2));throw new ph}function pa(s,c){const l=s.config.N(c);l&&!s.config.M(s.g,l)&&(s.g=l,s.j=ko(c),s.v(s.g))}function Ft(s,c){const{state:l,fa:p,context:I}=c(s.g);s.g=l,s.notify(s.g,I,p)}class Oh{constructor(c,l,p,I){this.l=c,this.h=l,this.config=p,this.v=El(j=>void this.l.O(j)),Uh(this.h,j=>{const O=Ct(j,pr);switch(O){case 1:pa(this,Ee(j,$s,1,pr));break;case 2:case 0:console.warn(`IllegalMessage: ${O} - Unhandled message - Please raise a bug with the MeetJS team`)}}),this.B=new yh({da:1e3,ha:()=>{var j,O,re=(O=(j=this.l).ja)==null?void 0:O.call(j);if(this.g!==null){this.g={...this.g,...re},j=new Vs,O=this.config,re=O.W;var ne=new fh;ne=Ae(ne,1,fs(this.j),"0"),O=re.call(O,ne,this.g),j=we(j,1,zs,O),this.h.send(j)}}}).start(),this.g=null,this.j=0,I&&pa(this,I)}disconnect(){this.h.shutdown(),this.B.shutdown()}notify(c,l,p){var I=p?Eh(p):void 0;p=this.config;var j=p.X,O=new gh;O=Ae(O,1,fs(this.j),"0"),I=an(O,4,I),c=j.call(p,I,c),c=this.config.V(c,l),l=this.h,p=l.send,j=new Vs,c=we(j,2,zs,c),p.call(l,c)}}var Rh=class{constructor(s){this.g=s}broadcastStateUpdate(s){Ft(this.g,()=>({state:s,context:{}}))}disconnect(){this.g.disconnect()}};function Mh(s,c){return s==null||c==null?!1:s.bytes.length===c.bytes.length&&s.bytes.every((l,p)=>l===c.bytes[p])}var jh=class{constructor(s){this.g=s}notifySwitchedToMedia(s,c,l){Ft(this.g,()=>({state:{mediaId:c,mediaPlayoutRate:1,mediaPlayoutPosition:l,playbackState:"PLAY"},fa:{activityTitle:s},context:{u:1}}))}notifyPauseState(s,c){Ft(this.g,l=>{if(l==null)throw Error("Invalid before coWatchingState");return{state:{...l,playbackState:s?"PAUSE":"PLAY",mediaPlayoutPosition:c},context:{u:3}}})}notifySeekToTimestamp(s){Ft(this.g,c=>{if(c==null)throw Error("Invalid before coWatchingState");return{state:{...c,mediaPlayoutPosition:s},context:{u:2}}})}notifyPlayoutRate(s){Ft(this.g,c=>{if(c==null)throw Error("Invalid before coWatchingState");return{state:{...c,mediaPlayoutRate:s},context:{u:4}}})}notifyBuffering(s){Ft(this.g,c=>{if(c==null)throw Error("Invalid before coWatchingState");return{state:{...c,mediaPlayoutPosition:s,playbackState:"BUFFERING"},context:{u:3}}})}notifyReady(s){Ft(this.g,c=>{if(c==null)throw Error("Invalid before coWatchingState");return{state:{...c,mediaPlayoutPosition:s},context:{u:3}}})}disconnect(){this.g.disconnect()}};function Dh(s,c){if(s==null||c==null)return!1;const l=s.playbackState==="PLAY"?3*Math.max(s.mediaPlayoutRate,1):0,p=Math.abs(s.mediaPlayoutPosition-c.mediaPlayoutPosition);return s.mediaId===c.mediaId&&s.mediaPlayoutRate===c.mediaPlayoutRate&&p<=l&&s.playbackState===c.playbackState}function Uh(s,c){const l=Dn(s.signal,p=>{c(p)});s.o.push(l)}var ya=class{constructor(s,c){this.channel=s,this.signal=c,this.o=[]}send(s){this.channel.send(vs(s))}async C(s,c){return s=await this.channel.C(vs(s)),c(s.data)}shutdown(){this.o.forEach(s=>{this.signal.detach(s)})}};function Hh(s,c){var l=$h;const p=s.signal(),I=s.signal();return Dn(c,j=>{const O=l(j)?p:I;gr(s,O,j)},s),{ia:p,ga:I}}function Ph(s,c,l,p=I=>I){Dn(l,I=>{gr(s,c,p(I))},s)}async function Lh(s,c){if(c)return s=await _a({activityTitle:c.activityTitle,K:"co-watching",ja:()=>c.onCoWatchingStateQuery(),O:l=>{c.onCoWatchingStateChanged(l)}},s,{X:Sh,W:xh,V:kh,N:vh,M:Dh}),new jh(s)}async function Bh(s,c){if(c)return s=await _a({activityTitle:c.activityTitle,K:"co-doing",O:l=>{c.onCoDoingStateChanged(l)}},s,{X:bh,W:wh,V:Ch,N:mh,M:Mh}),new Rh(s)}async function ma(s){const c=new Ls,l=c.signal();s=await s,Ph(c,l,s.signal,j=>j.content);const{ia:p,ga:I}=Hh(c,l);return{Z:new ya(s.channel,p),aa:new ya(s.channel,I)}}function $h(s){e:switch(Ct(s,pr)){case 1:s=Ee(s,$s,1,pr);break e;default:throw Error("CA Message arrived with no known content message set")}return s.g()}async function Fh(s,c){if({Z:s}=await ma(fa(s.g)),c=await Bh(s,c),!c)throw Error("Failed to create co-doing session");return c}async function Nh(s,c){if({aa:s}=await ma(fa(s.g)),c=await Lh(s,c),!c)throw Error("Failed to create co-watching session");return c}var Vh=class extends Ts{async notifySidePanel(s){await la(this.context.g,1,s)}async unloadSidePanel(){await ih(this.context.g)}async loadSidePanel(){await oh(this.context.g)}},zh=class extends Ts{async setAddonStartingState(s){if(s===null)throw new me(xs("addonStartingState"));if(typeof s!="object")throw new me(_t("addonStartingState",typeof s,"object | undefined"));if(s.sidePanelUrl!==void 0&&typeof s.sidePanelUrl!="string")throw new me(_t("sidePanelUrl",typeof s.sidePanelUrl,"string | undefined"));if(s.additionalData!==void 0&&typeof s.additionalData!="string")throw new me(_t("additionalData",typeof s.additionalData,"string | undefined"));if(Object.keys(s).length!==+!!s.sidePanelUrl+ +!!s.additionalData)throw new me($l);if(Object.keys(s).length===0)throw new me(Bl);var c=[];c.push(Es(As(Is(1),s.sidePanelUrl),s.additionalData)),s=this.context.g;var l=new kd,p=l.setAddonStartingState,I=new Ed;c=Eo(I,c),await ah(s,p.call(l,c))}},Wh=class extends Ts{async notifyMainStage(s){await la(this.context.g,2,s)}},qh=class{constructor(s){s=s.cloudProjectNumber;const c=Os();if(c.cloudProjectNumber!==s)throw new me(Dl);const l=c.S,p=c.ba;let I;Ns=(I=Ns)!=null?I:Zd(p,l,s),this.g=new uh(c)}async createMainStageClient(){var s=this.g;if(s.h.frameType!==2)throw new me(Do);return await Promise.resolve(new Vh(s))}async createSidePanelClient(){var s=this.g;if(s.h.frameType!==1)throw new me(Rl);return await Promise.resolve(new Wh(s))}async createCoWatchingClient(s){return await Nh(this.g,s)}async createCoDoingClient(s){return await Fh(this.g,s)}async createRoomsStandaloneClient(){var s=this.g;if(s.h.frameType!==2)throw new me(Do);return await Promise.resolve(new zh(s))}};let ba=null;var wa={addon:{getFrameType:function(){e:{var s=Os().frameType;switch(s){case 2:s="MAIN_STAGE";break e;case 1:s="SIDE_PANEL";break e;default:throw Error(`Unknown frame type: ${s}`)}}return s},createAddonSession:async function(s){if(s===null)throw new me(xs("config"));if(typeof s!="object")throw new me(_t("config",typeof s,"object"));if(typeof s.cloudProjectNumber!="string")throw new me(_t("cloudProjectNumber",typeof s.cloudProjectNumber,"string"));if(ba&&Os().S!=="integration.test.google.com")throw new me(Jl);return ba=new qh(s)}}},Hn=["meet"],it=i;Hn[0]in it||typeof it.execScript>"u"||it.execScript("var "+Hn[0]);for(var Nt;Hn.length&&(Nt=Hn.shift());)Hn.length||wa===void 0?it[Nt]&&it[Nt]!==Object.prototype[Nt]?it=it[Nt]:it=it[Nt]={}:it[Nt]=wa}).apply(cl);const $m=cl.meet,Sc={enableMeets:"true".toLowerCase()==="true"},Fm="378533565670",Nm="https://fgrcl.github.io/parking-lot/SidePanel.html";async function Vm(){let t="",e=null;Sc.enableMeets&&(e=await(await $m.addon.createAddonSession({cloudProjectNumber:Fm})).createSidePanelClient(),t=(await e.getActivityStartingState()).additionalData);const n=new hp({storage:new Bm("parking-lot"),network:[new Cm,new Pm("wss://sync.automerge.org")]});let r;t??!1?r=await n.find(t):(r=n.create(),t=r.url,r.change(f=>f.list=[]),Sc.enableMeets&&e?.startActivity({sidePanelUrl:Nm,additionalData:t})),r.on("change",({doc:f})=>{o(f)});const[i,o]=Ic(r.doc());function a(f,d){r.change(_=>{_.list[f]=d})}function u(f){r.change(d=>{d.list.push(f)})}return[i,u,a]}const zm="_header_16xyx_1",Wm="_logo_16xyx_13",qm="_content_16xyx_18",Gm="_list_16xyx_28",Jm="_input_16xyx_36",Km="_itemContainer_16xyx_56",Ym="_checkbox_16xyx_62",Mt={header:zm,logo:Wm,content:qm,list:Gm,input:Jm,itemContainer:Km,checkbox:Ym},Xm="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%201024%201024'%20class='icon'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M876.191289%2095.505067H166.024533a65.968356%2065.968356%200%200%200-65.968355%2065.968355v710.166756a65.968356%2065.968356%200%200%200%2065.968355%2065.968355h710.166756a65.968356%2065.968356%200%200%200%2065.968355-65.968355V161.462044a65.956978%2065.956978%200%200%200-65.968355-65.956977z'%20fill='%23E6E6E6'%20/%3e%3cpath%20d='M187.676444%20183.113956h666.862934v666.885688H187.676444z'%20fill='%2347A7DD'%20/%3e%3cpath%20d='M714.888533%20183.113956L287.095467%20849.999644h-99.419023V712.931556l339.8656-529.8176zM854.528%20183.113956v85.583644L481.632711%20849.999644h-97.609955l427.804444-666.885688z'%20fill='%236AC7EF'%20/%3e%3cpath%20d='M534.345956%20267.935289H398.449778v497.231644h110.193778v-142.791111h25.7024c97.883022%200%20177.208889-79.36%20177.208888-177.220266%200-97.883022-79.337244-177.220267-177.208888-177.220267z%20m75.081955%20177.220267a80.452267%2080.452267%200%200%201-80.452267%2080.452266h-20.332088V364.691911h20.332088a80.463644%2080.463644%200%200%201%2080.452267%2080.463645z'%20fill='%23E6E6E6'%20/%3e%3cpath%20d='M873.801956%2079.644444H168.402489C121.969778%2079.644444%2084.195556%20117.418667%2084.195556%20163.851378v560.310044a15.860622%2015.860622%200%201%200%2031.721244%200V163.851378a52.565333%2052.565333%200%200%201%2052.485689-52.497067h705.399467a52.553956%2052.553956%200%200%201%2052.497066%2052.497067V869.262222a52.553956%2052.553956%200%200%201-52.497066%2052.485689H168.402489a52.542578%2052.542578%200%200%201-52.485689-52.485689v-90.339555c0-8.760889-7.099733-15.849244-15.860622-15.849245A15.837867%2015.837867%200%200%200%2084.195556%20778.911289v90.339555c0%2046.432711%2037.774222%2084.195556%2084.206933%2084.195556h705.399467c46.432711%200%2084.206933-37.762844%2084.206933-84.195556V163.851378C958.008889%20117.418667%20920.234667%2079.644444%20873.801956%2079.644444z'%20fill=''%20/%3e%3cpath%20d='M685.374578%20167.264711H187.665067c-8.760889%200-15.860622%207.099733-15.860623%2015.860622v666.874311c0%208.760889%207.099733%2015.860622%2015.860623%2015.860623h666.862933c8.760889%200%2015.872-7.099733%2015.872-15.860623V183.113956c0-8.760889-7.111111-15.860622-15.872-15.860623H740.158578a15.860622%2015.860622%200%201%200%200%2031.721245h98.531555v635.164444H203.525689V198.974578h481.860267a15.860622%2015.860622%200%201%200-0.011378-31.709867z'%20fill=''%20/%3e%3cpath%20d='M398.4384%20660.115911c-8.760889%200-15.860622%207.099733-15.860622%2015.860622v89.201778c0%208.760889%207.099733%2015.860622%2015.860622%2015.860622h110.205156c8.760889%200%2015.849244-7.099733%2015.849244-15.860622V638.225067h9.853156c106.450489%200%20193.080889-86.596267%20193.080888-193.069511%200-106.461867-86.619022-193.069511-193.080888-193.069512H398.4384c-8.760889%200-15.860622%207.099733-15.860622%2015.860623v353.257244a15.872%2015.872%200%201%200%2031.721244%200V283.795911h120.046934c88.962844%200%20161.359644%2072.385422%20161.359644%20161.359645s-72.385422%20161.359644-161.359644%20161.359644h-25.7024c-8.760889%200-15.860622%207.099733-15.860623%2015.860622v126.941867h-78.472533v-73.341156a15.872%2015.872%200%200%200-15.872-15.860622z'%20fill=''%20/%3e%3cpath%20d='M508.643556%20541.468444h20.332088c53.100089%200%2096.324267-43.201422%2096.324267-96.312888%200-53.111467-43.224178-96.312889-96.324267-96.312889h-20.332088c-8.760889%200-15.860622%207.099733-15.860623%2015.860622v160.915911c0%208.749511%207.099733%2015.849244%2015.860623%2015.849244z%20m15.849244-160.915911h4.482844c35.623822%200%2064.603022%2028.9792%2064.603023%2064.603023s-28.9792%2064.603022-64.603023%2064.603022h-4.482844V380.552533z'%20fill=''%20/%3e%3c/svg%3e";var Zm=Bi("<div><header><img alt=logo><h1>Parking Lot</h1><div></div></header><div><div>"),Qm=Bi('<input placeholder="Enter a parking lot item"type=text>'),eb=Bi("<div><input type=checkbox><input type=text>");const[tb,nb,rb]=await Vm(),sb=()=>{const t=()=>tb().list;return(()=>{var e=Zm(),n=e.firstChild,r=n.firstChild,i=n.nextSibling,o=i.firstChild;return a0(r,"src",Xm),mi(o,Cr(s0,{get each(){return t()},children:(a,u)=>Cr(ob,{item:a,index:u})})),mi(i,Cr(ib,{}),null),Xt(a=>{var u=Mt.header,f=Mt.logo,d=Mt.content,_=Mt.list;return u!==a.e&&Rt(n,a.e=u),f!==a.t&&Rt(r,a.t=f),d!==a.a&&Rt(i,a.a=d),_!==a.o&&Rt(o,a.o=_),a},{e:void 0,t:void 0,a:void 0,o:void 0}),e})()},ib=()=>{let t;function e(n){n.code==="Enter"&&t?.value&&(nb(t.value),t.value="")}return(()=>{var n=Qm(),r=t;return typeof r=="function"?jc(r,n):t=n,Mc(n,"keydown",e),Xt(()=>Rt(n,Mt.input)),n})()},ob=t=>{let e;function n(r){e&&rb(r,e.value)}return(()=>{var r=eb(),i=r.firstChild,o=i.nextSibling;Mc(o,"beforeinput",()=>n(t.index));var a=e;return typeof a=="function"?jc(a,o):e=o,Xt(u=>{var f=Mt.itemContainer,d=Mt.checkbox,_=Mt.input;return f!==u.e&&Rt(r,u.e=f),d!==u.t&&Rt(i,u.t=d),_!==u.a&&Rt(o,u.a=_),u},{e:void 0,t:void 0,a:void 0}),Xt(()=>o.value=t.item()),r})()},ab=document.getElementById("root");o0(()=>Cr(sb,{}),ab);
